Drupal.locale = { 'pluralFormula': function ($n) { return Number(($n!=1)); }, 'strings': {"":{"Hide":"\uc228\uae30\uae30","hermes_global.select":"\uc120\ud0dd\ud558\uae30","hermes_global.telephone":"\uc804\ud654","hermes_global.month":"\uc6d4","hermes_global.day":"\uc77c","hermes_global.year":"\ub144","hermes_commerce.find":"\ucc3e\uae30","hermes-global-translations.total":"\ucd1d\uc561","hermes-global-translations.ref":"\uc81c\ud488 \ubc88\ud638","hermes-global-translations.welcome.user":"{{name}} \ub2d8, \ud658\uc601\ud569\ub2c8\ub2e4!","hermes-global-translations.welcome-back":"{{lastname}} {{firstname}}\ub2d8, \uc548\ub155\ud558\uc138\uc694!","hermes-global-translations.welcome-back.byline":"\ub2e4\uc2dc \ubc29\ubb38\ud574 \uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4.","hermes-global-translations.see-you-soon":"{{name}} \ub2d8, \uace7 \ub2e4\uc2dc \ub9cc\ub098\uae38 \uae30\ub300\ud558\uaca0\uc2b5\ub2c8\ub2e4!","hermes-global-translations.view-cart":"\uc7a5\ubc14\uad6c\ub2c8 \ubcf4\uae30","hermes_checkout.checkout.cart-items.qty.label":"\uc218\ub7c9","hermes_checkout.checkout.summary.number_of_items.label":"\uc0c1\ud488 \uc218","hermes_checkout.tray.exchange.summary.number_of_items":"\ubc18\ud488 \uc0c1\ud488 \uc218\ub7c9","hermes_checkout.tray.exchange.summary.taxes":"\uc138\uae08","hermes_checkout.tray.exchange.summary.shipping":"\ubc30\uc1a1","hermes_checkout.tray.cart.items.ref":"\uc81c\ud488 \ubc88\ud638","hermes_checkout.tray.order_list.items.qty":"\uc218\ub7c9","hermes_checkout.tray.order_list.items.select.Select":"\ubc18\ud488 \uc0ac\uc720","hermes_checkout.tray.exchange.summary.ordernr":"\uc8fc\ubb38 \ubc88\ud638","hermes_checkout.tray.return_details.heading.returnedItems":"\ubc18\ud488\ud55c \uc81c\ud488","hermes_checkout.tray.return_details.heading.pickupAddress":"\ud53d\uc5c5 \uc8fc\uc18c","hermes_checkout.modules.filters.clear.label":"\uc9c0\uc6b0\uae30","hermes_checkout.tray.order_list.cta.track_this_order":"\uc8fc\ubb38 \uc870\ud68c","hermes_checkout.tray.order_list.cta.exchange_this_order":"\uad50\ud658 \uc694\uccad","hermes_checkout.tray.order_list.cta.refund_this_order":"\ud658\ubd88 \uc694\uccad","hermes_checkout.user.profile.address.edit.label":"\uc218\uc815\ud558\uae30","hermes_checkout.user.profile.name.label":"\uc774\ub984","hermes_checkout.user.profile.email.label":"\uc774\uba54\uc77c","hermes_checkout.user.profile.password.label":"\ube44\ubc00\ubc88\ud638","hermes_checkout.user.profile.DOB.label":"\uc0dd\ub144\uc6d4\uc77c","hermes_checkout.user.profile.billingaddress.label":"\uccad\uad6c\uc9c0 \uc8fc\uc18c","hermes_checkout.user.profile.telephone.label":"\uc804\ud654","node--hermes-product-display-default.less-details":"\uc811\uae30","hermes-media-gallery-media-asset.view-more":"\ub354 \ubcf4\uae30","page--hermes-global--find-store.use-my-current-location":"\ub098\uc758 \ud604\uc7ac \uc704\uce58 \uc0ac\uc6a9\ud558\uae30","hermes_product.total-for-selection":"\uc120\ud0dd \uc81c\ud488 \ucd1d\uc561","hermes_checkout.checkout.cart.color.label":"\uceec\ub7ec","hermes_checkout.checkout.cart.size.label":"\ud06c\uae30:","hermes-global-translations.order-number":"\uc8fc\ubb38 \ubc88\ud638","hermes_checkout.tray.order_list.cta.return_details":"\ubc18\ud488 \uc0c1\uc138 \uc815\ubcf4","hermes_checkout.tray.order_list.cta.exchange_details":"\uad50\ud658 \uc0c1\uc138 \uc815\ubcf4","hermes-account--profile.remove":"\uc0ad\uc81c\ud558\uae30","hermes_checkout.tray.return_details.heading.returnNumber":"\ud658\ubd88 \ubc88\ud638","form-hermes-checkout-payment.order-summary":"\uc8fc\ubb38 \ub0b4\uc5ed","hermes-search-result.button-label":"\uc801\uc6a9\ud558\uae30","form--hermes-checkout--payment.3ds-reassurance.indroduction":"3D \ubcf4\uc548 \uc2dc\uc2a4\ud15c\uc744 \uc774\uc6a9\ud574 \uacb0\uc81c\ub97c \ud655\uc778\ud558\uace0 \ubcf4\ud638\ud569\ub2c8\ub2e4.","form--hermes-checkout--payment.3ds-reassurance.more-link-label":"\uc815\ubcf4 \ub354 \ubcf4\uae30","form--hermes-checkout--payment.3ds-reassurance.details":"3D \ubcf4\uc548 \uc2dc\uc2a4\ud15c\uc744 \uc774\uc6a9\ud574 \uacb0\uc81c\ub97c \uc778\uc99d\ud558\uace0 \ubcf4\ud638\ud569\ub2c8\ub2e4. \ud574\ub2f9 \ubc29\ubc95\uc740 \\\u0022Verified by Visa\u00ae\\\u0022, \\\u0022MasterCard\u00ae SecureCode\\\u0022 \ub610\ub294 \\\u0022American Express SafeKey\u00ae\\\u0022\uc73c\ub85c\ub3c4 \uc54c\ub824\uc838 \uc788\uc2b5\ub2c8\ub2e4. \uacb0\uc81c\ub97c \uc9c4\ud589\ud558\ub294 \ub3d9\uc548 \uc740\ud589\uc774 \uc778\ud130\ub137 \uc0ac\uc6a9\uc790\uc758 \uac1c\uc778 \uc815\ubcf4\ub97c \uc694\uccad\ud558\uace0 \uc2e0\uc6a9\uce74\ub4dc \uc18c\uc9c0\uc790\uc758 \uc2e0\ubd84\uc744 \ud655\uc778\ud55c \ud6c4 \uac70\ub798\ub97c \uc2b9\uc778\ud569\ub2c8\ub2e4.\u003Cbr\u003E3D \ubcf4\uc548 \ucf54\ub4dc\ub97c \uc785\ub825\ud558\uace0 \uc740\ud589\uc5d0\uc11c \uc774\ub97c \uc2b9\uc778\ud558\uba74 \ubaa8\ub4e0 \uc8fc\ubb38 \uc808\ucc28\uac00 \uc644\ub8cc\ub429\ub2c8\ub2e4. \uadf8\ub2e4\uc74c \uc8fc\ubb38 \ud655\uc778 \uc774\uba54\uc77c\uc774 \uc804\uc1a1\ub429\ub2c8\ub2e4.\u003Cbr\u003E\uac01 \uc740\ud589\ub9c8\ub2e4 \uace0\uc720\ud55c 3D \ubcf4\uc548 \uc778\uc99d\uc744 \uc694\uad6c\ud569\ub2c8\ub2e4. 3D \ubcf4\uc548 \ucf54\ub4dc\uc5d0 \uad00\ud574 \ubb38\uc758 \uc0ac\ud56d\uc774 \uc788\uc73c\uc2dc\uba74 \uc740\ud589\uc73c\ub85c \uc9c1\uc811 \ubb38\uc758\ud574 \uc8fc\uc138\uc694.","hermes-checkout-delivery-form.shipping-message":"\uc8fc\ubb38\ud558\uc2e0 \uc0c1\ud488 \uac00\uc6b4\ub370 \uc77c\ubd80 \uc0c1\ud488\uc758 \ubc30\uc1a1\uc774 \uc9c0\uc5f0\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc7a5\ubc14\uad6c\ub2c8\uc5d0\uc11c \ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.","hermes-checkout-delivery-form.see-cart":"*","hermes.checkout.cart.bag_tray.item.delete.label":"{{name}} \uc0ad\uc81c\ud558\uae30","hermes_checkout.tray.order_list.items.return.linked_product":"\uc138\ud2b8 \uc0c1\ud488\uc758 \uc77c\ubd80\ub9cc \ubc18\ud488\ud560 \uc218\ub294 \uc5c6\uc2b5\ub2c8\ub2e4. \uc138\ud2b8\uc5d0 \ud3ec\ud568\ub41c \ub2e4\ub978 \uc0c1\ud488\uc774 \uc790\ub3d9\uc73c\ub85c \uc120\ud0dd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","hermes.store_locator.see_more":"\ub354 \ubcf4\uae30","hermes.accessibility.close_tray":"\ub2eb\uae30","hermes_global.personal_address":"\uac1c\uc778 \uc8fc\uc18c","hermes.product.look.checkbox.add.product":"\uc120\ud0dd\ud55c \uc81c\ud488 \ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00\ud558\uae30","hermes.checkout.cart.delete_item":"\uc218\ub7c9 \uc904\uc774\uae30","hermes.checkout.quantity":"\uc218\ub7c9","hermes.checkout.cart.add_item":"\uc218\ub7c9 \ub298\ub9ac\uae30","page--hermes-global--find-store.reset-search-field":"\uac80\uc0c9\ucc3d\uc5d0 \uc785\ub825\ud55c \ubb38\uad6c\ub97c \uc0ad\uc81c\ud569\ub2c8\ub2e4.","hermes.commerce.product_locator.title":"\ub9e4\uc7a5\uc5d0\uc11c \ucc3e\uae30","hermes.commerce.product_locator.color.label":"\uceec\ub7ec","hermes.commerce.product_locator.size.label":"\uc0ac\uc774\uc988","hermes.commerce.product_locator.product_information.label":"\uc81c\ud488 \uc815\ubcf4","hermes.commerce.product_locator.search.placeholder":"\uc8fc\uc18c, \uc2dc, \uc6b0\ud3b8\ubc88\ud638...","page-hermes-product-locator-more-details-open-toggle":"\uc0c1\uc138 \uc815\ubcf4 \ub354 \ubcf4\uae30","hermes.payment_methods.label":"\uacb0\uc81c \ubc29\ubc95","hermes.checkout.payment.accessibility.secure_system":"3D \ubcf4\uc548 \uc2dc\uc2a4\ud15c","page-hermes-product-locator-modify-button":"\ubcc0\uacbd\ud558\uae30","hermes.store_locator.map_view_of_stores_title":"\ub9e4\uc7a5 \uc9c0\ub3c4 \ubcf4\uae30","page-hermes-product-locator-details-distance":"\uac70\ub9ac","page-hermes-product-locator-details-is-limited-availability":"\uc7ac\uace0\uac00 \uc5bc\ub9c8 \ub0a8\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.","page-hermes-product-locator-details-is-available":"\ub9e4\uc7a5\uc5d0\uc11c \uad6c\ub9e4 \uac00\ub2a5","page-hermes-product-locator-is-limited-msg-toggle":"\ud574\ub2f9 \uc81c\ud488\uc758 \uad6c\ub9e4 \uac00\ub2a5 \uc5ec\ubd80\ub294 \ubcf4\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub354 \uc790\uc138\ud55c \uc815\ubcf4\uac00 \ud544\uc694\ud558\uc2dc\uba74 \ubb38\uc758\ud574 \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.","page-hermes-product-locator-details-phone":"\uc804\ud654","page-hermes-product-locator-details-open-new-window":"\uc0c8 \ucc3d","page-hermes-product-locator-no-store-close-msg":"\uadfc\ucc98\uc5d0 \uc704\uce58\ud55c \ub9e4\uc7a5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uac00\uc7a5 \uac00\uae4c\uc6b4 \ub9e4\uc7a5\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.","hermes.store_locator.accessibility.see_more":"\ub9e4\uc7a5 \ub354 \ubcf4\uae30","hermes.product_locator.title-accessibility.find-stores":"\ub9e4\uc7a5\ucc3e\uae30","hermes.store_locator.list_view_of_stores_title":"\ub9e4\uc7a5 \ubaa9\ub85d \ubcf4\uae30","hermes_features_commerce_products.available-top-size":"\uc0c1\uc758 \uc0ac\uc774\uc988","hermes_features_commerce_products.available-bottom-size":"\ud558\uc758 \uc0ac\uc774\uc988","hermes_features_commerce_products.current_available-top-size":"\uc2e4\uc81c \uc0c1\uc758 \uc0ac\uc774\uc988","hermes_features_commerce_products.current_available-bottom-size":"\uc2e4\uc81c \ud558\uc758 \uc0ac\uc774\uc988","hermes.accessibility.volume":"\uc6a9\ub7c9:","hermes.accessibility.image-zoom":"\uc774\ubbf8\uc9c0 \ud655\ub300\/\ucd95\uc18c","hermes.accessibility.page-product.color":"\uceec\ub7ec","hermes.accessibility.page-product.size":"\uc0ac\uc774\uc988","hermes.accessibility.page-product.change":"\ubcc0\uacbd\ud558\uae30","page--hermes-global--find-store.value-label":"\ub9e4\uc7a5\ucc3e\uae30, \uad6c\uae00 \uc790\ub3d9 \uc644\uc131","hermes_checkout.tray.exchange_return.label_reason":"\uc774\uc720 *\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.","hermes_checkout.user.profile.civility.sama":"\u69d8","hermes_features_commerce_products.change_available-top-size":"\uc0c1\uc758 \uc0ac\uc774\uc988 \ubcc0\uacbd\ud558\uae30","hermes_features_commerce_products.change_available-bottom-size":"\ud558\uc758 \uc0ac\uc774\uc988 \ubcc0\uacbd\ud558\uae30","hermes-global-translations.your-account-has-been-created-info-banner":"{{name}} \ub2d8, Hermes.com\uc5d0 \uc624\uc2e0 \uac83\uc744 \ud658\uc601\ud569\ub2c8\ub2e4! \uace0\uac1d\ub2d8\uc758 \uacc4\uc815\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4!","hermes_global.close-info-banner-accessibility":"\uc54c\ub9bc\ucc3d \ub2eb\uae30","hermes-global-translations.color":"\uceec\ub7ec","page-hermes-product-locator-accessibility-find-in-store-hours":"\uc601\uc5c5 \uc2dc\uc791\/\uc885\ub8cc \uc2dc\uac04","hermes_notification.cart.add":"\ud574\ub2f9 \uc0c1\ud488\uc774 \uc7a5\ubc14\uad6c\ub2c8\uc5d0 \ub2f4\uacbc\uc2b5\ub2c8\ub2e4.","hermes_notification.cart.standard-delivery":"\ubb34\ub8cc \uc77c\ubc18 \ubc30\uc1a1","page-hermes-product-locator-e-reservation-booking-button-text":"\ub9e4\uc7a5\uc5d0 \uc608\uc57d\ud558\uae30","hermes-personalization-message":"\uba54\uc2dc\uc9c0","hermes-personalization-font":"\ud3f0\ud2b8","hermes-personalization-fontSize":"\ud3f0\ud2b8 \uc0ac\uc774\uc988","hermes-personalization-fontColor":"\ud3f0\ud2b8 \uceec\ub7ec","hermes-global-translations.warning":"\uc8fc\uc758","hermes.accessibility.page-product.select-size":"\uc0ac\uc774\uc988\ub97c \uc120\ud0dd\ud558\uc138\uc694.","hermes.checkout.summary":"\ub0b4\uc5ed","hermes_checkout.checkout.summary.no-return-possible":"\uac1c\uc778 \ub9de\ucda4 \uc11c\ube44\uc2a4 \uc81c\ud488\uc740 \ubc18\ud488\uc774\ub098 \uad50\ud658\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4.","hermes.personalization.your-personalization":"\ub098\uc758 \ub9de\ucda4 \uc11c\ube44\uc2a4","hermes.ereservation.tray.request_confirm.product.title":"\uc81c\ud488 \uc815\ubcf4","hermes.ereservation.tray.request_confirm.customer.title":"\uace0\uac1d \uc815\ubcf4","hermes.ereservation.tray.request_confirm.store.title":"\ub9e4\uc7a5 \uc815\ubcf4","hermes.ereservation.tray.request_confirm.confirm.text":"\uc628\ub77c\uc778 \uc608\uc57d \uc694\uccad\uc744 \uc644\ub8cc\ud569\ub2c8\ub2e4.","hermes.ereservation.tray.request_confirm.taxes.text":"\uac00\uaca9\uc5d0\ub294 \uc138\uae08\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","hermes_checkout.tray.exchange.summary.adjustement_negative":"\ubc18\ud488","hermes-personalization-position":"\uc2a4\ud0ec\ud504\uc874","hermes-personalization-exterior-material":"\uc678\ubd80 \uac00\uc8fd","hermes-personalization-exterior-color":"\uc678\ubd80 \uc0c9\uc0c1","hermes-personalization-lining-color":"\ub0b4\ubd80 \uc0c9\uc0c1","hermes-personalization-marking":"\uac1c\uc778 \ub9de\ucda4 \uac01\uc778 \uc11c\ube44\uc2a4","hermes-personalization-size":"\ud06c\uae30:","hermes-personalization-font-style":"\ud3f0\ud2b8 \uc2a4\ud0c0\uc77c","hermes-personalization-color":"\uceec\ub7ec","hermes-personalization-leather":"\uac00\uc8fd","hermes-personalization-typography":"\ubb38\uc790 \uac01\uc778 \uc11c\ube44\uc2a4","hermes-personalization-bk-coloris1":"\uceec\ub7ec1","hermes-personalization-bk-coloris2":"\uceec\ub7ec2","hermes-account--profile-info-page.no-card-information":"\uce74\ub4dc \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.","hermes-account--profile.expired":"\ub9cc\ub8cc\ub428"}} };
;/*})'"*/
;/*})'"*/
(function ($) {

Drupal.behaviors.textarea = {
  attach: function (context, settings) {
    $('.form-textarea-wrapper.resizable', context).once('textarea', function () {
      var staticOffset = null;
      var textarea = $(this).addClass('resizable-textarea').find('textarea');
      var grippie = $('<div class="grippie"></div>').mousedown(startDrag);

      grippie.insertAfter(textarea);

      function startDrag(e) {
        staticOffset = textarea.height() - e.pageY;
        textarea.css('opacity', 0.25);
        $(document).mousemove(performDrag).mouseup(endDrag);
        return false;
      }

      function performDrag(e) {
        textarea.height(Math.max(32, staticOffset + e.pageY) + 'px');
        return false;
      }

      function endDrag(e) {
        $(document).unbind('mousemove', performDrag).unbind('mouseup', endDrag);
        textarea.css('opacity', 1);
      }
    });
  }
};

})(jQuery);

;/*})'"*/
;/*})'"*/
this["APP"] = this["APP"] || {};
this["APP"]["templates"] = this["APP"]["templates"] || {};
this["APP"]["templates"]["backToTop"] = '<button class="back-to-top-desktop grid-list-top-button-wrapper"> <span class="sr-only">{{back_to_top}}</span><svg nopin="nopin" class="icon-back-top-desktop" aria-hidden="true" focusable="false"><use xlink:href="#back"/></svg></button> <button class="back-to-top-mobile grid-list-top-button-wrapper"> <span class="sr-only">{{back_to_top}}</span><svg nopin="nopin" class="icon-back-top-mobile" aria-hidden="true" focusable="false"><use xlink:href="#back-mobile"/></svg></button>';
this["APP"]["templates"]["cartItems"] = '<ul class="cart-products"> {{#items}}<li id="{{sku_trim}}"><div class="cart-product-container"> <button type="button" class="delete" aria-label="' + Drupal.t('hermes.checkout.cart.bag_tray.item.delete.label') + '"> <span>{{remove_from_cart}}</span><svg aria-hidden="true" class="icon icon-close" focusable="false"><use xlink:href="#close"></use></svg></button><div class="cart-product-infos"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="cart-product-name">{{/is_perso_leather}} <img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"> {{#name}}<p class="cart-product-name-label"> {{name}} <span class="sr-only">,</span></p> {{/name}} {{^is_perso_leather}} {{#set_items}} {{#display_single_line}}<div class="cart-product-details cart-set-item"> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}}</div> {{/display_single_line}} {{^display_single_line}}<div class="cart-product-details cart-set-item"> {{name}} <span class="sr-only">,</span> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></div> {{/display_single_line}} {{/set_items}} {{^set_items}}<div class="cart-product-details"> {{#color}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}} <span class="sr-only">,</span></p> {{/color}} {{#size}}<p> ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}} <span class="sr-only">,</span></p> {{/size}} {{#metal_titration1}}<p> {{metal_titration1}} <span class="sr-only">,</span></p> {{/metal_titration1}} {{#metal_titration2}}<p> {{metal_titration2}} <span class="sr-only">,</span></p> {{/metal_titration2}} {{#metal_titration3}}<p> {{metal_titration3}} <span class="sr-only">,</span></p> {{/metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></div> {{/set_items}} {{#display_single_line}} {{#display_single_line_sku}}<p class="cart-product-details"> <span>{{sku_reference}}: {{display_single_line_sku}}</span></p> {{/display_single_line_sku}} {{/display_single_line}} {{/is_perso_leather}} {{#dku}} {{#is_perso_beltkit}} {{#buckle_title}}<div class="cart-product-details"><p>{{buckle_title}}</p> <span class="sr-only">,</span><p> ' + Drupal.t('hermes-personalization-color') + ': {{buckle_color}} <span class="sr-only">,</span></p> <span>{{sku_reference}}: {{buckle_sku}}</span> <span class="sr-only">,</span></div></br> {{/buckle_title}} {{/is_perso_beltkit}} {{^is_perso_leather}}<p class="cart-product-name-label cart-personalized-product-name-label"> ' + Drupal.t('hermes.personalization.your-personalization') + ' <span class="sr-only">,</span></p> {{/is_perso_leather}}<div class="cart-product-details"> {{#buckle_title}}<p> {{strap_title}} <span class="sr-only">,</span></p> {{/buckle_title}} {{#options}} {{#perso_info}} {{#personalization_info_properties}} {{#exterior_material}} {{#lining_material}} {{#is_perso_smlg}}<p> ' + Drupal.t('hermes-personalization-leather') + ' : {{exterior_material}} / {{lining_material}} <span class="sr-only">,</span></p> {{/is_perso_smlg}} {{/lining_material}} {{/exterior_material}} {{#exterior_color}}<p> {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris1') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-exterior-color') + ' {{/is_perso_smlg}} : {{exterior_color}} <span class="sr-only">,</span></p> {{/exterior_color}} {{#lining_color}}<p> {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris2') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-lining-color') + ' {{/is_perso_smlg}} : {{lining_color}} <span class="sr-only">,</span></p> {{/lining_color}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-marking') + ': <span class="perso-silk-marking {{font_class}}">{{initials}}</span> <span class="sr-only">,</span></p> {{#is_perso_smlg}} {{#position}}<p> ' + Drupal.t('hermes-personalization-position') + ': {{position}} <span class="sr-only">,</span></p> {{/position}} {{/is_perso_smlg}} {{#font}}<p> ' + Drupal.t('hermes-personalization-typography') + ': {{font}} <span class="sr-only">,</span></p> {{/font}} {{#is_perso_smlg}} {{#font_size}}<p> ' + Drupal.t('hermes-personalization-fontSize') + ': {{font_size}} <span class="sr-only">,</span></p> {{/font_size}} {{/is_perso_smlg}} {{#style}}<p> ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}} <span class="sr-only">,</span></p> {{/style}} {{/initials}} {{#strap_size}}<p> ' + Drupal.t('hermes-personalization-size') + ': {{strap_size}} <span class="sr-only">,</span></p> {{/strap_size}} {{/personalization_info_properties}} {{#strap_sku}} <span>{{sku_reference}}: {{strap_sku}}</span> <span class="sr-only">,</span> {{/strap_sku}} {{/perso_info}} {{/options}}</div> {{/dku}} {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p>{{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p>{{/shipping_information}}</div><div class="cart-product-quantity-price"> <span class="cart-product-quantity {{#dku}}cart-display-none{{/dku}}">{{^dku}} <button type="button" data-modifier="-1" class="product-quantity-minus product-quantity-update" aria-label="' + Drupal.t('hermes.checkout.cart.delete_item') + '" aria-describedby="qty-{{sku_trim}}">-</button> {{/dku}}<p id="qty-{{sku_trim}}" aria-atomic="true"> <span id="product-quantity" data-max="{{max_sale_qty}}" data-step="{{qty_increments}}" data-sku="{{sku}}" data-image="{{image}}&fmt=jpg&qlt=60" aria-atomic="true">{{qty}}</span> <span class="sr-only" aria-atomic="true">items</span></p> {{^dku}} <button type="button" data-modifier="1" class="product-quantity-update {{#max_reached}}disabled{{/max_reached}}" aria-label="' + Drupal.t('hermes.checkout.cart.add_item') + '" aria-describedby="qty-{{sku_trim}}">+</button> {{/dku}}</span><p class="cart-product-price {{#dku}}cart-product-price-personalize-product{{/dku}}">{{final_price}}</p></div></div><p class="sr-only"> ' + Drupal.t('hermes-global-translations.warning') + '</p><p class="cart-product-excluded-material"></p></li> {{/items}}</ul>';
this["APP"]["templates"]["cartSummary"] = '{{#total}}<div class="order-details cart-details"><ul class="order-products"> {{#items}}<li class="order-product-row"><div class="description-col"> <a href="/{{locale}}{{url}}"><img nopin="nopin" src="{{image}}&$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt="" class="order-product-media miniature"><div class="order-product-infos"> <span class="order-product-name">{{name}}</span> {{#set_items}} {{#display_single_line}}<p class="order-product-details order-set-item"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}}</p> {{/display_single_line}} {{^display_single_line}}<p class="order-product-details order-set-item"> {{name}}<br> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/display_single_line}} {{/set_items}} {{^set_items}}<p class="order-product-details"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p><p id="product-quantity-summary" class="input-disable" data-max="{{max_sale_qty}}" data-step="{{qty_increments}}" data-sku="{{sku}}" data-image="{{image}}&fmt=jpg&qlt=60"> ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</p><p>{{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}}</p> {{/set_items}} {{#display_single_line}} {{#display_single_line_sku}}<p class="cart-product-details"> <span>{{sku_reference}}: {{display_single_line_sku}}</span></p> {{/display_single_line_sku}} {{/display_single_line}}</div><div class="amount-col"><p class="cart-product-price">{{final_price}}</p></div></a> {{#several_quantities}} <a class="miniature additional" href="/{{locale}}{{url}}" aria-hidden="true" tabindex="-1"><img nopin="nopin" src="{{image}}&$product_item_grid$&resMode=&wid=100&hei=100&qlt=80" alt="" class="order-product-media"></a> {{/several_quantities}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p>{{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p>{{/shipping_information}}</div></li> {{/items}}</ul> {{#more_products_number}}<div class="additional-products-number">{{more_products_number}}</div>{{/more_products_number}}<div class="total-wrapper"><div class="separator-border-facturette"></div><div class="subtotal-wrapper"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart titre-taxe-cart">{{subtotal_label}}</h3><p class="cart-details-value">{{subtotal}}</p></div> {{#is_personalized}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart"> {{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount_product_page}}</p></div><p id="cart-details-help" class="cart-shipping-method cart-details-help"> {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}</p><p>' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p></div> {{/is_personalized}} {{^is_personalized}} {{^is_refund_exchange_request}} {{#shipping_method_label}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart"> {{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount_product_page}}</p></div> {{#checkout}}<p id="cart-details-help" class="cart-shipping-method cart-details-help"> {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}</p><p class="cart-web-to-shop-name"> {{#web_shop_name}}{{web_shop_name}}{{/web_shop_name}}{{^web_shop_name}} {{/web_shop_name}}</p> {{/checkout}} {{^checkout}}<p class="cart-details-help additionnal-text">{{shipping_method_label}}</p><p class="cart-details-help additionnal-text">{{express_options_label}}</p> {{/checkout}}</div> {{/shipping_method_label}} {{^shipping_method_label}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart">{{no_shipping_method}}</h3><p class="cart-details-value">--</p></div><p class="cart-details-help additionnal-text">{{no_shipping_method_explained}}</p></div> {{/shipping_method_label}} {{/is_refund_exchange_request}} {{#is_refund_exchange_request}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart">' + Drupal.t('hermes_checkout.checkout.summary.number_of_items.label') + '</h3><p class="cart-details-value">--</p></div><p class="cart-details-help">' + Drupal.t('hermes_checkout.checkout.summary.number_of_items.help') + '</p></div> {{/is_refund_exchange_request}} {{/is_personalized}} {{#tax_amount}} {{#show_tax}}<div class="container-cart-separator"><div class="container-cart-checkout"><h3 class="cart-details-label titre-checkout-cart titre-taxe-cart">{{taxes_label}}</h3><p class="cart-details-value">{{#hasTax}}{{tax_amount}}{{/hasTax}}{{^hasTax}}--{{/hasTax}}</p></div> {{^hasTax}}<p class="cart-details-help taxe-description-cart">{{calculated_taxes_label}}</p> {{/hasTax}}</div> {{/show_tax}} {{/tax_amount}}</div><div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label">{{total_label}}{{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value">{{total}}</p></div></div></div> {{#show_message}}<p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p> {{/show_message}} {{/total}} {{^hide_payment_options}}<section><h3 id="payment-methods-info" class="sr-only">' + Drupal.t('hermes.payment_methods.label') + '</h3><ul aria-labelledby="payment-methods-info" class="cart-details-logo clearfix"> {{#cards}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/{{data}}@2x.png" alt="{{data_label.name}}"></li> {{/cards}} {{#france_only}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/cb@2x.png" alt="Cb"></li> {{/france_only}} {{#payment_security}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/3D-secure@2x.png" alt="3D Secure"></li> {{/payment_security}} {{#alipay_payment}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/alipay_payment.jpg" alt=""></li> {{/alipay_payment}} {{#wechatpay}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/wechat-payment.png"></li> {{/wechatpay}} {{#hsbc_cup}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/CUP@2x.png"></li> {{/hsbc_cup}}</ul></section> {{/hide_payment_options}}';
this["APP"]["templates"]["categories"] = '{{#categories}}<li> {{^subcategories.length}} <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a> {{/subcategories.length}} {{#subcategories.length}} <span class="subcat-trigger filter-cat-subcat{{#selected}} current-cat{{/selected}}" data-category="{{value}}">{{name}} {{#total}}({{total}}){{/total}}</span><ul class="filter-cat-subcats-n2 subcat-target {{^selected}} collapsed{{/selected}}"> {{#subcategories}}<li> {{^subsubcategories.length}} <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a> {{/subsubcategories.length}} {{#subsubcategories.length}} <span class="subcat-trigger filter-cat-subcat{{#selected}} current-cat{{/selected}}" data-category="{{value}}">{{name}} {{#total}}({{total}}){{/total}}</span><ul class="filter-cat-subcats-n2 subcat-target {{^selected}} collapsed{{/selected}}"> {{#subsubcategories}}<li> <a class="filter-cat-subcat" data-category="{{value}}" data-categoryurl="{{urlParams}}"><span class="filter-label"><span class="filter-label-name">{{name}} {{#total}}({{total}}){{/total}}</span></span></a></li> {{/subsubcategories}}</ul> {{/subsubcategories.length}}</li> {{/subcategories}}</ul> {{/subcategories.length}}</li> {{/categories}}';
this["APP"]["templates"]["checkoutSummaryAngular"] = '<header role="banner"><div class="angular-title-block"><h2 class="title-medium title-block title-angular-summary">' + Drupal.t('hermes.checkout.summary') + '</h2></div></header> {{#total}}<div class="checkout-order-separator-title"></div><ul class="checkout-order-summary-products block-content-angular"> {{#items}}<li class="checkout-order-summary-product"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="checkout-order-summary-product-container">{{/is_perso_leather}} {{#is_perso_leather}}<div class="checkout-order-summary-product-container"> {{/is_perso_leather}}<div class="checkout-order-summary-product-picture"> <img nopin="nopin" src="{{image}}{{imgQuerySeparator}}$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt=""></div><div class="checkout-order-summary-product-infos"> {{#name}} <span class="checkout-order-summary-label checkout-order-summary-label-angular">{{name}}</span> <span class="sr-only">,</span> {{/name}} {{^set_items}}<p class="infos-item-angular"> {{#color}} ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}</br> <span class="sr-only">,</span> {{/color}} {{#options}} {{#perso_info}} {{^is_perso_leather}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/is_perso_leather}} {{/perso_info}} {{^perso_info}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/perso_info}} {{/options}} {{^options}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{/options}} {{#size}} ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}</br> <span class="sr-only">,</span> {{/size}}</p> {{/set_items}} {{#dku}}<p class="infos-item-angular"> {{#options}} {{#perso_info}} {{#is_perso_leather}} {{#is_perso_beltkit}} {{#buckle_title}} {{buckle_title}}</br> <span class="sr-only">,</span> ' + Drupal.t('hermes-personalization-color') + ': {{buckle_color}}</br> <span class="sr-only">,</span> ' + Drupal.t('hermes-global-translations.ref') + ': {{buckle_sku}}</br> <span class="sr-only">,</span></br> {{strap_title}}</br> <span class="sr-only">,</span> {{/buckle_title}} {{^buckle_title}}</br> {{/buckle_title}} {{/is_perso_beltkit}} {{#personalization_info_properties}} {{#is_perso_smlg}} {{#exterior_material}} {{#lining_material}} ' + Drupal.t('hermes-personalization-leather') + ' : {{exterior_material}} / {{lining_material}}</br> <span class="sr-only">,</span> {{/lining_material}} {{/exterior_material}} {{/is_perso_smlg}} {{#exterior_color}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris1') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-exterior-color') + ' {{/is_perso_smlg}} : {{exterior_color}}</br> <span class="sr-only">,</span> {{/exterior_color}} {{#lining_color}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-personalization-bk-coloris2') + ' {{/is_perso_beltkit}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-lining-color') + ' {{/is_perso_smlg}} : {{lining_color}}</br> <span class="sr-only">,</span> {{/lining_color}} {{#initials}} ' + Drupal.t('hermes-personalization-marking') + ': <span class="{{font_class}}">{{initials}}</span></br> <span class="sr-only">,</span> {{#position}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-position') + ': {{position}}</br> <span class="sr-only">,</span> {{/is_perso_smlg}} {{/position}} {{#font}} ' + Drupal.t('hermes-personalization-font-style') + ': {{font}}</br> <span class="sr-only">,</span> {{/font}} {{#font_size}} {{#is_perso_smlg}} ' + Drupal.t('hermes-personalization-fontSize') + ': {{font_size}}</br> <span class="sr-only">,</span> {{/is_perso_smlg}} {{/font_size}} {{#style}} ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}}</br> <span class="sr-only">,</span> {{/style}} {{/initials}} {{#strap_size}} ' + Drupal.t('hermes-personalization-size') + ': {{strap_size}}</br> <span class="sr-only">,</span> {{/strap_size}} {{/personalization_info_properties}} {{#is_perso_beltkit}} ' + Drupal.t('hermes-global-translations.ref') + ': {{strap_sku}}</br> <span class="sr-only">,</span> {{/is_perso_beltkit}} {{/is_perso_leather}} {{^is_perso_leather}} {{#personalization_info_properties}}</br> <b>' + Drupal.t('hermes.personalization.your-personalization') + ' <span class="sr-only">,</span></b></br> {{#initials}} ' + Drupal.t('hermes-personalization-marking') + ': <span class="perso-silk-marking">{{initials}}</span><br> <span class="sr-only">,</span> {{#font}} ' + Drupal.t('hermes-personalization-typography') + ': {{font}}</br> <span class="sr-only">,</span> {{/font}} {{#style}} ' + Drupal.t('hermes-personalization-fontColor') + ': {{style}}</br> <span class="sr-only">,</span> {{/style}} {{/initials}} {{/personalization_info_properties}} {{/is_perso_leather}} {{/perso_info}} {{/options}}</p> {{/dku}}</div><div class="checkout-order-summary-product-price"><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{final_price}}</p></div> {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#is_perso_leather}}</div> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p> {{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p> {{/shipping_information}} {{#prop65_information}}<p class="cart-product-prop65">{{{prop65_information}}}</p> {{/prop65_information}}</li> {{/items}}</ul><div class="checkout-order-separator-beige"></div><div class="checkout-order-summary-price-details block-content-angular"><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{subtotal_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{subtotal}}</p></div><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{shipping_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{shipping_amount}}</p></div><p class="checkout-order-summary-shipping checkout-order-summary-shipping-angular"> {{#checkout}} {{shipping_method_label}} {{#duration_label}} ({{duration_label}}){{/duration_label}}{{/checkout}} {{^checkout}}{{shipping_title}} {{#shipping_duration}} ({{shipping_duration}}){{/shipping_duration}}{{/checkout}}</p> {{#is_personalized}}<p class="checkout-order-summary-shipping checkout-order-summary-shipping-angular"> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#web_shop_name}}<p class="cart-web-to-shop-name"> {{web_shop_name}}</p> {{/web_shop_name}} {{#show_tax}}<div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular">{{taxes_label}}</h3><p class="checkout-order-summary-price checkout-order-summary-price-angular">{{tax_amount}}</p></div> {{/show_tax}}</div><div class="checkout-order-summary-price-total checkout-order-summary-price-detail block-content-angular"><h3 class="checkout-order-summary-label checkout-order-summary-label-angular checkout-order-summary-label-angular-total">{{total_label}}{{#taxMessage}} ({{taxMessage}}){{/taxMessage}}</h3><p class="checkout-order-summary-price checkout-order-summary-total-price-angular">{{total}}</p></div> {{#taxes_covered}}<div class="block-taxes-covered"><p class="checkout-order-sumary-taxes-covered">{{taxes_covered}}</p></div> {{/taxes_covered}} {{#show_message}}<div class="block-additional-message-tax"><p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p></div> {{/show_message}} {{^checkout}} <img alt="merci" lang="fr" class="merci merci-angular" src="/sites/all/themes/custom/hermes/img/Signature-Merci.png"> {{/checkout}} {{/total}}';
this["APP"]["templates"]["checkoutSummary"] = '<header role="banner"><h2 class="title-medium">' + Drupal.t('form-hermes-checkout-payment.order-summary') + '</h2></header> {{#total}}<div class="checkout-order-summary-separator"></div><ul class="checkout-order-summary-products"> {{#items}}<li id="{{sku_trim}}" class="checkout-order-summary-product"> {{^is_perso_leather}} <a href="/{{locale}}{{url}}" class="checkout-order-summary-product-container">{{/is_perso_leather}} {{#is_perso_leather}}<div class="checkout-order-summary-product-container"> {{/is_perso_leather}}<div class="checkout-order-summary-product-picture"> <img nopin="nopin" src="{{image}}&$product_item_grid_b$&resMode=&wid=100&hei=100&qlt=80" alt=""></div><div class="checkout-order-summary-product-infos"> <span class="checkout-order-summary-label">{{name}}</span> <span class="sr-only">,</span> {{^set_items}}<p> {{#color}} ' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}</br> <span class="sr-only">,</span> {{/color}} {{#sku}} ' + Drupal.t('hermes-global-translations.ref') + ': {{sku}}</br> <span class="sr-only">,</span> {{/sku}} {{#qty}} ' + Drupal.t('hermes.checkout.quantity') + ': {{qty}}</br> <span class="sr-only">,</span> {{/qty}} {{#size}} ' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}</br> <span class="sr-only">,</span> {{/size}}</p> {{/set_items}} {{#dku}}<p class="checkout-order-summary-label checkout-order-summary-personalized-label">' + Drupal.t('hermes.personalization.your-personalization') + '</p> {{#options}} {{#perso_info}} {{#is_perso_leather}} {{#personalization_info}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-message') + ': <span class="{{font_class}}">{{initials}}</span></p> {{/initials}} {{/personalization_info}} {{#personalization_info_properties}} {{#exterior_material}}<p> ' + Drupal.t('hermes-personalization-exterior-material') + ' : {{exterior_material}} <span class="sr-only">,</span></p> {{/exterior_material}} {{#exterior_color}}<p> ' + Drupal.t('hermes-personalization-exterior-color') + ' : {{exterior_color}} <span class="sr-only">,</span></p> {{/exterior_color}} {{#lining_color}}<p> ' + Drupal.t('hermes-personalization-lining-color') + ' : {{lining_color}} <span class="sr-only">,</span></p> {{/lining_color}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-marking') + ' : {{initials}} <span class="sr-only">,</span></p> {{/initials}}<p> ' + Drupal.t('hermes-personalization-font') + ' : {{position}} / {{font}} / {{font_size}} / {{style}} <span class="sr-only">,</span></p> {{/personalization_info_properties}} {{/is_perso_leather}} {{^is_perso_leather}} {{#personalization_info}} {{#initials}}<p> ' + Drupal.t('hermes-personalization-message') + ': {{initials}}</p> {{/initials}} {{/personalization_info}} {{#personalization_info_properties}} {{#font}}<p> ' + Drupal.t('hermes-personalization-font') + ': {{font}}</p> {{/font}} {{/personalization_info_properties}} {{/is_perso_leather}} {{/perso_info}} {{/options}} {{/dku}}</div><div class="checkout-order-summary-product-price"><p class="checkout-order-summary-price">{{final_price}}</p></div> {{^is_perso_leather}}</a> {{/is_perso_leather}} {{#is_perso_leather}}</div> {{/is_perso_leather}} {{#stock_message}}<p class="cart-stock-error">{{stock_message}}</p> {{/stock_message}} {{#shipping_information}}<p class="cart-product-delay">{{shipping_information}}</p> {{/shipping_information}} {{#prop65_information}}<p class="cart-product-prop65">{{{prop65_information}}}</p> {{/prop65_information}}<div aria-live="polite"><p id="cart-product-excluded-material-warning" class="sr-only"></p><p class="cart-product-excluded-material"></p></div></li> {{/items}}</ul><div class="checkout-order-summary-separator"></div><div class="checkout-order-summary-price-details"><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{subtotal_label}}</h3><p class="checkout-order-summary-price">{{subtotal}}</p></div><div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{shipping_label}}</h3><p class="checkout-order-summary-price">{{shipping_amount}}</p></div><p class="checkout-order-summary-shipping"> {{#checkout}} {{shipping_method_label}} {{#duration_label}}({{duration_label}}){{/duration_label}}{{/checkout}} {{^checkout}}{{shipping_title}} {{#shipping_duration}}({{shipping_duration}}){{/shipping_duration}}{{/checkout}}</p> {{#is_personalized}}<p class="checkout-order-summary-shipping"> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#web_shop_name}}<p class="cart-web-to-shop-name"> {{web_shop_name}}</p> {{/web_shop_name}} {{#show_tax}}<div class="checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{taxes_label}}</h3><p class="checkout-order-summary-price">{{tax_amount}}</p></div> {{/show_tax}}</div><div class="checkout-order-summary-separator"></div><div class="checkout-order-summary-price-total checkout-order-summary-price-detail"><h3 class="checkout-order-summary-label">{{total_label}}{{#taxMessage}} ({{taxMessage}}){{/taxMessage}}</h3><p class="checkout-order-summary-price">{{total}}</p></div> {{#show_message}}<p class="additional-message-tax"> ' + Drupal.t('hermes_checkout.checkout.summary.additional_tax_message') + '</p> {{/show_message}} {{^checkout}}<div class="checkout-order-summary-separator"></div> <img alt="merci" lang="fr" class="merci" src="/sites/all/themes/custom/hermes/img/Signature-Merci.png"> {{/checkout}} {{/total}}';
this["APP"]["templates"]["countryOptions"] = '<option data-cs-mask disabled selected>{{ui.select}}</option> {{#countryData}}<option data-cs-mask value="{{country_id}}">{{country}}</option> {{/countryData}}';
this["APP"]["templates"]["exchangeRequestAddresses"] = '<ul class="checkout-addresses-list select-list"> {{#addresses}}<li class="address select-list-item"> <label for="request-address-{{address_id}}" class="form-radio"><input id="request-address-{{address_id}}" name="request-address" value="{{value_payload}}" type="radio" {{#is_selected}}checked{{/is_selected}}> <span><span class="request-address-name">{{full_name}}</span> <span class="request-address-address">{{address}}</span> <span class="request-address-zip-city">{{zipcode}} {{state}} {{city}}</span> <span class="request-address-country">{{country}}</span> <span class="request-address-telephone">{{telephone}}</span></span></label></li> {{/addresses}}</ul>';
this["APP"]["templates"]["exchangeRequestDetailSummary"] = '<section class="checkout-section checkout-summary"><div class="block-wrapper"><div class="details-exchange-totals cart-details"><div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.number_of_items') + '</h3><p class="cart-details-value"> {{#totalItems}}{{totalItems}}{{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div> {{#show_tax}}<div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.taxes') + '</h3><p class="cart-details-value"> {{#totalTax}}{{totalTax}}{{/totalTax}} {{^totalTax}}--{{/totalTax}}</p></div> {{/show_tax}}<div data-cs-mask class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping') + '</h3><p class="cart-details-value"> {{#totalShipping}}{{totalShipping}}{{/totalShipping}} {{^totalShipping}}--{{/totalShipping}}</p></div> {{#adjustementNegativeDisplay}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.adjustement_negative') + '</h3><p class="cart-details-value"> {{adjustementNegative}}</p></div> {{/adjustementNegativeDisplay}}<div data-cs-mask class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label"> ' + Drupal.t('hermes-global-translations.total') + ' {{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value"> {{#totalPrice}}{{totalPrice}}{{/totalPrice}} {{^totalPrice}}--{{/totalPrice}}</p></div></div></div></section>';
this["APP"]["templates"]["exchangeRequestItems"] = '<ul class="cart-products"> {{#items}}<li><div class="cart-product-container"><div class="cart-product-infos"> <a href="/{{locale}}{{url}}" class="cart-product-name"><img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"> <span class="cart-product-name-label">{{name}}</span> {{#set_items}}<p class="cart-product-details cart-set-item"> {{name}}<br> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>' + Drupal.t('hermes_checkout.tray.cart.items.ref') + ' : {{item_id}}</span></p> {{/set_items}} {{^set_items}}<p class="cart-product-details"> {{#color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{color}}<br>{{/color}} {{#size}}' + Drupal.t('hermes_checkout.checkout.cart.size.label') + ' {{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>' + Drupal.t('hermes_checkout.tray.cart.items.ref') + ' : {{sku}}</span></p> {{/set_items}}</a><div class="cart-product-quantity-price"> <span class="cart-product-quantity"><button type="button" data-modifier="-1" data-link-id="{{link_id}}" data-item_id="{{item_id}}" data-step="{{qty_increments}}" data-bind="quantity-modifier" class="product-quantity-update {{#min_reached}}disabled{{/min_reached}} {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}" aria-label="' + Drupal.t('hermes.checkout.cart.delete_item') + '" aria-describedby="qty-{{sku_trim}}">-</button><p id="qty-{{sku_trim}}"> <abbr aria-label="' + Drupal.t('hermes.checkout.quantity') + '">' + Drupal.t('hermes_checkout.checkout.cart-items.qty.label') + '</abbr> <span id="product-quantity-no-refund-exchange" class="input-disable {{#refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}">{{qty}}</span> <span id="product-quantity-refund-exchange" class="input-disable {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}">{{refundable_qty}}</span> <span class="sr-only">items</span></p> <button type="button" data-modifier="1" data-link-id="{{link_id}}" data-item_id="{{item_id}}" data-step="{{qty_increments}}" data-bind="quantity-modifier" class="product-quantity-update {{#max_reached}}disabled{{/max_reached}} {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}}" aria-label="' + Drupal.t('hermes.checkout.cart.add_item') + '" aria-describedby="qty-{{sku_trim}}">+</button></span><p class="cart-product-price">{{^refundOrExchangeEnabled}}{{purchase_price}}{{/refundOrExchangeEnabled}}{{#refundOrExchangeEnabled}}{{refundable_price}}{{/refundOrExchangeEnabled}}</p></div><div class="cart-return"> {{#isReturnable}}<div class="return_checkbox" data-mode="{{returnType}}"> <label for="{{returnOrExchange}}-item-{{item_id}}"><input data-link-id="{{link_id}}" type="checkbox" data-bind="enableForRefundOrExchange" {{#refundOrExchangeEnabled}}checked{{/refundOrExchangeEnabled}} name="{{returnOrExchange}}-item" {{#disableCheckbox}}disabled{{/disableCheckbox}} value="{{item_id}}" id="{{returnOrExchange}}-item-{{item_id}}"/> {{returnOrExchangeFrontLabel}}</label></div> {{/isReturnable}} {{^isReturnable}}<p class="impossible-return-message"> {{{customerService}}}</p> {{/isReturnable}}<div class="specificmessage {{^specificMessage}}hidden{{/specificMessage}}">{{specificMessage}}</div><div class="specificmessage">{{#link_id}}{{#refundOrExchangeEnabled}}{{^display_single_line}} {{^disableCheckbox}}' + Drupal.t('hermes_checkout.tray.order_list.items.return.linked_product') + '{{/disableCheckbox}} {{/display_single_line}}{{/refundOrExchangeEnabled}}{{/link_id}}</div><div class="return_container form-row clearfix container-fieldset {{^refundOrExchangeEnabled}}hidden{{/refundOrExchangeEnabled}} {{#disableCheckbox}}hidden{{/disableCheckbox}}"> <label>' + Drupal.t('hermes_checkout.tray.exchange_return.label_reason') + '</label> <span class="form-item-select"><select data-cs-mask data-bind="reasonChange" data-link-id="{{link_id}}" data-item_id="{{item_id}}" name="return-reason-{{item_id}}"><option value="" {{^haveReason}}selected="selected"{{/haveReason}} disabled="disabled">Select</option> {{#returnReasons}}<option data-cs-mask {{#selected}}selected="selected"{{/selected}} value="{{reason.value}}">{{reason.name}}</option> {{/returnReasons}}</select> <span data-cs-mask class="label">{{^haveReason}}' + Drupal.t('hermes_checkout.tray.order_list.items.select.Select') + '{{/haveReason}}{{#returnReasons}}{{#selected}}{{reason.name}}{{/selected}}{{/returnReasons}}</span><svg class="icon icon-select" aria-hidden="true"><use xlink:href="#arrow-down"/></svg></span></div></div></div></div></li> {{/items}}</ul>';
this["APP"]["templates"]["exchangeRequestSummary"] = '<section class="checkout-section checkout-summary"><div class="block-wrapper"><div class="checkout-header return-summary-cols"><h2 class="typo-title-level5 return-summary-col"> <button data-cs-mask data-bind="view-order" data-order="{{orderId}}" type="button" aria-controls="cart" aria-expanded="false" class="button" data-tray-trigger="tray-order"> {{orderDate}}<br><p data-cs-mask class="order-number"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.ordernr') + ' : {{orderId}}</p><svg aria-hidden="true" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#arrow-right"></use></svg></button></h2></div><div class="details-exchange-totals cart-details"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.number_of_items') + '</h3><p class="cart-details-value"> {{#totalItems}}{{totalItems}}{{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div> {{#show_tax}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.taxes') + '</h3><p class="cart-details-value"> {{#totalItems}} {{#totalTax}}{{totalTax}}{{/totalTax}} {{/totalItems}} {{^totalItems}}--{{/totalItems}}</p></div> {{/show_tax}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.shipping') + '</h3><p class="cart-details-value"> {{#totalShipping}}{{totalShipping}}{{/totalShipping}} {{^totalShipping}}--{{/totalShipping}}</p></div> {{#adjustementNegativeDisplay}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart"> ' + Drupal.t('hermes_checkout.tray.exchange.summary.adjustement_negative') + '</h3><p class="cart-details-value"> {{adjustementNegative}}</p></div> {{/adjustementNegativeDisplay}}<div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label"> ' + Drupal.t('hermes-global-translations.total') + ' {{#taxMessage}}<br/>({{taxMessage}}){{/taxMessage}}</h3><p class="cart-details-value taxe-total cart-a-tray-value"> {{#totalPrice}}{{totalPrice}}{{/totalPrice}} {{^totalPrice}}--{{/totalPrice}}</p></div></div></div></section>';
this["APP"]["templates"]["exchangeRequestTimeslots"] = '<ul class="checkout-addresses-list select-list"> {{#timeslots}}<li class="address select-list-item"> <label for="timeslot-{{day}}-{{time}}" class="form-radio"><input id="timeslot-{{day}}-{{time}}" name="request-timeslot" value="{{value_payload}}" type="radio" {{#is_selected}}checked{{/is_selected}}> <span><span class="timeslot-day">{{dayString}}</span> <span class="timeslot-time">{{timeString}}</span></span></label></li> {{/timeslots}}</ul>';
this["APP"]["templates"]["exchangeReturnDetails"] = '<h4 data-cs-mask class="typo-title-level5">{{exchange_return_date}}</h4><p data-cs-mask class="order-number" data-ordernr="{{increment_id}}">' + Drupal.t('hermes_checkout.tray.return_details.heading.returnNumber') + ' {{return_id}}</p><p data-cs-mask> {{status}}<br/></p> {{#can_download_duty_proforma}} <a href="{{proformaDownloadLink}}" class="print-proforma" target="_parent">' + Drupal.t('hermes_checkout.exchange_return.tray.download-duty-proforma') + '</a> {{/can_download_duty_proforma}}<br/><section class="checkout-section"><h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.returnedItems') + '</h2> {{{cartItems}}}</section> {{#request_notes}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.exchangeNote') + '</h2> <span data-cs-mask>{{request_notes}}</span> {{/request_notes}} {{#pickup_address}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.pickupAddress') + '</h2> <span data-cs-mask>{{#pickup_address_name}} {{pickup_address_name}}<br/>{{pickup_address_label}} {{/pickup_address_name}} {{^pickup_address_name}} {{pickup_address}}</span> {{/pickup_address_name}} {{/pickup_address}} {{#pickup_date}}<h2 class="typo-title-level5 section-title">' + Drupal.t('hermes_checkout.tray.return_details.heading.pickupTime') + '</h2> <span data-cs-mask>{{pickup_date}}<br/> {{pickup_time_readable}}</span> {{/pickup_date}} {{{summary}}}';
this["APP"]["templates"]["exchangeReturnItems"] = '<ul class="cart-products"> {{#items}}<li><div class="cart-product-container"> <a href="/{{locale}}{{url}}"><img src="{{image}}&fmt=jpg&qlt=60&wid=100&hei=100" alt="" class="cart-product-media"></a><div class="cart-product-infos"> <a href="/{{locale}}{{url}}" class="cart-product-name">{{name}}</a> {{#set_items}}<p class="cart-product-details cart-set-item"> {{name}}<br> {{#color}}{{color}}<br>{{/color}} {{#size}}{{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/set_items}} {{^set_items}}<p class="cart-product-details"> {{#color}}{{color}}<br>{{/color}} {{#size}}{{size}}<br>{{/size}} {{#metal_titration1}}{{metal_titration1}}<br>{{/metal_titration1}} {{#metal_titration2}}{{metal_titration2}}<br>{{/metal_titration2}} {{metal_titration3}} <span>{{sku_reference}}: {{sku}}</span></p> {{/set_items}}<div class="cart-product-quantity-price"> <span>' + Drupal.t('hermes_checkout.tray.order_list.items.qty') + '</span> <span class="cart-product-quantity">{{qty}}</span><p class="cart-product-price">{{final_price}}</p></div> {{#return_reason}}<p data-cs-mask class="cart-product-return-reason">{{return_reason}}</p>{{/return_reason}}</div></div></li> {{/items}}</ul>';
this["APP"]["templates"]["filters"] = '<div class="filters-intro"><p class="filters-title typo-title typo-title-level4"> <button class="button button-link tray-close"><svg nopin="nopin" class="icon icon-arrow-left" aria-hidden="true" focusable="false"><use xlink:href="#cross"></use></svg></button> {{filterBy}}</p> <button type="button" form="filter-subcat" class="button-link filter-button-clear"> ' + Drupal.t('hermes_checkout.modules.filters.clear.label') + '</button></div> {{#filters}} {{^hidden}}<div class="section"> <a id="filter-{{id}}" data-name="{{name}}" role="tab" aria-selected="{{#open}}true{{/open}}{{^open}}false{{/open}}" class="filter-legend accordion-toggle ripple-effect typo-title typo-title-level5 ripple" aria-expanded="{{#open}}true{{/open}}{{^open}}false{{/open}}" tabindex="0"><span id="filter-label-{{fname}}">{{name}}</span> <span class="accordion-icon"><svg nopin="nopin" width="10" height="10" aria-hidden="true" focusable="false"><g><rect width="1" height="9" x="4" class="accordion-icon-line accordion-icon-plus"></rect><rect width="9" height="1" y="4" class="accordion-icon-line accordion-icon-minus"></rect></g></svg></span></a> {{#list.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options"><ul> {{#list}}<li> <label for="list-{{fname}}-{{value}}" class="form-checkbox filter-item"><input {{#singleselect}}data-type="single" {{/singleselect}} type="checkbox" name="type" value="{{urlParams}}"{{#selected}} checked="true"{{/selected}} id="list-{{fname}}-{{value}}" aria-describedby="filter-label-{{fname}}"> <span class="filter-item-wrapper clamped-filter"><span class="filter-name sr-only">{{name}}</span> <span class="filter-count sr-only">({{total}})</span><span class="clamped-description" aria-hidden="true"></span></span> <svg nopin="nopin" aria-hidden="true" class="icon icon-check" focusable="false"><use xlink:href="#check"></use></svg></label></li> {{/list}}</ul></div> {{/list.length}} {{#colors.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options filter-options-color"><ul> {{#colors}}<li> <label for="colors-{{fname}}-{{value}}" class="form-checkbox filter-item filter-reversed"><input {{#singleselect}}data-type="single" {{/singleselect}}type="checkbox" name="color" value="{{urlParams}}" id="colors-{{fname}}-{{value}}"{{#selected}} checked="true"{{/selected}} aria-describedby="filter-label-color"> <span class="filter-item-wrapper"><img class="lazyload" data-src="{{damConfig.dam_url_noproto}}{{damConfig.hermes_product_container}}MAIN_COLOR_{{value}}?wid=50&hei=50" alt=""/> <span class="filter-name">{{name}}</span></span> <svg nopin="nopin" aria-hidden="true" class="icon icon-check icon-color-{{value}}" focusable="false"><use xlink:href="#check"></use></svg></label></li> {{/colors}}</ul></div> {{/colors.length}} {{#grid.length}}<div role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}" class="accordion-content filter-options filter-options-grid"><ul> {{#grid}}<li> <label for="grid-{{fname}}-{{value}}" class="form-checkbox filter-item"><input {{#singleselect}}data-type="single" {{/singleselect}}type="checkbox" name="grid" value="{{urlParams}}"{{#selected}} checked="true"{{/selected}} id="grid-{{fname}}-{{value}}" aria-describedby="filter-label-{{fname}}"> <span class="filter-item-wrapper"><span class="filter-name" title="{{name}}">{{name}}</span></span></label></li> {{/grid}}</ul></div> {{/grid.length}} {{#slider}}<div class="accordion-content filter-options filter-options-price" role="tabpanel" aria-labelledby="filter-label-{{name}}" aria-hidden="{{#open}}false{{/open}}{{^open}}true{{/open}}"><div class="form-range"><p class="form-range-recap"> <span class="form-range-recap-value form-range-recap-min" id="slider-{{min.value}}" data-urlparams="{{min.urlParams}}" data-value={{min.value}}>{{min.name}}</span> <span class="form-range-recap-value form-range-recap-max" id="slider-{{max.value}}" data-urlparams="{{max.urlParams}}" data-value={{max.value}}>{{max.name}}</span></p><div class="form-range-wrapper"></div><p aria-live="polite" aria-atomic="true" class="hidden"></p></div></div> {{/slider}}</div> {{/hidden}} {{/filters}}';
this["APP"]["templates"]["listItemProduct"] = '<li class="product-grid-list-item {{#pre_reveal}}pre-reveal{{/pre_reveal}}"><article class="product-item product-item-loading"><a href="{{url}}" aria-label="{{title}}, {{#avg_color}}' + Drupal.t('hermes_checkout.checkout.cart.color.label') + ' {{avg_color}}, {{/avg_color}}{{#more_colors}}{{more_colors}}, {{/more_colors}}{{#mass}}' + Drupal.t('hermes.accessibility.volume') + ' {{mass}}, {{/mass}}{{price}}{{#stockRetail}}, {{stockRetail}}{{/stockRetail}}" data-product="{{sku}}" onclick="updateSelectedProductPosition(this)"><picture class="product-item-picture media-wrap media-wrap-square"> {{! size/wid/hei are all required and should have the same value. }} {{! extend, which creates the padding, must be 10% of the above value }} {{! WEBP pictures }}<source type="image/webp" data-srcset="{{image}}&$product_item_grid_b$&resMode=&fmt=webp&wid=295&hei=295, {{image}}&$product_item_grid_b$&resMode=&fmt=webp&wid=590&hei=590 2x" media="(min-width: 600px) and (max-width: 767px)"><source type="image/webp" data-srcset="{{image}}&$product_item_grid_b$&resMode=&fmt=webp&wid=650&hei=650, {{image}}&$product_item_grid_b$&resMode=&fmt=webp&wid=1300&hei=1300 2x" media="(min-width: 768px)"><source type="image/webp" data-srcset="{{image}}&$product_item_grid_b$&resMode=&fmt=webp&wid=460&hei=460 2x"> {{! JPEG pictures }}<source data-srcset="{{image}}&$product_item_grid_b$&resMode=&wid=295&hei=295, {{image}}&$product_item_grid_b$&resMode=&wid=590&hei=590 2x" media="(min-width: 600px) and (max-width: 767px)"><source data-srcset="{{image}}&$product_item_grid_b$&resMode=&wid=650&hei=650, {{image}}&$product_item_grid_b$&resMode=&wid=1300&hei=1300 2x" media="(min-width: 768px)"><source data-srcset="{{image}}&$product_item_grid_b$&resMode=&wid=460&hei=460 2x"> <img class="lazyload" data-src="{{image}}&$product_item_grid_b$&resMode=&wid=230&hei=230" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"> {{! noscript fallback without lazyloading hack }}<noscript> <img src="{{image}}&$product_item_grid_b$&resMode=&extend=65,65,65,65" alt="{{title}}"></noscript></picture><div class="product-item-meta"> {{#showExtra}} {{#dimensions}}<div class="product-item-variants">{{dimensions}}</div>{{/dimensions}} {{/showExtra}} {{#mass_volume}}<div class="product-item-variants">{{mass_volume}}</div>{{/mass_volume}} {{#more_colors}}<div class="product-item-variants">{{more_colors}}</div>{{/more_colors}}<div class="product-item-name">{{title}}</div><div class="product-item-price">{{price}}</div> {{#stockRetail}}<div class="product-item-retail-only-sticker-wrapper"><div class="product-item-retail-only-sticker"> {{stockRetail}}</div></div> {{/stockRetail}}</div></a></article></li>';
this["APP"]["templates"]["manageSocial"] = '{{#availableNetworks}}<div class="form-item form-type-checkbox" data-network="{{availableSingleNetwork}}"> <input type="checkbox" id="edit-{{availableSingleNetwork}}" name="edit-{{availableSingleNetwork}}" class="form-checkbox"> <label for="edit-{{availableSingleNetwork}}"><span>{{ui_connect_with}}</span> <span class="network-name">{{availableSingleNetwork}}</span><span class="connected-username connected-username-{{availableSingleNetwork}}"></span> <svg aria-hidden="true" class="icon icon-check"><use xlink:href="#check"></use></svg><svg aria-hidden="true" class="icon icon-socialnetwork icon-{{availableSingleNetwork}}"><use xlink:href="#{{availableSingleNetwork}}"></use></svg></label></div> {{/availableNetworks}}';
this["APP"]["templates"]["nav"] = '<div id="tray-nav-{{tid}}" aria-hidden="true" class="tray-content tray-nav tray-nav-deep invisible" data-track-nav><div class="tray-content-wrapper hui"><div class="tray-header"><div class="title-tray-container"><svg nopin="nopin" class="icon icon-arrow-left" aria-hidden="true"><use xlink:href="#cross"></use></svg><button aria-label="' + Drupal.t('hermes.accessibility.close_tray') + '" aria-describedby="title-tray-nav-{{tid}}" class="button-tray tray-close"></button><h2 id="title-tray-nav-{{tid}}" class="title-tray">{{name}}</h2></div></div><ul class="nav-list"> {{#subcategories}}<li> {{#has_subcategories}} <button aria-haspopup="dialog" aria-expanded="false" aria-controls="tray-nav-{{tid}}" data-href="{{& path}}" data-nav-item data-generic-tray-trigger="tray-nav-{{tid}}" class="ripple-effect link-to-button-nav-shop"> {{name}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true"><use xlink:href="#arrow-right"></use></svg></button> {{/has_subcategories}} {{^has_subcategories}} <a href="{{& path}}" target="{{& target}}" class="ripple-effect">{{name}}</a> {{/has_subcategories}}</li> {{/subcategories}}</ul> {{#push}}<div class="media nav-hero{{#title}} nav-hero-push{{/title}}"> {{#image}}<a href="{{url}}" class="nav-hero-cta"><div class="media-body"><div class="title-wrap"> {{#title}}<h3 class="title-medium">{{title}}</h3> {{/title}}<div class="cta-link">{{cta_text}}</div></div><div class="media-left"> <img src="{{image}}" alt=""></div> {{#description}}<div class="media-description">{{description}}</div> {{/description}}</div></a> {{/image}}</div> {{/push}}</div></div>';
this["APP"]["templates"]["notification"] = '{{#image}} <span class="feedback-icon"><img class="notification-thumb" src="{{image}}" alt="{{title}}"> comment du to bug with image</span> {{/image}} {{#title}}<h2 class="title-large">{{title}}</h2> {{/title}} {{#description}}<p class="title-small">{{description}}</p> {{/description}} {{#actions}}<p class="notification-message-actions">{{{actions}}}</p> {{/actions}}';
this["APP"]["templates"]["notificationsHeader"] = '<div class="header-message slick-slide"> {{{content}}}</div>';
this["APP"]["templates"]["orderConfirmationAngular"] = '<h1 class="sr-only">' + Drupal.t('Order confirmation') + '</h1><div class="thank-you-block thank-you-block-angular colored-background-angular"><p class="thank-you-title title-large title-angular-thank-you"> <span data-cs-mask>{{#showBillingAddress}} {{#billing_address.displaySama}}{{billing_address.lastname}} {{billing_address.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ',{{/billing_address.displaySama}} {{^billing_address.displaySama}} {{#billing_address.isChina}} {{billing_address.firstname}} {{billing_address.lastname}} , {{/billing_address.isChina}} {{^billing_address.isChina}} {{billing_address.name}}{{#billing_address.isKorea}} {{dear}}{{/billing_address.isKorea}}, {{/billing_address.isChina}} {{/billing_address.displaySama}} {{/showBillingAddress}} {{^showBillingAddress}} {{shipping_address.name}}, {{/showBillingAddress}}</span><br/> <span>{{thank_you}}</span></p><div class="block-content-angular-left"><p data-cs-mask class="reset-margin">{{order_number_text}}</p> {{#specificcountry}}<p data-cs-mask class="reset-margin">{{confirmation_phone}}</p> {{/specificcountry}} {{#normalcountry}}<p class="reset-margin">{{confirmation_email}}</p> {{/normalcountry}}<p class="order-check-or-track reset-margin margin-left-angular">{{{check_order_cta}}}</p><p data-cs-mask class="subscribed reset-margin">{{subscribed}}</p></div></div><div class="delivery-block colored-background-angular delivery-bloc-angular"><div class="angular-title-block"><h2 class="typo-title-level5 title-medium title-block title-angular">{{delivery_title}}</h2></div><div class="checkout-order-separator-title"></div><div class="block-content-angular-left"> {{^is_webtoshop}}<h3 class="subtitle-angular">{{delivery_address_subtitle}}</h3><p data-cs-mask class="reset-margin">{{shipping_address.name}} {{#shipping_address.displaySama}}' + Drupal.t('hermes_checkout.user.profile.civility.sama') + '{{/shipping_address.displaySama}}</p> {{/is_webtoshop}} {{#is_webtoshop}}<h3 class="subtitle-angular">{{collection_in_store}}</h3> {{/is_webtoshop}} {{^showBillingAddress}} {{{shipping_address.address}}} {{#shipping_address.defaultFormat}}<div data-cs-mask>{{shipping_address.region}}, {{shipping_address.city}}, {{shipping_address.district}},</div><div data-cs-mask>{{shipping_address.street1}}, {{shipping_address.country_id}}</div> {{/shipping_address.defaultFormat}} {{^shipping_address.isHKorMO}}<div data-cs-mask>{{telephone_abbreviation}} {{shipping_address.telephone}}</div> {{/shipping_address.isHKorMO}} {{/showBillingAddress}} {{#showBillingAddress}} {{{shipping_address.address}}} {{^shipping_address.isHKorMO}}<p data-cs-mask class="reset-margin">{{shipping_address.telephone}}</p> {{/shipping_address.isHKorMO}} {{/showBillingAddress}} {{^is_webtoshop}}<h3 class="subtitle-angular">{{shipping_method_label}}</h3><p data-cs-mask class="reset-margin"> {{shipping_title}} {{#shipping_duration}}({{shipping_duration}}){{/shipping_duration}} {{#japanOrder}}<br/><div data-cs-mask class="sagawa"><div class="sagawa-title">{{desired_date_shipment}}</div><div class="sagawa-info"> <time>{{sagawa_date}}</time> <time>{{sagawa_time}}</time></div></div> {{/japanOrder}} {{#is_personalized}}<p data-cs-mask>' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p>{{/is_personalized}}</p> {{/is_webtoshop}} {{#is_webtoshop}}<h3 class="subtitle-angular">{{collection_by_label}}</h3><p data-cs-mask class="reset-margin"> {{#billing_address.displaySama}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/billing_address.displaySama}} {{^billing_address.displaySama}} {{webtoshop.collector.name}} {{/billing_address.displaySama}}<br/> {{telephone_abbreviation}} {{webtoshop.collector.telephone}}</p> {{#display_orderconfirmation_disclaimer}}<div class="order-confirmation-disclaimer store-limit-info-limit"><div data-cs-mask class="order-confirmation-disclaimer-icon-border"><svg class="icon icon-information icon-disclaimer-message" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#info"></use></svg></div> <span class="diclaimer-message">{{orderconfirmation_disclaimer}}</span></div> {{/display_orderconfirmation_disclaimer}} {{/is_webtoshop}}</div></div><div class="payment-block payment-block-angular colored-background-angular"><div class="angular-title-block"><h2 class="typo-title-level5 title-medium title-block title-angular">{{payment_title}}</h2></div><div class="checkout-order-separator-title"></div><div class="block-content-angular-left"> {{#showBillingAddress}}<h3 class="subtitle-angular">{{billing_address_subtitle}}</h3><p data-cs-mask class="reset-margin"> {{#billing_address.displaySama}} {{#billing_address.displayCivility}} {{#billing_address.prefix}}{{billing_address.prefix}}{{/billing_address.prefix}} {{/billing_address.displayCivility}}{{billing_address.lastname}} {{billing_address.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/billing_address.displaySama}} {{^billing_address.displaySama}} {{billing_address.name}}{{/billing_address.displaySama}}</p><p data-cs-mask class="reset-margin">{{{billing_address.address}}}</p> {{^billing_address.isHKorMO}}<p data-cs-mask class="reset-margin">{{billing_address.telephone}}</p> {{/billing_address.isHKorMO}} {{/showBillingAddress}} {{#fapiao}}<div class="fapiao-block"><h3 class="subtitle-angular">{{fapiao.title}}</h3><p class="reset-margin">{{fapiao.type}}</p> {{#fapiao.type_personal}}<p class="reset-margin">{{fapiao.name}}</p> {{/fapiao.type_personal}} {{#fapiao.type_company}}<p class="reset-margin">{{fapiao.company_name}}</p><p class="reset-margin">{{fapiao.tax_id}}</p><p class="reset-margin">{{fapiao.company_address}}</p><p class="reset-margin">{{fapiao.company_phone_number}}</p><p class="reset-margin">{{fapiao.company_bank_account}}</p> {{/fapiao.type_company}}</div> {{/fapiao}}<h3 class="subtitle-angular">{{confirmation_email_label}}</h3> {{#customer_phonelogin}}<p data-cs-mask class="reset-margin">{{customer_phonelogin}}</p> {{/customer_phonelogin}} {{^customer_phonelogin}}<p data-cs-mask class="reset-margin">{{customer_email}}</p> {{/customer_phonelogin}}<div class="logout-user-angular"> <a href="#" class="logout-user logout-user-angular">{{logout}}</a></div></div></div>';
this["APP"]["templates"]["orderConfirmation"] = '<h1 class="sr-only">' + Drupal.t('Order confirmation') + '</h1><div class="thank-you-block"><p class="thank-you-title title-large"> <span data-cs-mask>{{#showBillingAddress}} {{#billing_address.displaySama}}{{billing_address.lastname}} {{billing_address.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ',{{/billing_address.displaySama}} {{^billing_address.displaySama}} {{#billing_address.isChina}} {{billing_address.firstname}} {{billing_address.lastname}} , {{/billing_address.isChina}} {{^billing_address.isChina}} {{billing_address.name}}{{#billing_address.isKorea}} {{dear}}{{/billing_address.isKorea}}, {{/billing_address.isChina}} {{/billing_address.displaySama}} {{/showBillingAddress}} {{^showBillingAddress}} {{shipping_address.name}}, {{/showBillingAddress}}</span><br/> <span>{{thank_you}}</span></p><p data-cs-mask class="reset-margin">{{order_number_text}}</p> {{#specificcountry}}<p data-cs-mask class="reset-margin">{{confirmation_phone}}</p> {{/specificcountry}} {{#normalcountry}}<p class="reset-margin">{{confirmation_email}}</p> {{/normalcountry}}<p class="order-check-or-track reset-margin">{{{check_order_cta}}}</p><p data-cs-mask class="subscribed reset-margin">{{subscribed}}</p></div><div data-cs-mask class="delivery-block"><h2 class="typo-title-level5 title-medium">{{delivery_title}}</h2> {{^is_webtoshop}}<h3>{{delivery_address_subtitle}}</h3><p data-cs-mask class="reset-margin">{{shipping_address.name}}</br></p> {{/is_webtoshop}} {{#is_webtoshop}}<h3>{{collection_in_store}}</h3> {{/is_webtoshop}} {{^showBillingAddress}} {{{shipping_address.address}}} {{#shipping_address.defaultFormat}}<div>{{shipping_address.region}}, {{shipping_address.city}}, {{shipping_address.district}},</div><div>{{shipping_address.street1}}, {{shipping_address.country_id}}</div> {{/shipping_address.defaultFormat}} {{^shipping_address.isHKorMO}}<div>{{telephone_abbreviation}} {{shipping_address.telephone}}</div> {{/shipping_address.isHKorMO}} {{/showBillingAddress}} {{#showBillingAddress}} {{{shipping_address.address}}} {{^shipping_address.isHKorMO}}<p data-cs-mask class="reset-margin">{{shipping_address.telephone}}</p> {{/shipping_address.isHKorMO}} {{/showBillingAddress}} {{^is_webtoshop}}<h3>{{shipping_method_label}}</h3><div data-cs-mask class="reset-margin"> {{shipping_title}} {{#shipping_duration}}({{shipping_duration}}){{/shipping_duration}} {{#japanOrder}}<br/><div class="sagawa"><div class="sagawa-title">{{desired_date_shipment}}</div><div class="sagawa-info"> <time>{{sagawa_date}}</time> <time>{{sagawa_time}}</time></div></div> {{/japanOrder}} {{#is_personalized}}<p data-cs-mask>' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p>{{/is_personalized}}</div> {{/is_webtoshop}} {{#is_webtoshop}}<h3>{{collection_by_label}}</h3><p data-cs-mask class="reset-margin"> {{#billing_address.displaySama}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/billing_address.displaySama}} {{^billing_address.displaySama}} {{webtoshop.collector.name}} {{/billing_address.displaySama}}<br/> {{telephone_abbreviation}} {{webtoshop.collector.telephone}}</p> {{#display_orderconfirmation_disclaimer}}<div class="order-confirmation-disclaimer store-limit-info-limit"><div data-cs-mask class="order-confirmation-disclaimer-icon-border"><svg class="icon icon-information icon-disclaimer-message" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#info"></use></svg></div> <span class="diclaimer-message">{{orderconfirmation_disclaimer}}</span></div> {{/display_orderconfirmation_disclaimer}} {{/is_webtoshop}}</div><div class="payment-block"> {{#showBillingAddress}}<h2 class="typo-title-level5 title-medium">{{payment_title}}</h2><h3>{{billing_address_subtitle}}</h3><p data-cs-mask class="reset-margin"> {{#billing_address.displaySama}} {{#billing_address.displayCivility}} {{#billing_address.prefix}}{{billing_address.prefix}}{{/billing_address.prefix}} {{/billing_address.displayCivility}}{{billing_address.lastname}} {{billing_address.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/billing_address.displaySama}} {{^billing_address.displaySama}} {{billing_address.name}}{{/billing_address.displaySama}}</p><p data-cs-mask class="reset-margin">{{{billing_address.address}}}</p> {{^billing_address.isHKorMO}}<p data-cs-mask class="reset-margin">{{billing_address.telephone}}</p> {{/billing_address.isHKorMO}} {{/showBillingAddress}} {{#fapiao}}<div class="fapiao-block"><h2 class="type-title-level5 title-medium">{{fapiao.title}}</h2><h3>{{fapiao.type}}</h3> {{#fapiao.type_personal}}<p class="reset-margin">{{fapiao.name}}</p> {{/fapiao.type_personal}} {{#fapiao.type_company}}<p class="reset-margin">{{fapiao.company_name}}</p><p class="reset-margin">{{fapiao.tax_id}}</p><p class="reset-margin">{{fapiao.company_address}}</p><p class="reset-margin">{{fapiao.company_phone_number}}</p><p class="reset-margin">{{fapiao.company_bank_account}}</p> {{/fapiao.type_company}}</div> {{/fapiao}}<h3>{{confirmation_email_label}}</h3> {{#customer_phonelogin}}<p data-cs-mask class="reset-margin">{{customer_phonelogin}}</p> {{/customer_phonelogin}} {{^customer_phonelogin}}<p data-cs-mask class="reset-margin">{{customer_email}}</p> {{/customer_phonelogin}}</div> <a href="#" class="logout-user">{{logout}}</a>';
this["APP"]["templates"]["orderDetailsSummary"] = '<div class="details-order-totals cart-details"><div class="subtotal-wrapper"><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{subtotal_label}}</h3><p class="cart-details-value">{{subtotal}}</p></div><div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{shipping_label}}</h3><p class="cart-details-value">{{shipping_amount}}</p></div> {{#tax_amount}} {{#show_tax}}<div class="container-cart-checkout container-cart-separator"><h3 class="cart-details-label titre-checkout-cart">{{taxes_label}}</h3><p class="cart-details-value">{{tax_amount}}</p></div> {{/show_tax}} {{/tax_amount}}</div><div class="cart-details-total container-cart-checkout container-cart-separator"><h3 class="cart-details-label cart-a-tray-label">{{total_label}} {{#display_taxe_included}} {{#taxMessage}}<br/>({{taxMessage}}) {{/taxMessage}} {{/display_taxe_included}}</h3><p class="cart-details-value taxe-total cart-a-tray-value">{{total}}</p></div> {{#taxes_covered_label}}<p>{{taxes_covered_label}}</p> {{/taxes_covered_label}}</div>';
this["APP"]["templates"]["orderDetails"] = '<h4 data-cs-mask class="typo-title-level5">{{created_at}}</h4><p data-cs-mask class="order-number" data-ordernr="{{increment_id}}">{{order.order_number}}{{increment_id}}</p><p> {{status}}<br/> {{#is_invoiced}} <a href="{{invoiceDownloadLink}}" class="print-invoice" target="_parent">{{print}}</a> {{/is_invoiced}}<br/> {{^weChatInApp}} {{#fapiao.pdf_url}} <a href="{{fapiao.pdf_url}}" target="_parent">{{downloadFapiao}}</a> {{/fapiao.pdf_url}} {{/weChatInApp}} {{#weChatInApp}} {{#fapiao.pdf_url}} <a href="{{fapiao.qr_url}}" target="_parent">{{downloadFapiao}}</a> {{/fapiao.pdf_url}} {{/weChatInApp}} {{^fapiao.fapiaoGenerated}} {{#can_generate_fapiao}} <button class="link-to-button-underline" type="button" aria-controls="tray-request-fapiao" aria-expanded="false" aria-haspopup="dialog" data-tray-trigger="tray-request-fapiao" data-bind="fapiao-generation-form" data-order-id={{increment_id}}"> {{generateFapiao}}</button> {{/can_generate_fapiao}} {{#is_fapiao_download_expired}}<p>{{{generateFapiaoExpired}}}</p> {{/is_fapiao_download_expired}} {{/fapiao.fapiaoGenerated}} {{#goodcountry}}<p class="order-details-section"> {{noreturn}} <button class="link-to-button-inside-trays customer-service-no-return" data-tray-trigger="tray-help" aria-expanded="false" aria-haspopup="dialog" aria-controls="tray-help" type="button"> {{customer_service}}</button><br/></p> {{/goodcountry}}</p><section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.your_items_title}}</h2> {{{cartItems}}}</section> {{#is_gift}}<div class="paragraph-block"><p class="paragraph-title">{{order.is_gift_title}}</p><p data-cs-mask class="gift-message"> {{#gift.message}}{{order.has_message}} :<br/>{{{gift.message}}}<br/>{{/gift.message}} {{#gift.hide_price}}{{order.price_hidden_on_receipt_label}}<br/>{{/gift.hide_price}} {{#gift.handwritten_invoice}}{{order.handwritten_invoice_label}}{{/gift.handwritten_invoice}}</p></div> {{/is_gift}}<section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.delivery_title}}</h2><div class="paragraph-block"> {{^is_webtoshop}}<p class="paragraph-title">{{order.delivery_address_subtitle}}</p>{{/is_webtoshop}} {{#is_webtoshop}}<p class="paragraph-title">{{order.collect_in_store_subtitle}}{{#is_personalized}} ({{order.shipping_duration}}){{/is_personalized}}</p> {{/is_webtoshop}}<p data-cs-mask> {{^is_webtoshop}} {{#isChinaEN}} {{shipping_address.prefix}} {{/isChinaEN}} {{shipping_address.name}}</br> {{/is_webtoshop}} {{#is_webtoshop}} {{#is_personalized}} ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '<br> {{/is_personalized}} {{/is_webtoshop}} {{{shipping_address.address}}}<br/> {{^shipping_address.isHKorMO}} {{telephone_abbreviation}} {{shipping_address.telephone}} {{/shipping_address.isHKorMO}}</p></div> {{^is_webtoshop}}<div class="paragraph-block"><div class="paragraph-title"> {{order.shipping_method_label}}<br/> {{shipping_title}}{{#japanOrder}}NO.{{shipment.track_number}}{{/japanOrder}} {{#is_personalized}} &nbsp({{order.shipping_duration}})<p> ' + Drupal.t('hermes_checkout.checkout.summary.no-return-possible') + '</p> {{/is_personalized}} {{#japanOrder}}<br/><div class="sagawa"><div class="sagawa-title">{{desired_date_shipment}}</div><div class="sagawa-info"> <time>{{sagawa_date}}</time> <time>{{sagawa_time}}</time></div></div> {{/japanOrder}}</div></div> {{/is_webtoshop}} {{#is_webtoshop}}<div class="paragraph-block"><p class="paragraph-title">{{order.collection_by_label}}</p><p data-cs-mask> {{#isChina}} {{#isChinaEN}} {{webtoshop.collector.prefix}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} {{/isChinaEN}} {{^isChinaEN}} {{webtoshop.collector.lastname}}{{webtoshop.collector.firstname}}{{webtoshop.collector.prefix}} {{/isChinaEN}} {{/isChina}} {{^isChina}} {{^isKorea}} {{#displayPrefix}} {{webtoshop.collector.prefix}} {{#isTaiwan}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} {{/isTaiwan}} {{/displayPrefix}} {{/isKorea}} {{^displaySama}} {{#isKorea}} {{webtoshop.collector.lastname}}{{webtoshop.collector.firstname}} {{/isKorea}} {{^isKorea}} {{webtoshop.collector.firstname}} {{webtoshop.collector.lastname}} {{/isKorea}} {{/displaySama}} {{#displaySama}} {{webtoshop.collector.lastname}} {{webtoshop.collector.firstname}} ' + Drupal.t('hermes_checkout.user.profile.civility.sama') + ' {{/displaySama}}<br/> {{/isChina}} {{telephone_abbreviation}} {{webtoshop.collector.telephone}}</p></div> {{/is_webtoshop}} {{#shipping_address.shipping_information}}<div class="paragraph-block "><p class="paragraph-title">{{order.delivery_instructions_title}}</p><p>{{shipping_address.shipping_instructions}}</p></div> {{/shipping_address.shipping_information}}</section><section class="order-details-section"><h2 class="typo-title-level5 section-title">{{order.payment_title}}</h2><div class="paragraph-block"><p class="paragraph-title">{{order.billing_address_subtitle}}</p><p data-cs-mask> {{#isChinaEN}} {{billing_address.prefix}} {{/isChinaEN}} {{billing_address.name}}</br> {{{billing_address.address}}}<br/> {{^billing_address.isHKorMO}} {{telephone_abbreviation}} {{billing_address.telephone}} {{/billing_address.isHKorMO}}</p></div><div class="paragraph-block"><p class="paragraph-title">{{order.payment_title_subtitle}}</p> {{#customer_phonelogin}}<p data-cs-mask>{{customer_phonelogin}}</p> {{/customer_phonelogin}} {{^customer_phonelogin}}<p data-cs-mask>{{customer_email}}</p> {{/customer_phonelogin}}</div></section><section class="checkout-section"> {{{orderSummary}}}</section>';
this["APP"]["templates"]["orderList"] = '{{#orders}}<li class="order-item"> <button class="js-to-order-details cta-order-details-wrapper simple-link link-to-button-underline" type="button" aria-controls="tray-order" aria-expanded="false" aria-haspopup="dialog" data-order-id="{{increment_id}}"><h4 data-cs-mask class="typo-title-level5">{{created_at}}</h4><p data-cs-mask>' + Drupal.t('hermes-global-translations.order-number') + '{{increment_id}}</p><svg nopin="nopin" aria-hidden="true" class="icon icon-arrow-right"><use xlink:href="#arrow-right"></use></svg></button> {{#status}}<p class="order-status"> {{status}}</p> {{/status}} {{#trackOrder}} {{#track_url}}<p class="order-track-cta "> <a href="{{track_url}}" target="_blank">' + Drupal.t('hermes_checkout.tray.order_list.cta.track_this_order') + '</a></p> {{/track_url}} {{/trackOrder}} {{#return_label}}<p class="order-return-status"> <span>{{return_label}}</span></p> {{/return_label}} {{#is_refundable}}<p class="order-refund-cta"> <button class="link-to-button-underline" data-bind="refund-order" data-order-id="{{increment_id}}" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.refund_this_order') + '</button></p> {{/is_refundable}} {{#refund}}<p> <button class="link-to-button-underline" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog" data-bind="exchange-return-details" data-order-id={{increment_id}} data-return-exchange-id="{{id}}" data-return-type="refund"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.return_details') + '</button></p> {{/refund}} {{#is_exchangeable}}<p class="order-exchange-cta"> <button class="link-to-button-underline" type="button" data-bind="exchange-order" data-order-id="{{increment_id}}" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.exchange_this_order') + '</button></p> {{/is_exchangeable}} {{#exchange}}<p> <button class="link-to-button-underline" type="button" aria-controls="tray-request-exchange-return" aria-expanded="false" aria-haspopup="dialog" data-bind="exchange-return-details" data-order-id={{increment_id}} data-return-exchange-id="{{id}}" data-return-type="exchange"> ' + Drupal.t('hermes_checkout.tray.order_list.cta.exchange_details') + '</button></p> {{/exchange}}</li> {{/orders}}';
this["APP"]["templates"]["paymentIcons"] = '{{#cards}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/{{data}}@2x.png" alt="{{data_label}}"></li> {{/cards}} {{#france_only}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/payment/cb@2x.png" alt="Cb"></li> {{/france_only}}';
this["APP"]["templates"]["preOrderMessage"] = '<div class="form-item form-type-checkbox form-item-pre-order"> <input required="required" type="checkbox" id="edit-pre-order-checkbox" data-validation-label="Pre order" name="pre_order_checkbox" value="1" class="form-checkbox"> <label for="edit-pre-order-checkbox">{{preOrderMessage}}<svg class="icon icon-select" aria-hidden="true"><use xlink:href="#check"></use></svg></label></div>';
this["APP"]["templates"]["productBanner"] = '<div aria-hidden="true" class="block-wrapper"><div class="header-content clearfix"><div class="region region-product-banner"><div class="product-banner-actions"> <span class="field-type-commerce-price">{{price}}</span> <button tabindex="-1" type="button" class="button add-to-cart ripple-effect" data-bind="banner-add-to-cart" data-track-banner-buy>{{add_to_cart}}</button></div><div class="product-banner-image"> <img src="{{#thumb}}{{thumb}}-70-70_n.jpg{{/thumb}}" alt="{{title}}"></div><div class="title-medium product-banner-title">{{title}}</div></div></div></div>';
this["APP"]["templates"]["productCardMetalTitration"] = ' <span class=\'field-name-field-metal-titrations-configurator\'>{{.}}</span>';
this["APP"]["templates"]["productConfiguratorParfume"] = '<ul class="product-configurator-form-options"> {{#products}}<li class="product-configurator-parfume ripple-effect"> <input type="radio" name="configurator-parfume" id="parfumer{{ sku }}" value="{{ sku }}" class="product-configurator-parfume-input"/> <label for="parfumer{{ sku }}" class="">{{#thumbs.0 }} <span class="product-configurator-icon"><svg aria-hidden="true" class="icon icon-check"><use xlink:href="#check"></use></svg><img src="{{uri}}&wid=30&hei=30" alt="{{ title }}"/></span> {{/thumbs.0 }} <span class="name">{{title}}</span></label></li> {{/products}}</ul>';
this["APP"]["templates"]["productDescriptionSplitter"] = '{{#remaining_copy}}<div id="intro-description"> {{{intro}}}</div><div id="read-more-description-set"> … <button class="read-more-toggle-description"> ' + Drupal.t('hermes-media-gallery-media-asset.view-more') + '</button></div><div id="remaining-description-set"> {{{remaining_copy}}} <button class="read-more-toggle-description"> ' + Drupal.t('node--hermes-product-display-default.less-details') + '</button></div> {{/remaining_copy}} {{^remaining_copy}}<div id="intro-description"> {{{intro}}}</div> {{/remaining_copy}}';
this["APP"]["templates"]["productHistory"] = '{{#products}}<li><div class="product-history-item"><a href="{{url}}" data-product="{{sku}}"><picture class="product-item-picture media-wrap media-wrap-square"><source media="all" data-srcset="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&, {{image}}&$product_page_b$&wid=800&hei=800&align=0,1&size=800,800&extend=40,40,40,40 2x"> <img data-src="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&" src="{{image}}&$product_page_b$&wid=400&hei=400&align=0,1&" alt="{{title}}"></picture></a></div></li> {{/products}}';
this["APP"]["templates"]["productImagesNav"] = '{{#images}}<li> <button class="product-images-navigation-button {{#active}}active{{/active}}" data-index="{{index}}" type="button"> <span class="product-images-navigation-image"><img class="lazyload" data-src="{{uri}}-88-88_b.jpg"/></span></button></li> {{/images}}';
this["APP"]["templates"]["productImagesPerfume"] = '<div class="{{{cssParameter}}}"> {{#images}}<div class="product-image-wrap"> <button type="button" class="product-image-button"> <span class="sr-only">' + Drupal.t('hermes.accessibility.image-zoom') + '</span><picture class="product-item-picture" data-src="{{{uri}}}-0-0-0-1680{{#portrait}}&-300-0-0-1680{{/portrait}}.jpg"><source data-srcset="{{{uri}}}-0-0-0-759.jpg, {{{uri}}}-0-0-0-1518.jpg 2x" media="(min-height: 506px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-555.jpg, {{{uri}}}-0-0-0-1111.jpg 2x" media="(min-height: 491px) and (max-height: 505px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-539.jpg, {{{uri}}}-0-0-0-1078.jpg 2x" media="(min-height: 436px) and (max-height: 490px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-479.jpg, {{{uri}}}-0-0-0-957.jpg 2x" media="(min-height: 351px) and (max-height: 435px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-385.jpg, {{{uri}}}-0-0-0-770.jpg 2x" media="(max-height: 350px) and (min-width: 768px)"><source data-srcset="{{{uri}}}-0-0-0-759.jpg, {{{uri}}}-0-0-0-1518.jpg 2x" media="(min-height: 506px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-555.jpg, {{{uri}}}-0-0-0-1111.jpg 2x" media="(min-height: 491px) and (max-height: 505px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-539.jpg, {{{uri}}}-0-0-0-1078.jpg 2x" media="(min-height: 436px) and (max-height: 490px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-479.jpg, {{{uri}}}-0-0-0-957.jpg 2x" media="(min-height: 351px) and (max-height: 435px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-385.jpg, {{{uri}}}-0-0-0-770.jpg 2x" media="(max-height: 350px) and (max-width: 767px)"><source data-srcset="{{{uri}}}-0-0-0-704.jpg 2x" media="(max-width: 320px)"> <img class="lazyload" data-src="{{{uri}}}-300-0-0-352.jpg" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"/></picture></button></div> {{/images}}</div>';
this["APP"]["templates"]["productImages"] = '{{#images}}<div class="product-image-wrap ratio-container"> {{#isImage}} <button type="button" class="product-image-button"> {{#zoom_image}} <span class="sr-only">{{zoom_image}}</span> {{/zoom_image}} {{^zoom_image}} <span class="sr-only">' + Drupal.t('hermes.accessibility.image-zoom') + '</span> {{/zoom_image}}<picture class="product-item-picture" data-src="{{{uri}}}-SIZE{{#portrait}}-SIZE{{/portrait}}{{^portrait}}{{#single}}-SIZE{{/single}}{{/portrait}}{{^portrait}}{{^single}}-SIZE{{/single}}{{/portrait}}_b.jpg"><source media="(min-width: 1024px)" data-srcset="{{{uri}}}-580{{#portrait}}-580{{/portrait}}{{^portrait}}{{#single}}-580{{/single}}{{/portrait}}{{^portrait}}{{^single}}-580{{/single}}{{/portrait}}_b.jpg, {{{uri}}}-1160{{#portrait}}-1160{{/portrait}}{{^portrait}}{{#single}}-1160{{/single}}{{/portrait}}{{^portrait}}{{^single}}-1160{{/single}}{{/portrait}}_b.jpg 2x"><source media="(min-width: 768px) and (max-width: 1023px)" data-srcset="{{{uri}}}-400{{#portrait}}-400{{/portrait}}{{^portrait}}{{#single}}-400{{/single}}{{/portrait}}{{^portrait}}{{^single}}-400{{/single}}{{/portrait}}_b.jpg, {{{uri}}}-800{{#portrait}}-800{{/portrait}}{{^portrait}}{{#single}}-800{{/single}}{{/portrait}}{{^portrait}}{{^single}}-800{{/single}}{{/portrait}}_b.jpg 2x"><source media="(min-width: 376px) and (max-width: 767px)" data-srcset="{{{uri}}}-330{{#portrait}}-330{{/portrait}}{{^portrait}}{{#single}}-330{{/single}}{{/portrait}}{{^portrait}}{{^single}}-330{{/single}}{{/portrait}}_b.jpg, {{{uri}}}-660{{#portrait}}-660{{/portrait}}{{^portrait}}{{#single}}-660{{/single}}{{/portrait}}{{^portrait}}{{^single}}-660{{/single}}{{/portrait}}_b.jpg 2x"><source media="(min-width: 321px) and (max-width: 375px)" data-srcset="{{{uri}}}-300{{#portrait}}-300{{/portrait}}{{^portrait}}{{#single}}-300{{/single}}{{/portrait}}{{^portrait}}{{^single}}-300{{/single}}{{/portrait}}_b.jpg, {{{uri}}}-600{{#portrait}}-600{{/portrait}}{{^portrait}}{{#single}}-600{{/single}}{{/portrait}}{{^portrait}}{{^single}}-600{{/single}}{{/portrait}}_b.jpg 2x"><source media="(max-width: 320px)" data-srcset="{{{uri}}}-300{{#portrait}}-300{{/portrait}}{{^portrait}}{{#single}}-300{{/single}}{{/portrait}}{{^portrait}}{{^single}}-300{{/single}}{{/portrait}}_b.jpg 2x"> <img class="lazyload" data-src="{{{uri}}}-320{{#portrait}}-320{{/portrait}}{{^portrait}}{{#single}}-320{{/single}}{{/portrait}}{{^portrait}}{{^single}}-320{{/single}}{{/portrait}}_b.jpg" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{title}}"></picture></button> {{/isImage}} {{#isVideo}}<div data-video="{{{name}}}" data-mute="1" data-autoplay="0" data-controls="1" data-product="1" class="media-wrap media-wrap-portrait-tall"><div class="media-video" id="vjs-container-{{{name}}}"></div></div> {{/isVideo}}</div> {{/images}}';
this["APP"]["templates"]["productInfoBikini"] = '<h1>{{title}}</h1> {{!---- Price of the bikini set ----}}<div class="field-type-commerce-price"> {{price}}</div> {{!---- Truncated description ----}}<div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><ul class="product-attributes"><li class="product-attributes-field_color_hermes product-attribute-has-options"> <span data-href="#configurator-field_color_hermes" data-field="field_color_hermes" class="product-attribute-item clearfix link-to-button-simply"><span class="product-attribute-title"><span>{{color.label}}</span> <span class="sr-only">:</span></span> <span class="product-attribute-value {{#thumb}}has-thumb{{/thumb}}">{{#color.attr_display}} <span>{{color.attr_display}}</span> {{/color.attr_display}} {{^color.attr_display}} <span>{{color.name}}</span> {{/color.attr_display}}<picture class="product-attribute-thumbnail"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{thumb}}-60-60.jpg" alt=""></picture></span></span></li><li class="product-attributes-field_ref_size_top product-attribute-has-options"> <button data-href="#configurator-field_ref_size_top" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" data-field="field_ref_size_top" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title"><span>' + Drupal.t('hermes_features_commerce_products.available-top-size') + '</span></span> <span class="product-attribute-value"><span>{{#top_bikini_selected}}{{top_bikini_selected.attributes.field_ref_size.name}}{{/top_bikini_selected}}{{^top_bikini_selected}}{{select}}{{/top_bikini_selected}}</span></span><div class="product-attribute-icon"> {{#bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.current_available-top-size') + ' {{bottom_bikini_selected.attributes.field_ref_size.name}} ' + Drupal.t('hermes_features_commerce_products.change_available-top-size') + '</span> {{/bottom_bikini_selected}} {{^bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.available-top-size') + '</span> {{/bottom_bikini_selected}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li><li class="product-attributes-field_ref_size_bot product-attribute-has-options"> <button data-href="#configurator-field_ref_size_bot" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" data-field="field_ref_size_bot" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title"><span>' + Drupal.t('hermes_features_commerce_products.available-bottom-size') + '</span></span> <span class="product-attribute-value"><span>{{#bottom_bikini_selected}}{{bottom_bikini_selected.attributes.field_ref_size.name}}{{/bottom_bikini_selected}}{{^bottom_bikini_selected}}{{select}}{{/bottom_bikini_selected}}</span></span><div class="product-attribute-icon"> {{#bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.current_available-bottom-size') + ' {{bottom_bikini_selected.attributes.field_ref_size.name}} ' + Drupal.t('hermes_features_commerce_products.change_available-bottom-size') + '</span> {{/bottom_bikini_selected}} {{^bottom_bikini_selected}} <span class="sr-only">' + Drupal.t('hermes_features_commerce_products.available-bottom-size') + '</span> {{/bottom_bikini_selected}}<svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li></ul>';
this["APP"]["templates"]["productInfoLook"] = '<h1>{{title}}</h1><div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><ul class="product-attributes"> {{#looks}}<li class="product-attributes-{{field}} product-attribute-has-options product-attribute-look"> <button data-href="#configurator-{{skulink}}" sku="{{sku}}" data-slot="{{idx}}" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply" id="details-slot-{{idx}}"><div class="product-info"> <span class="product-attribute-title">{{title}}</span> <span class="sr-only">, ' + Drupal.t('hermes.accessibility.page-product.color') + ':</span> <span class="product-attribute-color">{{#attributes.field_color_hermes.attr_display}} {{attributes.field_color_hermes.attr_display}} {{/attributes.field_color_hermes.attr_display}} {{^attributes.field_color_hermes.attr_display}} {{attributes.field_color_hermes.name}} {{/attributes.field_color_hermes.attr_display}}</span> <span class="sr-only">,</span> <span class="product-attribute-price">{{price}}</span></div> <span class="product-attribute-size" aria-hidden="true">{{#size_attribute_text}} {{size_attribute_text}} {{/size_attribute_text}} {{^size_attribute_text}} {{attributes.field_ref_size.name}} {{/size_attribute_text}}</span> <span class="sr-only size-accessibility">, ' + Drupal.t('hermes.accessibility.page-product.select-size') + '</span><div class="product-attribute-image"> {{#thumbs.0 }} <img nopin="nopin" class="product-attribute-thumbnail" src="{{uri}}-60-60.jpg" alt=""> {{/thumbs.0 }}</div><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button><div class="form-item form-type-checkbox"> <input type="checkbox" id="product-look-{{idx}}" name="" value="{{idx}}" class="form-checkbox" disabled> <label for="product-look-{{idx}}"><span class="sr-only">' + Drupal.t('hermes.product.look.checkbox.add.product') + '</span><svg aria-hidden="true" class="icon icon-select" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#check"></use></svg></label></div></li> {{/looks}}</ul><div class="products-total-price"><div class="title">' + Drupal.t('hermes_product.total-for-selection') + '</div><div class="price">0</div></div>';
this["APP"]["templates"]["productInfoPerfume"] = '<h1>{{title}}</h1><div class="field-type-commerce-price"> {{price}} {{#unit_price}}<span class="fragrance-price-per-unit">{{unit_price}}</span>{{/unit_price}}</div><div class="field-name-field-description"><div class="field-item even"> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span><div class="trancated"> {{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></div> {{/remaining_copy}}</div></div><div class="field-name-measurements"> {{#measurements}} {{measurements}} {{/measurements}}</div><ul class="product-attributes"> {{#products}}<li class="product-attributes-{{field}} product-attribute-has-options"> <button data-href=\'#configurator-{{sku}}-{{idx}}\' sku="{{sku}}" title="" aria-label="{{title}}, ' + Drupal.t('hermes.accessibility.page-product.change') + '" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply"> <span class="product-attribute-title">{{title}}</span> <span class="product-attribute-value">{{#images}}<picture class="product-attribute-thumbnail"><source srcset="{{images}}-60-60-q80.jpg" media="(min-width: 768px)"><source srcset="{{images}}-60-60-q80.jpg" media="(max-width: 767px)"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{images}}-60-60-q80.jpg" alt="{{title}}{{#name}} - {{name}}{{/name}}"></picture> {{/images}}</span><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li> {{/products}}</ul>';
this["APP"]["templates"]["productInfo"] = '<h1>{{title}}</h1><p class="field-type-commerce-price"> {{price}} {{#unit_price}}<span class="fragrance-price-per-unit">{{unit_price}}</span>{{/unit_price}}</p> {{#eco_tax}}<p class="field-type-commerce-eco-tax"> <span>{{eco_tax}}</span></p> {{/eco_tax}}<div class="field-name-field-description"><div class="field-item even"><p> {{{intro}}} {{#remaining_copy}} <span class="read-more">… <button class="read-more-toggle">{{read_more}}</button></span> <span class="trancated">{{{remaining_copy}}} <button class="read-more-toggle">{{read_less}}</button></span> {{/remaining_copy}}</p></div></div> {{#metals_titrations}}<p class="field-name-field-metals-titrations"> {{.}}</p> {{/metals_titrations}} {{#designer}}<p class="field-name-field-designer"> {{{designer}}}</p> {{/designer}} {{#measurements}}<p class="field-name-field-measurements"> {{.}}</p> {{/measurements}}<ul class="product-attributes"> {{#attributes}}<li class="product-attributes-{{field}} product-attribute-has-options"> <button data-href="#configurator-{{field}}" data-field="{{field}}" aria-label="{{accessibility_select_button}}" aria-haspopup="dialog" aria-expanded="false" aria-controls="panel-configurator" class="{{#is_disabled}}disabled {{/is_disabled}}product-attribute-item tray-trigger ripple-effect clearfix link-to-button-simply" {{#is_disabled}}disabled{{/is_disabled}}> <span class="product-attribute-title">{{label}}<span>{{#count}}({{count}}){{/count}}</span></span> <span class="product-attribute-value{{#thumb}} has-thumb{{/thumb}}{{#hex}} has-thumb{{/hex}}"><span>{{name}}</span> {{#thumb}}<picture class="product-attribute-thumbnail"><source srcset="{{thumb}}&$product_page_b$&qlt=80&wid=60&hei=60" media="(min-width: 768px)"><source srcset="{{thumb}}&$product_page_b$&qlt=80&wid=60&hei=60" media="(max-width: 767px)"> <img nopin="nopin" class="product-attribute-thumbnail" src="{{thumb}}&qlt=80&wid=60&hei=60" alt="{{title}} - {{name}}"></picture> {{/thumb}} {{#hex}}<span class="hex" style="background: #{{hex}};"></span>{{/hex}}</span><div class="product-attribute-icon"><svg nopin="nopin" class="icon icon-arrow-right" aria-hidden="true" focusable="false"><use xlink:href="#arrow-right"></use></svg></div></button></li> {{/attributes}}</ul>';
this["APP"]["templates"]["productLocatorSearch"] = '<div class="store-search-product-locator"><div class="container-items"><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><input id="searchfield" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '" title="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '"/> <button id="btclose" class="close" title="' + Drupal.t('page--hermes-global--find-store.reset-search-field') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="' + Drupal.t('page--hermes-global--find-store.use-my-current-location') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul></ul></div></div></div><div class="container-find-button"> <input id="btfind" class="find-btn" type="submit" name="submit" value="' + Drupal.t('hermes_commerce.find') + '"/></div></div>';
this["APP"]["templates"]["regionOptions"] = '<option data-cs-mask value="" selected="selected" disabled="disabled">' + Drupal.t('hermes_global.select') + '</option> {{#options}}<option data-cs-mask value="{{region_id}}">{{name}}</option> {{/options}}';
this["APP"]["templates"]["scene7productzoomvideo"] = '<div id="s7_videoview" class="zoom-player"></div> <a href="#" class="close-zoom-player"><svg aria-hidden="true" class="icon close"><use xlink:href="#close"></use></svg></a>';
this["APP"]["templates"]["securityIcons"] = '<p class="checkout-reassurance-introduction">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.indroduction') + '</p><section><h4 id="payment-secure-system" class="sr-only"> ' + Drupal.t('hermes.checkout.payment.accessibility.secure_system') + '</h4><ul aria-labelledby="payment-secure-system"> {{#list}}<li><img nopin="nopin" src="/sites/all/themes/custom/hermes/img/3ds/logo_{{img}}.png" alt="{{alt}}"></li> {{/list}}</ul></section> <a class="checkout-reassurance-more" href="#">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.more-link-label') + '</a><p class="checkout-reassurance-details">' + Drupal.t('form--hermes-checkout--payment.3ds-reassurance.details') + '</p>';
this["APP"]["templates"]["shippingInfo"] = '<div class="block-checkout-shipping-message"><div class="text-checkout-shipping-message">' + Drupal.t('hermes-checkout-delivery-form.shipping-message') + '</div> <a href="#" data-tray-trigger="tray-cart" class="link-shipping-message mobile-only">' + Drupal.t('hermes-checkout-delivery-form.see-cart') + '</a></div>';
this["APP"]["templates"]["shippingOptions"] = '<ul class="checkout-shipping-methods"> {{^no_address}} {{#shipping_methods}}<li class="address select-list-item" id="{{method}}"><div class="separator-border-shipping-method nth-{{index}}"></div> <label for="shipping-{{method}}" class="form-radio {{#is_checked}}active-method-address{{/is_checked}}"><input data-cs-mask id="shipping-{{method}}" name="shipping" value="{{method}}" type="radio" {{#is_alone}}disabled{{/is_alone}} {{#is_checked}}checked{{/is_checked}} tabindex="0"><span class="container-radio-shipping"><div class="radio-shipping-method"> <span class="delivery-name">{{title}}</span> {{#duration}} <span>({{duration}})</span> {{/duration}}</div> <span class="price-shipping-method">{{price}}</span></span></label></li> {{/shipping_methods}} {{/no_address}}</ul>';
this["APP"]["templates"]["sociallogin"] = '{{#networks}}<li> <button type="button" class="button button-icon button-social-network" data-provider="{{socialnetwork}}"><svg class="icon icon-{{socialnetwork}}" aria-hidden="true"><use xlink:href="#{{socialnetwork}}"></use></svg><span>{{socialnetwork}}</span></button></li> {{/networks}}';
this["APP"]["templates"]["socialloginmore"] = '<li class="more-item"> <button type="button" class="button button-icon"><svg class="icon icon-moredots" aria-hidden="true"><use xlink:href="#moredots"></use></svg><span>' + Drupal.t('hermes.modules.social_connect.sociallogin.more') + '</p></span></button></li>';
this["APP"]["templates"]["storeLocatorBubble"] = '<div class="bubble"><div class="close-button"><svg class="btn close icon icon-close search-shrink" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></div><h4><a href="{{path}}">{{short_title}}</a></h4><p class="h-adr{{#distanceSearch}} ds{{/distanceSearch}}"> <a href="{{path}}">{{formatted_address}}</a></p> {{#distanceSearch}}<div class="distance"> {{distanceFrom}}km</div> {{/distanceSearch}}<div class="tel"><svg class="btn phone icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg>{{tel}} <a href="tel://{{store_phone_number}}">{{store_phone_number}}</a></div> {{#human_opening_time}}<p> {{#human_opening_time.closed}} {{#human_opening_time.to_opened}} {{opens_in}} {{human_opening_time.to_opened}} {{/human_opening_time.to_opened}} {{^human_opening_time.to_opened}} {{#human_opening_time.today}} {{open_today_from}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.today}} {{#human_opening_time.tomorrow}} {{opens_tomorrow}} {{at}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.tomorrow}} {{#human_opening_time.week_day}} {{opens}} {{human_opening_time.week_day}} {{at}} {{#human_opening_time.calculate}}{{human_opening_time.current_date.0}}{{/human_opening_time.calculate}} {{/human_opening_time.week_day}} {{/human_opening_time.to_opened}} {{^human_opening_time.calculate}} {{#human_opening_time.date}} {{0}} {{to}} {{1}}<br/> {{/human_opening_time.date}} {{/human_opening_time.calculate}} {{/human_opening_time.closed}} {{#human_opening_time.opened}} {{#human_opening_time.to_closed}} {{closes_in}} {{human_opening_time.to_closed}} {{/human_opening_time.to_closed}} {{^human_opening_time.to_closed}} {{open_today_until}} {{human_opening_time.current_date.1}} {{/human_opening_time.to_closed}} {{/human_opening_time.opened}}</p> {{/human_opening_time}} <a href="{{path}}">{{more_info}}</a><br/> <a href="https://www.google.com/maps/dir/{{currentPos}}/{{geo_coordinates.latitude}},{{geo_coordinates.longitude}}" target="_blank">{{get_directions}}</a><br/></div>';
this["APP"]["templates"]["suggestions"] = '<dd{{#keywords}} class="line"{{/keywords}}><ul id="search-listbox" role="listbox" aria-labelledby="search-suggest-label"> {{#suggestionGroups}} {{#suggestions}} {{#categories}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{items}} {{link}}</span></li> {{/categories}} {{#products}}<li role="option" id="{{suggestId}}" data-action="{{action}}" data-link="{{product_link}}" data-href="{{product}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/products}} {{#content}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/content}} {{#stores}}<li role="option" id="{{suggestId}}" data-href="{{url}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/stores}} {{#keywords}}<li role="option" id="{{suggestId}}" data-href="/{{urllocale}}/{{searchurlkey}}?s={{searchterm}}"> <span>{{{hilite}}} {{#total}}({{total}}){{/total}}</span> <span class="sr-only">{{link}}</span></li> {{/keywords}} {{/suggestions}} {{/suggestionGroups}}</ul></dd>';
this["APP"]["templates"]["trayFilterButton"] = '<div id=\'button-filter-section\'> <button type=\'button\' class=\'button\'>' + Drupal.t('hermes-search-result.button-label') + '</button></div>';
this["APP"]["templates"]["trayProductLocator"] = '<h3 class="sr-only">' + Drupal.t('hermes.commerce.product_locator.product_information.label') + '</h3><div class="current-product-tray-product-locator"><div class="infos-tray-product-locator"> <img src="{{media}}" alt="" class="tray-product-locator-media"><p class="tray-product-locator-label">{{title}}</p><p class="tray-product-locator-price">{{price}}</p><div class="tray-product-locator-details"> {{#color}}<p><span class="tray-product-locator-details-characteristic">' + Drupal.t('hermes.commerce.product_locator.color.label') + ':</span> {{color}}</p> {{/color}} {{#size}}<p> <span id="tray-product-locator-details-characteristic-size" class="tray-product-locator-details-characteristic">' + Drupal.t('hermes.commerce.product_locator.size.label') + ':</span> <span class="size-value">{{size}}</span> <button id="display-product-locator-configurator" class="display-product-locator-configurator" aria-expanded="false" aria-controls="product-locator-configurator" aria-describedby="tray-product-locator-details-characteristic-size">' + Drupal.t('page-hermes-product-locator-modify-button') + '</button></p> {{/size}}</div></div></div>';
this["APP"]["templates"]["userAddress"] = '{{#addresses}}<li class="address select-list-item"><div class="separator-border-shipping-method nth-{{index}}"></div> <label for="{{context}}-{{address_id}}" class="form-radio {{#is_default_shipping}}active-method-address{{/is_default_shipping}}"><input id="{{context}}-{{address_id}}" name="delivery" value="{{address_id}}" type="radio" {{#ariaDescribBy}}aria-describedby="{{ariaDescribBy}}"{{/ariaDescribBy}} {{#isAlone}}disabled{{/isAlone}} {{#is_default_shipping}}checked{{/is_default_shipping}}/> <span><span data-cs-mask class="delivery-name">{{name}}</span> {{#isJapan}} <span data-cs-mask class="delivery-name">{{nameKatakana}}</span> {{/isJapan}} <span data-cs-mask class="delivery-address">{{{address}}}</span> <span data-cs-mask class="delivery-telephone">{{telephone}}</span></span></label> <button class="edit-address-checkout tray-trigger link-to-button-edit-address" type="button" data-address="{{address_id}}" aria-controls="tray-edit-address" aria-expanded="false" aria-haspopup="dialog"> ' + Drupal.t('hermes_checkout.user.profile.address.edit.label') + '</button></li> {{/addresses}} {{^addresses}} {{#message}}<li> {{message}}</li> {{/message}} {{/addresses}}';
this["APP"]["templates"]["userPaymentMethods"] = '{{#convertedPayments}}<li class="payment select-list-item"><div class="profile-info-list-item clearfix"> <label for="payment{{id}}" class="pull-left">{{type}} <span class="card-number">***-{{endNumbers}}</span> <span class="expire-date">{{expiryMonth}}/{{expiryYear}}</span> {{#expired}} <span class="card-expired">' + Drupal.t('hermes-account--profile.expired') + '</span> {{/expired}}</label> <a href="#" class="edit-payment-address pull-right">' + Drupal.t('hermes-account--profile.remove') + '</a></div></li> {{/convertedPayments}} {{^convertedPayments}}<li class="payment select-list-item"><div class="profile-info-list-item clearfix"> ' + Drupal.t('hermes-account--profile-info-page.no-card-information') + '</div></li> {{/convertedPayments}}';
this["APP"]["templates"]["userProfileAsia"] = '<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.name.label') + '</p><p data-cs-mask class="user-full-name"> {{templateName}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_global.telephone') + '</p><p data-cs-mask class="user-email">{{phone_login}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.password.label') + '</p><p class="user-password">*******</p></div> {{#isChina}}<div class="single-detail-row"> {{#is_binded_wechat}}<p class="label">' + Drupal.t('hermes_account_info_wechat-linked') + '</p> {{/is_binded_wechat}} {{^is_binded_wechat}}<p class="label">' + Drupal.t('hermes_account_info_wechat-not-linked') + '</p> {{/is_binded_wechat}}</div> {{/isChina}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_global.personal_address') + '</p><p data-cs-mask class="user-billing-address">{{{billingAddress}}}{{^billingAddress}}--{{/billingAddress}}</p></div> {{^hasFakeMail}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.email.label') + '</p><p data-cs-mask class="user-email">{{email}}</p></div> {{/hasFakeMail}}';
this["APP"]["templates"]["userProfile"] = '<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.name.label') + '</p><p data-cs-mask class="user-full-name"> {{templateName}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.email.label') + '</p><p data-cs-mask class="user-email">{{email}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.password.label') + '</p><p class="user-password">*******</p></div> {{#hasDob}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.DOB.label') + '</p><p data-cs-mask class="user-birthday">{{^dob}}--{{/dob}}{{dob}}</p></div> {{/hasDob}}<div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.billingaddress.label') + '</p><p data-cs-mask class="user-billing-address">{{{billingAddress}}}{{^billingAddress}}--{{/billingAddress}}</p></div><div class="single-detail-row"><p class="label">' + Drupal.t('hermes_checkout.user.profile.telephone.label') + '</p><p data-cs-mask class="user-telephone">{{telephone}}{{^telephone}}--{{/telephone}}</p></div>';
this["APP"]["templates"]["web2shopCheckoutShop"] = '{{#shops}}<li class="select-list-item"> <button class="another-store-link tray-trigger link-to-button-edit-address editAddressWeb2Shop" data-bind="find-store-tray-secondary" type="button" aria-controls="tray-find-store" aria-expanded="false" aria-haspopup="dialog">{{openTray}}</button> <label data-cs-mask for="shop-pickup-{{shop_id}}" class="form-radio"><input id="shop-pickup-{{shop_id}}" name="webtoshop_id" value="{{shop_id}}" type="radio" {{#selected}}checked{{/selected}} aria-describedby="w2s-list"> <span><span class="shop-smallname">{{company}}</span> <span class="shop-address2 has-side-icon-left">{{{constructedAddress}}}</span> {{#shipping_duration}} <span class="shop-shipping-duration has-side-icon-left"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg>{{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</span> {{/shipping_duration}} <span class="shop-phone icon-left-has-side"><a class="phone-checkout" href="tel:{{telephone}}"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg> {{telephone}}</a></span> {{#hasOpeningHours}} <span class="shop-opening-container has-side-icon-left"><svg nopin="nopin" class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg>{{#openingHours}} <span class="shop-opening">{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</span> {{/openingHours}}</span> {{/hasOpeningHours}} {{#hasCollectorVerificationBlock}} <span class="collector-verification-information-block">{{collectorVerification}}</span> {{/hasCollectorVerificationBlock}}</span></label></li> {{/shops}} {{^shops}}<li role="alert" class="find-store-placeholder"> <input class="hidden-form-element" aria-hidden="true" id="empty-input-select-store-wts" name="webtoshop-id" type="radio"></li> {{/shops}}';
this["APP"]["templates"]["web2shopFindStoreTrayShopEntry"] = '<ul class="stores-list"> {{#shops}}<li data-cs-mask class="checkout-web2shop-tray ripple-effect" data-bind="shop-item" data-id="{{shop_id}}" tabindex="0"><h3 class="shop-name">{{company}}</h3><p class="shop-distance">{{calculatedDistanceHumanReadable}}</p><div class="container-elements"><p class="shop-address">{{{constructedAddress}}}</p> <button class="container-icon-map"> <span class="shop-arrow"><svg nopin="nopin" class="icon icon-pin-map-wts" aria-hidden="true"><use xlink:href="#map-pin"></use></svg> <span class="plan-link-url">{{showPlan}}</span></span></button></div> {{#shipping_duration}}<div class="web2shop-shipping-duration"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg><span class="sr-only">{{deliveryDelay}}</span><div class="container-shipping-duration"><p> {{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</p></div></div> {{/shipping_duration}}<div class="web2shop-phone"><svg class="icon icon-phone" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg><div class="container-phone"><p> {{telLabel}} {{telephone}}</p></div></div> {{#hasOpeningHours}}<div class="web2shop-opening-hours"><svg class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg><span class="sr-only">{{openingClosingHours}}</span><div class="container-opening-hours"> {{#openingHours}}<p>{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</p> {{/openingHours}}</div></div> {{/hasOpeningHours}}</li> <button class="button button-accent ripple-effect" type="submit" data-shop-id="{{shop_id}}" data-bind="select-shop"> {{selectWebToShopStoreButtonLabel}}</button><div class="item-favorite"></div> {{/shops}}</ul>';
this["APP"]["templates"]["web2shopShopTrayContainer"] = '<div class="checkout-web2shop shop-details"><div class="shop-details-map-wrapper" data-bind="shop-details-map-wrapper"></div><div class="shop-details-data-wrapper" data-bind="shop-details-data-wrapper"></div></div>';
this["APP"]["templates"]["web2shopShopTrayData"] = '{{#shop}}<p class="shop-distance">{{calculatedDistanceHumanReadable}}</p><p class="shop-address">{{{constructedAddress}}}</p> {{#shipping_duration}}<div class="web2shop-shipping-duration"><svg class="icon icon-box" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#box"></use></svg><span class="sr-only">{{deliveryDelay}}</span><div class="container-shipping-duration"><p> {{shippingDurationPreLabel}} {{shipping_duration}} {{shippingDurationPostLabel}}</p></div></div> {{/shipping_duration}}<div class="web2shop-phone"><svg class="icon icon-phone" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#phone"></use></svg><div class="container-phone"><p> {{telLabel}} {{telephone}}</p></div></div> {{#hasOpeningHours}}<div class="web2shop-opening-hours"><svg class="icon icon-clock" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#clock"></use></svg><span class="sr-only">{{openingClosingHours}}</span><div class="container-opening-hours"> {{#openingHours}}<p>{{dayNames}}{{#hours}}: {{hours}}{{/hours}}</p> {{/openingHours}}</div></div> {{/hasOpeningHours}} <button class="button button-accent ripple-effect" type="submit" data-shop-id="{{shop_id}}" data-bind="select-shop"> {{selectWebToShopStoreButtonLabel}}</button> {{/shop}}';
this["APP"]["templates"]["zoomImage"] = '<div class="product-image-wrap"><picture class="product-item-picture"><source srcset="{{{uri}}}&wid=850&hei=850" media="(min-width: 1024px)"><source srcset="{{{uri}}}&wid=800&hei=800" media="(min-width: 951px) and (max-width: 1023px)"><source srcset="{{{uri}}}&wid=700&hei=700" media="(min-width: 768px) and (max-width: 950px)"><source srcset="{{{uri}}}&wid=900&hei=900" media="(min-width: 574px) and (max-width: 767px)"><source srcset="{{{uri}}}&wid=700&hei=700" media="(min-width: 321px) and (max-width: 573px)"><source srcset="{{{uri}}}&wid=400&hei=400" media="(max-width: 320px)"> <img src="{{{uri}}}&wid=400&hei=400" alt="{{ title }}"></picture></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmCustomerInfos"] = '<div class="infos-tray-ereservation-customer"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.customer.title') + '</h3><div class="customer-infos"><p><strong>{{civility}} {{firstname}} {{lastname}}</strong></p><p>{{email}}</p></div><p>' + Drupal.t('hermes.ereservation.tray.request_confirm.confirm.text') + '</p></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmProductInfos"] = '<div class="infos-tray-ereservation-product"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.product.title') + '</h3><div class="product-block"><div class="product-image"> <img src="{{media}}" alt="" class="product-media"></div><div class="product-infos"><p class="product-label">{{title}}</p><p class="product-price">{{price}}</p> {{#color}}<p><span>' + Drupal.t('hermes-global-translations.color') + ':</span> {{color}}</p> {{/color}} {{#size}}<p> <span>' + Drupal.t('hermes.accessibility.page-product.size') + ':</span> <span>{{size}}</span></p> {{/size}}</div> {{#showTaxesDiv}}<div class="product-taxes"><p><span>' + Drupal.t('hermes.ereservation.tray.request_confirm.taxes.text') + '</span></p></div> {{/showTaxesDiv}}</div></div>';
this["APP"]["templates"]["trayEreservationRequestConfirmStoreInfos"] = '<div class="infos-tray-ereservation-store store-product-detail"><div class="colresponsive"><h3 class="sr-only">' + Drupal.t('hermes.ereservation.tray.request_confirm.store.title') + '</h3><h4 class="shop-title title-small">{{name}}</h4><p class="address"> {{street_address1}}{{#street_address2}}, {{street_address2}}{{/street_address2}}{{#street_address3}}, {{street_address3}}{{/street_address3}}, {{#postal_code}}{{postal_code}} {{/postal_code}}{{city}}, {{country}}</p><div class="inline-icon"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg><p class="phone"> <a href="tel:{{phone_number_link_format}}"><span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-phone') + '</span> {{phone_number}}</a></p></div><div class="inline-icon store-limit-info-km"><svg nopin="nopin" class="icon icon-pin-map-wts" aria-hidden="true"><use xlink:href="#find-a-store"></use></svg><p class="store-limit-info-km-num"> <span aria-hidden="true">{{distance}} km</span></p></div></div></div>';
this["APP"]["templates"]["accountCreated"] = '<div class="info-banner-container"> {{^createbywechat}}<p data-cs-mask>' + Drupal.t('hermes-global-translations.your-account-has-been-created-info-banner') + '</p> {{/createbywechat}} {{#createbywechat}}<p data-cs-mask>' + Drupal.t('hermes-global-translations.your-account-has-been-created-info-banner-wechat') + '</p> {{/createbywechat}} <button class="close-info-banner" aria-label="' + Drupal.t('hermes_global.close-info-banner-accessibility') + '" id="close-info-banner"><svg class="icon icon-close-info-banner" nopin="nopin" viewBox="0 0 382 380"><use xlink:href="#close"></use></svg></button></div>';
this["APP"]["templates"]["forgotPassword"] = '<section class="row-page-layout hidden"><div class="content-block colored-background container-mginza"><div class="forgot-password-container"><div class="forgot-password-information"><h2 class="title-login">' + Drupal.t('hermes.ginza.account.reset-password') + '</h2><p>' + Drupal.t('hermes.ginza.account.reset-password-message') + '</p></div><div class="forgot-password-block"><form id="form-ginza-house-forgot" method="post"><div class="form-item container-fieldset"> <label for="forgot-password-ginza" class="title-small">' + Drupal.t('hermes.ginza.account.email-address') + '</label> <input class="forgot-password form-text form-email required" data-validation-label="Email" required="required" type="email" id="forgot-password-ginza" name="email" size="60" maxlength="128"></div> <button type="submit" class="button form-submit ripple-effect reset-password-ginza"> <span class="loader-reset-password">' + Drupal.t('hermes.ginza.account.submit') + '</span></button></form></div></div><div class="message-forgot-message hidden"><h2 class="title-login"> ' + Drupal.t('hermes.ginza.forgot-password-error-message') + '</h2> <span class="description-forgot">' + Drupal.t('hermes.ginza.forgot-password-error-description') + '</span></div></div></section>';
this["APP"]["templates"]["loginGinza"] = '<section class="row-page-layout"><div class="content-block colored-background container-mginza"><div class="login-wrapper ginza-login-wrapper"> {{#login}}<div class="reservation-redirect-ginza"> <a href="<?= _hermes_ginza_url_mypage() ?>">' + Drupal.t('hermes.ginza.login-reservation-message') + '</a></div> {{/login}} {{^login}}<h2 class="title-login">' + Drupal.t('hermes.ginza.account.title') + '</h2><p class="description-login">' + Drupal.t('hermes.ginza.account.new-member-description') + '</p><div><h3>' + Drupal.t('hermes.ginza.account.login') + '</h3></div><form id="form-ginza-house-login" method="post"><div class="login-container"><div class="email-login"> <label class="title-small" for="login-email-ginza">' + Drupal.t('hermes.ginza.account.email-address') + '</label><div class="form-item container-fieldset"> <input class="login-tray-email form-text form-email email-ginza-login required" data-validation-label="Email" required="required" type="email" id="login-email-ginza" name="email" value="" size="60" maxlength="128" pattern=".+@.+\\..+"></div><p class="create-account-ginza-desktop">' + Drupal.t('hermes.ginza.account.new-member') + '</p></div><div class="password-login"> <label for="login-password-ginza" class="password-label title-small">' + Drupal.t('hermes.ginza.account.password') + '</label><div class="form-item container-fieldset"> <input class="form-text password-ginza-login required" data-validation-label="Password" autocomplete="on" required="required" type="password" id="login-password-ginza" name="password" size="60" maxlength="128"></div> <button type="button" class="forgot-password-ginza">' + Drupal.t('hermes.ginza.account.forgot-password') + '</button> <button type="submit" class="button form-submit ripple-effect login-ginza-house"> <span class="loader-login-ginza" data-track="data-track-account-signin-button">' + Drupal.t('hermes.ginza.account.login') + '</span></button><p class="create-account-ginza-mobile">' + Drupal.t('hermes.ginza.account.new-member') + '</p> <button type="button" class="button form-submit ripple-effect create-account"> <span class="submit-text loader-sign-in-tray" data-track="data-track-account-signin-button">' + Drupal.t('hermes.ginza.account.register-member') + '</span></button></div></div></form></div><div class="reservation-redirect-ginza"> <a href="<?= _hermes_ginza_url_mypage() ?>">' + Drupal.t('hermes.ginza.login-reservation-message') + '</a></div> {{/login}}</div></section>';
this["APP"]["templates"]["scheduleGinza"] = '<section class="row-page-layout"><div class="content-block colored-background container-mginza"><h2 class="schedule-title"> ' + Drupal.t('hermes.ginza.calendar.title') + '</h2><div class="row-ginza"> {{#schedules}}<div class="column-container"> <time class="date-ginza">{{year}}' + Drupal.t('hermes_global.year') + '{{month}}' + Drupal.t('hermes_global.month') + '{{seanceDay}}' + Drupal.t('hermes_global.day') + ' {{#day}} ({{day}}){{/day}}</time><ul class="column-ginza"> {{#programs}} {{#reserved}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link reserved" href="<?= _hermes_ginza_url() ?>/reserve/#/{{pid}}">' + Drupal.t('hermes.ginza.calendar.status-reserved') + '</a></li> {{/reserved}} {{^reserved}} {{#isReservable}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link {{classStatus}}" href="<?= _hermes_ginza_url() ?>/reserve/#/{{pid}}">{{status}}</a></li> {{/isReservable}} {{^isReservable}}<li class="hour-ginza"> <time>{{start_time}}</time> - <time>{{end_time}}</time> <a class="reservation-link next-seance">' + Drupal.t('hermes.ginza.calendar.status-next-reserved') + '</a></li> {{/isReservable}} {{/reserved}} {{/programs}}</ul></div> <button id="ginzaHouse" class="button button-box ripple-effect ginza-house hidden"> ' + Drupal.t('hermes.ginza.calendar.see-more') + '</button> {{/schedules}} {{^schedules}}<p class="past-date">' + Drupal.t('hermes.ginza.calendar.past-date') + '</p> {{/schedules}}</div> {{#schedules.length}}<div class="container-legend-ginza"><ul class="legend-column"><li class="legend-row"><p class="legend-button available">' + Drupal.t('hermes.ginza.calendar.status-available') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-available-description') + '</p></li><li class="legend-row"><p class="legend-button few-seats-left">' + Drupal.t('hermes.ginza.calendar.status-few-seats-left') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-few-seats-left-description') + '</p></li><li class="legend-row"><p class="legend-button spare-seat">' + Drupal.t('hermes.ginza.calendar.status-spare-seat') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-spare-seat-description') + '</p></li><li class="legend-row"><p class="legend-button reserved">' + Drupal.t('hermes.ginza.calendar.status-reserved') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-reserved-description') + '</p></li><li class="legend-row"><p class="legend-button full">' + Drupal.t('hermes.ginza.calendar.status-full') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-full-description') + '</p></li><li class="legend-row"><p class="legend-button next-seance">' + Drupal.t('hermes.ginza.calendar.status-next-reserved') + '</p><p class="legend-title">' + Drupal.t('hermes.ginza.calendar.status-next-reserved-description') + '</p></li></ul></div> {{/schedules.length}}</div></section>';
this["APP"]["templates"]["addToCart"] = '<div class="notification-add-to-cart"> <button type="button" class="notification-close" aria-label="' + Drupal.t('hermes.accessibility.close_tray') + '"> <span class="sr-only">' + Drupal.t('hermes.accessibility.close_tray') + '</span><svg aria-hidden="true" class="icon icon-close" focusable="false"><use xlink:href="#cross"></use></svg></button><svg class="icon icon-cart" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cart-add"></use></svg><h2 class="message" id="notification-message">' + Drupal.t('hermes_notification.cart.add') + '</h2><p class="sub-message"><strong>' + Drupal.t('hermes_notification.cart.standard-delivery') + '</strong></p> <button class="button button-accent notification-cta" type="button" aria-controls="tray-cart" aria-expanded="false" aria-haspopup="dialog"> <span>' + Drupal.t('hermes-global-translations.view-cart') + '</span></button></div>';
this["APP"]["templates"]["podcastControls"] = '<div class="player-podcast"> <input type="range" data-action="progress_bar" class="slider" value="0" max="100" aria-label="Timeline" aria-valuetext="Loading"/></div><p class="editorial-block-paragraph" aria-hidden="true"> <span data-action="current_time">00:00</span><span data-action="total_time">-{{duration}}</span></p><p data-action="accessibility_time" class="sr-only">{{accessibilityTime}}</p> <button class="volume-button" data-action="mute_button"> <span class="sr-only">Mute</span><svg class="icon icon-volume" aria-hidden="true"><use xlink:href="#volume-on"></use></svg></button> <button data-action="rewind_button"> <span class="sr-only">Rewind by 15 seconds</span><svg class="icon icon-backward" aria-hidden="true"><use xlink:href="#rw-btn"></use></svg></button> <button class="play-button" data-action="play_button"> <span class="sr-only">Play</span><svg class="icon icon-play-pause" aria-hidden="true"><use xlink:href="#play-btn"></use></svg></button> <button data-action="forward_button"> <span class="sr-only">Forward by 15 seconds</span><svg class="icon icon-forward" aria-hidden="true"><use xlink:href="#fw-btn"></use></svg></button> {{#subscribe.length}} <button class="subscribe-button" data-action="subscribe_button"> <span class="sr-only">Subscribe to podcast</span><svg class="icon icon-subscribe" aria-hidden="true"><use xlink:href="#subscribe-btn"></use></svg></button><ul class="subscribe-dropdown hide-dropdown hide"> {{#subscribe}}<li class="subscribe-list"> <img class="subscribe-img" src="{{icon_url}}" alt="{{icon_alt}}"/> <a class="subscribe-link" href="{{link_url}}" target="_blank" data-track-subscription>{{link_title}}</a></li> {{/subscribe}}</ul> {{/subscribe.length}}';
this["APP"]["templates"]["podcastDescription"] = '<h2 class="editorial-block-title"> {{title}}</h2><p class="editorial-block-text"> {{description}}</p>';
this["APP"]["templates"]["podcastImage"] = '<img src="{{srcImage}}" alt=""/>';
this["APP"]["templates"]["podcastWrapper"] = '<div class="container-player"><podcast-description></podcast-description><podcast-controls></podcast-controls></div><div class="container-image"><podcast-image class="grey-background"></podcast-image></div>';
this["APP"]["templates"]["storeDetailsList"] = '<ul id="list-store"></ul>';
this["APP"]["templates"]["storeDetails"] = '<div class="store-detail"><div class="colresponsive"><h4 class="shop-title title-medium"> {{#storePageAngular}} <a href="{{base_url_to_store_page}}/{{hermes_url_locale_to_store_page}}/find-store/{{country_store_to_store_page}}/{{city_store_to_store_page}}/{{name_store_to_store_page}}-{{store_id}}/">{{/storePageAngular}} {{short_title}} {{#storePageAngular}}</a> {{/storePageAngular}}</h4><p class="address"> {{#address_store_detail_US}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{area}} {{postal_code}}{{#areaOrPostal}},{{/areaOrPostal}}<br/>{{country}} {{/address_store_detail_US}} {{#address_store_detail_JP}} {{postal_code}} {{country}} {{city}} {{street_address1}} {{#street_address2}}{{street_address2}}{{/street_address2}} {{#street_address3}}{{street_address3}}{{/street_address3}} {{/address_store_detail_JP}} {{#address_store_detail_SG_MY}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{#postal_code}}{{postal_code}},{{/postal_code}} {{country}} {{/address_store_detail_SG_MY}} {{#address_store_detail_GENERIC}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{postal_code}} {{city}}{{#cityOrPostal}},{{/cityOrPostal}}<br/>{{country}} {{/address_store_detail_GENERIC}}</p><div class="display-store-loc"><div class="storeloc-inline-block"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg></div><div class="storeloc-inline-block"><p class="phone"><a href="tel:{{phone_number_link_format}}">{{store_phone_number}}</a><br/> <a href="tel:{{phone_number_link_format}}">{{store_fax_number}}</a></p></div></div> {{#hasOpeningHours}}<div class="display-store-loc"><div class="storeloc-inline-block"><svg nopin="nopin" class="icon icon-time" aria-hidden="true" focusable="false"><use xlink:href="#time"></use></svg></div><div class="storeloc-inline-block"><p>{{& opening}}</p></div></div> {{/hasOpeningHours}} {{#additional_information}}<section aria-labelledby="{{additional_informations_id}}" class="additional-information"><h5 id="{{additional_informations_id}}" class="title-information-add">{{titleAdditionalInformation}}</h5> {{& additional_information}}</section> {{/additional_information}} <span class=\'linkGetDirection\'>{{getDirections}}</span></div></div>';
this["APP"]["templates"]["storeLocatorDisplayError"] = '<div class="error-container" role="alert" aria-live="assertive"> {{oops}} {{noResults}}</div>';
this["APP"]["templates"]["storeLocatorDisplayList"] = '<h3 class="sr-only" aria-hidden="true" id="titleListViewAccessibility">' + Drupal.t('hermes.store_locator.list_view_of_stores_title') + '</h3><div class="list-container"><div id="list" class="list"></div><p><a id="btShowMore" href="#more-results">' + Drupal.t('hermes.store_locator.see_more') + '</a></p></div>';
this["APP"]["templates"]["storeLocatorDisplayMap"] = '<h3 class="sr-only" aria-hidden="false" id="titleMapViewAccessibility">' + Drupal.t('hermes.store_locator.map_view_of_stores_title') + '</h3><div id="map" class="map" aria-hidden="false"></div>';
this["APP"]["templates"]["storeLocatorDisplay"] = '<div class="resultsnav"><h2 class="store-title">{{storesResults}}</h2><store-locator-display-error></store-locator-display-error><ul id="stores-result-tab" class="stores-result-tab"><li id="buttonShowMap" data-action="open-map"> <a href="#mapblock"><svg nopin="nopin" class="btn map-pin icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#map-pin"></use></svg>{{mapView}} <span class="sr-only">, {{mapViewButtonAccessibility}}</span> <span class="sr-only" id="mapViewButtonSelected" aria-hidden="false">, {{selectedButtonAccessibility}}</span></a></li><li id="buttonShowList" data-action="open-list"> <a id="linkShowList" href="#list"><svg nopin="nopin" class="btn list icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#list"></use></svg>{{listView}} <span class="sr-only">, {{listViewButtonAccessibility}}</span> <span class="sr-only" id="listViewButtonSelected" aria-hidden="true">, {{selectedButtonAccessibility}}</span></a></li></ul></div><div class="storeLocatorContainers"><store-locator-display-map></store-locator-display-map><store-locator-display-list></store-locator-display-list></div>';
this["APP"]["templates"]["storeLocatorError"] = '<div class="error-container"><h1>{{oops}}</h1><p>{{locatorError}}</p></div>';
this["APP"]["templates"]["storeLocator"] = '<div class="title-container-search"><h1 class="big">{{findAStore}}</h1></div><div class="container-search"><div class="hero"><div class="imgcrop"> <img sizes="100vw" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" srcset="{{imageMobile}} 480w, {{imageDesktop}} 1440w" alt=""></div><div class="inner"><store-search></store-search></div></div><store-locator-error></store-locator-error><store-locator-display></store-locator-display></div>';
this["APP"]["templates"]["storeSearch"] = '<div class="container-items"><h2 class="sr-only">{{searchAccessibility}}</h2><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><div aria-expanded="false" role="combobox" id="custom-autocomplete" class="custom-autocomplete-store-loc" aria-haspopup="listbox" aria-owns="searchfield-autocomplete-list"> <label class="sr-only" for="searchfield">{{searchFieldLabel}}</label> <input aria-activedescendant aria-autocomplete="list" id="searchfield" aria-controls="searchfield-autocomplete-list" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="{{placeHolderAddress}}"/></div> <button id="btclose" class="close" title="{{resetSearchFieldStoreLocator}}"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="{{useMyCurrentLocation}}"><svg nopin="nopin" class="btn icon" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul id="suggest-list"></ul></div></div><div class="container-find-button"> <input id="btfind" class="find-btn" type="submit" name="submit" value="{{buttonFind}}"/></div></div>';
this["APP"]["templates"]["trayNotificationChangePassword"] = '<p class="notification-message-title">{{#title}}{{title}}{{/title}}</p><p class="notification-message-description">{{#message}}{{message}}{{/message}}</p>';
this["APP"]["templates"]["trayNotificationContactUs"] = '<p class="notification-message-title">{{#titleContactUs}}{{titleContactUs}}{{/titleContactUs}}</p><p class="notification-message-description">{{#messageContactUs}}{{messageContactUs}}{{/messageContactUs}}</p>';
this["APP"]["templates"]["trayNotificationLogin"] = '<p data-cs-mask class="notification-message-title">' + Drupal.t('hermes-global-translations.welcome.user') + '</p><p class="notification-message-description">' + Drupal.t('hermes-global-translations.welcome-back.byline') + '</p>';
this["APP"]["templates"]["trayNotificationLogout"] = '<p data-cs-mask class="notification-message-title">' + Drupal.t('hermes-global-translations.see-you-soon') + '</p>';
this["APP"]["templates"]["trayNotificationNewsletter"] = '<p class="notification-message-title">{{#title}}{{title}}{{/title}}</p><p class="notification-message-description">{{#description}}{{description}}{{/description}}</p>';
this["APP"]["templates"]["trayNotificationWechatBinding"] = '<p class="notification-message-title">' + Drupal.t('hermes-global-translations.welcome-back') + '</p><p class="notification-message-description">' + Drupal.t('hermes-global-translations.welcome-back.wechat.linked') + '</p>';
this["APP"]["templates"]["storeProductDetailsList"] = '<ul aria-labelledby="stores-found-msg" id="list-store" class="list-store"></ul>';
this["APP"]["templates"]["storeProductDetails"] = '<div class="store-product-detail"><div class="colresponsive"><div class="store-limit-info"> {{#isLimitedAvailability}} <button aria-expanded="false" aria-controls="store-limit-info-msg-toggle" onclick="showHideAvailabilityMsg(this)" class="product-locator-button-limited-availability inline-icon store-limit-info-limit"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#check"></use></svg><p> ' + Drupal.t('page-hermes-product-locator-details-is-limited-availability') + '</p><svg nopin="nopin" class="icon icon-phone-cr icon-info-product-availability" aria-hidden="true" focusable="false"><use xlink:href="#info"></use></svg></button> {{/isLimitedAvailability}} {{^isLimitedAvailability}}<div class="product-locator-button-limited-availability inline-icon store-limit-info-limit is-not-limited-availability"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#check"></use></svg><p> ' + Drupal.t('page-hermes-product-locator-details-is-available') + '</p></div> {{/isLimitedAvailability}}</div><div id="store-limit-info-msg-toggle" class="store-limit-info-msg-toggle"> ' + Drupal.t('page-hermes-product-locator-is-limited-msg-toggle') + '</div><h4 class="shop-title title-medium">{{short_title}}</h4><p class="address" data-street1="{{street_address1}}" data-street2="{{street_address2}}" data-street3="{{street_address3}}" data-postal-code="{{postal_code}}" data-city="{{city}}" data-country="{{country}}"> {{#address_store_detail_US}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{city}}, {{area}} {{postal_code}},<br/>{{country}} {{/address_store_detail_US}} {{#address_store_detail_JP}} {{postal_code}} {{country}} {{city}} {{street_address1}} {{#street_address2}}{{street_address2}}{{/street_address2}} {{#street_address3}}{{street_address3}}{{/street_address3}} {{/address_store_detail_JP}} {{#address_store_detail_GENERIC}} {{street_address1}}, {{#street_address2}}{{street_address2}},{{/street_address2}} {{#street_address3}}{{street_address3}},{{/street_address3}} {{postal_code}} {{city}},<br/>{{country}} {{/address_store_detail_GENERIC}}</p><div class="inline-icon"><svg nopin="nopin" class="icon icon-phone-cr" aria-hidden="true" focusable="false"><use xlink:href="#phone"></use></svg><p class="phone" data-phone="{{store_phone_number}}"> <a href="tel:{{phone_number_link_format}}"><span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-phone') + '</span> {{store_phone_number}}</a></p></div><div class="inline-icon store-limit-info-km"><svg enable-background="new 0 0 100 100" id="Layer_1" version="1.1" viewBox="0 0 100 100"><g><path d="M50.2 21.1c-12.7 0-22.9 10.3-22.9 22.9s22.9 37.1 22.9 37.1S73.1 56.7 73.1 44 62.9 21.1 50.2 21.1zM50.2 78.1c-2.1-2.3-6-6.8-9.9-12.1-7.2-9.7-11-17.3-11-22.1 0-11.5 9.4-20.9 20.9-20.9S71.1 32.5 71.1 44c0 4.7-3.8 12.4-11 22.1C56.2 71.3 52.3 75.8 50.2 78.1z" fill="#221F1F"></path><path d="M50.2 32.1c-6 0-10.8 4.8-10.8 10.8 0 6 4.8 10.8 10.8 10.8 6 0 10.8-4.8 10.8-10.8C61 37 56.2 32.1 50.2 32.1zM56.4 49.2c-1.6 1.6-3.8 2.6-6.2 2.6-2.4 0-4.6-1-6.2-2.6-1.6-1.6-2.6-3.8-2.6-6.2 0-2.4 1-4.6 2.6-6.2 1.6-1.6 3.8-2.6 6.2-2.6 2.4 0 4.6 1 6.2 2.6 1.6 1.6 2.6 3.8 2.6 6.2C59 45.4 58 47.6 56.4 49.2z" fill="#221F1F"></path></g></svg><p class="store-limit-info-km-num" data-distance="{{distanceFromCurrentInKm}}"> <span class="sr-only">' + Drupal.t('page-hermes-product-locator-details-distance') + ' {{distanceFromCurrentInKm}} km</span> <span aria-hidden="true">{{distanceFromCurrentInKm}} km</span></p></div><div class="more-details-content"> {{#hasOpeningHours}}<div class="display-time-icon"><svg nopin="nopin" class="icon icon-time" aria-label="' + Drupal.t('page-hermes-product-locator-accessibility-find-in-store-hours') + '" focusable="false"><use xlink:href="#time"></use></svg><p>{{& opening}}</p></div> {{/hasOpeningHours}} {{#additional_information}}<div class="additional-information"><h5 class="title-information-add">{{titleAdditionalInformation}}</h5> {{& additional_information}}</div> {{/additional_information}}</div><div class="more-info-links"> <button onclick="showHideMoreInformationsMsg(this, \'{{short_title}}\')" class="more-details-link link-to-button-underline" aria-expanded="false">' + Drupal.t('page-hermes-product-locator-more-details-open-toggle') + '</button> <span class=\'linkGetDirection get-direction-link-product-locator\'><span class="sr-only">{{getDirections}} ' + Drupal.t('page-hermes-product-locator-details-open-new-window') + '</span> <span aria-hidden="true">{{getDirections}}</span></span></div> {{#isEreservationActive}}<div class="e-reservation-booking-button-area"> <button type="button" class="button form-submit ripple-effect e-reservation-booking-button" onclick="bookingAction(this)" store="{{cegid_id}}"><div class="submit-text loader-button-ereservation-booking">' + Drupal.t('page-hermes-product-locator-e-reservation-booking-button-text') + '</div></button></div> {{/isEreservationActive}}</div></div>';
this["APP"]["templates"]["storeProductLocatorDisplayError"] = '<div id="product-locator-map-error-msg" class="error-container"> {{ErrorMsg}}</div>';
this["APP"]["templates"]["storeProductLocatorDisplayList"] = '<div class="list-container"><div id="no-store-close-msg" class="no-store-close-msg">' + Drupal.t('page-hermes-product-locator-no-store-close-msg') + '</div><h3 id="stores-found-msg" class="stores-found-msg"></h3><div id="dynamic-stores-lists" class="dynamic-stores-lists"><div id="list" class="list"></div><p><button id="btShowMore" class="show-more-stores" href="#more-results" aria-label="' + Drupal.t('hermes.store_locator.accessibility.see_more') + '">' + Drupal.t('hermes.store_locator.see_more') + '</button></p></div><p id="pl-concessionary-disclaimer-msg" class="pl-concessionary-disclaimer-msg"></p></div>';
this["APP"]["templates"]["storeProductLocatorDisplayMap"] = '<h3 class="sr-only" aria-hidden="true" id="map-view-title-product-locator">' + Drupal.t('hermes.store_locator.map_view_of_stores_title') + '</h3><div id="map" class="map"></div>';
this["APP"]["templates"]["storeProductLocatorDisplay"] = '<store-product-locator-display-error></store-product-locator-display-error><div class="storeLocatorContainers"><store-product-locator-display-list></store-product-locator-display-list></div>';
this["APP"]["templates"]["storeProductLocator"] = '<h3 class="sr-only">' + Drupal.t('hermes.product_locator.title-accessibility.find-stores') + '</h3><store-product-search></store-product-search><store-product-locator-display></store-product-locator-display>';
this["APP"]["templates"]["storeProductSearch"] = '<div id="store-search-product-locator" class="store-search-product-locator"><div class="container-items"><div id="container-search-items" class="container-search-items"><svg nopin="nopin" class="btn magnifier icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use></svg><div aria-expanded="false" role="combobox" id="custom-autocomplete" class="custom-autocomplete" aria-haspopup="listbox" aria-owns="searchfield-autocomplete-list"> <label class="sr-only" for="searchfield">' + Drupal.t('page--hermes-global--find-store.value-label') + '</label> <input aria-activedescendant aria-autocomplete="list" id="searchfield" aria-controls="searchfield-autocomplete-list" type="search" class="block-container" autocomplete="off" class="field-search" name="q" placeholder="' + Drupal.t('hermes.commerce.product_locator.search.placeholder') + '"/></div> <button id="btclose" class="close" title="' + Drupal.t('page--hermes-global--find-store.reset-search-field') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#close"></use></svg></button> <button id="btlocate" class="location" title="' + Drupal.t('page--hermes-global--find-store.use-my-current-location') + '"><svg nopin="nopin" class="btn icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#location"></use></svg></button><div id="suggest" class="suggest"><ul></ul></div></div></div><div class="container-find-button"> <input aria-label="' + Drupal.t('hermes.commerce.product_locator.title') + '" id="btfind" class="find-btn" type="submit" name="submit" value="' + Drupal.t('hermes_commerce.find') + '"/></div></div>';
;/*})'"*/
;/*})'"*/
!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return s[a]||(s[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},{id:b.name});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=s[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=n(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b.default:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);void 0!==l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,r(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&r(a,c,d)}catch(d){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(u[a])return u[a];if("@node/"==a.substr(0,6))return u[a]=k(t(a.substr(6)));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&r(b.module.exports,"__esModule",{value:!0}),u[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){q=!1}var r;!function(){try{Object.defineProperty({},"a",{})&&(r=Object.defineProperty)}catch(a){r=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var s={},t="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&"undefined"!=typeof require.resolve&&"undefined"!=typeof process&&process.platform&&require,u={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:t,register:b,registerDynamic:c,get:n,set:function(a,b){u[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)(function(a,b){b&&b.__esModule?u[a]=b:u[a]=k(b)})(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j.default:j})}}}("undefined"!=typeof self?self:global)(["1","2"],[],!1,function(a){this.require,this.exports,this.module;!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if("string"==typeof a)return c(a,b);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=!0,f=0;f<a.length;f++){var g=c(a[f],b);e&&(d.default=g,e=!1),d[a[f].split(".").pop()]=g}return d}function e(a){if(Object.keys)Object.keys(b).forEach(a);else for(var c in b)i.call(b,c)&&a(c)}function f(a){e(function(c){if(-1==j.call(k,c)){try{var d=b[c]}catch(a){k.push(c)}a(c,d)}})}var g,h=a,i=Object.prototype.hasOwnProperty,j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];h.set("@@global-helpers",h.newModule({prepareGlobal:function(a,c,e){var h=b.define;b.define=void 0;var i;if(e){i={};for(var j in e)i[j]=b[j],b[j]=e[j]}return c||(g={},f(function(a,b){g[a]=b})),function(){var a;if(c)a=d(c);else{a={};var e,j;f(function(b,c){g[b]!==c&&"undefined"!=typeof c&&(a[b]=c,"undefined"!=typeof e?j||e===c||(j=!0):e=c)}),a=j?a:e}if(i)for(var k in i)b[k]=i[k];return b.define=h,a}}}))}("undefined"!=typeof self?self:global),a.register("3",[],function(a){"use strict";function b(){function a(a){(a.find(".media-wrap-portrait").length||a.find(".media-wrap-portrait-tall").length)&&a.addClass("carousel-portrait"),(a.find(".media-wrap-landscape").length||a.find(".media-wrap-landscape-wide").length)&&a.addClass("carousel-landscape"),a.find(".media-wrap-square").length&&a.addClass("carousel-square")}var b={arrows:!1,dots:!0,infinite:!0,slidesToShow:1,centerMode:!0,variableWidth:!0,focusOnSelect:!0};this.init=function(){this.$galleryCarousel=jQuery(".block-edito-block-gallery-carousel [data-track-gallery-carousel]"),this.createGalleryCarousel(this.$galleryCarousel)},this.createGalleryCarousel=function(c){c.length&&(a(c),c.slick(b).slick("getSlick"),jQuery(window).on("resize",function(){c.slick("setPosition")}))},this.init()}return{setters:[],execute:function(){a("default",b)}}}),a.registerDynamic("4",["5","6","7","8"],!0,function(a,b,c){var d=(this||self,a("5")),e=a("6")("iterator"),f=a("7");c.exports=a("8").isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}}),a.registerDynamic("9",["a","b","4"],!0,function(a,b,c){this||self;a("a"),a("b"),c.exports=a("4")}),a.registerDynamic("c",["9"],!0,function(a,b,c){this||self;c.exports={default:a("9"),__esModule:!0}}),a.registerDynamic("d",["e","c"],!0,function(a,b,c){"use strict";var d=(this||self,a("e").default),e=a("c").default;b.default=function(){function a(a,b){var c=[],e=!0,f=!1,g=void 0;try{for(var h,i=d(a);!(e=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return c}return function(b,c){if(Array.isArray(b))return b;if(e(Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b.__esModule=!0}),a.registerDynamic("f",["10"],!0,function(a,b,c){"use strict";var d=(this||self,a("10").default);b.default=function(a){return Array.isArray(a)?a:d(a)},b.__esModule=!0}),a.register("11",["12","13","14","d","f"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(b){switch(c(this,a),this.baseurl="",this.path="",this.queryParams="",this.fragment={params:[],pipedValues:[],keyword:""},typeof b){case"string":this._parse(b);break;case"undefined":break;default:throw"Invalid 'url' parameter, string expected, got: "+JSON.stringify(b)}}return b(a,[{key:"build",value:function(){var a=this.baseurl;this.path&&(this.path.startsWith("/")||(a+="/"),a+=this.path),this.queryParams&&(a+=this.queryParams);var b=this._buildFragment(this.fragment);return b&&(a+="#"+b),a}},{key:"getFragmentParam",value:function(a){if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);return this.fragment.params.find(function(b){return b.key===a})}},{key:"addFragmentParam",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]||arguments[2];if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);if("string"!=typeof b)throw"Invalid 'value' parameter, string expected, got: "+JSON.stringify(b);if("boolean"!=typeof c)throw"Invalid 'updateIfExists' parameter, boolean expected, got: "+JSON.stringify(c);if(c){var d=this.getFragmentParam(a);if(d)return d.value=b,!0}return this.fragment.params.push({key:a,value:b}),!1}},{key:"removeFragmentParam",value:function(a){if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);for(var b=!1,c=this.fragment.params,d=c.length-1;d>=0;d--)c[d].key===a&&(c.splice(d,1),b=!0);return b}},{key:"_parse",value:function(a){var b=document.createElement("a");b.href=a;var c=b.protocol,d=b.hostname;this.path=b.pathname,this.path.startsWith("/")||(this.path="/"+this.path),"string"==typeof b.origin?this.baseurl=b.origin:this.baseurl=c+"//"+d,this.queryParams=b.search;var e=b.hash;e.startsWith("#")&&(e=e.substring(1)),this.fragment=this._parseFragment(e)}},{key:"_parseFragment",value:function(a){var b=a.split("||"),c=e(b,2),d=c[0],g=c[1],h=d.split("|"),i=f(h),j=i[0],k=i.slice(1),l=[];j.split("&").forEach(function(a){if(""!==a){var b=a.split("=").map(decodeURIComponent);l.push({key:b[0],value:b[1]})}});var m=k.map(decodeURIComponent);return{params:l,pipedValues:m,keyword:g}}},{key:"_buildFragment",value:function(a){var b=a.params.map(function(a){if(!a.key||!a.value)throw"Invalid fragment parameter, expected a object with key and value property, got: "+JSON.stringify(a);if("string"!=typeof a.key)throw"Invalid 'key' property of fragment parameter, expected a string, got: "+JSON.stringify(a.key);if("string"!=typeof a.value)throw"Invalid 'value' property of fragment parameter, expected a string, got: "+JSON.stringify(a.value);var b=encodeURIComponent(a.key),c=encodeURIComponent(a.value);return b+"="+c}).join("&"),c=a.pipedValues.map(encodeURIComponent),e=[b].concat(d(c)).join("|"),f=e;if(a.keyword){if("string"!=typeof a.keyword)throw"Invalid 'keyword' of fragment, expected a string, got: "+JSON.stringify(a.keyword);f+="||"+a.keyword}return f}}]),a}(),a("default",g)}}}),a.register("15",[],function(a){"use strict";function b(a){return a.replace(" ","v")}function c(a){return a.replace("v"," ")}return a("normalizeSku",b),a("denormalizeSku",c),{setters:[],execute:function(){}}}),a.register("16",["11","15","17"],function(a){"use strict";function b(){function a(){window.updateSelectedProductPosition=function(a){var b=a.attributes.getNamedItem("data-product").value,f=d(b),g=window.location.href,h=new c(g);h.addFragmentParam(e.SCROLL_PARAM,f,!0),window.history.pushState(null,"",h.build())}}a()}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.normalizeSku},function(a){e=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("18",[],!0,function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=(this||self,c.exports={});!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}),a.registerDynamic("19",["18"],!0,function(a,b,c){this||self;c.exports=a("18")}),a.registerDynamic("1a",["19"],!0,function(b,c,d){this||self;d.exports=a._nodeRequire?process:b("19")}),a.registerDynamic("1b",["1a"],!0,function(a,b,c){this||self;c.exports=a("1a")}),a.registerDynamic("1c",["1d","1b"],!0,function(a,b,c){"format cjs";var d=this||self;!function(a,e){!function(a,d){"object"==typeof b&&"undefined"!=typeof c?c.exports=d():(a=a||self).videojs=d()}(this,function(){"use strict";function b(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function c(a,b){return a(b={exports:{}},b.exports),b.exports}function e(a,b){bf(a).forEach(function(c){return b(a[c],c)})}function f(a){for(var b=arguments.length,c=new Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return Object.assign?_e.apply(void 0,[a].concat(c)):(c.forEach(function(b){b&&e(b,function(b,c){a[c]=b})}),a)}function g(a){return!!a&&"object"==typeof a}function h(a){return g(a)&&"[object Object]"===af.call(a)&&a.constructor===Object}function i(a,b){if(!a||!b)return"";if("function"!=typeof Je.getComputedStyle)return"";var c=Je.getComputedStyle(a);return c?c.getPropertyValue(b)||c[b]:""}function j(a){return"string"==typeof a&&Boolean(a.trim())}function k(a){if(0<=a.indexOf(" "))throw new Error("class has illegal whitespace characters")}function l(){return Me===Je.document}function m(a){return g(a)&&1===a.nodeType}function n(){try{return Je.parent!==Je.self}catch(a){return!0}}function o(a){return function(b,c){if(!j(b))return Me[a](null);j(c)&&(c=Me.querySelector(c));var d=m(c)?c:Me;return d[a]&&d[a](b)}}function p(a,b,c,d){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={});var e=Me.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(Ze.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+a+" to "+c+"."),e.setAttribute(a,c)):"textContent"===a?q(e,c):e[a]===c&&"tabIndex"!==a||(e[a]=c)}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&J(e,d),e}function q(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function r(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function s(a,b){return k(b),a.classList?a.classList.contains(b):function(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}(b).test(a.className)}function t(a,b){return a.classList?a.classList.add(b):s(a,b)||(a.className=(a.className+" "+b).trim()),a}function u(a,b){return a.classList?a.classList.remove(b):(k(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a}function v(a,b,c){var d=s(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?t(a,b):u(a,b),a}function w(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)})}function x(a){var b={},c=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&0<a.attributes.length)for(var d=a.attributes,e=d.length-1;0<=e;e--){var f=d[e].name,g=d[e].value;"boolean"!=typeof a[f]&&-1===c.indexOf(","+f+",")||(g=null!==g),b[f]=g}return b}function y(a,b){return a.getAttribute(b)}function z(a,b,c){a.setAttribute(b,c)}function A(a,b){a.removeAttribute(b)}function B(){Me.body.focus(),Me.onselectstart=function(){return!1}}function C(){Me.onselectstart=function(){return!0}}function D(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(i(a,"height"))),c.width||(c.width=parseFloat(i(a,"width"))),c}}function E(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var b=a.offsetWidth,c=a.offsetHeight,d=0,e=0;a.offsetParent&&a!==Me[Ne.fullscreenElement];)d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:d,top:e,width:b,height:c}}function F(a,b){var c={x:0,y:0};if(vf)for(var d=a;d&&"html"!==d.nodeName.toLowerCase();){var e=i(d,"transform");if(/^matrix/.test(e)){var f=e.slice(7,-1).split(/,\s/).map(Number);c.x+=f[4],c.y+=f[5]}else if(/^matrix3d/.test(e)){var g=e.slice(9,-1).split(/,\s/).map(Number);c.x+=g[12],c.y+=g[13]}d=d.parentNode}var h={},j=E(b.target),k=E(a),l=k.width,m=k.height,n=b.offsetY-(k.top-j.top),o=b.offsetX-(k.left-j.left);return b.changedTouches&&(o=b.changedTouches[0].pageX-k.left,n=b.changedTouches[0].pageY+k.top,vf&&(o-=c.x,n-=c.y)),h.y=1-Math.max(0,Math.min(1,n/m)),h.x=Math.max(0,Math.min(1,o/l)),h}function G(a){return g(a)&&3===a.nodeType}function H(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function I(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),m(a)||G(a)?a:"string"==typeof a&&/\S/.test(a)?Me.createTextNode(a):void 0}).filter(function(a){return a})}function J(a,b){return I(b).forEach(function(b){return a.appendChild(b)}),a}function K(a,b){return J(H(a),b)}function L(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||"mouseup"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons}function M(a,b){b&&(We=b),Je.setTimeout(Cf,a)}function N(){Bf=!0,Je.removeEventListener("load",N)}function O(a){var b=Me.createElement("style");return b.className=a,b}function P(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b}function Q(){return Ef++}function R(a,b){if(Hf.has(a)){var c=Hf.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&Hf.delete(a)}}function S(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function T(a){function b(){return!0}function c(){return!1}if(a.fixed_)return a;if(!a||!a.isPropagationStopped){var d=a||Je.event;for(var e in a={},d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||Me),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){var f=Me.documentElement,g=Me.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}function U(a,b,c){if(Array.isArray(b))return S(U,a,b,c);Hf.has(a)||Hf.set(a,{});var d=Hf.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=Q()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=T(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(a){Ze.error(a)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;If()&&-1<Jf.indexOf(b)&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function V(a,b,c){if(Hf.has(a)){var d=Hf.get(a);if(d.handlers){if(Array.isArray(b))return S(V,a,b,c);var e=function(a,b){d.handlers[b]=[],R(a,b)};if(void 0!==b){var f=d.handlers[b];if(f)if(c){if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);R(a,b)}else e(a,b)}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function W(a,b,c){var d=Hf.has(a)?Hf.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=T(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&!0===b.bubbles)W.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){Hf.has(b.target)||Hf.set(b.target,{});var f=Hf.get(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function X(a,b,c){function d(){V(a,b,d),c.apply(this,arguments)}return Array.isArray(b)?S(X,a,b,c):(d.guid=c.guid=c.guid||Q(),void U(a,b,d))}function Y(a,b,c){function d(){V(a,b,d),c.apply(this,arguments)}d.guid=c.guid=c.guid||Q(),U(a,b,d)}function Z(a,b,c){b.guid||(b.guid=Q());var d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d}function $(a,b){var c=Je.performance.now();return function(){var d=Je.performance.now();b<=d-c&&(a.apply(void 0,arguments),c=d)}}function _(){}function aa(a){return"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a}function ba(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length}function ca(a,b,c){if(!a||!a.nodeName&&!Lf(a))throw new Error("Invalid target for "+aa(b)+"#"+c+"; must be a DOM node or evented object.")}function da(a,b,c){if(!ba(a))throw new Error("Invalid event type for "+aa(b)+"#"+c+"; must be a non-empty string or array.")}function ea(a,b,c){if("function"!=typeof a)throw new Error("Invalid listener for "+aa(b)+"#"+c+"; must be a function.")}function fa(a,b,c){var d,e,f,g=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return f=g?(d=a.eventBusEl_,3<=b.length&&b.shift(),e=b[0],b[1]):(d=b[0],e=b[1],b[2]),ca(d,a,c),da(e,a,c),ea(f,a,c),{isTargetingSelf:g,target:d,type:e,listener:f=Z(a,f)}}function ga(a,b,c,d){ca(a,a,b),a.nodeName?Kf[b](a,c,d):a[b](c,d)}function ha(a,b){void 0===b&&(b={});var c=b.eventBusKey;if(c){if(!a[c].nodeName)throw new Error('The eventBusKey "'+c+'" does not refer to an element.');a.eventBusEl_=a[c]}else a.eventBusEl_=p("span",{className:"vjs-event-bus"});return f(a,Mf),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()}),a.on("dispose",function(){a.off(),Je.setTimeout(function(){a.eventBusEl_=null},0)}),a}function ia(a,b){return f(a,Nf),a.state=f({},a.state,b),"function"==typeof a.handleStateChanged&&Lf(a)&&a.on("statechanged",a.handleStateChanged),a}function ja(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})}function ka(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})}function la(){for(var a={},b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){b&&e(b,function(b,c){h(b)?(h(a[c])||(a[c]={}),a[c]=la(a[c],b)):a[c]=b})}),a}function ma(a,b,c,d){return function(a,b,c){if("number"!=typeof b||b<0||c<b)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}(a,d,c.length-1),c[d][b]}function na(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:ma.bind(null,"start",0,a),end:ma.bind(null,"end",1,a)}}function oa(a,b){return Array.isArray(a)?na(a):void 0===a||void 0===b?na():na([[a,b]])}function pa(a,b){var c,d,e=0;if(!b)return 0;a&&a.length||(a=oa(0,0));for(var f=0;f<a.length;f++)c=a.start(f),b<(d=a.end(f))&&(d=b),e+=d-c;return e/b}function qa(a){return a instanceof qa?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:g(a)&&("number"==typeof a.code&&(this.code=a.code),f(this,a)),void(this.message||(this.message=qa.defaultMessages[this.code]||"")))}function ra(a){return null!=a&&"function"==typeof a.then}function sa(a){ra(a)&&a.then(null,function(a){})}function ta(a){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})}function ua(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)}function va(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)}function wa(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=Me.createElement("a");c.href=a;var d,e=""===c.host&&"file:"!==c.protocol;e&&((d=Me.createElement("div")).innerHTML='<a href="'+a+'"></a>',c=d.firstChild,d.setAttribute("style","display:none; position:absolute;"),Me.body.appendChild(d));for(var f={},g=0;g<b.length;g++)f[b[g]]=c[b[g]];return"http:"===f.protocol&&(f.host=f.host.replace(/:80$/,"")),"https:"===f.protocol&&(f.host=f.host.replace(/:443$/,"")),f.protocol||(f.protocol=Je.location.protocol),e&&Me.body.removeChild(d),f}function xa(a){if(!a.match(/^https?:\/\//)){var b=Me.createElement("div");b.innerHTML='<a href="'+a+'">x</a>',a=b.firstChild.href}return a}function ya(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a);if(b)return b.pop().toLowerCase()}return""}function za(a,b){void 0===b&&(b=Je.location);var c=wa(a);return(":"===c.protocol?b.protocol:c.protocol)+c.host!==b.protocol+b.host}function Aa(a,b,c){var d=a;return og(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=_e({},b,{uri:a}),d.callback=c,d}function Ba(a,b,c){return Ca(b=Aa(a,b,c))}function Ca(a){function b(a){return clearTimeout(f),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,h(a,p)}function c(){if(!e){var b;clearTimeout(f),b=a.useXDR&&void 0===i.status?200:1223===i.status?204:i.status;var c=p,d=null;return 0!==b?(c={body:function(){var a=void 0;if(a=i.response?i.response:i.responseText||function(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(a){}return null}(i),o)try{a=JSON.parse(a)}catch(a){}return a}(),statusCode:b,method:k,headers:{},url:j,rawRequest:i},i.getAllResponseHeaders&&(c.headers=qg(i.getAllResponseHeaders()))):d=new Error("Internal XMLHttpRequest Error"),h(d,c,c.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var d,e,f,g=!1,h=function(b,c,d){g||(g=!0,a.callback(b,c,d))},i=a.xhr||null,j=(i=i||(a.cors||a.useXDR?new Ba.XDomainRequest:new Ba.XMLHttpRequest)).url=a.uri||a.url,k=i.method=a.method||"GET",l=a.body||a.data,m=i.headers=a.headers||{},n=!!a.sync,o=!1,p={body:void 0,headers:{},statusCode:0,method:k,url:j,rawRequest:i};if("json"in a&&!1!==a.json&&(o=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==k&&"HEAD"!==k&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),l=JSON.stringify(!0===a.json?l:a.json))),i.onreadystatechange=function(){4===i.readyState&&setTimeout(c,0)},i.onload=c,i.onerror=b,i.onprogress=function(){},i.onabort=function(){e=!0},i.ontimeout=b,i.open(k,j,!n,a.username,a.password),n||(i.withCredentials=!!a.withCredentials),!n&&0<a.timeout&&(f=setTimeout(function(){if(!e){e=!0,i.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",b(a)}},a.timeout)),i.setRequestHeader)for(d in m)m.hasOwnProperty(d)&&i.setRequestHeader(d,m[d]);else if(a.headers&&!function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(i.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(i),i.send(l||null),i}function Da(a,b){var c=new Je.WebVTT.Parser(Je,Je.vttjs,Je.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),0<d.length&&(Je.console&&Je.console.groupCollapsed&&Je.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return Ze.error(a)}),Je.console&&Je.console.groupEnd&&Je.console.groupEnd()),c.flush()}function Ea(a,b){var c={uri:a},d=za(a);d&&(c.cors=d);var e="use-credentials"===b.tech_.crossOrigin();e&&(c.withCredentials=e),rg(c,Z(this,function(a,c,d){return a?Ze.error(a,c):(b.loaded_=!0,void("function"!=typeof Je.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],function(a){return"vttjserror"!==a.type?Da(d,b):void Ze.error("vttjs failed to load, stopping trying to process "+b.src)}):Da(d,b)))}))}function Fa(){}function Ga(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function Ha(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):59<c[1]?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function Ia(){this.values=Ag(null)}function Ja(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);2===g.length&&b(g[0],g[1])}}function Ka(a,b,c){function d(){var b=Ha(a);if(null===b)throw new Ga(Ga.Errors.BadTimeStamp,"Malformed timestamp: "+f);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function e(){a=a.replace(/^\s+/,"")}var f=a;if(e(),b.startTime=d(),e(),"-->"!==a.substr(0,3))throw new Ga(Ga.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+f);a=a.substr(3),e(),b.endTime=d(),e(),function(a,b){var d=new Ia;Ja(a,function(a,b){switch(a){case"region":for(var e=c.length-1;0<=e;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)&&d.set("snapToLines",!1),d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","center","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");try{b.line=d.get("line","auto")}catch(a){}b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100);try{b.align=d.get("align","center")}catch(a){
b.align=d.get("align","middle")}try{b.position=d.get("position","auto")}catch(a){b.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}(a,b)}function La(a,b){function c(){if(!b)return null;var a,c=b.match(/^([^<]*)(<[^>]*>?)?/);return a=c[1]?c[1]:c[2],b=b.substr(a.length),a}function d(b,c){var d=Cg[b];if(!d)return null;var e=a.document.createElement(d),f=Eg[b];return f&&c&&(e[f]=c.trim()),e}for(var e,f,g,h,i=a.document.createElement("div"),j=i,k=[];null!==(e=c());)if("<"!==e[0])j.appendChild(a.document.createTextNode((f=e,Bg.innerHTML=f,f=Bg.textContent,Bg.textContent="",f)));else{if("/"===e[1]){k.length&&k[k.length-1]===e.substr(2).replace(">","")&&(k.pop(),j=j.parentNode);continue}var l,m=Ha(e.substr(1,e.length-2));if(m){l=a.document.createProcessingInstruction("timestamp",m),j.appendChild(l);continue}var n=e.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!n)continue;if(!(l=d(n[1],n[3])))continue;if(g=j,Fg[(h=l).localName]&&Fg[h.localName]!==g.localName)continue;if(n[2]){var o=n[2].split(".");o.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(Dg.hasOwnProperty(c)){var d=b?"background-color":"color",e=Dg[c];l.style[d]=e}}),l.className=o.join(" ")}k.push(n[1]),j.appendChild(l),j=l}return i}function Ma(a){for(var b=0;b<Gg.length;b++){var c=Gg[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function Na(){}function Oa(a,b,c){Na.call(this),this.cue=b,this.cueDiv=La(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:function(a){function b(a,b){for(var c=b.childNodes.length-1;0<=c;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?f[a.length=0]:e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d=[],e="";if(!a||!a.childNodes)return"ltr";for(b(d,a);e=c(d);)for(var f=0;f<e.length;f++)if(Ma(e.charCodeAt(f)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Pa(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function Qa(a,b,c,d){var e=new Pa(b),f=b.cue,g=function(a){if("number"==typeof a.line&&(a.snapToLines||0<=a.line&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return-1*++d}(f),h=[];if(f.snapToLines){var i;switch(f.vertical){case"":h=["+y","-y"],i="height";break;case"rl":h=["+x","-x"],i="width";break;case"lr":h=["-x","+x"],i="width"}var j=e.lineHeight,k=j*Math.round(g),l=c[i]+j,m=h[0];Math.abs(k)>l&&(k=k<0?-1:1,k*=Math.ceil(l/j)*j),g<0&&(k+=""===f.vertical?c.height:c.width,h=h.reverse()),e.move(m,k)}else{var n=e.lineHeight/c.height*100;switch(f.lineAlign){case"center":g-=n/2;break;case"end":g-=n}switch(f.vertical){case"":b.applyStyles({top:b.formatStyle(g,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(g,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(g,"%")})}h=["+y","-x","+x","-y"],e=new Pa(b)}var o=function(a,b){for(var e,f=new Pa(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);i<g&&(e=new Pa(a),g=i),a=new Pa(f)}return e||f}(e,h);b.move(o.toCSSCompatValues(c))}function Ra(){}function Sa(a){return"string"==typeof a&&!!Jg[a.toLowerCase()]&&a.toLowerCase()}function Ta(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,h=c,i=null,j="",k=!0,l="auto",m="start",n="auto",o="auto",p=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");f=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");g=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return i},set:function(a){i=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return j},set:function(a){var b=function(a){return"string"==typeof a&&!!Ig[a.toLowerCase()]&&a.toLowerCase()}(a);if(!1===b)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");j=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return k},set:function(a){k=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(a){if("number"!=typeof a&&"auto"!==a)throw new SyntaxError("Line: an invalid number or illegal string was specified.");l=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(a){var b=Sa(a);b&&(m=b,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return n},set:function(a){if(a<0||100<a)throw new Error("Position must be between 0 and 100.");n=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=Sa(a);b&&(o=b,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||100<a)throw new Error("Size must be between 0 and 100.");p=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(a){var b=Sa(a);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=b,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ua(a){return"number"==typeof a&&0<=a&&a<=100}function Va(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!Ua(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!Ua(a))throw new Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!Ua(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!Ua(a))throw new Error("ViewportAnchorY must be between 0 and 100.");f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!Ua(a))throw new Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){var b=function(a){return"string"==typeof a&&!!Lg[a.toLowerCase()]&&a.toLowerCase()}(a);!1===b||(g=b)}}})}function Wa(a,b,c){a.setTimeout(function(){return function a(b,c,d,e,g,h){void 0===b&&(b={}),void 0===c&&(c=[]),void 0===g&&(g=[]),void 0===h&&(h=!1);var i=c,j=i[0],k=i.slice(1);if("string"==typeof j)a(b,Og[j],d,e,g,h);else if(j){var l=Za(e,j);if(!l.setSource)return g.push(l),a(b,k,d,e,g,h);l.setSource(f({},b),function(c,f){return c?a(b,k,d,e,g,h):(g.push(l),void a(f,b.type===f.type?k:Og[f.type],d,e,g,h))})}else k.length?a(b,k,d,e,g,h):h?d(b,g):a(b,Og["*"],d,e,g,!0)}(b,Og[b.type],c,a)},1)}function Xa(a,b,c,d){void 0===d&&(d=null);var e="call"+ka(c),f=a.reduce(Ya(e),d),g=f===Qg,h=g?null:b[c](f);return function(a,b,c,d){for(var e=a.length-1;0<=e;e--){var f=a[e];f[b]&&f[b](d,c)}}(a,c,h,g),h}function Ya(a){return function(b,c){return b===Qg?Qg:c[a]?c[a](b):b}}function Za(a,b){var c=Pg[a.id()],d=null;if(null==c)return d=b(a),Pg[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1];g===b&&(d=h)}return null===d&&(d=b(a),c.push([b,d])),d}function $a(a){void 0===a&&(a="");var b=ya(a);return Ug[b.toLowerCase()]||""}function _a(a){if(!a.type){var b=$a(a.src);b&&(a.type=b)}return a}function ab(a,b){var c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");c=a.slice(1)}return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function bb(a,b,c){try{a.style[b]=c}catch(a){return}}function cb(a,b){a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return!isNaN(a)&&a!==1/0||(e=d=c="-"),(e=0<e||0<g?e+":":"")+(d=((e||10<=f)&&d<10?"0"+d:d)+":")+(c=c<10?"0"+c:c)}function db(a,b){return void 0===b&&(b=a),eh(a,b)}function eb(a,b,c){return a=Number(a),Math.min(c,Math.max(b,isNaN(a)?b:a))}function fb(a,b){return eb(a/b*100,0,100).toFixed(2)+"%"}function gb(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function hb(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;var c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var g=c[f].src;g&&-1===d.indexOf(g)&&d.push(g)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)}function ib(a,b){for(var c={},d=0;d<a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],b))&&c.set&&c.get);d++);return c.enumerable=!0,c.configurable=!0,c}function jb(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=function(a){return ib([a.el(),Je.HTMLMediaElement.prototype,Je.Element.prototype,oi],"innerHTML")}(a),e=function(c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=c.apply(b,e);return hb(a),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",la(d,{set:e(d.set)})),b.resetSourceWatch_=function(){b.resetSourceWatch_=null,Object.keys(c).forEach(function(a){b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)}}function kb(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=function(a){return ib([a.el(),Je.HTMLMediaElement.prototype,pi],"src")}(a),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",la(c,{set:function(d){var e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=function(c,e){var f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=function(){var c=e.call(b);return hb(a)||(a.triggerSourceset(""),jb(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):hb(a)||jb(a),b.resetSourceset_=function(){b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}}}}function lb(a,b,c,d){function e(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})}void 0===d&&(d=!0);var f={configurable:!0,enumerable:!0,get:function(){var a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)}function mb(a){return Di.hasOwnProperty(a)}function nb(a){return mb(a)?Di[a]:void 0}function ob(a,b){a[Ci]=a[Ci]||{},a[Ci][b]=!0}function pb(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)}function qb(a,b){return b.prototype.name=a,function(){pb(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=Ai(b,[this].concat(d));return this[a]=function(){return f},pb(this,f.getEventHash()),f}}function rb(a,b,c){var d=rb.getPlayer(a);if(d)return b&&Ze.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"==typeof a?yf("#"+Gi(a)):a;if(!m(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||Ze.warn("The element supplied is not included in the DOM"),b=b||{},rb.hooks("beforesetup").forEach(function(a){var c=a(e,la(b));g(c)&&!Array.isArray(c)?b=la(b,c):Ze.error("please return an object in beforesetup hooks")});var f=Sf.getComponent("Player");return d=new f(e,b,c),rb.hooks("setup").forEach(function(a){return a(d)}),d}function sb(a){return a&&"object"==typeof a&&"default"in a?a.default:a}function tb(a){for(var b,c=a.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),d={},e=c.length;e--;)""!==c[e]&&((b=/([^=]*)=(.*)/.exec(c[e]).slice(1))[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),d[b[0]]=b[1]);return d}function ub(){}function vb(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function wb(a,b,c,d,e,f){for(var g,h=++b,i=bj;;){var j=a.charAt(h);switch(j){case"=":if(i===cj)g=a.slice(b,h),i=ej;else{if(i!==dj)throw new Error("attribute equal must after attrName");i=ej}break;case"'":case'"':if(i===ej||i===cj){if(i===cj&&(f.warning('attribute value must after "="'),g=a.slice(b,h)),b=h+1,!(0<(h=a.indexOf(j,b))))throw new Error("attribute value no end '"+j+"' match");k=a.slice(b,h).replace(/&#?\w+;/g,e),c.add(g,k,b-1),i=gj}else{if(i!=fj)throw new Error('attribute value must after "="');k=a.slice(b,h).replace(/&#?\w+;/g,e),c.add(g,k,b),f.warning('attribute "'+g+'" missed start quot('+j+")!!"),b=h+1,i=gj}break;case"/":switch(i){case bj:c.setTagName(a.slice(b,h));case gj:case hj:case ij:i=ij,c.closed=!0;case fj:case cj:case dj:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),i==bj&&c.setTagName(a.slice(b,h)),h;case">":switch(i){case bj:c.setTagName(a.slice(b,h));case gj:case hj:case ij:break;case fj:case cj:"/"===(k=a.slice(b,h)).slice(-1)&&(c.closed=!0,k=k.slice(0,-1));case dj:i===dj&&(k=g),i==fj?(f.warning('attribute "'+k+'" missed quot(")!!'),c.add(g,k.replace(/&#?\w+;/g,e),b)):("http://www.w3.org/1999/xhtml"===d[""]&&k.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+k+'" missed value!! "'+k+'" instead!!'),c.add(k,k,b));break;case ej:throw new Error("attribute value missed!!")}return h;case"":j=" ";default:if(j<=" ")switch(i){case bj:c.setTagName(a.slice(b,h)),i=hj;break;case cj:g=a.slice(b,h),i=dj;break;case fj:var k=a.slice(b,h).replace(/&#?\w+;/g,e);f.warning('attribute "'+k+'" missed quot(")!!'),c.add(g,k,b);case gj:i=hj}else switch(i){case dj:c.tagName,"http://www.w3.org/1999/xhtml"===d[""]&&g.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),c.add(g,g,b),b=h,i=cj;break;case gj:f.warning('attribute space is required"'+g+'"!!');case hj:i=cj,b=h;break;case ej:i=fj,b=h;break;case ij:throw new Error("elements closed character '/' and '>' must be connected to")}}h++}}function xb(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,i=g.value;if(0<(m=h.indexOf(":")))var j=g.prefix=h.slice(0,m),k=h.slice(m+1),l="xmlns"===j&&k;else j=null,l="xmlns"===(k=h)&&"";g.localName=k,!1!==l&&(null==e&&(e={},Ab(c,c={})),c[l]=e[l]=i,g.uri="http://www.w3.org/2000/xmlns/",b.startPrefixMapping(l,i))}for(f=a.length;f--;)(j=(g=a[f]).prefix)&&("xml"===j&&(g.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==j&&(g.uri=c[j||""]));var m;k=0<(m=d.indexOf(":"))?(j=a.prefix=d.slice(0,m),a.localName=d.slice(m+1)):(j=null,a.localName=d);var n=a.uri=c[j||""];if(b.startElement(n,k,d,a),!a.closed)return a.currentNSMap=c,a.localNSMap=e,!0;if(b.endElement(n,k,d),e)for(j in e)b.endPrefixMapping(j)}function yb(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)||(g=g.replace(/&#?\w+;/g,d)),e.characters(g,0,g.length),f}return b+1}function zb(a,b,c,d){var e=d[c];return null==e&&((e=a.lastIndexOf("</"+c+">"))<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}function Ab(a,b){for(var c in a)b[c]=a[c]}function Bb(a,b,c,d){switch(a.charAt(b+2)){case"-":return"-"!==a.charAt(b+3)?-1:b<(e=a.indexOf("-->",b+4))?(c.comment(a,b+4,e-b-4),e+3):(d.error("Unclosed comment"),-1);default:if("CDATA["==a.substr(b+3,6)){var e=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,e-b-9),c.endCDATA(),e+3}var f=function(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}(a,b),g=f.length;if(1<g&&/!doctype/i.test(f[0][0])){var h=f[1][0],i=3<g&&/^public$/i.test(f[2][0])&&f[3][0],j=4<g&&f[4][0],k=f[g-1];return c.startDTD(h,i&&i.replace(/^(['"])(.*?)\1$/,"$2"),j&&j.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),k.index+k[0].length}}return-1}function Cb(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,c.processingInstruction(e[1],e[2]),d+2):-1}return-1}function Db(a){}function Eb(a,b){return a.__proto__=b,a}function Fb(a,b){for(var c in a)b[c]=a[c]}function Gb(a,b){var c=a.prototype;if(Object.create){var d=Object.create(b.prototype);c.__proto__=d}if(!(c instanceof b)){var e=function(){};e.prototype=b.prototype,Fb(c,e=new e),a.prototype=c=e}c.constructor!=a&&(c.constructor=a)}function Hb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,zj[a]),this.message=zj[a],Error.captureStackTrace&&Error.captureStackTrace(this,Hb);return c.code=a,b&&(this.message=this.message+": "+b),c}function Ib(){}function Jb(a,b){this._node=a,this._refresh=b,Kb(this)}function Kb(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);mc(a,"length",c.length),Fb(c,a),a._inc=b}}function Lb(){}function Mb(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Nb(a,b,c,d){if(d?b[Mb(b,d)]=c:b[b.length++]=c,a){var e=(c.ownerElement=a).ownerDocument;e&&(d&&Ub(e,a,d),function(a,b,c){a&&a._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&(b._nsMap[c.prefix?c.localName:""]=c.value)}(e,a,c))}}function Ob(a,b,c){var d=Mb(b,c);if(!(0<=d))throw Hb(Bj,new Error(a.tagName+"@"+c));for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Ub(f,a,c),c.ownerElement=null)}}function Pb(a){if(this._features={},a)for(var b in a)this._features=a[b]}function Qb(){}function Rb(a){return("<"==a?"&lt;":">"==a&&"&gt;")||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function Sb(a,b){if(b(a))return!0;if(a=a.firstChild)do if(Sb(a,b))return!0;while(a=a.nextSibling)}function Tb(){}function Ub(a,b,c){a&&a._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete b._nsMap[c.prefix?c.localName:""]}function Vb(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)e=(d[f++]=e).nextSibling;d.length=f}}}function Wb(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,Vb(a.ownerDocument,a),b}function Xb(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===wj){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;for(e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;e.parentNode=a,e!==f&&(e=e.nextSibling););return Vb(a.ownerDocument||a,a),b.nodeType==wj&&(b.firstChild=b.lastChild=null),b}function Yb(){this._nsMap={}}function Zb(){}function $b(){}function _b(){}function ac(){}function bc(){}function cc(){}function dc(){}function ec(){}function fc(){}function gc(){}function hc(){}function ic(){}function jc(a,b){var c=[],d=9==this.nodeType?this.documentElement:this,e=d.prefix,f=d.namespaceURI;if(f&&null==e&&null==(e=d.lookupPrefix(f)))var g=[{namespace:f,prefix:null}];return lc(this,c,a,b,g),c.join("")}function kc(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!d&&!e)return!1;if("xml"===d&&"http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"==e)return!1;for(var f=c.length;f--;){var g=c[f];if(g.prefix==d)return g.namespace!=e}return!0}function lc(a,b,c,d,e){if(d){if(!(a=d(a)))return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case mj:e=e||[];var f=a.attributes,g=f.length,h=a.firstChild,i=a.tagName;c=kj===a.namespaceURI||c,b.push("<",i);for(var j=0;j<g;j++)"xmlns"==(k=f.item(j)).prefix?e.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&e.push({prefix:"",namespace:k.value});for(j=0;j<g;j++){var k;if(kc(k=f.item(j),0,e)){var l=k.prefix||"",m=k.namespaceURI,n=l?" xmlns:"+l:" xmlns";b.push(n,'="',m,'"'),e.push({prefix:l,namespace:m})}lc(k,b,c,d,e)}if(kc(a,0,e)&&(l=a.prefix||"",m=a.namespaceURI,n=l?" xmlns:"+l:" xmlns",b.push(n,'="',m,'"'),e.push({prefix:l,namespace:m})),h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(i)){if(b.push(">"),c&&/^script$/i.test(i))for(;h;)h.data?b.push(h.data):lc(h,b,c,d,e),h=h.nextSibling;else for(;h;)lc(h,b,c,d,e),h=h.nextSibling;b.push("</",i,">")}else b.push("/>");return;case uj:case wj:for(h=a.firstChild;h;)lc(h,b,c,d,e),h=h.nextSibling;return;case nj:return b.push(" ",a.name,'="',a.value.replace(/[<&"]/g,Rb),'"');case oj:return b.push(a.data.replace(/[<&]/g,Rb));case pj:return b.push("<![CDATA[",a.data,"]]>");case tj:return b.push("<!--",a.data,"-->");case vj:var o=a.publicId,p=a.systemId;if(b.push("<!DOCTYPE ",a.name),o)b.push(' PUBLIC "',o),p&&"."!=p&&b.push('" "',p),b.push('">');else if(p&&"."!=p)b.push(' SYSTEM "',p,'">');else{var q=a.internalSubset;q&&b.push(" [",q,"]"),b.push(">")}return;case sj:return b.push("<?",a.target," ",a.data,"?>");case qj:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function mc(a,b,c){a[b]=c}function nc(a){return!!a&&"object"==typeof a}function oc(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return"object"!=typeof b||Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):nc(a[c])&&nc(b[c])?a[c]=oc(a[c],b[c]):a[c]=b[c]}),a},{})}function pc(a){return a.reduce(function(a,b){return a.concat(b)},[])}function qc(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function rc(a){var b=a.baseUrl,c=void 0===b?"":b,d=a.source,e=void 0===d?"":d,f=a.range,g=void 0===f?"":f,h=a.indexRange,i=void 0===h?"":h,j={uri:e,resolvedUri:Ri(c||"",e)};if(g||i){var k=(g||i).split("-"),l=parseInt(k[0],10),m=parseInt(k[1],10);j.byterange={length:m-l+1,offset:l}}return j}function sc(a){var b=a.type,c=void 0===b?"static":b,d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.sourceDuration,h=Mj[c](a),i=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c}(h.start,h.end).map(function(a){return function(b,c){var d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.periodIndex,h=a.startNumber;return{number:(void 0===h?1:h)+b,duration:d/f,timeline:g,time:c*d}}}(a));if("static"===c){var j=i.length-1;i[j].duration=g-d/f*j}return i}function tc(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c,e=a.sourceDuration,f=a.indexRange,g=void 0===f?"":f,h=a.duration;if(!b)throw new Error(Jj);var i=rc({baseUrl:b,source:d.sourceURL,range:d.range}),j=rc({baseUrl:b,source:b,indexRange:g});if(j.map=i,h){var k=sc(a);k.length&&(j.duration=k[0].duration,j.timeline=k[0].timeline)}else e&&(j.duration=e,j.timeline=0);return j.number=0,[j]}function uc(a,b,c){for(var d=a.sidx.map?a.sidx.map:null,e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,h=g.offset+g.length,i=b.timescale,j=b.references.filter(function(a){return 1!==a.referenceType}),k=[],l=h+b.firstOffset,m=0;m<j.length;m++){var n=b.references[m],o=n.referencedSize,p=n.subsegmentDuration,q=tc({baseUrl:c,timescale:i,timeline:f,periodIndex:f,duration:p,sourceDuration:e,indexRange:l+"-"+(l+o-1)})[0];d&&(q.map=d),k.push(q),l+=o}return a.segments=k,a}function vc(a){return function(a){return Object.keys(a).map(function(b){return a[b]})}(a.reduce(function(a,b){var c,d=b.attributes.id+(b.attributes.lang||"");return a[d]?(b.segments[0]&&(b.segments[0].discontinuity=!0),(c=a[d].segments).push.apply(c,b.segments),b.attributes.contentProtection&&(a[d].attributes.contentProtection=b.attributes.contentProtection)):a[d]=b,a},{})).map(function(a){return a.discontinuityStarts=function(a,b){return a.reduce(function(a,c,d){return c[b]&&a.push(d),a},[])}(a.segments,"discontinuity"),a})}function wc(a,b){if(void 0===b&&(b={}),!Object.keys(b).length)return a;for(var c in a){var d=a[c];if(d.sidx){var e=d.sidx.uri+"-"+(g=d.sidx.byterange,h=g.offset+g.length-1,g.offset+"-"+h),f=b[e]&&b[e].sidx;d.sidx&&f&&uc(d,f,d.sidx.resolvedUri)}}var g,h;return a}function xc(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f}function yc(a,b,c){var d;if(void 0===c&&(c={}),!a.length)return{};var e=a[0].attributes,f=e.sourceDuration,g=e.type,h=void 0===g?"static":g,i=e.suggestedPresentationDelay,j=e.minimumUpdatePeriod,k=vc(a.filter(function(a){var b=a.attributes;return"video/mp4"===b.mimeType||"video/webm"===b.mimeType||"video"===b.contentType})).map(xc),l=vc(a.filter(function(a){var b=a.attributes;return"audio/mp4"===b.mimeType||"audio/webm"===b.mimeType||"audio"===b.contentType})),m=a.filter(function(a){var b=a.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType}),n={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(d={AUDIO:{},VIDEO:{}},d["CLOSED-CAPTIONS"]={},d.SUBTITLES={},d),uri:"",duration:f,playlists:wc(k,c)};return 0<=j&&(n.minimumUpdatePeriod=1e3*j),b&&(n.locations=b),"dynamic"===h&&(n.suggestedPresentationDelay=i),l.length&&(n.mediaGroups.AUDIO.audio=function(a,b){var c;void 0===b&&(b={});var d=a.reduce(function(a,d){var e=d.attributes.role&&d.attributes.role.value||"",f=d.attributes.lang||"",g="main";if(f){var h=e?" ("+e+")":"";g=d.attributes.lang+h}return a[g]&&a[g].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth||(a[g]={language:f,autoselect:!0,default:"main"===e,playlists:wc([function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f}(d)],b),uri:""},"undefined"==typeof c&&"main"===e&&((c=d).default=!0)),a},{});return c||(d[Object.keys(d)[0]].default=!0),d}(l,c)),m.length&&(n.mediaGroups.SUBTITLES.subs=function(a,b){return void 0===b&&(b={}),a.reduce(function(a,c){var d=c.attributes.lang||"text";return a[d]||(a[d]={language:d,default:!1,autoselect:!1,playlists:wc([function(a){var b,c=a.attributes,d=a.segments;"undefined"==typeof d&&(d=[{uri:c.baseUrl,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);var e=((b={NAME:c.id,BANDWIDTH:c.bandwidth})["PROGRAM-ID"]=1,b);return c.codecs&&(e.CODECS=c.codecs),{attributes:e,uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:c.baseUrl||"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1}}(c)],b),uri:""}),a},{})}(m,c)),n}function zc(a,b){for(var c,d,e,f,g,h,i,j,k,l,m,n,o=a.type,p=void 0===o?"static":o,q=a.minimumUpdatePeriod,r=void 0===q?0:q,s=a.media,t=void 0===s?"":s,u=a.sourceDuration,v=a.timescale,w=void 0===v?1:v,x=a.startNumber,y=void 0===x?1:x,z=a.periodIndex,A=[],B=-1,C=0;C<b.length;C++){var D=b[C],E=D.d,F=D.r||0,G=D.t||0;B<0&&(B=G),G&&B<G&&(B=G);var H=void 0;if(F<0){var I=C+1;H=I===b.length?"dynamic"===p&&0<r&&0<t.indexOf("$Number$")?(d=B,e=E,f=(c=a).NOW,g=c.clientOffset,h=c.availabilityStartTime,i=c.timescale,j=void 0===i?1:i,k=c.start,l=void 0===k?0:k,m=c.minimumUpdatePeriod,n=(f+g)/1e3+(void 0===m?0:m)-(h+l),Math.ceil((n*j-d)/e)):(u*w-B)/E:(b[I].t-B)/E}else H=F+1;for(var J=y+A.length+H,K=y+A.length;K<J;)A.push({number:K,duration:E/w,time:B,timeline:z}),B+=E,K++}return A}function Ac(a,b){return a.replace(Nj,function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"==typeof a[c])return b;var f=""+a[c];return"RepresentationID"===c?f:(e=d?parseInt(e,10):1)<=f.length?f:new Array(e-f.length+1).join("0")+f}}(b))}function Bc(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization,e=void 0===d?{sourceURL:"",range:""}:d,f=rc({baseUrl:a.baseUrl,source:Ac(e.sourceURL,c),range:e.range});return function(a,b){return a.duration||b?a.duration?sc(a):zc(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]}(a,b).map(function(b){c.Number=b.number,c.Time=b.time;var d=Ac(a.media||"",c);return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Ri(a.baseUrl||"",d),map:f,number:b.number}})}function Cc(a,b){var c=a.duration,d=a.segmentUrls,e=void 0===d?[]:d;if(!c&&!b||c&&b)throw new Error(Kj);var f,g=e.map(function(b){return function(a,b){var c=a.baseUrl,d=a.initialization,e=void 0===d?{}:d,f=rc({baseUrl:c,source:e.sourceURL,range:e.range}),g=rc({baseUrl:c,source:b.media,range:b.mediaRange});return g.map=f,g}(a,b)});return c&&(f=sc(a)),b&&(f=zc(a,b)),f.map(function(a,b){if(g[b]){var c=g[b];return c.timeline=a.timeline,c.duration=a.duration,c.number=a.number,c}}).filter(function(a){return a})}function Dc(a){var b,c,d=a.attributes,e=a.segmentInfo;e.template?(c=Bc,b=oc(d,e.template)):e.base?(c=tc,b=oc(d,e.base)):e.list&&(c=Cc,b=oc(d,e.list));var f={attributes:d};if(!c)return f;var g=c(b,e.timeline);if(b.duration){var h=b,i=h.duration,j=h.timescale,k=void 0===j?1:j;b.duration=i/k}else g.length?b.duration=g.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):b.duration=0;return f.attributes=b,f.segments=g,e.base&&b.indexRange&&(f.sidx=g[0],f.segments=[]),f}function Ec(a,b){return qc(a.childNodes).filter(function(a){return a.tagName===b})}function Fc(a){return a.textContent.trim()}function Gc(a){var b=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!b)return 0;var c=b.slice(1),d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5];return 31536e3*parseFloat(d||0)+2592e3*parseFloat(e||0)+86400*parseFloat(f||0)+3600*parseFloat(g||0)+60*parseFloat(h||0)+parseFloat(i||0)}function Hc(a){return a&&a.attributes?qc(a.attributes).reduce(function(a,b){var c=Oj[b.name]||Oj.DEFAULT;return a[b.name]=c(b.value),a},{}):{}}function Ic(a,b){return b.length?pc(a.map(function(a){return b.map(function(b){return Ri(a,Fc(b))})})):a}function Jc(a){var b=Ec(a,"SegmentTemplate")[0],c=Ec(a,"SegmentList")[0],d=c&&Ec(c,"SegmentURL").map(function(a){
return oc({tag:"SegmentURL"},Hc(a))}),e=Ec(a,"SegmentBase")[0],f=c||b,g=f&&Ec(f,"SegmentTimeline")[0],h=c||e||b,i=h&&Ec(h,"Initialization")[0],j=b&&Hc(b);j&&i?j.initialization=i&&Hc(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var k={template:j,timeline:g&&Ec(g,"S").map(function(a){return Hc(a)}),list:c&&oc(Hc(c),{segmentUrls:d,initialization:Hc(i)}),base:e&&oc(Hc(e),{initialization:Hc(i)})};return Object.keys(k).forEach(function(a){k[a]||delete k[a]}),k}function Kc(a,b,c){return function(d){var e=Hc(d),f=Ic(b,Ec(d,"BaseURL")),g=Ec(d,"Role")[0],h={role:Hc(g)},i=oc(a,e,h),j=function(a){return a.reduce(function(a,b){var c=Hc(b),d=Pj[c.schemeIdUri];if(d){a[d]={attributes:c};var e=Ec(b,"cenc:pssh")[0];if(e){var f=Fc(e),g=f&&Ui(f);a[d].pssh=g}}return a},{})}(Ec(d,"ContentProtection"));Object.keys(j).length&&(i=oc(i,{contentProtection:j}));var k=Jc(d),l=Ec(d,"Representation"),m=oc(c,k);return pc(l.map(function(a,b,c){return function(d){var e=Ec(d,"BaseURL"),f=Ic(b,e),g=oc(a,Hc(d)),h=Jc(d);return f.map(function(a){return{segmentInfo:oc(c,h),attributes:oc(g,{baseUrl:a})}})}}(i,f,m)))}}function Lc(a,b){void 0===b&&(b={});var c=b,d=c.manifestUri,e=void 0===d?"":d,f=c.NOW,g=void 0===f?Date.now():f,h=c.clientOffset,i=void 0===h?0:h,j=Ec(a,"Period");if(!j.length)throw new Error(Gj);var k=Ec(a,"Location"),l=Hc(a),m=Ic([e],Ec(a,"BaseURL"));return l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=g,l.clientOffset=i,k.length&&(l.locations=k.map(Fc)),{locations:l.locations,representationInfo:pc(j.map(function(a,b){return function(c,d){var e=Ic(b,Ec(c,"BaseURL")),f=Hc(c),g=parseInt(f.id,10),h=Je.isNaN(g)?d:g,i=oc(a,{periodIndex:h}),j=Ec(c,"AdaptationSet"),k=Jc(c);return pc(j.map(Kc(i,e,k)))}}(l,m)))}}function Mc(a){if(""===a)throw new Error(Hj);var b,c,d=new Fj;try{c=(b=d.parseFromString(a,"application/xml"))&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(a){}if(!c||c&&0<c.getElementsByTagName("parsererror").length)throw new Error(Ij);return c}function Nc(a,b){void 0===b&&(b={});var c=Lc(Mc(a),b),d=function(a){return a.map(Dc)}(c.representationInfo);return yc(d,c.locations,b.sidxMapping)}function Oc(a){return function(a){var b=Ec(a,"UTCTiming")[0];if(!b)return null;var c=Hc(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Lj)}return c}(Mc(a))}function Pc(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),-1<d)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}}function Qc(a,b){var c=1;for(b<a&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a}function Rc(a){var b=31&a[1];return b<<=8,b|=a[2]}function Sc(a){return!!(64&a[1])}function Tc(a){var b=0;return 1<(48&a[3])>>>4&&(b+=a[4]+1),b}function Uc(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function Vc(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return c=0<=c?c:0,(16&a[b+5])>>4?c+20:c+10}function Wc(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]}function Xc(a,b,c){for(var d,e,f,g,h=0,i=rk,j=!1;i<=a.byteLength;)if(71!==a[h]||71!==a[i]&&i!==a.byteLength)h++,i++;else{switch(d=a.subarray(h,i),mk.ts.parseType(d,b.pid)){case"pes":e=mk.ts.parsePesType(d,b.table),f=mk.ts.parsePayloadUnitStartIndicator(d),"audio"===e&&f&&(g=mk.ts.parsePesTime(d))&&(g.type="audio",c.audio.push(g),j=!0)}if(j)break;h+=rk,i+=rk}for(h=(i=a.byteLength)-rk,j=!1;0<=h;)if(71!==a[h]||71!==a[i]&&i!==a.byteLength)h--,i--;else{switch(d=a.subarray(h,i),mk.ts.parseType(d,b.pid)){case"pes":e=mk.ts.parsePesType(d,b.table),f=mk.ts.parsePayloadUnitStartIndicator(d),"audio"===e&&f&&(g=mk.ts.parsePesTime(d))&&(g.type="audio",c.audio.push(g),j=!0)}if(j)break;h-=rk,i-=rk}}function Yc(a,b,c){for(var d,e,f,g,h,i,j,k=0,l=rk,m=!1,n={data:[],size:0};l<a.byteLength;)if(71!==a[k]||71!==a[l])k++,l++;else{switch(d=a.subarray(k,l),mk.ts.parseType(d,b.pid)){case"pes":if(e=mk.ts.parsePesType(d,b.table),f=mk.ts.parsePayloadUnitStartIndicator(d),"video"===e&&(f&&!m&&(g=mk.ts.parsePesTime(d))&&(g.type="video",c.video.push(g),m=!0),!c.firstKeyFrame)){if(f&&0!==n.size){for(h=new Uint8Array(n.size),i=0;n.data.length;)j=n.data.shift(),h.set(j,i),i+=j.byteLength;if(mk.ts.videoPacketContainsKeyFrame(h)){var o=mk.ts.parsePesTime(h);o&&(c.firstKeyFrame=o,c.firstKeyFrame.type="video")}n.size=0}n.data.push(d),n.size+=d.byteLength}}if(m&&c.firstKeyFrame)break;k+=rk,l+=rk}for(k=(l=a.byteLength)-rk,m=!1;0<=k;)if(71!==a[k]||71!==a[l])k--,l--;else{switch(d=a.subarray(k,l),mk.ts.parseType(d,b.pid)){case"pes":e=mk.ts.parsePesType(d,b.table),f=mk.ts.parsePayloadUnitStartIndicator(d),"video"===e&&f&&(g=mk.ts.parsePesTime(d))&&(g.type="video",c.video.push(g),m=!0)}if(m)break;k-=rk,l-=rk}}function Zc(a){var b={pid:null,table:null},c={};for(var d in function(a,b){for(var c,d=0,e=rk;e<a.byteLength;)if(71!==a[d]||71!==a[e])d++,e++;else{switch(c=a.subarray(d,e),mk.ts.parseType(c,b.pid)){case"pat":b.pid||(b.pid=mk.ts.parsePat(c));break;case"pmt":b.table||(b.table=mk.ts.parsePmt(c))}if(b.pid&&b.table)return;d+=rk,e+=rk}}(a,b),b.table)if(b.table.hasOwnProperty(d))switch(b.table[d]){case _j:c.video=[],Yc(a,b,c),0===c.video.length&&delete c.video;break;case ak:c.audio=[],Xc(a,b,c),0===c.audio.length&&delete c.audio}return c}function $c(a,b,c){return a&&c&&c.responseURL&&b!==c.responseURL?c.responseURL:b}function _c(a,b){return a+"-"+b}function ad(a){var b=a.manifestString,c=a.customTagParsers,d=void 0===c?[]:c,e=a.customTagMappers,f=void 0===e?[]:e,g=new Xi;return d.forEach(function(a){return g.addParser(a)}),f.forEach(function(a){return g.addTagMapper(a)}),g.push(b),g.end(),g.manifest}function bd(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d]){var f=a.mediaGroups[c][d][e];b(f,c,d,e)}})}function cd(a){var b=a.playlist,c=a.uri,d=a.id;b.id=d,c&&(b.uri=c),b.attributes=b.attributes||{}}function dd(a,b){a.uri=b;for(var c=0;c<a.playlists.length;c++)if(!a.playlists[c].uri){var d="placeholder-uri-"+c;a.playlists[c].uri=d}bd(a,function(b,c,d,e){if(b.playlists&&b.playlists.length&&!b.playlists[0].uri){var f="placeholder-uri-"+c+"-"+d+"-"+e,g=_c(0,f);b.playlists[0].uri=f,b.playlists[0].id=g,a.playlists[g]=b.playlists[0],a.playlists[f]=b.playlists[0]}}),function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];cd({playlist:c,id:_c(b,c.uri)}),c.resolvedUri=Nk(a.uri,c.uri),a.playlists[c.id]=c,(a.playlists[c.uri]=c).attributes.BANDWIDTH||Ok.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(a),function(a){bd(a,function(b){b.uri&&(b.resolvedUri=Nk(a.uri,b.uri))})}(a)}function ed(a,b){a.resolvedUri||(a.resolvedUri=Nk(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Nk(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Nk(b,a.map.uri))}function fd(a,b){var c=Pk(a,{}),d=c.playlists[b.id];if(!d)return null;if(d.segments&&b.segments&&d.segments.length===b.segments.length&&d.endList===b.endList&&d.mediaSequence===b.mediaSequence)return null;var e=Pk(d,b);d.segments&&(e.segments=function(a,b,c){var d=b.slice();c=c||0;for(var e=Math.min(a.length,b.length+c),f=c;f<e;f++)d[f-c]=Pk(a[f],d[f-c]);return d}(d.segments,b.segments,b.mediaSequence-d.mediaSequence)),e.segments.forEach(function(a){ed(a,e.resolvedUri)});for(var f=0;f<c.playlists.length;f++)c.playlists[f].id===b.id&&(c.playlists[f]=e);return c.playlists[b.id]=e,c.playlists[b.uri]=e,c}function gd(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1e3*c.duration:500*(a.targetDuration||10)}function hd(a,b){var c,d=[];if(a&&a.length)for(c=0;c<a.length;c++)b(a.start(c),a.end(c))&&d.push([a.start(c),a.end(c)]);return rb.createTimeRanges(d)}function id(a,b){return hd(a,function(a,c){return a-.1<=b&&b<=c+.1})}function jd(a,b){return hd(a,function(a){return b<=a-Rk})}function kd(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")}function ld(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b}function md(a,b,c){if("undefined"==typeof b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence)return 0;var d=function(a,b){var c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if("undefined"!=typeof e.start)return{result:e.start,precise:!0};if("undefined"!=typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if("undefined"!=typeof(e=a.segments[d]).end)return{result:c+e.end,precise:!0};if(c+=e.duration,"undefined"!=typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}}(a,b);if(d.precise)return d.result;var e=function(a,b){for(var c,d=0,e=b-a.mediaSequence;e<a.segments.length;e++){if("undefined"!=typeof(c=a.segments[e]).start)return{result:c.start-d,precise:!0};if(d+=c.duration,"undefined"!=typeof c.end)return{result:c.end-d,precise:!0}}return{result:-1,precise:!1}}(a,b);return e.precise?e.result:d.result+c}function nd(a,b,c){if(!a)return 0;if("number"!=typeof c&&(c=0),"undefined"==typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return Oi.Infinity}return md(a,b,c)}function od(a,b,c){var d=0;if(c<b){var e=[c,b];b=e[0],c=e[1]}if(b<0){for(var f=b;f<Math.min(0,c);f++)d+=a.targetDuration;b=0}for(var g=b;g<c;g++)d+=a.segments[g].duration;return d}function pd(a,b){if(!a.segments.length)return 0;var c=a.segments.length,d=a.segments[c-1].duration||a.targetDuration,e="number"==typeof b?b:d+2*a.targetDuration;if(0===e)return c;for(var f=0;c--&&!(e<=(f+=a.segments[c].duration)););return Math.max(0,c)}function qd(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return nd(a);if(null===b)return null;b=b||0;var e=c?pd(a,d):a.segments.length;return md(a,a.mediaSequence+e,b)}function rd(a){return a.excludeUntil&&a.excludeUntil>Date.now()}function sd(a){return a.excludeUntil&&a.excludeUntil===1/0}function td(a){var b=rd(a);return!a.disabled&&!b}function ud(a,b){return b.attributes&&b.attributes[a]}function vd(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return!!td(a)&&(a.attributes.BANDWIDTH||0)<c}).length}function wd(a,b,c,d){var e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),c.headers&&(a.responseHeaders=c.headers),b&&"ETIMEDOUT"===b.code&&(a.timedout=!0),b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=new Error("XHR Failed with a response of: "+(a&&(e||a.responseText)))),d(b,a)}function xd(){return function a(b,c){b=Vk({timeout:45e3},b);var d=a.beforeRequest||rb.Vhs.xhr.beforeRequest;if(d&&"function"==typeof d){var e=d(b);e&&(b=e)}var f=Uk(b,function(a,b){return wd(f,a,b,c)}),g=f.abort;return f.abort=function(){return f.aborted=!0,g.apply(f,arguments)},f.uri=b.uri,f.requestTime=Date.now(),f}}function yd(a){var b={};return a.byterange&&(b.Range=function(a){var b=a.offset+a.length-1;return"bytes="+a.offset+"-"+b}(a.byterange)),b}function zd(a,b){var c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")}function Ad(a){return 32<=a&&a<126?String.fromCharCode(a):"."}function Bd(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b}function Cd(a){var b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")}function Dd(a){return a.resolvedUri}function Ed(a){for(var b=Array.prototype.slice.call(a),c="",d=0;d<b.length/16;d++)c+=b.slice(16*d,16*d+16).map(zd).join("")+" "+b.slice(16*d,16*d+16).map(Ad).join("")+"\n";return c}function Fd(a){var b=a.playlist,c=a.time,d=void 0===c?void 0:c,e=a.callback;if(!e)throw new Error("getProgramTime: callback must be provided");if(!b||void 0===d)return e({message:"getProgramTime: playlist and time must be provided"});var f=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c,d=0,e=0;e<b.segments.length&&!(a<=(d=(c=b.segments[e]).videoTimingInfo?c.videoTimingInfo.transmuxedPresentationEnd:d+c.duration));e++);var f=b.segments[b.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(d<a){if(a>d+.25*f.duration)return null;c=f}return{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:d-c.duration,type:c.videoTimingInfo?"accurate":"estimate"}}(d,b);if(!f)return e({message:"valid programTime was not found"});if("estimate"===f.type)return e({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:f.estimatedStart});var g={mediaSeconds:d},h=function(a,b){if(!b.dateTimeObject)return null;var c=b.videoTimingInfo.transmuxerPrependedSeconds,d=a-(b.videoTimingInfo.transmuxedPresentationStart+c);return new Date(b.dateTimeObject.getTime()+1e3*d)}(d,f.segment);return h&&(g.programDateTime=h.toISOString()),e(null,g)}function Gd(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo,g=a.pauseAfterSeek,h=void 0===g||g,i=a.tech,j=a.callback;if(!j)throw new Error("seekToProgramTime: callback must be provided");if("undefined"==typeof b||!c||!f)return j({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!i.hasStarted_)return j({message:"player must be playing a live stream to start buffering"});if(!function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0}(c))return j({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});var k=function(a,b){var c;try{c=new Date(a)}catch(a){return null}if(!b||!b.segments||0===b.segments.length)return null;var d=b.segments[0];if(c<d.dateTimeObject)return null;for(var e=0;e<b.segments.length-1&&(d=b.segments[e],!(c<b.segments[e+1].dateTimeObject));e++);var f=b.segments[b.segments.length-1],g=f.dateTimeObject,h=f.videoTimingInfo?function(a){return a.transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds}(f.videoTimingInfo):f.duration+.25*f.duration;return new Date(g.getTime()+1e3*h)<c?null:(g<c&&(d=f),{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:Tk.duration(b,b.mediaSequence+b.segments.indexOf(d)),type:d.videoTimingInfo?"accurate":"estimate"})}(b,c);if(!k)return j({message:b+" was not found in the stream"});var l=k.segment,m=function(a,b){var c,d;try{c=new Date(a),d=new Date(b)}catch(a){}var e=c.getTime();return(d.getTime()-e)/1e3}(l.dateTimeObject,b);if("estimate"===k.type)return 0===e?j({message:b+" is not buffered yet. Try again"}):(f(k.estimatedStart+m),void i.one("seeked",function(){Gd({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:h,tech:i,callback:j})}));var n=l.start+m;i.one("seeked",function(){return j(null,i.currentTime())}),h&&i.pause(),f(n)}function Hd(a,b){if(4===a.readyState)return b()}function Id(a){var b=a.byterange.offset+a.byterange.length-1;return a.uri+"-"+a.byterange.offset+"-"+b}function Jd(a,b){var c,d,e={};for(var f in a){var g=a[f].sidx;if(g){var h=Id(g);if(!b[h])break;var i=b[h].sidxInfo;c=i,d=g,(Boolean(!c.map&&!d.map)||Boolean(c.map&&d.map&&c.map.byterange.offset===d.map.byterange.offset&&c.map.byterange.length===d.map.byterange.length))&&c.uri===d.uri&&c.byterange.offset===d.byterange.offset&&c.byterange.length===d.byterange.length&&(e[h]=b[h])}}return e}function Kd(a){for(var b=new Uint8Array(new ArrayBuffer(a.length)),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function Ld(a){var b=a.transmuxer,c=a.bytes,d=a.audioAppendStart,e=a.gopsToAlignWith,f=a.isPartial,g=a.remux,h=a.onData,i=a.onTrackInfo,j=a.onAudioTimingInfo,k=a.onVideoTimingInfo,l=a.onVideoSegmentTimingInfo,m=a.onAudioSegmentTimingInfo,n=a.onId3,o=a.onCaptions,p=a.onDone,q={isPartial:f,buffer:[]};if(b.onmessage=function(a){Ck&&("data"===a.data.action&&function(a,b,c){var d=a.data.segment,e=d.type,f=d.initSegment,g=d.captions,h=d.captionStreams,i=d.metadata,j=d.videoFrameDtsTime,k=d.videoFramePtsTime;b.buffer.push({captions:g,captionStreams:h,metadata:i});var l=a.data.segment.boxes||{data:a.data.segment.data},m={type:e,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(f.data,f.byteOffset,f.byteLength)};"undefined"!=typeof j&&(m.videoFrameDtsTime=j),"undefined"!=typeof k&&(m.videoFramePtsTime=k),c(m)}(a,q,h),"trackinfo"===a.data.action&&i(a.data.trackInfo),"gopInfo"===a.data.action&&function(a,b){b.gopInfo=a.data.gopInfo}(a,q),"audioTimingInfo"===a.data.action&&j(a.data.audioTimingInfo),"videoTimingInfo"===a.data.action&&k(a.data.videoTimingInfo),"videoSegmentTimingInfo"===a.data.action&&l(a.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===a.data.action&&m(a.data.audioSegmentTimingInfo),"id3Frame"===a.data.action&&n([a.data.id3Frame],a.data.id3Frame.dispatchType),"caption"===a.data.action&&o(a.data.caption),"transmuxed"===a.data.type&&(b.onmessage=null,function(a){var b=a.transmuxedData,c=a.callback;b.buffer=[],c(b)}({transmuxedData:q,callback:p}),_k()))},d&&b.postMessage({action:"setAudioAppendStart",appendStart:d}),Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e}),"undefined"!=typeof g&&b.postMessage({action:"setRemux",remux:g}),c.byteLength){var r=c instanceof ArrayBuffer?c:c.buffer,s=c instanceof ArrayBuffer?0:c.byteOffset;b.postMessage({action:"push",data:r,byteOffset:s,byteLength:c.byteLength},[r])}b.postMessage({action:f?"partialFlush":"flush"})}function Md(a,b){a.postMessage({action:b}),_k()}function Nd(a,b){Ck?$k.push(Md.bind(null,b,a)):Md(b,Ck=a)}function Od(a){Ck?$k.push(a):Ld(Ck=a)}function Pd(a){a.forEach(function(a){a.abort()})}function Qd(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:el,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:fl,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:dl,xhr:b}:null}function Rd(a){var b=a.segment,c=a.bytes,d=a.isPartial,e=a.trackInfoFn,f=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,h=a.audioSegmentTimingInfoFn,i=a.id3Fn,j=a.captionsFn,k=a.dataFn,l=a.doneFn,m=b.map&&b.map.tracks||{},n=Boolean(m.audio&&m.video),o=f.bind(null,b,"audio","start"),p=f.bind(null,b,"audio","end"),q=f.bind(null,b,"video","start"),r=f.bind(null,b,"video","end");if(!d&&!b.lastReachedChar){var s=function(a,b){var c=sk(a,b*kk);if(!c)return null;var d={hasVideo:c.video&&2===c.video.length||!1,hasAudio:c.audio&&2===c.audio.length||!1};return d.hasVideo&&(d.videoStart=c.video[0].ptsTime),d.hasAudio&&(d.audioStart=c.audio[0].ptsTime),d}(c,b.baseStartTime);s&&(e(b,{hasAudio:s.hasAudio,hasVideo:s.hasVideo,isMuxed:n}),e=null,s.hasAudio&&!n&&o(s.audioStart),s.hasVideo&&q(s.videoStart),q=o=null)}Od({bytes:c,transmuxer:b.transmuxer,audioAppendStart:b.audioAppendStart,gopsToAlignWith:b.gopsToAlignWith,isPartial:d,remux:n,onData:function(a){a.type="combined"===a.type?"video":a.type,k(b,a)},onTrackInfo:function(a){e&&(n&&(a.isMuxed=!0),e(b,a))},onAudioTimingInfo:function(a){o&&"undefined"!=typeof a.start&&(o(a.start),o=null),p&&"undefined"!=typeof a.end&&p(a.end)},onVideoTimingInfo:function(a){q&&"undefined"!=typeof a.start&&(q(a.start),q=null),r&&"undefined"!=typeof a.end&&r(a.end)},onVideoSegmentTimingInfo:function(a){g(a)},onAudioSegmentTimingInfo:function(a){h(a)},onId3:function(a,c){i(b,a,c)},onCaptions:function(a){j(b,[a])},onDone:function(a){l&&!d&&(a.type="combined"===a.type?"video":a.type,l(null,b,a))}})}function Sd(a){var b=a.segment,c=a.bytes,d=a.isPartial,e=a.trackInfoFn,f=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,h=a.audioSegmentTimingInfoFn,i=a.id3Fn,j=a.captionsFn,k=a.dataFn,l=a.doneFn,m=new Uint8Array(c);if(Wj(m)){b.isFmp4=!0;var n=b.map.tracks,o={isFmp4:!0,hasVideo:!!n.video,hasAudio:!!n.audio};n.audio&&n.audio.codec&&"enca"!==n.audio.codec&&(o.audioCodec=n.audio.codec),n.video&&n.video.codec&&"encv"!==n.video.codec&&(o.videoCodec=n.video.codec),n.video&&n.audio&&(o.isMuxed=!0),e(b,o);var p=zk(b.map.timescales,m);o.hasAudio&&!o.isMuxed&&f(b,"audio","start",p),o.hasVideo&&f(b,"video","start",p);var q=function(a){k(b,{data:c,type:o.hasAudio&&!o.isMuxed?"audio":"video"}),a&&a.length&&j(b,a),l(null,b,{})};if(!n.video||!c.byteLength||!b.transmuxer)return void q();var r=c instanceof ArrayBuffer?c:c.buffer,s=c instanceof ArrayBuffer?0:c.byteOffset;return b.transmuxer.addEventListener("message",function a(d){if("mp4Captions"===d.data.action){b.transmuxer.removeEventListener("message",a);var e=d.data.data;b.bytes=c=new Uint8Array(e,e.byteOffset||0,e.byteLength),q(d.data.captions)}}),void b.transmuxer.postMessage({action:"pushMp4Captions",timescales:b.map.timescales,trackIds:[n.video.id],data:r,byteOffset:s,byteLength:c.byteLength},[r])}if(b.transmuxer){if("undefined"==typeof b.container&&(b.container=Uj(m)),"ts"!==b.container&&"aac"!==b.container)return e(b,{hasAudio:!1,hasVideo:!1}),void l(null,b,{});Rd({segment:b,bytes:c,isPartial:d,trackInfoFn:e,timingInfoFn:f,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:h,id3Fn:i,captionsFn:j,dataFn:k,doneFn:l})}else l(null,b,{})}function Td(a){var b=a.activeXhrs,c=a.decryptionWorker,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.dataFn,k=a.doneFn,l=0,m=!1;return function(a,n){if(!m){if(a)return m=!0,Pd(b),k(a,n);if((l+=1)===b.length){if(n.endOfAllRequests=Date.now(),n.encryptedBytes)return function(a){var b,c=a.decryptionWorker,d=a.segment,e=a.trackInfoFn,f=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,h=a.audioSegmentTimingInfoFn,i=a.id3Fn,j=a.captionsFn,k=a.dataFn,l=a.doneFn;c.addEventListener("message",function a(b){if(b.data.source===d.requestId){c.removeEventListener("message",a);var m=b.data.decrypted;d.bytes=new Uint8Array(m.bytes,m.byteOffset,m.byteLength),Sd({segment:d,bytes:d.bytes,isPartial:!1,trackInfoFn:e,timingInfoFn:f,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:h,id3Fn:i,captionsFn:j,dataFn:k,doneFn:l})}}),b=d.key.bytes.slice?d.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(d.key.bytes)),c.postMessage(Bd({source:d.requestId,encrypted:d.encryptedBytes,key:b,iv:d.key.iv}),[d.encryptedBytes.buffer,b.buffer])}({decryptionWorker:c,segment:n,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,dataFn:j,doneFn:k});Sd({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,dataFn:j,doneFn:k})}}}}function Ud(a){var b=a.segment,c=a.progressFn,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.dataFn,k=a.handlePartialData;return function(a){var l=a.target;if(!l.aborted){if(k&&!b.key&&l.responseText&&8<=l.responseText.length){var m=Kd(l.responseText.substring(b.lastReachedChar||0));!b.lastReachedChar&&Wj(new Uint8Array(m))||(b.lastReachedChar=l.responseText.length,Sd({segment:b,bytes:m,isPartial:!0,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,dataFn:j}))}return b.stats=rb.mergeOptions(b.stats,function(a){var b=a.target,c={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-b.requestTime||0};return c.bytesReceived=a.loaded,c.bandwidth=Math.floor(c.bytesReceived/c.roundTripTime*8*1e3),c}(a)),!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now()),c(a,b)}}}function Vd(a){var b=a.xhr,c=a.xhrOptions,d=a.decryptionWorker,e=a.segment,f=a.abortFn,g=a.progressFn,h=a.trackInfoFn,i=a.timingInfoFn,j=a.videoSegmentTimingInfoFn,k=a.audioSegmentTimingInfoFn,l=a.id3Fn,m=a.captionsFn,n=a.dataFn,o=a.doneFn,p=a.handlePartialData,q=[],r=Td({activeXhrs:q,decryptionWorker:d,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,dataFn:n,doneFn:o});if(e.key&&!e.key.bytes){var s=b(rb.mergeOptions(c,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),function(a,b){return function(c,d){var e=d.response,f=Qd(c,d);if(f)return b(f,a);if(16!==e.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:dl,xhr:d},a);var g=new DataView(e);return a.key.bytes=new Uint32Array([g.getUint32(0),g.getUint32(4),g.getUint32(8),g.getUint32(12)]),b(null,a)}}(e,r));q.push(s)}if(e.map&&!e.map.bytes){var t=b(rb.mergeOptions(c,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:yd(e.map)}),function(a){var b=a.segment,c=a.finishProcessingFn;return function(a,d){var e=d.response,f=Qd(a,d);if(f)return c(f,b);if(0===e.byteLength)return c({status:d.status,message:"Empty HLS segment content at URL: "+d.uri,code:dl,xhr:d},b);b.map.bytes=new Uint8Array(d.response);var g=Uj(b.map.bytes);return"mp4"!==g?c({status:d.status,message:"Found unsupported "+(g||"unknown")+" container for initialization segment at URL: "+d.uri,code:dl,internal:!0,xhr:d},b):(Ak(b.map.bytes).forEach(function(a){b.map.tracks=b.map.tracks||{},b.map.tracks[a.type]||"number"==typeof(b.map.tracks[a.type]=a).id&&a.timescale&&(b.map.timescales=b.map.timescales||{},b.map.timescales[a.id]=a.timescale)}),c(null,b))}}({segment:e,finishProcessingFn:r}));q.push(t)}var u=rb.mergeOptions(c,{uri:e.resolvedUri,responseType:"arraybuffer",headers:yd(e)});p&&(u.responseType="text",u.beforeSend=function(a){a.overrideMimeType("text/plain; charset=x-user-defined")});var v=b(u,function(a){var b=a.segment,c=a.finishProcessingFn,d=a.responseType;return function(a,e){var f=e.response,g=Qd(a,e);if(g)return c(g,b);var h="arraybuffer"!==d&&e.responseText?Kd(e.responseText.substring(b.lastReachedChar||0)):e.response;return 0===f.byteLength?c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:dl,xhr:e},b):(b.stats=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}}(e),b.key?b.encryptedBytes=new Uint8Array(h):b.bytes=new Uint8Array(h),c(null,b))}}({segment:e,finishProcessingFn:r,responseType:u.responseType}));v.addEventListener("progress",Ud({segment:e,progressFn:g,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,dataFn:n,handlePartialData:p})),q.push(v);var w={};return q.forEach(function(a){a.addEventListener("loadend",function(a){var b=a.loadendState,c=a.abortFn;return function(a){a.target.aborted&&c&&!b.calledAbortFn&&(c(),b.calledAbortFn=!0)}}({loadendState:w,abortFn:f}))}),function(){return Pd(q)}}function Wd(a,b){return function(c){var d=this;if(!b)return new ll(a);if(ll&&!c){var e=Xd(b.toString().replace(/^function.+?{/,"").slice(0,-1));return this[hl]=new ll(e),function(a,b){if(a&&b){var c=a.terminate;a.objURL=b,a.terminate=function(){a.objURL&&kl.revokeObjectURL(a.objURL),c.call(a)}}}(this[hl],e),this[hl]}var f={postMessage:function(a){d.onmessage&&setTimeout(function(){d.onmessage({data:a,target:f})})}};b.call(f),this.postMessage=function(a){setTimeout(function(){f.onmessage({data:a,target:d})})},this.isThisThread=!0}}function Xd(a){try{return kl.createObjectURL(new Blob([a],{type:il}))}catch(c){var b=new jl;return b.append(a),kl.createObjectURL(b.getBlob(type))}}function Yd(a,b){var c=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&c.AUDIO&&a.mediaGroups.AUDIO[c.AUDIO]}function Zd(a,b){var c=b.attributes||{},d=function(a){var b=a.attributes||{};if(b.CODECS)return Lk(b.CODECS)}(b)||{};if(Yd(a,b)&&!d.audio&&!function(a,b){if(!Yd(a,b))return!0;var c=b.attributes||{},d=a.mediaGroups.AUDIO[c.AUDIO];for(var e in d)if(!d[e].uri&&!d[e].playlists)return!0;return!1}(a,b)){var e=Gk(a,c.AUDIO);e&&(d.audio=e.audio)}var f={};return d.video&&(f.video=Mk(""+d.video.type+d.video.details)),d.audio&&(f.audio=Mk(""+d.audio.type+d.audio.details)),d.text&&(f.text=d.text.type),d.unknown&&(f.unknown=d.unknown),f}function $d(a){return rb.log.debug?rb.log.debug.bind(rb,"VHS:",a+" >"):function(){}}function _d(a){if(a&&a.playlist){var b=a.playlist;return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}}function ae(a,b){if(!a)return"";var c=Oi.getComputedStyle(a);return c?c[b]:""}function be(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})}function ce(a,b){var c,d;return a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH),c=c||Oi.Number.MAX_VALUE,b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),c-(d=d||Oi.Number.MAX_VALUE)}function de(a,b,c,d,e){if(a){var f={bandwidth:b,width:c,height:d,limitRenditionByPlayerDimensions:e},g=a.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,c=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;return{bandwidth:a.attributes.BANDWIDTH||Oi.Number.MAX_VALUE,width:b,height:c,playlist:a}});be(g,function(a,b){return a.bandwidth-b.bandwidth});var h=(g=g.filter(function(a){return!Tk.isIncompatible(a.playlist)})).filter(function(a){return Tk.isEnabled(a.playlist)});h.length||(h=g.filter(function(a){return!Tk.isDisabled(a.playlist)}));var i=h.filter(function(a){return a.bandwidth*Zk.BANDWIDTH_VARIANCE<b}),j=i[i.length-1],k=i.filter(function(a){return a.bandwidth===j.bandwidth})[0];if(!1===e){var l=k||h[0]||g[0];if(l&&l.playlist){var m="sortedPlaylistReps";return k&&(m="bandwidthBestRep"),h[0]&&(m="enabledPlaylistReps"),rl("choosing "+_d(l)+" using "+m+" with options",f),l.playlist}return rl("could not choose a playlist with options",f),null}var n=i.filter(function(a){return a.width&&a.height});be(n,function(a,b){return a.width-b.width});var o=n.filter(function(a){return a.width===c&&a.height===d});j=o[o.length-1];var p,q,r,s=o.filter(function(a){return a.bandwidth===j.bandwidth})[0];s||(q=(p=n.filter(function(a){return a.width>c||a.height>d})).filter(function(a){return a.width===p[0].width&&a.height===p[0].height}),j=q[q.length-1],r=q.filter(function(a){return a.bandwidth===j.bandwidth})[0]);var t=r||s||k||h[0]||g[0];if(t&&t.playlist){var u="sortedPlaylistReps";return r?u="resolutionPlusOneRep":s?u="resolutionBestRep":k?u="bandwidthBestRep":h[0]&&(u="enabledPlaylistReps"),rl("choosing "+_d(t)+" using "+u+" with options",f),t.playlist}return rl("could not choose a playlist with options",f),null}}function ee(){var a=this.useDevicePixelRatio&&Oi.devicePixelRatio||1;return de(this.playlists.master,this.systemBandwidth,parseInt(ae(this.tech_.el(),"width"),10)*a,parseInt(ae(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions)}function fe(a){var b=a.inbandTextTracks,c=a.metadataArray,d=a.timestampOffset,e=a.videoDuration;if(c){var f=Oi.WebKitDataCue||Oi.VTTCue,g=b.metadataTrack_;if(g&&(c.forEach(function(a){var b=a.cueTime+d;!("number"!=typeof b||Oi.isNaN(b)||b<0)&&b<1/0&&a.frames.forEach(function(a){var c=new f(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,function(a){Object.defineProperties(a.frame,{id:{get:function(){return rb.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key;
}},value:{get:function(){return rb.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return rb.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})}(c),g.addCue(c)})}),g.cues&&g.cues.length)){for(var h=g.cues,i=[],j=0;j<h.length;j++)h[j]&&i.push(h[j]);var k=i.reduce(function(a,b){var c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),l=Object.keys(k).sort(function(a,b){return Number(a)-Number(b)});l.forEach(function(a,b){var c=k[a],d=Number(l[b+1])||e;c.forEach(function(a){a.endTime=d})})}}}function ge(a,b,c){var d,e;if(c&&c.cues)for(d=c.cues.length;d--;)(e=c.cues[d]).startTime>=a&&e.endTime<=b&&c.removeCue(e)}function he(a){return"number"==typeof a&&isFinite(a)}function ie(a){return a+"TimingInfo"}function je(a){var b=a.segmentTimeline,c=a.currentTimeline,d=a.startOfSegment,e=a.buffered;return a.overrideCheck||b!==c?b<c?d:e.length?e.end(e.length-1):d:null}function ke(a){var b=a.timelineChangeController,c=a.currentTimeline,d=a.segmentTimeline,e=a.loaderType,f=a.audioDisabled;if(c===d)return!1;if("audio"===e){var g=b.lastTimelineChange({type:"main"});return!g||g.to!==d}if("main"===e&&f){var h=b.pendingTimelineChange({type:"audio"});return!h||h.to!==d}return!1}function le(a){var b=a.segmentDuration,c=a.maxDuration;return!!b&&Math.round(b)>c+Rk}function me(a,b){if("hls"!==b)return null;var c=function(a,b){var c=a&&"number"==typeof a.start&&"number"==typeof a.end?a.end-a.start:0,d=b&&"number"==typeof b.start&&"number"==typeof b.end?b.end-b.start:0;return Math.max(c,d)}(a.audioTimingInfo,a.videoTimingInfo);if(!c)return null;var d=a.playlist.targetDuration,e=le({segmentDuration:c,maxDuration:2*d}),f=le({segmentDuration:c,maxDuration:d}),g="Segment with index "+a.mediaIndex+" from playlist "+a.playlist.id+" has a duration of "+c+" when the reported duration is "+a.duration+" and the target duration is "+d+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return e||f?{severity:e?"warn":"info",message:g}:null}function ne(){}function oe(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})}function pe(a,b){var c=b[a+"Buffer"];return c&&c.updating||b.queuePending[a]}function qe(a,b){if(0!==b.queue.length){var c=0,d=b.queue[c];if("mediaSource"!==d.type){if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!pe(a,b)){if(d.type!==a){if(null===(c=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("mediaSource"===d.type)return null;if(d.type===a)return c}return null}(a,b.queue)))return;d=b.queue[c]}b.queue.splice(c,1),d.action(a,b),d.doneFn?b.queuePending[a]=d:qe(a,b)}}else b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),qe("audio",b),qe("video",b))}}function re(a,b){var c=b[a+"Buffer"],d=oe(a);c&&(c.removeEventListener("updateend",b["on"+d+"UpdateEnd_"]),c.removeEventListener("error",b["on"+d+"Error_"]),b.codecs[a]=null,b[a+"Buffer"]=null)}function se(a,b){return a&&b&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,b)}function te(a){var b=a.type,c=a.sourceUpdater,d=a.action,e=a.doneFn,f=a.name;c.queue.push({type:b,action:d,doneFn:e,name:f}),qe(b,c)}function ue(a,b){return function(c){if(b.queuePending[a]){var d=b.queuePending[a].doneFn;b.queuePending[a]=null,d&&d(b[a+"Error_"])}qe(a,b)}}function ve(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))}function we(a,b){for(var c=a.cues,d=0;d<c.length;d++){var e=c[d];if(b>=e.adStartTime&&b<=e.adEndTime)return e}return null}function xe(a,b){a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)}function ye(a,b){(b.activePlaylistLoader=a).load()}function ze(a){function b(){c.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})}["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Nl[b](b,a)});var c=a.mediaTypes,d=a.masterPlaylistLoader,e=a.tech,f=a.vhs;["AUDIO","SUBTITLES"].forEach(function(b){c[b].activeGroup=function(a,b){return function(c){var d=b.masterPlaylistLoader,e=b.mediaTypes[a].groups,f=d.media();if(!f)return null;var g=null;return f.attributes[a]&&(g=e[f.attributes[a]]),g=g||e.main,"undefined"==typeof c?g:null===c?null:g.filter(function(a){return a.id===c.id})[0]||null}}(b,a),c[b].activeTrack=Ol[b](b,a),c[b].onGroupChanged=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.activeGroup(g),i=f.activePlaylistLoader;xe(d,f),h&&(h.playlistLoader?(d.resyncLoader(),ye(h.playlistLoader,f)):i&&e.resetEverything())}}(b,a),c[b].onGroupChanging=function(a,b){return function(){var c=b.segmentLoaders[a];c.abort(),c.pause()}}(b,a),c[b].onTrackChanged=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.activeGroup(g),i=f.activePlaylistLoader;if(xe(d,f),h){if("AUDIO"===a){if(!h.playlistLoader)return e.setAudio(!0),void e.resetEverything();d.setAudio(!0),e.setAudio(!1)}i!==h.playlistLoader&&(d.track&&d.track(g),d.resetEverything()),ye(h.playlistLoader,f)}}}(b,a)});var g=c.AUDIO.activeGroup();if(g){var h=(g.filter(function(a){return a.default})[0]||g[0]).id;c.AUDIO.tracks[h].enabled=!0,c.AUDIO.onTrackChanged()}for(var i in d.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return c[a].onGroupChanged()})}),d.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(a){return c[a].onGroupChanging()})}),e.audioTracks().addEventListener("change",b),e.remoteTextTracks().addEventListener("change",c.SUBTITLES.onTrackChanged),f.on("dispose",function(){e.audioTracks().removeEventListener("change",b),e.remoteTextTracks().removeEventListener("change",c.SUBTITLES.onTrackChanged)}),e.clearTracks("audio"),c.AUDIO.tracks)e.audioTracks().addTrack(c.AUDIO.tracks[i])}function Ae(a,b,c){var d=a.masterPlaylistController_,e=d[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(d);if(b.attributes.RESOLUTION){var f=b.attributes.RESOLUTION;this.width=f.width,this.height=f.height}this.bandwidth=b.attributes.BANDWIDTH,this.codecs=Zd(d.master(),b),this.playlist=b,this.id=c,this.enabled=function(a,b,c){return function(d){var e=a.master.playlists[b],f=sd(e),g=td(e);return"undefined"==typeof d?g:(d?delete e.disabled:e.disabled=!0,d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled")),d)}}(a.playlists,b.id,e)}function Be(a){!function a(b,c){function d(){i&&b.currentTime(i)}function e(a){null!=a&&(i=b.duration()!==1/0&&b.currentTime()||0,b.one("loadedmetadata",d),b.src(a),b.trigger({type:"usage",name:"vhs-error-reload"}),b.trigger({type:"usage",name:"hls-error-reload"}),b.play())}function f(){return Date.now()-h<1e3*j.errorInterval?(b.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void b.trigger({type:"usage",name:"hls-error-reload-canceled"})):j.getSource&&"function"==typeof j.getSource?(h=Date.now(),j.getSource.call(b,e)):void rb.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function g(){b.off("loadedmetadata",d),b.off("error",f),b.off("dispose",g)}var h=0,i=0,j=rb.mergeOptions(Tl,c);b.ready(function(){b.trigger({type:"usage",name:"vhs-error-reload-initialized"}),b.trigger({type:"usage",name:"hls-error-reload-initialized"})}),b.on("error",f),b.on("dispose",g),b.reloadSourceOnError=function(c){g(),a(b,c)}}(this,a)}function Ce(a,b){for(var c=b.media(),d=-1,e=0;e<a.length;e++)if(a[e].id===c.id){d=e;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})}function De(a){var b=a.player,c=a.sourceKeySystems,d=a.audioMedia,e=a.mainPlaylists;if(!b.eme.initializeMediaKeys)return Promise.resolve();var f=function(a,b){return a.reduce(function(a,c){if(!c.contentProtection)return a;var d=b.reduce(function(a,b){var d=c.contentProtection[b];return d&&d.pssh&&(a[b]={pssh:d.pssh}),a},{});return Object.keys(d).length&&a.push(d),a},[])}(d?e.concat([d]):e,Object.keys(c)),g=[],h=[];return f.forEach(function(a){h.push(new Promise(function(a,c){b.tech_.one("keysessioncreated",a)})),g.push(new Promise(function(c,d){b.eme.initializeMediaKeys({keySystems:a},function(a){a?d(a):c()})}))}),Promise.race([Promise.all(g),Promise.race(h)])}function Ee(a){var b=a.player,c=function(a,b,c){if(!a)return a;var d={video:b&&b.attributes&&b.attributes.CODECS,audio:c&&c.attributes&&c.attributes.CODECS};!d.audio&&d.video&&1<d.video.split(",").length&&d.video.split(",").forEach(function(a){a=a.trim(),Ik(a)?d.audio=a:Jk(a)&&(d.video=a)});var e=d.video?'video/mp4;codecs="'+d.video+'"':null,f=d.audio?'audio/mp4;codecs="'+d.audio+'"':null,g={};for(var h in a)g[h]={audioContentType:f,videoContentType:e},b.contentProtection&&b.contentProtection[h]&&b.contentProtection[h].pssh&&(g[h].pssh=b.contentProtection[h].pssh),"string"==typeof a[h]&&(g[h].url=a[h]);return rb.mergeOptions(a,g)}(a.sourceKeySystems,a.media,a.audioMedia);return!(!c||(b.currentSource().keySystems=c)&&!b.eme&&(rb.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}function Fe(){if(!Oi.localStorage)return null;var a=Oi.localStorage.getItem(Vl);if(!a)return null;try{return JSON.parse(a)}catch(a){return null}}for(var Ge,He="7.11.5",Ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:{},Je="undefined"!=typeof window?window:"undefined"!=typeof Ie?Ie:"undefined"!=typeof self?self:{},Ke={},Le="undefined"!=typeof Ie?Ie:"undefined"!=typeof window?window:{},Me="undefined"!=typeof document?document:Le["__GLOBAL_DOCUMENT_CACHE@4"]||(Le["__GLOBAL_DOCUMENT_CACHE@4"]=Ke),Ne={prefixed:!0},Oe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Pe=Oe[0],Qe=0;Qe<Oe.length;Qe++)if(Oe[Qe][1]in Me){Ge=Oe[Qe];break}if(Ge){for(var Re=0;Re<Ge.length;Re++)Ne[Pe[Re]]=Ge[Re];Ne.prefixed=Ge[0]!==Pe[0]}var Se,Te,Ue,Ve,We,Xe=[],Ye=function(a,b){return function(c,d,e){var f=b.levels[d],g=new RegExp("^("+f+")$");if("log"!==c&&e.unshift(c.toUpperCase()+":"),e.unshift(a+":"),Xe){Xe.push([].concat(e));var h=Xe.length-1e3;Xe.splice(0,0<h?h:0)}if(Je.console){var i=Je.console[c];i||"debug"!==c||(i=Je.console.info||Je.console.log),i&&f&&g.test(c)&&i[Array.isArray(e)?"apply":"call"](Je.console,e)}}},Ze=function a(b){function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d("log",e,b)}var d,e="info";return d=Ye(b,c),c.createLogger=function(c){return a(b+": "+c)},c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},c.level=function(a){if("string"==typeof a){if(!c.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');e=a}return e},(c.history=function(){return Xe?[].concat(Xe):[]}).filter=function(a){return(Xe||[]).filter(function(b){return new RegExp(".*"+a+".*").test(b[0])})},c.history.clear=function(){Xe&&(Xe.length=0)},c.history.disable=function(){null!==Xe&&(Xe.length=0,Xe=null)},c.history.enable=function(){null===Xe&&(Xe=[])},c.error=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("error",e,b)},c.warn=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("warn",e,b)},c.debug=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("debug",e,b)},c}("VIDEOJS"),$e=Ze.createLogger,_e=c(function(a){function b(){return a.exports=b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.apply(this,arguments)}a.exports=b}),af=Object.prototype.toString,bf=function(a){return g(a)?Object.keys(a):[]},cf=Je.navigator&&Je.navigator.userAgent||"",df=/AppleWebKit\/([\d.]+)/i.exec(cf),ef=df?parseFloat(df.pop()):null,ff=/iPod/i.test(cf),gf=(Se=cf.match(/OS (\d+)_/i))&&Se[1]?Se[1]:null,hf=/Android/i.test(cf),jf=function(){var a=cf.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b||null}(),kf=hf&&jf<5&&ef<537,lf=/Firefox/i.test(cf),mf=/Edg/i.test(cf),nf=!mf&&(/Chrome/i.test(cf)||/CriOS/i.test(cf)),of=(Te=cf.match(/(Chrome|CriOS)\/(\d+)/))&&Te[2]?parseFloat(Te[2]):null,pf=(Ue=/MSIE\s(\d+)\.\d/.exec(cf),!(Ve=Ue&&parseFloat(Ue[1]))&&/Trident\/7.0/i.test(cf)&&/rv:11.0/.test(cf)&&(Ve=11),Ve),qf=/Safari/i.test(cf)&&!nf&&!hf&&!mf,rf=/Windows/i.test(cf),sf=Boolean(l()&&("ontouchstart"in Je||Je.navigator.maxTouchPoints||Je.DocumentTouch&&Je.document instanceof Je.DocumentTouch)),tf=/iPad/i.test(cf)||qf&&sf&&!/iPhone/i.test(cf),uf=/iPhone/i.test(cf)&&!tf,vf=uf||tf||ff,wf=(qf||vf)&&!nf,xf=Object.freeze({__proto__:null,IS_IPOD:ff,IOS_VERSION:gf,IS_ANDROID:hf,ANDROID_VERSION:jf,IS_NATIVE_ANDROID:kf,IS_FIREFOX:lf,IS_EDGE:mf,IS_CHROME:nf,CHROME_VERSION:of,IE_VERSION:pf,IS_SAFARI:qf,IS_WINDOWS:rf,TOUCH_ENABLED:sf,IS_IPAD:tf,IS_IPHONE:uf,IS_IOS:vf,IS_ANY_SAFARI:wf}),yf=o("querySelector"),zf=o("querySelectorAll"),Af=Object.freeze({__proto__:null,isReal:l,isEl:m,isInFrame:n,createEl:p,textContent:q,prependTo:r,hasClass:s,addClass:t,removeClass:u,toggleClass:v,setAttributes:w,getAttributes:x,getAttribute:y,setAttribute:z,removeAttribute:A,blockTextSelection:B,unblockTextSelection:C,getBoundingClientRect:D,findPosition:E,getPointerPosition:F,isTextNode:G,emptyEl:H,normalizeContent:I,appendContent:J,insertContent:K,isSingleLeftClick:L,$:yf,$$:zf}),Bf=!1,Cf=function(){if(l()&&!1!==We.options.autoSetup){var a=Array.prototype.slice.call(Me.getElementsByTagName("video")),b=Array.prototype.slice.call(Me.getElementsByTagName("audio")),c=Array.prototype.slice.call(Me.getElementsByTagName("video-js")),d=a.concat(b,c);if(d&&0<d.length)for(var e=0,f=d.length;e<f;e++){var g=d[e];if(!g||!g.getAttribute){M(1);break}void 0===g.player&&null!==g.getAttribute("data-setup")&&We(g)}else Bf||M(1)}};l()&&("complete"===Me.readyState?N():Je.addEventListener("load",N));var Df,Ef=3;Je.WeakMap||(Df=function(){function a(){this.vdata="vdata"+Math.floor(Je.performance&&Je.performance.now()||Date.now()),this.data={}}var b=a.prototype;return b.set=function(a,b){var c=a[this.vdata]||Q();return a[this.vdata]||(a[this.vdata]=c),this.data[c]=b,this},b.get=function(a){var b=a[this.vdata];return b?this.data[b]:void Ze("We have no data for this element",a)},b.has=function(a){return a[this.vdata]in this.data},b.delete=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])},a}());var Ff,Gf,Hf=Je.WeakMap?new WeakMap:new Df,If=function(){if("boolean"!=typeof Ff){Ff=!1;try{var a=Object.defineProperty({},"passive",{get:function(){Ff=!0}});Je.addEventListener("test",null,a),Je.removeEventListener("test",null,a)}catch(a){}}return Ff},Jf=["touchstart","touchmove"],Kf=Object.freeze({__proto__:null,fixEvent:T,on:U,off:V,trigger:W,one:X,any:Y});_.prototype.allowedEvents_={},_.prototype.addEventListener=_.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},U(this,a,b),this.addEventListener=c},_.prototype.removeEventListener=_.prototype.off=function(a,b){V(this,a,b)},_.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},X(this,a,b),this.addEventListener=c},_.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},Y(this,a,b),this.addEventListener=c},_.prototype.dispatchEvent=_.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=T(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),W(this,a)},_.prototype.queueTrigger=function(a){var b=this;Gf=Gf||new Map;var c=a.type||a,d=Gf.get(this);d||(d=new Map,Gf.set(this,d));var e=d.get(c);d.delete(c),Je.clearTimeout(e);var f=Je.setTimeout(function(){0===d.size&&(d=null,Gf.delete(b)),b.trigger(a)},0);d.set(c,f)};var Lf=function(a){return a instanceof _||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},Mf={on:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=fa(this,c,"on"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(ga(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,ga(this,"on","dispose",j),ga(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=fa(this,c,"one"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)ga(g,"one",h,i);else{var j=function b(){a.off(g,h,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];i.apply(null,d)};j.guid=i.guid,ga(g,"one",h,j)}},any:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=fa(this,c,"any"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)ga(g,"any",h,i);else{var j=function b(){a.off(g,h,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];i.apply(null,d)};j.guid=i.guid,ga(g,"any",h,j)}},off:function(a,b,c){if(!a||ba(a))V(this.eventBusEl_,a,b);else{var d=a,e=b;ca(d,this,"off"),da(e,this,"off"),ea(c,this,"off"),c=Z(this,c),this.off("dispose",c),d.nodeName?(V(d,e,c),V(d,"dispose",c)):Lf(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){ca(this.eventBusEl_,this,"trigger");var c=a&&"string"!=typeof a?a.type:a;if(!ba(c)){var d="Invalid event type for "+aa(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!a)throw new Error(d);(this.log||Ze).error(d)}return W(this.eventBusEl_,a,b)}},Nf={state:{},setState:function(a){var b,c=this;return"function"==typeof a&&(a=a()),e(a,function(a,d){c.state[d]!==a&&((b=b||{})[d]={from:c.state[d],to:a}),c.state[d]=a}),b&&Lf(this)&&this.trigger({changes:b,type:"statechanged"}),b}},Of=function(){function a(){this.map_={}}var b=a.prototype;return b.has=function(a){return a in this.map_},b.delete=function(a){var b=this.has(a);return delete this.map_[a],b},b.set=function(a,b){return this.map_[a]=b,this},b.forEach=function(a,b){for(var c in this.map_)a.call(b,this.map_[c],c,this)},a}(),Pf=Je.Map?Je.Map:Of,Qf=function(){function a(){this.set_={}}var b=a.prototype;return b.has=function(a){return a in this.set_},b.delete=function(a){var b=this.has(a);return delete this.set_[a],b},b.add=function(a){return this.set_[a]=1,this},b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)},a}(),Rf=Je.Set?Je.Set:Qf,Sf=function(){function a(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=la({},this.options_),b=this.options_=la(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){var d=a&&a.id&&a.id()||"no_player";this.id_=d+"_component_"+Q()}this.name_=b.name||null,b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl()),!1!==b.evented&&(ha(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ia(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Rf,this.setIntervalIds_=new Rf,this.rafIds_=new Rf,this.namedRafs_=new Pf,(this.clearingTimersOnDispose_=!1)!==b.initChildren&&this.initChildren(),this.ready(c),!1!==b.reportTouchActivity&&this.enableTouchActivity()}var b=a.prototype;return b.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;0<=a;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Hf.has(this.el_)&&Hf.delete(this.el_),this.el_=null),this.player_=null}},b.isDisposed=function(){return Boolean(this.isDisposed_)},b.player=function(){return this.player_},b.options=function(a){return a&&(this.options_=la(this.options_,a)),this.options_},b.el=function(){return this.el_},b.createEl=function(a,b,c){return p(a,b,c)},b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return"undefined"==typeof d&&(e=a),e})),i},b.handleLanguagechange=function(){},b.contentEl=function(){return this.contentEl_||this.el_},b.id=function(){return this.id_},b.name=function(){return this.name_},b.children=function(){return this.children_},b.getChildById=function(a){return this.childIndex_[a]},b.getChild=function(a){if(a)return this.childNameIndex_[a]},b.getDescendant=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reduce(function(a,b){return a.concat(b)},[]);for(var d=this,e=0;e<b.length;e++)if(!(d=d.getChild(b[e]))||!d.getChild)return;return d},b.addChild=function(b,c,d){var e,f;if(void 0===c&&(c={}),void 0===d&&(d=this.children_.length),"string"==typeof b){f=ka(b);var g=c.componentClass||f;c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(e.parentComponent_&&e.parentComponent_.removeChild(e),this.children_.splice(d,0,e),e.parentComponent_=this,"function"==typeof e.id&&(this.childIndex_[e.id()]=e),(f=f||e.name&&ka(e.name()))&&(this.childNameIndex_[f]=e,this.childNameIndex_[ja(f)]=e),"function"==typeof e.el&&e.el()){var i=null;this.children_[d+1]&&(this.children_[d+1].el_?i=this.children_[d+1].el_:m(this.children_[d+1])&&(i=this.children_[d+1])),this.contentEl().insertBefore(e.el(),i)}return e},b.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[ka(a.name())]=null,this.childNameIndex_[ja(a.name())]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d,e=this.options_,f=a.getComponent("Tech");(d=Array.isArray(c)?c:Object.keys(c)).concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d,e;return e="string"==typeof a?c[d=a]||b.options_[d]||{}:(d=a.name,a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||ka(b.name));return c&&!f.isTech(c)}).forEach(function(a){var c=a.name,d=a.opts;if(void 0!==e[c]&&(d=e[c]),!1!==d){!0===d&&(d={}),d.playerOptions=b.options_.playerOptions;var f=b.addChild(c,d);f&&(b[c]=f)}})}},b.buildCSSClass=function(){return""},b.ready=function(a,b){if(void 0===b&&(b=!1),a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},b.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&0<a.length&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},b.$=function(a,b){return yf(a,b||this.contentEl())},b.$$=function(a,b){return zf(a,b||this.contentEl())},b.hasClass=function(a){return s(this.el_,a)},b.addClass=function(a){t(this.el_,a)},b.removeClass=function(a){u(this.el_,a)},b.toggleClass=function(a,b){v(this.el_,a,b)},b.show=function(){this.removeClass("vjs-hidden")},b.hide=function(){this.addClass("vjs-hidden")},b.lockShowing=function(){this.addClass("vjs-lock-showing")},b.unlockShowing=function(){this.removeClass("vjs-lock-showing")},b.getAttribute=function(a){return y(this.el_,a)},b.setAttribute=function(a,b){z(this.el_,a,b)},b.removeAttribute=function(a){A(this.el_,a)},b.width=function(a,b){return this.dimension("width",a,b)},b.height=function(a,b){return this.dimension("height",a,b)},b.dimensions=function(a,b){this.width(a,!0),this.height(b)},b.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b==b||(b=0),-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+ka(a)],10)},b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if(b=i(this.el_,a),0===(b=parseFloat(b))||isNaN(b)){var c="offset"+ka(a);b=this.el_[c]}return b},b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},b.currentWidth=function(){return this.currentDimension("width")},b.currentHeight=function(){return this.currentDimension("height")},b.focus=function(){this.el_.focus()},b.blur=function(){this.el_.blur()},b.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))},b.handleKeyPress=function(a){this.handleKeyDown(a)},b.emitTapEvents=function(){function a(){b=!1}var b,c=0,d=null;this.on("touchstart",function(a){1===a.touches.length&&(d={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},c=Je.performance.now(),b=!0)}),this.on("touchmove",function(a){if(1<a.touches.length)b=!1;else if(d){var c=a.touches[0].pageX-d.pageX,e=a.touches[0].pageY-d.pageY;10<Math.sqrt(c*c+e*e)&&(b=!1)}}),this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(a){!(d=null)===b&&Je.performance.now()-c<200&&(a.preventDefault(),this.trigger("tap"))})},b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a,b=Z(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});var c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}},b.setTimeout=function(a,b){var c,d=this;return a=Z(this,a),this.clearTimersOnDispose_(),c=Je.setTimeout(function(){d.setTimeoutIds_.has(c)&&d.setTimeoutIds_.delete(c),a()},b),this.setTimeoutIds_.add(c),c},b.clearTimeout=function(a){return this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_.delete(a),Je.clearTimeout(a)),a},b.setInterval=function(a,b){a=Z(this,a),this.clearTimersOnDispose_();var c=Je.setInterval(a,b);return this.setIntervalIds_.add(c),c},b.clearInterval=function(a){return this.setIntervalIds_.has(a)&&(this.setIntervalIds_.delete(a),Je.clearInterval(a)),a},b.requestAnimationFrame=function(a){var b,c=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),a=Z(this,a),b=Je.requestAnimationFrame(function(){c.rafIds_.has(b)&&c.rafIds_.delete(b),a()}),this.rafIds_.add(b),b):this.setTimeout(a,1e3/60)},b.requestNamedAnimationFrame=function(a,b){var c=this;if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_(),b=Z(this,b);var d=this.requestAnimationFrame(function(){b(),c.namedRafs_.has(a)&&c.namedRafs_.delete(a)});return this.namedRafs_.set(a,d),a}},b.cancelNamedAnimationFrame=function(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_.delete(a))},b.cancelAnimationFrame=function(a){return this.supportsRaf_?(this.rafIds_.has(a)&&(this.rafIds_.delete(a),Je.cancelAnimationFrame(a)),a):this.clearTimeout(a)},b.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var c=b[0],d=b[1];a[c].forEach(function(b,c){return a[d](c)})}),a.clearingTimersOnDispose_=!1}))},a.registerComponent=function(b,c){if("string"!=typeof b||!b)throw new Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d,e=a.getComponent("Tech"),f=e&&e.isTech(c),g=a===c||a.prototype.isPrototypeOf(c.prototype);if(f||!g)throw d=f?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+b+'"; '+d+".");b=ka(b),a.components_||(a.components_={});var h=a.getComponent("Player");if("Player"===b&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&0<j.length&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[b]=c,a.components_[ja(b)]=c},a.getComponent=function(b){if(b&&a.components_)return a.components_[b]},a}();Sf.prototype.supportsRaf_="function"==typeof Je.requestAnimationFrame&&"function"==typeof Je.cancelAnimationFrame,Sf.registerComponent("Component",Sf);var Tf=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a};c(function(a){function b(c){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?a.exports=b=function(a){return typeof a}:a.exports=b=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(c)}a.exports=b}),c(function(a){function b(c){return a.exports=b=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},b(c)}a.exports=b});var Uf=function(a,b){a.prototype=Object.create(b.prototype),(a.prototype.constructor=a).__proto__=b};qa.prototype.code=0,qa.prototype.message="",qa.prototype.status=null,qa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],qa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Vf=0;Vf<qa.errorTypes.length;Vf++)qa[qa.errorTypes[Vf]]=Vf,qa.prototype[qa.errorTypes[Vf]]=Vf;var Wf=function(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(a){d=a}return[d,c]},Xf=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=ta(a.track);return a.src&&(b.src=a.src),b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map(ta))},Yf=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},Zf=c(function(a,b){function c(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c,f=String(a);return(c=d[f.toLowerCase()])?c:(c=e[f.toLowerCase()])||(1===f.length?f.charCodeAt(0):void 0)}c.isEventKey=function(a,b){if(a&&"object"==typeof a){var c=a.which||a.keyCode||a.charCode;if(null==c)return!1;if("string"==typeof b){
var f;if(f=d[b.toLowerCase()])return f===c;if(f=e[b.toLowerCase()])return f===c}else if("number"==typeof b)return b===c;return!1}};var d=(b=a.exports=c).code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(f=97;f<123;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;f<58;f++)d[f-48]=f;for(f=1;f<13;f++)d["f"+f]=f+111;for(f=0;f<10;f++)d["numpad "+f]=f+96;var g=b.names=b.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]}),$f=(Zf.code,Zf.codes,Zf.aliases,Zf.names,Zf.title,"vjs-modal-dialog"),_f=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).opened_=d.hasBeenOpened_=d.hasBeenFilled_=!1,d.closeable(!d.options_.uncloseable),d.content(d.options_.content),d.contentEl_=p("div",{className:$f+"-content"},{role:"document"}),d.descEl_=p("p",{className:$f+"-description vjs-control-text",id:d.el().getAttribute("aria-describedby")}),q(d.descEl_,d.description()),d.el_.appendChild(d.descEl_),d.el_.appendChild(d.contentEl_),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},c.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return $f+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},c.label=function(){return this.localize(this.options_.label||"Modal Window")},c.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},c.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},c.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},c.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},c.closeable=function(a){if("boolean"==typeof a){var b=this.closeable_=!!a,c=this.getChild("closeButton");if(b&&!c){var d=this.contentEl_;this.contentEl_=this.el_,c=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=d,this.on(c,"close",this.close)}!b&&c&&(this.off(c,"close",this.close),this.removeChild(c),c.dispose())}return this.closeable_},c.fill=function(){this.fillWith(this.content())},c.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),K(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},c.empty=function(){this.trigger("beforemodalempty"),H(this.contentEl()),this.trigger("modalempty")},c.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},c.conditionalFocus_=function(){var a=Me.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,!b.contains(a)&&b!==a||(this.previouslyActiveEl_=a,this.focus())},c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},c.handleKeyDown=function(a){if(a.stopPropagation(),Zf.isEventKey(a,"Escape")&&this.closeable())return a.preventDefault(),void this.close();if(Zf.isEventKey(a,"Tab")){for(var b,c=this.focusableEls_(),d=this.el_.querySelector(":focus"),e=0;e<c.length;e++)if(d===c[e]){b=e;break}Me.activeElement===this.el_&&(b=0),a.shiftKey&&0===b?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||b!==c.length-1||(c[0].focus(),a.preventDefault())}},c.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof Je.HTMLAnchorElement||a instanceof Je.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof Je.HTMLInputElement||a instanceof Je.HTMLSelectElement||a instanceof Je.HTMLTextAreaElement||a instanceof Je.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof Je.HTMLIFrameElement||a instanceof Je.HTMLObjectElement||a instanceof Je.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})},b}(Sf);_f.prototype.options_={pauseOnOpen:!0,temporary:!0},Sf.registerComponent("ModalDialog",_f);var ag=function(a){function b(b){var c;void 0===b&&(b=[]),(c=a.call(this)||this).tracks_=[],Object.defineProperty(Tf(c),"length",{get:function(){return this.tracks_.length}});for(var d=0;d<b.length;d++)c.addTrack(b[d]);return c}Uf(b,a);var c=b.prototype;return c.addTrack=function(a){var b=this,c=this.tracks_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.tracks_[c]}}),-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this})),a.labelchange_=function(){b.trigger({track:a,type:"labelchange",target:b})},Lf(a)&&a.addEventListener("labelchange",a.labelchange_)},c.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){(b=this[c]).off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})},c.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(_);for(var bg in ag.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},ag.prototype.allowedEvents_)ag.prototype["on"+bg]=null;var cg=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;0<=d;d--)if(b[d].enabled){ua(b,b[d]);break}return(c=a.call(this,b)||this).changing_=!1,c}Uf(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.enabled&&ua(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,ua(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)},b}(ag),dg=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;0<=d;d--)if(b[d].selected){va(b,b[d]);break}return(c=a.call(this,b)||this).changing_=!1,Object.defineProperty(Tf(c),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),c}Uf(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.selected&&va(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,va(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)},b}(ag),eg=function(a){function b(){return a.apply(this,arguments)||this}Uf(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b),this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")}),b.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},b}(ag),fg=function(){function a(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;return b.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)},b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}},a}(),gg=function(){function a(b){a.prototype.setCues_.call(this,b),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;return b.setCues_=function(a){function b(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})}var c=this.length||0,d=0,e=a.length;if(this.cues_=a,this.length_=a.length,c<e)for(d=c;d<e;d++)b.call(this,d)},b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),hg={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ig={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jg={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},kg={disabled:"disabled",hidden:"hidden",showing:"showing"},lg=function(a){function b(b){function c(a){Object.defineProperty(Tf(d),a,{get:function(){return e[a]},set:function(){}})}var d;void 0===b&&(b={}),d=a.call(this)||this;var e={id:b.id||"vjs_track_"+Q(),kind:b.kind||"",language:b.language||""},f=b.label||"";for(var g in e)c(g);return Object.defineProperty(Tf(d),"label",{get:function(){return f},set:function(a){a!==f&&(f=a,this.trigger("labelchange"))}}),d}return Uf(b,a),b}(_),mg=Object.freeze({__proto__:null,parseUrl:wa,getAbsoluteURL:xa,getFileExtension:ya,isCrossOrigin:za}),ng="undefined"!=typeof window?window:"undefined"!=typeof Ie?Ie:"undefined"!=typeof self?self:{},og=function(a){var b=pg.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)},pg=Object.prototype.toString,qg=function(a){var b={};return a&&a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();"undefined"==typeof b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b},rg=Ba,sg=Ba;Ba.XMLHttpRequest=ng.XMLHttpRequest||function(){},Ba.XDomainRequest="withCredentials"in new Ba.XMLHttpRequest?Ba.XMLHttpRequest:ng.XDomainRequest,function(a,b){for(var c=0;c<a.length;c++)b(a[c])}(["get","put","post","patch","head","delete"],function(a){Ba["delete"===a?"del":a]=function(b,c,d){return(c=Aa(b,c,d)).method=a.toUpperCase(),Ca(c)}}),rg.default=sg;var tg=function(a){function b(b){var c;if(void 0===b&&(b={}),!b.tech)throw new Error("A tech was not provided.");var d=la(b,{kind:jg[b.kind]||"subtitles",language:b.language||b.srclang||""}),e=kg[d.mode]||"disabled",f=d.default;"metadata"!==d.kind&&"chapters"!==d.kind||(e="hidden"),(c=a.call(this,d)||this).tech_=d.tech,c.cues_=[],c.activeCues_=[],c.preload_=!1!==c.tech_.preloadTextTracks;var g=new gg(c.cues_),h=new gg(c.activeCues_),i=!1,j=Z(Tf(c),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,i&&(this.trigger("cuechange"),i=!1))});return c.tech_.one("dispose",function(){c.tech_.off("timeupdate",j)}),"disabled"!==e&&c.tech_.on("timeupdate",j),Object.defineProperties(Tf(c),{default:{get:function(){return f},set:function(){}},mode:{get:function(){return e},set:function(a){kg[a]&&e!==a&&(e=a,this.preload_||"disabled"===e||0!==this.cues.length||Ea(this.src,this),this.tech_.off("timeupdate",j),"disabled"!==e&&this.tech_.on("timeupdate",j),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(i=!1,b.length!==this.activeCues_.length)i=!0;else for(var f=0;f<b.length;f++)-1===this.activeCues_.indexOf(b[f])&&(i=!0);return this.activeCues_=b,h.setCues_(this.activeCues_),h},set:function(){}}}),d.src?(c.src=d.src,c.preload_||(c.loaded_=!0),(c.preload_||f||"subtitles"!==d.kind&&"captions"!==d.kind)&&Ea(c.src,Tf(c))):c.loaded_=!0,c}Uf(b,a);var c=b.prototype;return c.addCue=function(a){var b=a;if(Je.vttjs&&!(a instanceof Je.vttjs.VTTCue)){for(var c in b=new Je.vttjs.VTTCue(a.startTime,a.endTime,a.text),a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}for(var d=this.tech_.textTracks(),e=0;e<d.length;e++)d[e]!==this&&d[e].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)},c.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},b}(lg);tg.prototype.allowedEvents_={cuechange:"cuechange"};var ug=function(a){function b(b){var c;void 0===b&&(b={});var d=la(b,{kind:ig[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Tf(c),"enabled",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}}),d.enabled&&(c.enabled=d.enabled),c.loaded_=!0,c}return Uf(b,a),b}(lg),vg=function(a){function b(b){var c;void 0===b&&(b={});var d=la(b,{kind:hg[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Tf(c),"selected",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}}),d.selected&&(c.selected=d.selected),c}return Uf(b,a),b}(lg),wg=function(a){function b(b){var c,d;void 0===b&&(b={}),c=a.call(this)||this;var e=new tg(b);return c.kind=e.kind,c.src=e.src,c.srclang=e.language,c.label=e.label,c.default=e.default,Object.defineProperties(Tf(c),{readyState:{get:function(){return d}},track:{get:function(){return e}}}),d=0,e.addEventListener("loadeddata",function(){d=2,c.trigger({type:"load",target:Tf(c)})}),c}return Uf(b,a),b}(_);wg.prototype.allowedEvents_={load:"load"},wg.NONE=0,wg.LOADING=1,wg.LOADED=2,wg.ERROR=3;var xg={audio:{ListClass:cg,TrackClass:ug,capitalName:"Audio"},video:{ListClass:dg,TrackClass:vg,capitalName:"Video"},text:{ListClass:eg,TrackClass:tg,capitalName:"Text"}};Object.keys(xg).forEach(function(a){xg[a].getterName=a+"Tracks",xg[a].privateName=a+"Tracks_"});var yg={remoteText:{ListClass:eg,TrackClass:tg,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:fg,TrackClass:wg,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},zg=_e({},xg,yg);yg.names=Object.keys(yg),xg.names=Object.keys(xg),zg.names=[].concat(yg.names).concat(xg.names);var Ag=Object.create||function(a){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Fa.prototype=a,new Fa};((Ga.prototype=Ag(Error.prototype)).constructor=Ga).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ia.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return!!(b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(b=parseFloat(b))&&b<=100)&&(this.set(a,b),!0)}};var Bg=Me.createElement("textarea"),Cg={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Dg={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Eg={v:"title",lang:"lang"},Fg={rt:"ruby"},Gg=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Na.prototype.applyStyles=function(a,b){for(var c in b=b||this.div,a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},Na.prototype.formatStyle=function(a,b){return 0===a?0:a+b},(Oa.prototype=Ag(Na.prototype)).constructor=Oa,Pa.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},Pa.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},Pa.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},Pa.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},Pa.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},Pa.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)},Pa.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},Pa.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;return{left:(a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a).left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c}},Ra.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},Ra.convertCueToDOMTree=function(a,b){return a&&b?La(a,b):null},Ra.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");if(d.style.position="absolute",d.style.left="0",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.margin="1.5%",c.appendChild(d),function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var e=[],f=Pa.getSimpleBoxPosition(d),g={font:Math.round(.05*f.height*100)/100+"px sans-serif"};!function(){for(var c,h,i=0;i<b.length;i++)h=b[i],c=new Oa(a,h,g),d.appendChild(c.div),Qa(0,c,f,e),h.displayState=c.div,e.push(Pa.getSimpleBoxPosition(c))}()}else for(var h=0;h<b.length;h++)d.appendChild(b[h].displayState)},(Ra.Parser=function(a,b,c){c||(c=b,b={}),b=b||{},this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(a){if(!(a instanceof Ga))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=d.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,d.buffer=a.substr(b),c}function c(a){a.match(/X-TIMESTAMP-MAP/)?Ja(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":!function(a){var b=new Ia;Ja(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",Ha(c))}},/[^\d]:/,/,/),d.ontimestampmap&&d.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}(b)}},/=/):Ja(a,function(a,b){switch(a){case"Region":!function(a){var b=new Ia;if(Ja(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new Ia;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(d.vttjs.VTTRegion||d.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),d.onregion&&d.onregion(c),d.regionList.push({id:b.get("id"),region:c})}}(b)}},/:/)}var d=this;a&&(d.buffer+=d.decoder.decode(a,{stream:!0}));try{var e;if("INITIAL"===d.state){if(!/\r\n|\n/.test(d.buffer))return this;var f=(e=b()).match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new Ga(Ga.Errors.BadSignature);d.state="HEADER"}for(var g=!1;d.buffer;){if(!/\r\n|\n/.test(d.buffer))return this;switch(g?g=!1:e=b(),d.state){case"HEADER":/:/.test(e)?c(e):e||(d.state="ID");continue;case"NOTE":e||(d.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){d.state="NOTE";break}if(!e)continue;d.cue=new(d.vttjs.VTTCue||d.window.VTTCue)(0,0,"");try{d.cue.align="center"}catch(a){d.cue.align="middle"}if(d.state="CUE",-1===e.indexOf("-->")){d.cue.id=e;continue}case"CUE":try{Ka(e,d.cue,d.regionList)}catch(a){d.reportOrThrowError(a),d.cue=null,d.state="BADCUE";continue}d.state="CUETEXT";continue;case"CUETEXT":var h=-1!==e.indexOf("-->");if(!e||h&&(g=!0)){d.oncue&&d.oncue(d.cue),d.cue=null,d.state="ID";continue}d.cue.text&&(d.cue.text+="\n"),d.cue.text+=e.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":e||(d.state="ID");continue}}}catch(a){d.reportOrThrowError(a),"CUETEXT"===d.state&&d.cue&&d.oncue&&d.oncue(d.cue),d.cue=null,d.state="INITIAL"===d.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),!a.cue&&"HEADER"!==a.state||(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new Ga(Ga.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}};var Hg=Ra,Ig={"":1,lr:1,rl:1},Jg={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ta.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Kg=Ta,Lg={"":!0,up:!0},Mg=c(function(a){var b=a.exports={WebVTT:Hg,VTTCue:Kg,VTTRegion:Va};Je.vttjs=b,Je.WebVTT=b.WebVTT;var c=b.VTTCue,d=b.VTTRegion,e=Je.VTTCue,f=Je.VTTRegion;b.shim=function(){Je.VTTCue=c,Je.VTTRegion=d},b.restore=function(){Je.VTTCue=e,Je.VTTRegion=f},Je.VTTCue||b.shim()});Mg.WebVTT,Mg.VTTCue,Mg.VTTRegion;var Ng=function(a){function b(b,c){var d;return void 0===b&&(b={}),void 0===c&&(c=function(){}),b.reportTouchActivity=!1,(d=a.call(this,null,b,c)||this).hasStarted_=!1,d.on("playing",function(){this.hasStarted_=!0}),d.on("loadstart",function(){this.hasStarted_=!1}),zg.names.forEach(function(a){var c=zg[a];b&&b[c.getterName]&&(d[c.privateName]=b[c.getterName])}),d.featuresProgressEvents||d.manualProgressOn(),d.featuresTimeupdateEvents||d.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){!1===b["native"+a+"Tracks"]&&(d["featuresNative"+a+"Tracks"]=!1)}),!1===b.nativeCaptions||!1===b.nativeTextTracks?d.featuresNativeTextTracks=!1:!0!==b.nativeCaptions&&!0!==b.nativeTextTracks||(d.featuresNativeTextTracks=!0),d.featuresNativeTextTracks||d.emulateTextTracks(),d.preloadTextTracks=!1!==b.preloadTextTracks,d.autoRemoteTextTracks_=new zg.text.ListClass,d.initTrackListeners(),b.nativeControlsForTouch||d.emitTapEvents(),d.constructor&&(d.name_=d.constructor.name||"Unknown Tech"),d}Uf(b,a);var c=b.prototype;return c.triggerSourceset=function(a){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)}),this.trigger({src:a,type:"sourceset"})},c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},c.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},c.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Z(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),1===(this.bufferedPercent_=a)&&this.stopTrackingProgress()}),500)},c.onDurationChange=function(a){this.duration_=this.duration()},c.buffered=function(){return oa(0,0)},c.bufferedPercent=function(){return pa(this.buffered(),this.duration_)},c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.dispose=function(){this.clearTracks(xg.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},c.clearTracks=function(a){var b=this;(a=[].concat(a)).forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},c.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},c.reset=function(){},c.crossOrigin=function(){},c.setCrossOrigin=function(){},c.error=function(a){return void 0!==a&&(this.error_=new qa(a),this.trigger("error")),this.error_},c.played=function(){return this.hasStarted_?oa(0,0):oa()},c.play=function(){},c.setScrubbing=function(){},c.scrubbing=function(){},c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.initTrackListeners=function(){var a=this;xg.names.forEach(function(b){function c(){a.trigger(b+"trackchange")}var d=xg[b],e=a[d.getterName]();e.addEventListener("removetrack",c),e.addEventListener("addtrack",c),a.on("dispose",function(){e.removeEventListener("removetrack",c),e.removeEventListener("addtrack",c)})})},c.addWebVttScript_=function(){var a=this;if(!Je.WebVTT)if(Me.body.contains(this.el())){if(!this.options_["vtt.js"]&&h(Mg)&&0<Object.keys(Mg).length)return void this.trigger("vttjsloaded");var b=Me.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){b.onload=null,b.onerror=null}),Je.WebVTT=!0,this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},c.emulateTextTracks=function(){function a(a){return f.addTrack(a.track)}function b(a){return f.removeTrack(a.track)}function c(){return e.trigger("texttrackchange")}function d(){c();for(var a=0;a<f.length;a++){var b=f[a];b.removeEventListener("cuechange",c),"showing"===b.mode&&b.addEventListener("cuechange",c)}}var e=this,f=this.textTracks(),g=this.remoteTextTracks();g.on("addtrack",a),g.on("removetrack",b),this.addWebVttScript_(),d(),f.addEventListener("change",d),f.addEventListener("addtrack",d),f.addEventListener("removetrack",d),this.on("dispose",function(){g.off("addtrack",a),g.off("removetrack",b),f.removeEventListener("change",d),f.removeEventListener("addtrack",d),f.removeEventListener("removetrack",d);for(var e=0;e<f.length;e++)f[e].removeEventListener("cuechange",c)})},c.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return function(a,b,c,d,e){void 0===e&&(e={});var f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new zg.text.TrackClass(e);return f.addTrack(g),g}(this,a,b,c)},c.createRemoteTextTrack=function(a){var b=la(a,{tech:this});return new yg.remoteTextEl.TrackClass(b)},c.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=this.createRemoteTextTrack(a);return!0!==b&&!1!==b&&(Ze.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),!0!==b&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)}),d},c.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a);
},c.getVideoPlaybackQuality=function(){return{}},c.requestPictureInPicture=function(){var a=this.options_.Promise||Je.Promise;if(a)return a.reject()},c.disablePictureInPicture=function(){return!0},c.setDisablePictureInPicture=function(){},c.setPoster=function(){},c.playsinline=function(){},c.setPlaysinline=function(){},c.overrideNativeAudioTracks=function(){},c.overrideNativeVideoTracks=function(){},c.canPlayType=function(){return""},b.canPlayType=function(){return""},b.canPlaySource=function(a,c){return b.canPlayType(a.type)},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=ka(a),b.techs_[a]=c,b.techs_[ja(a)]=c,"Tech"!==a&&b.defaultTechOrder_.push(a),c},b.getTech=function(a){if(a)return b.techs_&&b.techs_[a]?b.techs_[a]:(a=ka(a),Je&&Je.videojs&&Je.videojs[a]?(Ze.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Je.videojs[a]):void 0)},b}(Sf);zg.names.forEach(function(a){var b=zg[a];Ng.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),Ng.prototype.featuresVolumeControl=!0,Ng.prototype.featuresMuteControl=!0,Ng.prototype.featuresFullscreenResize=!1,Ng.prototype.featuresPlaybackRate=!1,Ng.prototype.featuresProgressEvents=!1,Ng.prototype.featuresSourceset=!1,Ng.prototype.featuresTimeupdateEvents=!1,Ng.prototype.featuresNativeTextTracks=!1,Ng.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d=d||(a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c,d=a.sourceHandlers||[],e=0;e<d.length;e++)if(c=d[e].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||[],e=0;e<d.length;e++)if(d[e].canHandleSource(b,c))return d[e];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""},["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:Ze.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Sf.registerComponent("Tech",Ng),Ng.registerTech("Tech",Ng),Ng.defaultTechOrder_=[];var Og={},Pg={},Qg={},Rg={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Sg={setCurrentTime:1,setMuted:1,setVolume:1},Tg={play:1,pause:1},Ug={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Vg=function(a){function b(b,c,d){var e,f=la({createEl:!1},c);if(e=a.call(this,b,f,d)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(var g=0,h=c.playerOptions.techOrder;g<h.length;g++){var i=ka(h[g]),j=Ng.getTech(i);if(i||(j=Sf.getComponent(i)),j&&j.isSupported()){b.loadTech_(i);break}}return e}return Uf(b,a),b}(Sf);Sf.registerComponent("MediaLoader",Vg);var Wg=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).emitTapEvents(),d.enable(),d}Uf(b,a);var c=b.prototype;return c.createEl=function(b,c,d){void 0===b&&(b="div"),void 0===c&&(c={}),void 0===d&&(d={}),c=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},c),"button"===b&&Ze.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead."),d=f({role:"button"},d),this.tabIndex_=c.tabIndex;var e=a.prototype.createEl.call(this,b,c,d);return this.createControlTextEl(e),e},c.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},c.createControlTextEl=function(a){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},c.controlText=function(a,b){if(void 0===b&&(b=this.el()),void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,q(this.controlTextEl_,c),this.nonIconControl||b.setAttribute("title",c)},c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},c.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},c.handleLanguagechange=function(){this.controlText(this.controlText_)},c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},c.handleKeyDown=function(b){Zf.isEventKey(b,"Space")||Zf.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(Sf);Sf.registerComponent("ClickableComponent",Wg);var Xg=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update(),b.on("posterchange",Z(Tf(d),d.update)),d}Uf(b,a);var c=b.prototype;return c.dispose=function(){this.player().off("posterchange",this.update),a.prototype.dispose.call(this)},c.createEl=function(){return p("div",{className:"vjs-poster",tabIndex:-1})},c.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},c.setSrc=function(a){var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b},c.handleClick=function(a){if(this.player_.controls()){var b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;!this.player_.tech(!0)||(pf||mf)&&b||this.player_.tech(!0).focus(),this.player_.paused()?sa(this.player_.play()):this.player_.pause()}},b}(Wg);Sf.registerComponent("PosterImage",Xg);var Yg="#222",Zg={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},$g=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=Z(Tf(e),e.updateDisplay);return b.on("loadstart",Z(Tf(e),e.toggleDisplay)),b.on("texttrackchange",f),b.on("loadedmetadata",Z(Tf(e),e.preselectTrack)),b.ready(Z(Tf(e),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)this.hide();else{b.on("fullscreenchange",f),b.on("playerresize",f),Je.addEventListener("orientationchange",f),b.on("dispose",function(){return Je.removeEventListener("orientationchange",f)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()}})),e}Uf(b,a);var c=b.prototype;return c.preselectTrack=function(){for(var a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<e.length;g++){var h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?c=h.kind===f.kind?h:c||h:f&&!f.enabled?b=a=c=null:h.default&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")},c.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},c.clearDisplay=function(){"function"==typeof Je.WebVTT&&Je.WebVTT.processCues(Je,[],this.el_)},c.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){for(var c=[],d=0;d<a.length;++d){var e=a[d];"showing"===e.mode&&c.push(e)}this.updateForTrack(c)}else{for(var f=null,g=null,h=a.length;h--;){var i=a[h];"showing"===i.mode&&("descriptions"===i.kind?f=i:g=i)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):f&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))}},c.updateDisplayState=function(a){for(var b=this.player_.textTrackSettings.getValues(),c=a.activeCues,d=c.length;d--;){var e=c[d];if(e){var f=e.displayState;if(b.color&&(f.firstChild.style.color=b.color),b.textOpacity&&bb(f.firstChild,"color",ab(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(f.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&bb(f.firstChild,"backgroundColor",ab(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?bb(f,"backgroundColor",ab(b.windowColor,b.windowOpacity)):f.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?f.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Yg:"raised"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Yg:"depressed"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Yg:"uniform"===b.edgeStyle&&(f.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Yg)),b.fontPercent&&1!==b.fontPercent){var g=Je.parseFloat(f.style.fontSize);f.style.fontSize=g*b.fontPercent+"px",f.style.height="auto",f.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=Zg[b.fontFamily])}}},c.updateForTrack=function(a){if(Array.isArray(a)||(a=[a]),"function"==typeof Je.WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e]);Je.WebVTT.processCues(Je,b,this.el_);for(var f=0;f<a.length;++f){for(var g=a[f],h=0;h<g.activeCues.length;++h){var i=g.activeCues[h].displayState;t(i,"vjs-text-track-cue"),t(i,"vjs-text-track-cue-"+(g.language?g.language:f))}this.player_.textTrackSettings&&this.updateDisplayState(g)}}},b}(Sf);Sf.registerComponent("TextTrackDisplay",$g);var _g=function(a){function b(){return a.apply(this,arguments)||this}return Uf(b,a),b.prototype.createEl=function(){var b=this.player_.isAudio(),c=this.localize(b?"Audio Player":"Video Player"),d=p("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[c])}),e=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(d),e},b}(Sf);Sf.registerComponent("LoadingSpinner",_g);var ah=function(a){function b(){return a.apply(this,arguments)||this}Uf(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={}),b=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b),c=f({type:"button"},c);var d=Sf.prototype.createEl.call(this,"button",b,c);return this.createControlTextEl(d),d},c.addChild=function(a,b){void 0===b&&(b={});var c=this.constructor.name;return Ze.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),Sf.prototype.addChild.call(this,a,b)},c.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},c.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},c.handleKeyDown=function(b){Zf.isEventKey(b,"Space")||Zf.isEventKey(b,"Enter")?b.stopPropagation():a.prototype.handleKeyDown.call(this,b)},b}(Wg);Sf.registerComponent("Button",ah);var bh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).mouseused_=!1,d.on("mousedown",d.handleMouseDown),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-big-play-button"},c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY){var c=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return sa(b),void(!this.player_.tech(!0)||(pf||mf)&&c||this.player_.tech(!0).focus())}var d=this.player_.getChild("controlBar"),e=d&&d.getChild("playToggle");if(e){var f=function(){return e.focus()};ra(b)?b.then(f,function(){}):this.setTimeout(f,1)}else this.player_.tech(!0).focus()},c.handleKeyDown=function(b){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,b)},c.handleMouseDown=function(a){this.mouseused_=!0},b}(ah);bh.prototype.controlText_="Play Video",Sf.registerComponent("BigPlayButton",bh);var ch=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).controlText(c&&c.controlText||d.localize("Close")),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},c.handleKeyDown=function(b){Zf.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(ah);Sf.registerComponent("CloseButton",ch);var dh=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,c.replay=void 0===c.replay||c.replay,d.on(b,"play",d.handlePlay),d.on(b,"pause",d.handlePause),c.replay&&d.on(b,"ended",d.handleEnded),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},c.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},c.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},c.handleEnded=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},b}(ah);dh.prototype.controlText_="Play",Sf.registerComponent("PlayToggle",dh);var eh=cb,fh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,["timeupdate","ended"],d.updateContent),d.updateTextNode_(),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=p("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"}),c.appendChild(this.contentEl_),c},c.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},c.updateTextNode_=function(a){var b=this;void 0===a&&(a=0),a=db(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(b.contentEl_){var a=b.textNode_;a&&b.contentEl_.firstChild!==a&&(a=null,Ze.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),b.textNode_=Me.createTextNode(b.formattedTime_),b.textNode_&&(a?b.contentEl_.replaceChild(b.textNode_,a):b.contentEl_.appendChild(b.textNode_))}}))},c.updateContent=function(a){},b}(Sf);fh.prototype.labelText_="Time",fh.prototype.controlText_="Time",Sf.registerComponent("TimeDisplay",fh);var gh=function(a){function b(){return a.apply(this,arguments)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-current-time"},c.updateContent=function(a){var b;b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)},b}(fh);gh.prototype.labelText_="Current Time",gh.prototype.controlText_="Current Time",Sf.registerComponent("CurrentTimeDisplay",gh);var hh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"durationchange",d.updateContent),d.on(b,"loadstart",d.updateContent),d.on(b,"loadedmetadata",d.updateContent),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-duration"},c.updateContent=function(a){var b=this.player_.duration();this.updateTextNode_(b)},b}(fh);hh.prototype.labelText_="Duration",hh.prototype.controlText_="Duration",Sf.registerComponent("DurationDisplay",hh);var ih=function(a){function b(){return a.apply(this,arguments)||this}return Uf(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},b}(Sf);Sf.registerComponent("TimeDivider",ih);var jh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"durationchange",d.updateContent),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-remaining-time"},c.createEl=function(){var b=a.prototype.createEl.call(this);return b.insertBefore(p("span",{},{"aria-hidden":!0},"-"),this.contentEl_),b},c.updateContent=function(a){var b;"number"==typeof this.player_.duration()&&(b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b))},b}(fh);jh.prototype.labelText_="Remaining Time",jh.prototype.controlText_="Remaining Time",Sf.registerComponent("RemainingTimeDisplay",jh);var kh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).updateShowing(),d.on(d.player(),"durationchange",d.updateShowing),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},c.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},c.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(Sf);Sf.registerComponent("LiveDisplay",kh);var lh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).updateLiveEdgeStatus(),d.player_.liveTracker&&d.on(d.player_.liveTracker,"liveedgechange",d.updateLiveEdgeStatus),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=p("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),b.appendChild(this.textEl_),b},c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,a.prototype.dispose.call(this)},b}(ah);lh.prototype.controlText_="Seek to live, currently playing live",Sf.registerComponent("SeekToLive",lh);var mh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).bar=d.getChild(d.options_.barName),d.vertical(!!d.options_.vertical),d.enable(),d}Uf(b,a);var c=b.prototype;return c.enabled=function(){return this.enabled_},c.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},c.createEl=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),c.className=c.className+" vjs-slider",c=f({tabIndex:0},c),d=f({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||nf||a.preventDefault(),B(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchmove",this.handleMouseMove),this.on(b,"touchend",this.handleMouseUp),this.handleMouseMove(a)},c.handleMouseMove=function(a){},c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;C(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.update()},c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();return b===this.progress_||(this.progress_=b,this.requestNamedAnimationFrame("Slider#update",function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"})),b}},c.getProgress=function(){return Number(eb(this.getPercent(),0,1).toFixed(4))},c.calculateDistance=function(a){var b=F(this.el_,a);return this.vertical()?b.y:b.x},c.handleKeyDown=function(b){Zf.isEventKey(b,"Left")||Zf.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):Zf.isEventKey(b,"Right")||Zf.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){a.stopPropagation(),a.preventDefault()},c.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(Sf);Sf.registerComponent("Slider",mh);var nh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).partEls_=[],d.on(b,"progress",d.update),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),c=p("span",{className:"vjs-control-text"}),d=p("span",{textContent:this.localize("Loaded")}),e=Me.createTextNode(": ");return this.percentageEl_=p("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),b.appendChild(c),c.appendChild(d),c.appendChild(e),c.appendChild(this.percentageEl_),b},c.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},c.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=b.player_.liveTracker,c=b.player_.buffered(),d=a&&a.isLive()?a.seekableEnd():b.player_.duration(),e=b.player_.bufferedEnd(),f=b.partEls_,g=fb(e,d);b.percent_!==g&&(b.el_.style.width=g,q(b.percentageEl_,g),b.percent_=g);for(var h=0;h<c.length;h++){var i=c.start(h),j=c.end(h),k=f[h];k||(k=b.el_.appendChild(p()),f[h]=k),k.dataset.start===i&&k.dataset.end===j||(k.dataset.start=i,k.dataset.end=j,k.style.left=fb(i,e),k.style.width=fb(j-i,e))}for(var l=f.length;l>c.length;l--)b.el_.removeChild(f[l-1]);f.length=c.length})},b}(Sf);Sf.registerComponent("LoadProgressBar",nh);var oh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=$(Z(Tf(d),d.update),30),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c){var d=E(this.el_),e=D(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),i=Math.round(i),this.el_.style.right="-"+i+"px",this.write(c)}},c.write=function(a){q(this.el_,a)},c.updateTime=function(a,b,c,d){var e=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,g=e.player_.duration();if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){var h=e.player_.liveTracker.liveWindow(),i=h-b*h;f=(i<1?"":"-")+db(i,h)}else f=db(c,g);e.update(a,b,f),d&&d()})},b}(Sf);Sf.registerComponent("TimeTooltip",oh);var ph=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=$(Z(Tf(d),d.update),30),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},c.update=function(a,b){var c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}},b}(Sf);ph.prototype.options_={children:[]},vf||hf||ph.prototype.options_.children.push("timeTooltip"),Sf.registerComponent("PlayProgressBar",ph);var qh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).update=$(Z(Tf(d),d.update),30),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})},b}(Sf);qh.prototype.options_={children:["timeTooltip"]},Sf.registerComponent("MouseTimeDisplay",qh);var rh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).setEventHandlers_(),d}Uf(b,a);var c=b.prototype;return c.setEventHandlers_=function(){this.update_=Z(this,this.update),this.update=$(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in Me&&"visibilityState"in Me&&this.on(Me,"visibilitychange",this.toggleVisibility_)},c.toggleVisibility_=function(a){Me.hidden?this.disableInterval_(a):(this.enableInterval_(),this.update())},c.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},c.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},c.update=function(b){var c=this,d=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,e=c.player_.duration();b&&b.isLive()&&(e=c.player_.liveTracker.liveCurrentTime()),c.percent_!==d&&(c.el_.setAttribute("aria-valuenow",(100*d).toFixed(2)),c.percent_=d),c.currentTime_===a&&c.duration_===e||(c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime={1} duration={2}",[db(a,e),db(e,e)],"{1} of {2}")),c.currentTime_=a,c.duration_=e),c.bar&&c.bar.update(D(c.el()),c.getProgress())}),d},c.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},c.getPercent=function(){var a,b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a},c.handleMouseDown=function(b){L(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},c.handleMouseMove=function(a){if(L(a)){var b,c=this.calculateDistance(a),d=this.player_.liveTracker;if(d&&d.isLive()){if(.99<=c)return void d.seekToLiveEdge();var e=d.seekableStart(),f=d.liveCurrentTime();if(f<=(b=e+c*d.liveWindow())&&(b=f),b<=e&&(b=e+.1),b===1/0)return}else(b=c*this.player_.duration())===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}},c.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},c.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},c.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),b&&b.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?sa(this.player_.play()):this.update_()},c.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},c.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},c.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleKeyDown=function(b){if(Zf.isEventKey(b,"Space")||Zf.isEventKey(b,"Enter"))b.preventDefault(),b.stopPropagation(),this.handleAction(b);else if(Zf.isEventKey(b,"Home"))b.preventDefault(),b.stopPropagation(),this.player_.currentTime(0);else if(Zf.isEventKey(b,"End"))b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Zf(b))){b.preventDefault(),b.stopPropagation();var c=10*(Zf.codes[Zf(b)]-Zf.codes[0])/100;this.player_.currentTime(this.player_.duration()*c)}else Zf.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Zf.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,b)},c.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),
"hidden"in Me&&"visibilityState"in Me&&this.off(Me,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},b}(mh);rh.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},vf||hf||rh.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Sf.registerComponent("SeekBar",rh);var sh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).handleMouseMove=$(Z(Tf(d),d.handleMouseMove),30),d.throttledHandleMouseSeek=$(Z(Tf(d),d.handleMouseSeek),30),d.enable(),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),f=E(e),g=F(e,a).x;g=eb(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}}},c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)},c.enabled=function(){return this.enabled_},c.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a),this.off(b,"mousemove",this.throttledHandleMouseSeek),this.off(b,"touchmove",this.throttledHandleMouseSeek),this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},b}(Sf);sh.prototype.options_={children:["seekBar"]},Sf.registerComponent("ProgressControl",sh);var th=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,["enterpictureinpicture","leavepictureinpicture"],d.handlePictureInPictureChange),d.on(b,["disablepictureinpicturechanged","loadedmetadata"],d.handlePictureInPictureEnabledChange),d.disable(),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},c.handlePictureInPictureEnabledChange=function(){Me.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},c.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},c.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},b}(ah);th.prototype.controlText_="Picture-in-Picture",Sf.registerComponent("PictureInPictureToggle",th);var uh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"fullscreenchange",d.handleFullscreenChange),!1===Me[b.fsApi_.fullscreenEnabled]&&d.disable(),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},c.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},c.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},b}(ah);uh.prototype.controlText_="Fullscreen",Sf.registerComponent("FullscreenToggle",uh);var vh=function(a){function b(){return a.apply(this,arguments)||this}return Uf(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},b}(Sf);Sf.registerComponent("VolumeLevel",vh);var wh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on("slideractive",d.updateLastVolume_),d.on(b,"volumechange",d.updateARIAAttributes),b.ready(function(){return d.updateARIAAttributes()}),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},c.handleMouseDown=function(b){L(b)&&a.prototype.handleMouseDown.call(this,b)},c.handleMouseMove=function(a){L(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},c.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},c.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},c.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(mh);wh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},wh.prototype.playerEvent="volumechange",Sf.registerComponent("VolumeBar",wh);var xh=function(a){function b(b,c){var d;return void 0===c&&(c={}),c.vertical=c.vertical||!1,"undefined"!=typeof c.volumeBar&&!h(c.volumeBar)||(c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical),d=a.call(this,b,c)||this,function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(Tf(d),b),d.throttledHandleMouseMove=$(Z(Tf(d),d.handleMouseMove),30),d.on("mousedown",d.handleMouseDown),d.on("touchstart",d.handleMouseDown),d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active"),d.addClass("vjs-slider-active"),d.trigger("slideractive")}),d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active"),d.removeClass("vjs-slider-active"),d.trigger("sliderinactive")}),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},c.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(Sf);xh.prototype.options_={children:["volumeBar"]},Sf.registerComponent("VolumeControl",xh);var yh=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(Tf(d),b),d.on(b,["loadstart","volumechange"],d.update),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},c.update=function(a){this.updateIcon_(),this.updateControlText_()},c.updateIcon_=function(){var a=this.player_.volume(),b=3;vf&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)u(this.el_,"vjs-vol-"+c);t(this.el_,"vjs-vol-"+b)},c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},b}(ah);yh.prototype.controlText_="Mute",Sf.registerComponent("MuteToggle",yh);var zh=function(a){function b(b,c){var d;return void 0===c&&(c={}),"undefined"!=typeof c.inline?c.inline=c.inline:c.inline=!0,"undefined"!=typeof c.volumeControl&&!h(c.volumeControl)||(c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline),(d=a.call(this,b,c)||this).on(b,["loadstart"],d.volumePanelState_),d.on(d.muteToggle,"keyup",d.handleKeyPress),d.on(d.volumeControl,"keyup",d.handleVolumeControlKeyUp),d.on("keydown",d.handleKeyPress),d.on("mouseover",d.handleMouseOver),d.on("mouseout",d.handleMouseOut),d.on(d.volumeControl,["slideractive"],d.sliderActive_),d.on(d.volumeControl,["sliderinactive"],d.sliderInactive_),d}Uf(b,a);var c=b.prototype;return c.sliderActive_=function(){this.addClass("vjs-slider-active")},c.sliderInactive_=function(){this.removeClass("vjs-slider-active")},c.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},c.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},c.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},c.handleVolumeControlKeyUp=function(a){Zf.isEventKey(a,"Esc")&&this.muteToggle.focus()},c.handleMouseOver=function(a){this.addClass("vjs-hover"),U(Me,"keyup",Z(this,this.handleKeyPress))},c.handleMouseOut=function(a){this.removeClass("vjs-hover"),V(Me,"keyup",Z(this,this.handleKeyPress))},c.handleKeyPress=function(a){Zf.isEventKey(a,"Esc")&&this.handleMouseOut()},b}(Sf);zh.prototype.options_={children:["muteToggle","volumeControl"]},Sf.registerComponent("VolumePanel",zh);var Ah=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,c&&(d.menuButton_=c.menuButton),d.focusedChild_=-1,d.on("keydown",d.handleKeyDown),d.boundHandleBlur_=Z(Tf(d),d.handleBlur),d.boundHandleTapClick_=Z(Tf(d),d.handleTapClick),d}Uf(b,a);var c=b.prototype;return c.addEventListenerForItem=function(a){a instanceof Sf&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))},c.removeEventListenerForItem=function(a){a instanceof Sf&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))},c.removeChild=function(b){"string"==typeof b&&(b=this.getChild(b)),this.removeEventListenerForItem(b),a.prototype.removeChild.call(this,b)},c.addItem=function(a){var b=this.addChild(a);b&&this.addEventListenerForItem(b)},c.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=p(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),U(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},c.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},c.handleBlur=function(a){var b=a.relatedTarget||Me.activeElement;if(!this.children().some(function(a){return a.el()===b})){var c=this.menuButton_;c&&c.buttonPressed_&&b!==c.el().firstChild&&c.unpressButton()}},c.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();if(!Array.isArray(b))return;var c=b.filter(function(b){return b.el()===a.target})[0];if(!c)return;"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}},c.handleKeyDown=function(a){Zf.isEventKey(a,"Left")||Zf.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(Zf.isEventKey(a,"Right")||Zf.isEventKey(a,"Up"))&&(a.preventDefault(),a.stopPropagation(),this.stepBack())},c.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},c.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},c.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].hasClass("vjs-menu-title")&&b.shift(),0<b.length&&(a<0?a=0:a>=b.length&&(a=b.length-1),b[this.focusedChild_=a].el_.focus())},b}(Sf);Sf.registerComponent("Menu",Ah);var Bh=function(a){function b(b,c){var d;void 0===c&&(c={}),(d=a.call(this,b,c)||this).menuButton_=new ah(b,c),d.menuButton_.controlText(d.controlText_),d.menuButton_.el_.setAttribute("aria-haspopup","true");var e=ah.prototype.buildCSSClass();return d.menuButton_.el_.className=d.buildCSSClass()+" "+e,d.menuButton_.removeClass("vjs-control"),d.addChild(d.menuButton_),d.update(),d.enabled_=!0,d.on(d.menuButton_,"tap",d.handleClick),d.on(d.menuButton_,"click",d.handleClick),d.on(d.menuButton_,"keydown",d.handleKeyDown),d.on(d.menuButton_,"mouseenter",function(){d.addClass("vjs-hover"),d.menu.show(),U(Me,"keyup",Z(Tf(d),d.handleMenuKeyUp))}),d.on("mouseleave",d.handleMouseLeave),d.on("keydown",d.handleSubmenuKeyDown),d}Uf(b,a);var c=b.prototype;return c.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},c.createMenu=function(){var a=new Ah(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=p("li",{className:"vjs-menu-title",innerHTML:ka(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var c=new Sf(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(var d=0;d<this.items.length;d++)a.addItem(this.items[d]);return a},c.createItems=function(){},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},c.buildWrapperCSSClass=function(){var b="vjs-menu-button";return b+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+b+" "+ah.prototype.buildCSSClass()+" "+a.prototype.buildCSSClass.call(this)},c.buildCSSClass=function(){var b="vjs-menu-button";return b+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},c.controlText=function(a,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(a,b)},c.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},c.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()},c.handleMouseLeave=function(a){this.removeClass("vjs-hover"),V(Me,"keyup",Z(this,this.handleMenuKeyUp))},c.focus=function(){this.menuButton_.focus()},c.blur=function(){this.menuButton_.blur()},c.handleKeyDown=function(a){Zf.isEventKey(a,"Esc")||Zf.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Zf.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):(Zf.isEventKey(a,"Up")||Zf.isEventKey(a,"Down"))&&(this.buttonPressed_||(a.preventDefault(),this.pressButton()))},c.handleMenuKeyUp=function(a){(Zf.isEventKey(a,"Esc")||Zf.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")},c.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)},c.handleSubmenuKeyDown=function(a){(Zf.isEventKey(a,"Esc")||Zf.isEventKey(a,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Zf.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus()))},c.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),vf&&n())return;this.menu.focus()}},c.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},c.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},c.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},b}(Sf);Sf.registerComponent("MenuButton",Bh);var Ch=function(a){function b(b,c){var d,e=c.tracks;if((d=a.call(this,b,c)||this).items.length<=1&&d.hide(),!e)return Tf(d);var f=Z(Tf(d),d.update);return e.addEventListener("removetrack",f),e.addEventListener("addtrack",f),e.addEventListener("labelchange",f),d.player_.on("ready",f),d.player_.on("dispose",function(){e.removeEventListener("removetrack",f),e.removeEventListener("addtrack",f),e.removeEventListener("labelchange",f)}),d}return Uf(b,a),b}(Bh);Sf.registerComponent("TrackButton",Ch);var Dh=["Tab","Esc","Up","Down","Right","Left"],Eh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).selectable=c.selectable,d.isSelected_=c.selected||!1,d.multiSelectable=c.multiSelectable,d.selected(d.isSelected_),d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role","menuitem"),d}Uf(b,a);var c=b.prototype;return c.createEl=function(b,c,d){return this.nonIconControl=!0,a.prototype.createEl.call(this,"li",f({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),d)},c.handleKeyDown=function(b){Dh.some(function(a){return Zf.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){this.selected(!0)},c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},b}(Wg);Sf.registerComponent("MenuItem",Eh);var Fh=function(a){function b(b,c){function d(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];f.handleTracksChange.apply(Tf(f),b)}function e(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];f.handleSelectedLanguageChange.apply(Tf(f),b)}var f,g=c.track,h=b.textTracks();c.label=g.label||g.language||"Unknown",c.selected="showing"===g.mode,(f=a.call(this,b,c)||this).track=g,f.kinds=(c.kinds||[c.kind||f.track.kind]).filter(Boolean);var i;return b.on(["loadstart","texttrackchange"],d),h.addEventListener("change",d),h.addEventListener("selectedlanguagechange",e),f.on("dispose",function(){b.off(["loadstart","texttrackchange"],d),h.removeEventListener("change",d),h.removeEventListener("selectedlanguagechange",e)}),void 0===h.onchange&&f.on(["tap","click"],function(){if("object"!=typeof Je.Event)try{i=new Je.Event("change")}catch(a){}i||(i=Me.createEvent("Event")).initEvent("change",!0,!0),h.dispatchEvent(i)}),f.handleTracksChange(),f}Uf(b,a);var c=b.prototype;return c.handleClick=function(b){var c=this.track,d=this.player_.textTracks();if(a.prototype.handleClick.call(this,b),d)for(var e=0;e<d.length;e++){var f=d[e];-1!==this.kinds.indexOf(f.kind)&&(f===c?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},c.handleTracksChange=function(a){var b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)},c.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},c.dispose=function(){this.track=null,a.prototype.dispose.call(this)},b}(Eh);Sf.registerComponent("TextTrackMenuItem",Fh);var Gh=function(a){function b(b,c){return c.track={player:b,kind:c.kind,kinds:c.kinds,default:!1,mode:"disabled"},c.kinds||(c.kinds=[c.kind]),c.label?c.track.label=c.label:c.track.label=c.kinds.join(" and ")+" off",c.selectable=!0,c.multiSelectable=!1,a.call(this,b,c)||this}Uf(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(-1<this.options_.kinds.indexOf(f.kind)&&"showing"===f.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)},c.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(-1<["captions","descriptions","subtitles"].indexOf(f.kind)&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(Fh);Sf.registerComponent("OffTextTrackMenuItem",Gh);var Hh=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.textTracks(),a.call(this,b,c)||this}return Uf(b,a),b.prototype.createItems=function(a,b){var c;void 0===a&&(a=[]),void 0===b&&(b=Fh),this.label_&&(c=this.label_+" off"),a.push(new Gh(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(-1<this.kinds_.indexOf(f.kind)){var g=new b(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(Ch);Sf.registerComponent("TextTrackButton",Hh);var Ih=function(a){function b(b,c){var d,e=c.track,f=c.cue,g=b.currentTime();return c.selectable=!0,c.multiSelectable=!1,c.label=f.text,c.selected=f.startTime<=g&&g<f.endTime,(d=a.call(this,b,c)||this).track=e,d.cue=f,e.addEventListener("cuechange",Z(Tf(d),d.update)),d}Uf(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},c.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(Eh);Sf.registerComponent("ChaptersTrackMenuItem",Ih);var Jh=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},c.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var c=a[b];if(c.kind===this.kind_)return c}},c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ka(this.kind_))},c.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new Ih(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(Hh);Jh.prototype.kind_="chapters",Jh.prototype.controlText_="Chapters",Sf.registerComponent("ChaptersButton",Jh);var Kh=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=b.textTracks(),g=Z(Tf(e),e.handleTracksChange);return f.addEventListener("change",g),e.on("dispose",function(){f.removeEventListener("change",g)}),e}Uf(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},c.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(Hh);Kh.prototype.kind_="descriptions",Kh.prototype.controlText_="Descriptions",Sf.registerComponent("DescriptionsButton",Kh);var Lh=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(Hh);Lh.prototype.kind_="subtitles",Lh.prototype.controlText_="Subtitles",Sf.registerComponent("SubtitlesButton",Lh);var Mh=function(a){function b(b,c){var d;return c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,default:!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",(d=a.call(this,b,c)||this).addClass("vjs-texttrack-settings"),d.controlText(", opens "+c.kind+" settings dialog"),d}return Uf(b,a),b.prototype.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(Fh);Sf.registerComponent("CaptionSettingsMenuItem",Mh);var Nh=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Mh(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(Hh);Nh.prototype.kind_="captions",Nh.prototype.controlText_="Captions",Sf.registerComponent("CaptionsButton",Nh);var Oh=function(a){function b(){return a.apply(this,arguments)||this}return Uf(b,a),b.prototype.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),e+="</span>",a.prototype.createEl.call(this,b,f({innerHTML:e},c),d)},b}(Fh);Sf.registerComponent("SubsCapsMenuItem",Oh);var Ph=function(a){function b(b,c){var d;return void 0===c&&(c={}),(d=a.call(this,b,c)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(d.player_.language_)&&(d.label_="captions"),d.menuButton_.controlText(ka(d.label_)),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Mh(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,Oh)},b}(Hh);Ph.prototype.kinds_=["captions","subtitles"],Ph.prototype.controlText_="Subtitles",Sf.registerComponent("SubsCapsButton",Ph);var Qh=function(a){function b(b,c){function d(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.handleTracksChange.apply(Tf(e),b)}var e,f=c.track,g=b.audioTracks();return c.label=f.label||f.language||"Unknown",c.selected=f.enabled,(e=a.call(this,b,c)||this).track=f,e.addClass("vjs-"+f.kind+"-menu-item"),g.addEventListener("change",d),e.on("dispose",function(){g.removeEventListener("change",d)}),e}Uf(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),e+="</span>",a.prototype.createEl.call(this,b,f({innerHTML:e},c),d)},c.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(var d=0;d<c.length;d++){var e=c[d];e.enabled=e===this.track}},c.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(Eh);Sf.registerComponent("AudioTrackMenuItem",Qh);var Rh=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.audioTracks(),a.call(this,b,c)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(a){void 0===a&&(a=[]),this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new Qh(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a},b}(Ch);Rh.prototype.controlText_="Audio Track",Sf.registerComponent("AudioTrackButton",Rh);var Sh=function(a){function b(b,c){var d,e=c.rate,f=parseFloat(e,10);return c.label=e,c.selected=1===f,c.selectable=!0,c.multiSelectable=!1,(d=a.call(this,b,c)||this).label=e,d.rate=f,d.on(b,"ratechange",d.update),d}Uf(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},c.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(Eh);Sh.prototype.contentElType="button",Sf.registerComponent("PlaybackRateMenuItem",Sh);var Th=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).updateVisibility(),d.updateLabel(),d.on(b,"loadstart",d.updateVisibility),d.on(b,"ratechange",d.updateLabel),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelEl_=p("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),b.appendChild(this.labelEl_),b},c.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},c.createMenu=function(){var a=new Ah(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;0<=c;c--)a.addChild(new Sh(this.player(),{rate:b[c]+"x"}));return a},c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},c.handleClick=function(a){for(var b=this.player().playbackRate(),c=this.playbackRates(),d=c[0],e=0;e<c.length;e++)if(c[e]>b){d=c[e];break}this.player().playbackRate(d)},c.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},b}(Bh);Th.prototype.controlText_="Playback Rate",Sf.registerComponent("PlaybackRateMenuButton",Th);var Uh=function(a){function b(){return a.apply(this,arguments)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this);
},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b}(Sf);Sf.registerComponent("Spacer",Uh);var Vh=function(a){function b(){return a.apply(this,arguments)||this}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});return b.innerHTML=" ",b},b}(Uh);Sf.registerComponent("CustomControlSpacer",Vh);var Wh=function(a){function b(){return a.apply(this,arguments)||this}return Uf(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},b}(Sf);Wh.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Me&&Wh.prototype.options_.children.splice(Wh.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Sf.registerComponent("ControlBar",Wh);var Xh=function(a){function b(b,c){var d;return(d=a.call(this,b,c)||this).on(b,"error",d.open),d}Uf(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},c.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(_f);Xh.prototype.options_=_e({},_f.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Sf.registerComponent("ErrorDisplay",Xh);var Yh="vjs-text-track-settings",Zh=["#000","Black"],$h=["#00F","Blue"],_h=["#0FF","Cyan"],ai=["#0F0","Green"],bi=["#F0F","Magenta"],ci=["#F00","Red"],di=["#FFF","White"],ei=["#FF0","Yellow"],fi=["1","Opaque"],gi=["0.5","Semi-Transparent"],hi=["0","Transparent"],ii={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Zh,di,ci,ai,$h,ei,bi,_h]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[fi,gi,hi]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[di,Zh,ci,ai,$h,ei,bi,_h]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[fi,gi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[hi,gi,fi]}};ii.windowColor.options=ii.backgroundColor.options;var ji=function(a){function b(b,c){var d;return c.temporary=!1,(d=a.call(this,b,c)||this).updateDisplay=Z(Tf(d),d.updateDisplay),d.fill(),d.hasBeenOpened_=d.hasBeenFilled_=!0,d.endDialog=p("p",{className:"vjs-control-text",textContent:d.localize("End of dialog window.")}),d.el().appendChild(d.endDialog),d.setDefaults(),void 0===c.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=d.options_.playerOptions.persistTextTrackSettings),d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings(),d.close()}),d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults(),d.updateDisplay()}),e(ii,function(a){d.on(d.$(a.selector),"change",d.updateDisplay)}),d.options_.persistTextTrackSettings&&d.restoreSettings(),d}Uf(b,a);var c=b.prototype;return c.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},c.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c="label");var e=ii[a],f=e.id.replace("%s",this.id_),g=[b,f].join(" ").trim();return["<"+c+' id="'+f+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(e.label),"</"+c+">",'<select aria-labelledby="'+g+'">'].concat(e.options.map(function(a){var b=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},c.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},c.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},c.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},c.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},c.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},c.createElControls_=function(){var a=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},c.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},c.label=function(){return this.localize("Caption Settings Dialog")},c.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},c.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},c.getValues=function(){var a=this;return function(a,b,c){return void 0===c&&(c=0),bf(a).reduce(function(c,d){return b(c,a[d],d)},c)}(ii,function(b,c,d){var e=function(a,b){return gb(a.options[a.options.selectedIndex].value,b)}(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},c.setValues=function(a){var b=this;e(ii,function(c,d){!function(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(gb(a.options[d].value,c)===b){a.selectedIndex=d;break}}(b.$(c.selector),a[d],c.parser)})},c.setDefaults=function(){var a=this;e(ii,function(b){var c=b.hasOwnProperty("default")?b.default:0;a.$(b.selector).selectedIndex=c})},c.restoreSettings=function(){var a;try{a=JSON.parse(Je.localStorage.getItem(Yh))}catch(a){Ze.warn(a)}a&&this.setValues(a)},c.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?Je.localStorage.setItem(Yh,JSON.stringify(a)):Je.localStorage.removeItem(Yh)}catch(a){Ze.warn(a)}}},c.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},c.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(_f);Sf.registerComponent("TextTrackSettings",ji);var ki=function(a){function b(b,c){var d,e=c.ResizeObserver||Je.ResizeObserver;null===c.ResizeObserver&&(e=!1);var f=la({createEl:!e,reportTouchActivity:!1},c);return(d=a.call(this,b,f)||this).ResizeObserver=c.ResizeObserver||Je.ResizeObserver,d.loadListener_=null,d.resizeObserver_=null,d.debouncedHandler_=function(a,b,c,d){function e(){var e=this,g=arguments,h=function(){h=f=null,c||a.apply(e,g)};!f&&c&&a.apply(e,g),d.clearTimeout(f),f=d.setTimeout(h,b)}var f;return void 0===d&&(d=Je),e.cancel=function(){d.clearTimeout(f),f=null},e}(function(){d.resizeHandler()},100,!1,Tf(d)),e?(d.resizeObserver_=new d.ResizeObserver(d.debouncedHandler_),d.resizeObserver_.observe(b.el())):(d.loadListener_=function(){if(d.el_&&d.el_.contentWindow){var a=d.debouncedHandler_,b=d.unloadListener_=function(){V(this,"resize",a),V(this,"unload",b),b=null};U(d.el_.contentWindow,"unload",b),U(d.el_.contentWindow,"resize",a)}},d.one("load",d.loadListener_)),d}Uf(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},c.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},c.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},b}(Sf);Sf.registerComponent("ResizeManager",ki);var li={trackingThreshold:30,liveTolerance:15},mi=function(a){function b(b,c){var d,e=la(li,c,{createEl:!1});return(d=a.call(this,b,e)||this).reset_(),d.on(d.player_,"durationchange",d.handleDurationchange),pf&&"hidden"in Me&&"visibilityState"in Me&&d.on(Me,"visibilitychange",d.handleVisibilityChange),d}Uf(b,a);var c=b.prototype;return c.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Me.hidden?this.stopTracking():this.startTracking())},c.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){var b=Number(Je.performance.now().toFixed(4)),c=-1===this.lastTime_?0:(b-this.lastTime_)/1e3;this.lastTime_=b,this.pastSeekEnd_=this.pastSeekEnd()+c;var d=this.liveCurrentTime(),e=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(d-e)>this.options_.liveTolerance;this.timeupdateSeen_&&d!==1/0||(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},c.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},c.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},c.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},c.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&2<a,this.skipNextSeeked_=!1,this.trackLive_()},c.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},c.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},c.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},c.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0},c.seekableStart=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0},c.liveWindow=function(){var a=this.liveCurrentTime();return a===1/0?0:a-this.seekableStart()},c.isLive=function(){return this.isTracking()},c.atLiveEdge=function(){return!this.behindLiveEdge()},c.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},c.pastSeekEnd=function(){var a=this.seekableEnd();return-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_},c.behindLiveEdge=function(){return this.behindLiveEdge_},c.isTracking=function(){return"number"==typeof this.trackingInterval_},c.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},c.dispose=function(){this.off(Me,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),a.prototype.dispose.call(this)},b}(Sf);Sf.registerComponent("LiveTracker",mi);var ni,oi=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=Me.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(var c=Me.createDocumentFragment();b.childNodes.length;)c.appendChild(b.childNodes[0]);return this.innerText="",Je.Element.prototype.appendChild.call(this,c),this.innerHTML}}),pi=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?xa(Je.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){return Je.Element.prototype.setAttribute.call(this,"src",a),a}}),qi=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=b.source,f=!1;if(e&&(d.el_.currentSrc!==e.src||b.tag&&3===b.tag.initNetworkState_)?d.setSource(e):d.handleLateInit_(d.el_),b.enableSourceset&&d.setupSourcesetHandling_(),d.isScrubbing_=!1,d.el_.hasChildNodes()){for(var g=d.el_.childNodes,h=g.length,i=[];h--;){var j=g[h];"track"===j.nodeName.toLowerCase()&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(j),d.remoteTextTracks().addTrack(j.track),d.textTracks().addTrack(j.track),f||d.el_.hasAttribute("crossorigin")||!za(j.src)||(f=!0)):i.push(j))}for(var k=0;k<i.length;k++)d.el_.removeChild(i[k])}return d.proxyNativeTracks_(),d.featuresNativeTextTracks&&f&&Ze.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),d.restoreMetadataTracksInIOSNativePlayer_(),(sf||uf||kf)&&!0===b.nativeControlsForTouch&&d.setControls(!0),d.proxyWebkitFullscreen_(),d.triggerReady(),d}Uf(b,a);var c=b.prototype;return c.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),b.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},c.setupSourcesetHandling_=function(){kb(this)},c.restoreMetadataTracksInIOSNativePlayer_=function(){function a(){c=[];for(var a=0;a<d.length;a++){var b=d[a];"metadata"===b.kind&&c.push({track:b,storedMode:b.mode})}}function b(){for(var a=0;a<c.length;a++){var e=c[a];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=e.storedMode)}d.removeEventListener("change",b)}var c,d=this.textTracks();a(),d.addEventListener("change",a),this.on("dispose",function(){return d.removeEventListener("change",a)}),this.on("webkitbeginfullscreen",function(){d.removeEventListener("change",a),d.removeEventListener("change",b),d.addEventListener("change",b)}),this.on("webkitendfullscreen",function(){d.removeEventListener("change",a),d.addEventListener("change",a),d.removeEventListener("change",b)})},c.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){c.el()[d+"Tracks"].removeEventListener(a,c[d+"TracksListeners_"][a])}),this["featuresNative"+a+"Tracks"]=!b,this[d+"TracksListeners_"]=null,this.proxyNativeTracksForType_(d)}},c.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)},c.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)},c.proxyNativeTracksForType_=function(a){var b=this,c=xg[a],d=this.el()[c.getterName],e=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(c){var d={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(d),"text"===a&&b[yg.remoteText.getterName]().trigger(d)},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(a){var c=f[a];d.addEventListener(a,c),b.on("dispose",function(b){return d.removeEventListener(a,c)})}),this.on("loadstart",g),this.on("dispose",function(a){return b.off("loadstart",g)})}},c.proxyNativeTracks_=function(){var a=this;xg.names.forEach(function(b){a.proxyNativeTracksForType_(b)})},c.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=Me.createElement("video");var d=la({},this.options_.tag&&x(this.options_.tag));sf&&!0===this.options_.nativeControlsForTouch||delete d.controls,w(a,f(d,{id:this.options_.techId,class:"vjs-tech"}))}a.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&z(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var e=["loop","muted","playsinline","autoplay"],g=0;g<e.length;g++){var h=e[g],i=this.options_[h];"undefined"!=typeof i&&(i?z(a,h,h):A(a,h),a[h]=i)}return a},c.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),2<=a.readyState&&e.push("loadeddata"),3<=a.readyState&&e.push("canplay"),4<=a.readyState&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},c.setScrubbing=function(a){this.isScrubbing_=a},c.scrubbing=function(){return this.isScrubbing_},c.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&wf?this.el_.fastSeek(a):this.el_.currentTime=a}catch(a){Ze(a,"Video is not ready. (Video.js)")}},c.duration=function(){var a=this;return this.el_.duration===1/0&&hf&&nf&&0===this.el_.currentTime?(this.on("timeupdate",function b(){0<a.el_.currentTime&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",b))}),NaN):this.el_.duration||NaN},c.width=function(){return this.el_.offsetWidth},c.height=function(){return this.el_.offsetHeight},c.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},c.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=Je.navigator&&Je.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},c.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)sa(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},c.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},c.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},c.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},c.reset=function(){b.resetMediaElement(this.el_)},c.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},c.setControls=function(a){this.el_.controls=!!a},c.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},c.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=Me.createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b.default&&(c.default=b.default),b.id&&(c.id=b.id),b.src&&(c.src=b.src),c},c.addRemoteTextTrack=function(b,c){var d=a.prototype.addRemoteTextTrack.call(this,b,c);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},c.removeRemoteTextTrack=function(b){if(a.prototype.removeRemoteTextTrack.call(this,b),this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&b!==c[d].track||this.el().removeChild(c[d])},c.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),Je.performance&&"function"==typeof Je.performance.now?a.creationTime=Je.performance.now():Je.performance&&Je.performance.timing&&"number"==typeof Je.performance.timing.navigationStart&&(a.creationTime=Je.Date.now()-Je.performance.timing.navigationStart),a},b}(Ng);lb(qi,"TEST_VID",function(){if(l()){var a=Me.createElement("video"),b=Me.createElement("track");return b.kind="captions",b.srclang="en",b.label="English",a.appendChild(b),a}}),qi.isSupported=function(){try{qi.TEST_VID.volume=.5}catch(a){return!1}return!(!qi.TEST_VID||!qi.TEST_VID.canPlayType)},qi.canPlayType=function(a){return qi.TEST_VID.canPlayType(a)},qi.canPlaySource=function(a,b){return qi.canPlayType(a.type)},qi.canControlVolume=function(){try{var a=qi.TEST_VID.volume;return qi.TEST_VID.volume=a/2+.1,a!==qi.TEST_VID.volume}catch(a){return!1}},qi.canMuteVolume=function(){try{var a=qi.TEST_VID.muted;return qi.TEST_VID.muted=!a,qi.TEST_VID.muted?z(qi.TEST_VID,"muted","muted"):A(qi.TEST_VID,"muted"),a!==qi.TEST_VID.muted}catch(a){return!1}},qi.canControlPlaybackRate=function(){if(hf&&nf&&of<58)return!1;try{var a=qi.TEST_VID.playbackRate;return qi.TEST_VID.playbackRate=a/2+.1,a!==qi.TEST_VID.playbackRate}catch(a){return!1}},qi.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Me.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(Me.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(Me.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(Me.createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0},qi.supportsNativeTextTracks=function(){return wf||vf&&nf},qi.supportsNativeVideoTracks=function(){return!(!qi.TEST_VID||!qi.TEST_VID.videoTracks)},qi.supportsNativeAudioTracks=function(){return!(!qi.TEST_VID||!qi.TEST_VID.audioTracks)},qi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[0],c=a[1];lb(qi.prototype,b,function(){return qi[c]()},!0)}),qi.prototype.movingMediaElementInDOM=!vf,qi.prototype.featuresFullscreenResize=!0,qi.prototype.featuresProgressEvents=!0,qi.prototype.featuresTimeupdateEvents=!0,qi.patchCanPlayType=function(){4<=jf&&!lf&&!nf&&(ni=qi.TEST_VID&&qi.TEST_VID.constructor.prototype.canPlayType,qi.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(a)?"maybe":ni.call(this,a)})},qi.unpatchCanPlayType=function(){var a=qi.TEST_VID.constructor.prototype.canPlayType;return ni&&(qi.TEST_VID.constructor.prototype.canPlayType=ni),a},qi.patchCanPlayType(),qi.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()}},qi.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){qi.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){qi.prototype["set"+ka(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){qi.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){qi.prototype["set"+ka(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){qi.prototype[a]=function(){return this.el_[a]()}}),Ng.withSourceHandlers(qi),qi.nativeSourceHandler={},qi.nativeSourceHandler.canPlayType=function(a){try{return qi.TEST_VID.canPlayType(a)}catch(a){return""}},qi.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return qi.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=ya(a.src);return qi.nativeSourceHandler.canPlayType("video/"+c)}return""},qi.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},qi.nativeSourceHandler.dispose=function(){},qi.registerSourceHandler(qi.nativeSourceHandler),Ng.registerTech("Html5",qi);var ri=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],si={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ti=["tiny","xsmall","small","medium","large","xlarge","huge"],ui={};ti.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;ui[a]="vjs-layout-"+b});var vi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},wi=function(a){function b(c,d,e){var g;if(c.id=c.id||d.id||"vjs_video_"+Q(),(d=f(b.getTagSettings(c),d)).initChildren=!1,d.createEl=!1,d.evented=!1,d.reportTouchActivity=!1,!d.language)if("function"==typeof c.closest){var h=c.closest("[lang]");h&&h.getAttribute&&(d.language=h.getAttribute("lang"))}else for(var i=c;i&&1===i.nodeType;){if(x(i).hasOwnProperty("lang")){d.language=i.getAttribute("lang");break}i=i.parentNode}if((g=a.call(this,null,d,e)||this).boundDocumentFullscreenChange_=function(a){return g.documentFullscreenChange_(a)},g.boundFullWindowOnEscKey_=function(a){return g.fullWindowOnEscKey(a)},g.isFullscreen_=!1,g.log=$e(g.id_),g.fsApi_=Ne,g.isPosterFromTech_=!1,g.queuedCallbacks_=[],g.isReady_=!1,g.hasStarted_=!1,g.userActive_=!1,g.debugEnabled_=!1,!g.options_||!g.options_.techOrder||!g.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(g.tag=c,g.tagAttributes=c&&x(c),g.language(g.options_.language),d.languages){var j={};Object.getOwnPropertyNames(d.languages).forEach(function(a){j[a.toLowerCase()]=d.languages[a]}),g.languages_=j}else g.languages_=b.prototype.options_.languages;g.resetCache_(),g.poster_=d.poster||"",g.controls_=!!d.controls,c.controls=!1,c.removeAttribute("controls"),g.changingSrc_=!1,g.playCallbacks_=[],g.playTerminatedQueue_=[],c.hasAttribute("autoplay")?g.autoplay(!0):g.autoplay(g.options_.autoplay),d.plugins&&Object.keys(d.plugins).forEach(function(a){if("function"!=typeof g[a])throw new Error('plugin "'+a+'" does not exist')}),g.scrubbing_=!1,g.el_=g.createEl(),ha(Tf(g),{eventBusKey:"el_"}),g.fsApi_.requestFullscreen&&(U(Me,g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_),g.on(g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_)),g.fluid_&&g.on(["playerreset","resize"],g.updateStyleEl_);var k=la(g.options_);d.plugins&&Object.keys(d.plugins).forEach(function(a){g[a](d.plugins[a])}),d.debug&&g.debug(!0),g.options_.playerOptions=k,g.middleware_=[],g.initChildren(),g.isAudio("audio"===c.nodeName.toLowerCase()),g.controls()?g.addClass("vjs-controls-enabled"):g.addClass("vjs-controls-disabled"),g.el_.setAttribute("role","region"),g.isAudio()?g.el_.setAttribute("aria-label",g.localize("Audio Player")):g.el_.setAttribute("aria-label",g.localize("Video Player")),g.isAudio()&&g.addClass("vjs-audio"),g.flexNotSupported_()&&g.addClass("vjs-no-flex"),sf&&g.addClass("vjs-touch-enabled"),vf||g.addClass("vjs-workinghover"),b.players[g.id_]=Tf(g);var l=He.split(".")[0];return g.addClass("vjs-v"+l),g.userActive(!0),g.reportUserActivity(),g.one("play",g.listenForUserActivity_),g.on("stageclick",g.handleStageClick_),g.on("keydown",g.handleKeyDown),g.on("languagechange",g.handleLanguagechange),g.breakpoints(g.options_.breakpoints),g.responsive(g.options_.responsive),g}Uf(b,a);var c=b.prototype;return c.dispose=function(){var c=this;this.trigger("dispose"),this.off("dispose"),V(Me,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),V(Me,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,
this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(a){Pg[a.id()]=null}(this),zg.names.forEach(function(a){var b=zg[a],d=c[b.getterName]();d&&d.off&&d.off()}),a.prototype.dispose.call(this)},c.createEl=function(){var b,c=this.tag,d=this.playerElIngest_=c.parentNode&&c.parentNode.hasAttribute&&c.parentNode.hasAttribute("data-vjs-player"),e="video-js"===this.tag.tagName.toLowerCase();d?b=this.el_=c.parentNode:e||(b=this.el_=a.prototype.createEl.call(this,"div"));var f=x(c);if(e){for(b=this.el_=c,c=this.tag=Me.createElement("video");b.children.length;)c.appendChild(b.firstChild);s(b,"video-js")||t(b,"video-js"),b.appendChild(c),d=this.playerElIngest_=b,Object.keys(b).forEach(function(a){try{c[a]=b[a]}catch(a){}})}if(c.setAttribute("tabindex","-1"),f.tabindex="-1",(pf||nf&&rf)&&(c.setAttribute("role","application"),f.role="application"),c.removeAttribute("width"),c.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(a){e&&"class"===a||b.setAttribute(a,f[a]),e&&c.setAttribute(a,f[a])}),c.playerId=c.id,c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),!0!==Je.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=O("vjs-styles-dimensions");var g=yf(".vjs-styles-defaults"),h=yf("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var i=c.getElementsByTagName("a"),j=0;j<i.length;j++){var k=i.item(j);t(k,"vjs-hidden"),k.setAttribute("hidden","hidden")}return c.initNetworkState_=c.networkState,c.parentNode&&!d&&c.parentNode.insertBefore(b,c),r(c,b),this.children_.unshift(c),this.el_.setAttribute("lang",this.language_),this.el_=b},c.crossOrigin=function(a){return a?void("anonymous"===a||"use-credentials"===a?this.techCall_("setCrossOrigin",a):Ze.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"')):this.techGet_("crossOrigin")},c.width=function(a){return this.dimension("width",a)},c.height=function(a){return this.dimension("height",a)},c.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)return this[c]=void 0,void this.updateStyleEl_();var d=parseFloat(b);isNaN(d)?Ze.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,this.updateStyleEl_())},c.fluid=function(a){var b=this;return void 0===a?!!this.fluid_:(this.fluid_=!!a,Lf(this)&&this.off(["playerreset","resize"],this.updateStyleEl_),a?(this.addClass("vjs-fluid"),this.fill(!1),function(a,b){Lf(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))}(this,function(){b.on(["playerreset","resize"],b.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_(),void 0)},c.fill=function(a){return void 0===a?!!this.fill_:(this.fill_=!!a,void(a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},c.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},c.updateStyleEl_=function(){if(!0!==Je.VIDEOJS_NO_DYNAMIC_STYLE){var a,b,c,d=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),e=d[1]/d[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,b=void 0!==this.height_?this.height_:a*e,c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(c),P(this.styleEl_,"\n      ."+c+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+c+".vjs-fluid {\n        padding-top: "+100*e+"%;\n      }\n    ")}else{var f="number"==typeof this.width_?this.width_:this.options_.width,g="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(0<=f&&(h.width=f),0<=g&&(h.height=g))}},c.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=ka(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(Ng.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var g={source:b,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};zg.names.forEach(function(a){var b=zg[a];g[b.getterName]=c[b.privateName]}),f(g,this.options_[d]),f(g,this.options_[e]),f(g,this.options_[a.toLowerCase()]),this.tag&&(g.tag=this.tag),b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(g.startTime=this.cache_.currentTime);var h=Ng.getTech(a);if(!h)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new h(g),this.tech_.ready(Z(this,this.handleTechReady_),!0),Yf(this.textTracksJson_||[],this.tech_),ri.forEach(function(a){c.on(c.tech_,a,c["handleTech"+ka(a)+"_"])}),Object.keys(si).forEach(function(a){c.on(c.tech_,a,function(b){0===c.tech_.playbackRate()&&c.tech_.seeking()?c.queuedCallbacks_.push({callback:c["handleTech"+si[a]+"_"].bind(c),event:b}):c["handleTech"+si[a]+"_"](b)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||r(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},c.unloadTech_=function(){var a=this;zg.names.forEach(function(b){var c=zg[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=Xf(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},c.tech=function(a){return void 0===a&&Ze.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},c.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},c.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},c.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},c.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},c.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"==typeof a){var c,d=function(){function a(){b.muted(c)}var c=b.muted();b.muted(!0),b.playTerminatedQueue_.push(a);var d=b.play();if(ra(d))return d.catch(a)};if("any"===a&&!0!==this.muted()?ra(c=this.play())&&(c=c.catch(d)):c="muted"===a&&!0!==this.muted()?d():this.play(),ra(c))return c.then(function(){b.trigger({type:"autoplay-success",autoplay:a})}).catch(function(c){b.trigger({type:"autoplay-failure",autoplay:a})})}},c.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;for(var d=a.$$("source"),e=0;e<d.length;e++){var f=d[e];if(f.type&&f.src&&f.src===b)return f.type}return $a(b)}(this,b)),this.cache_.source=la({},a,{src:b,type:c});for(var d=this.cache_.sources.filter(function(a){return a.src&&a.src===b}),e=[],f=this.$$("source"),g=[],h=0;h<f.length;h++){var i=x(f[h]);e.push(i),i.src&&i.src===b&&g.push(i.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b},c.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(this.lastSource_&&(this.lastSource_.tech===e||this.lastSource_.player===d)||(c=function(){})),c(e),a.src||this.tech_.any(["sourceset","loadstart"],function(a){if("sourceset"!==a.type){var c=b.techGet("currentSrc");b.lastSource_.tech=c,b.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})},c.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},c.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},c.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},c.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function c(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",c))})},c.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},c.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},c.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},c.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},c.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},c.handleTechFirstPlay_=function(){this.options_.starttime&&(Ze.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},c.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},c.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},c.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},c.handleTechClick_=function(a){L(a)&&this.controls_&&(this.paused()?sa(this.play()):this.pause())},c.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},c.handleTechTap_=function(){this.userActive(!this.userActive())},c.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},c.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},c.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()},c.handleStageClick_=function(){this.reportUserActivity()},c.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},c.documentFullscreenChange_=function(a){var b=a.target.player;if(!b||b===this){var c=this.el(),d=Me[this.fsApi_.fullscreenElement]===c;!d&&c.matches?d=c.matches(":"+this.fsApi_.fullscreen):!d&&c.msMatchesSelector&&(d=c.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(d)}},c.handleTechFullscreenChange_=function(a,b){b&&(b.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(b.isFullscreen))},c.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)},c.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},c.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)},c.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)},c.handleTechError_=function(){var a=this.tech_.error();this.error(a)},c.handleTechTextData_=function(a,b){var c=null;1<arguments.length&&(c=b),this.trigger("textdata",c)},c.getCache=function(){return this.cache_},c.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},c.techCall_=function(a,b){this.ready(function(){if(a in Sg)return function(a,b,c,d){return b[c](a.reduce(Ya(c),d))}(this.middleware_,this.tech_,a,b);if(a in Tg)return Xa(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(a){throw Ze(a),a}},!0)},c.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Rg)return function(a,b,c){return a.reduceRight(Ya(c),b[c]())}(this.middleware_,this.tech_,a);if(a in Tg)return Xa(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw Ze("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw Ze("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw Ze(b),b}}},c.play=function(){var a=this,b=this.options_.Promise||Je.Promise;return b?new b(function(b){a.play_(b)}):this.play_()},c.play_=function(a){var b=this;void 0===a&&(a=sa),this.playCallbacks_.push(a);var c=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!c)return this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(c||!wf&&!vf||this.load());var d=this.techGet_("play");null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)},c.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})},c.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})},c.pause=function(){this.techCall_("pause")},c.paused=function(){return!1!==this.techGet_("paused")},c.played=function(){return this.techGet_("played")||oa(0,0)},c.scrubbing=function(a){return"undefined"==typeof a?this.scrubbing_:(this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),void 0)},c.currentTime=function(a){return"undefined"!=typeof a?(a<0&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),void(this.cache_.initTime=0)):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},c.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},c.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:((a=parseFloat(a))<0&&(a=1/0),void(a!==this.cache_.duration&&((this.cache_.duration=a)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))))},c.remainingTime=function(){return this.duration()-this.currentTime()},c.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},c.buffered=function(){var a=this.techGet_("buffered");return a&&a.length||(a=oa(0,0)),a},c.bufferedPercent=function(){return pa(this.buffered(),this.duration())},c.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return b<c&&(c=b),c},c.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(0<b&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},c.muted=function(a){return void 0===a?this.techGet_("muted")||!1:void this.techCall_("setMuted",a)},c.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},c.lastVolume_=function(a){return void 0===a||0===a?this.cache_.lastVolume:void(this.cache_.lastVolume=a)},c.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},c.isFullscreen=function(a){if(void 0===a)return this.isFullscreen_;var b=this.isFullscreen_;return this.isFullscreen_=Boolean(a),this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},c.requestFullscreen=function(a){var b=this.options_.Promise||Je.Promise;if(b){var c=this;return new b(function(b,d){function e(){c.off("fullscreenerror",g),c.off("fullscreenchange",f)}function f(){e(),b()}function g(a,b){e(),d(b)}c.one("fullscreenchange",f),c.one("fullscreenerror",g);var h=c.requestFullscreenHelper_(a);if(h)return h.then(e,e),h})}return this.requestFullscreenHelper_()},c.requestFullscreenHelper_=function(a){var b,c=this;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){var d=this.el_[this.fsApi_.requestFullscreen](b);return d&&d.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),d}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},c.exitFullscreen=function(){var a=this.options_.Promise||Je.Promise;if(a){var b=this;return new a(function(a,c){function d(){b.off("fullscreenerror",f),b.off("fullscreenchange",e)}function e(){d(),a()}function f(a,b){d(),c(b)}b.one("fullscreenchange",e),b.one("fullscreenerror",f);var g=b.exitFullscreenHelper_();if(g)return g.then(d,d),g})}return this.exitFullscreenHelper_()},c.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var b=Me[this.fsApi_.exitFullscreen]();return b&&b.then(function(){return a.isFullscreen(!1)}),b}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},c.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Me.documentElement.style.overflow,U(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow="hidden",t(Me.body,"vjs-full-window"),this.trigger("enterFullWindow")},c.fullWindowOnEscKey=function(a){Zf.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},c.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,V(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow=this.docOrigOverflow,u(Me.body,"vjs-full-window"),this.trigger("exitFullWindow")},c.disablePictureInPicture=function(a){return void 0===a?this.techGet_("disablePictureInPicture"):(this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,this.trigger("disablepictureinpicturechanged"),void 0)},c.isInPictureInPicture=function(a){return void 0!==a?(this.isInPictureInPicture_=!!a,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},c.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Me&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},c.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Me)return Me.exitPictureInPicture()},c.handleKeyDown=function(a){var b=this.options_.userActions;b&&b.hotkeys&&!function(a){var b=a.tagName.toLowerCase();return!!a.isContentEditable||("input"===b?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(a.type):-1!==["textarea"].indexOf(b))}(this.el_.ownerDocument.activeElement)&&("function"==typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))},c.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=void 0===c?function(a){return Zf.isEventKey(a,"f")}:c,e=b.muteKey,f=void 0===e?function(a){return Zf.isEventKey(a,"m")}:e,g=b.playPauseKey,h=void 0===g?function(a){return Zf.isEventKey(a,"k")||Zf.isEventKey(a,"Space")}:g;if(d.call(this,a)){a.preventDefault(),a.stopPropagation();var i=Sf.getComponent("FullscreenToggle");!1!==Me[this.fsApi_.fullscreenEnabled]&&i.prototype.handleClick.call(this,a)}else f.call(this,a)?(a.preventDefault(),a.stopPropagation(),Sf.getComponent("MuteToggle").prototype.handleClick.call(this,a)):h.call(this,a)&&(a.preventDefault(),a.stopPropagation(),Sf.getComponent("PlayToggle").prototype.handleClick.call(this,a))},c.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=Ng.getTech(e);if(f=f||Sf.getComponent(e)){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else Ze.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},c.selectSource=function(a){function b(a,b,c){var d;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d}function c(a,b){var c=a[0];if(a[1].canPlaySource(b,e.options_[c.toLowerCase()]))return{source:b,tech:c}}var d,e=this,f=this.options_.techOrder.map(function(a){return[a,Ng.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(Ze.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?b(a,f,(d=c,function(a,b){return d(b,a)})):b(f,a,c))||!1},c.src=function(a){var b=this;if("undefined"==typeof a)return this.cache_.src||"";var c=function a(b){if(Array.isArray(b)){var c=[];b.forEach(function(b){b=a(b),Array.isArray(b)?c=c.concat(b):g(b)&&c.push(b)}),b=c}else b="string"==typeof b&&b.trim()?[_a({src:b})]:g(b)&&"string"==typeof b.src&&b.src&&b.src.trim()?[_a(b)]:[];return b}(a);c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),Wa(this,c[0],function(a,d){return b.middleware_=d,b.cache_.sources=c,b.updateSourceCaches_(a),b.src_(a)?1<c.length?b.src(c.slice(1)):(b.changingSrc_=!1,b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void b.triggerReady()):void!function(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}(d,b.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},c.src_=function(a){var b=this,c=this.selectSource([a]);return!c||(function(a,b){return ka(a)===ka(b)}(c.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1})),!1)},c.load=function(){this.techCall_("load")},c.reset=function(){var a=this,b=this.options_.Promise||Je.Promise;this.paused()||!b?this.doReset_():sa(this.play().then(function(){return a.doReset_()}))},c.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Lf(this)&&this.trigger("playerreset")},c.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},c.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay,c=a.remainingTimeDisplay;b&&b.updateContent(),c&&c.updateContent()},c.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},c.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},c.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},c.currentSource=function(){return this.cache_.source||{}},c.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},c.currentType=function(){return this.currentSource()&&this.currentSource().type||""},c.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},c.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;var b;"string"==typeof a&&/(any|play|muted)/.test(a)?(this.options_.autoplay=a,this.manualAutoplay_(a),b=!1):this.options_.autoplay=!!a,b="undefined"==typeof b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)},c.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},c.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},c.poster=function(a){return void 0===a?this.poster_:void((a=a||"")!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange")))},c.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},c.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},c.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},c.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var b=function(){this.error(a)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],b),void this.one("loadstart",function(){this.off(["click","touchstart"],b)})}return null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new qa(a),this.addClass("vjs-error"),Ze.error("(CODE:"+this.error_.code+" "+qa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),void 0)},c.reportUserActivity=function(a){this.userActivity_=!0},c.userActive=function(a){if(void 0===a)return this.userActive_;if((a=!!a)!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},c.listenForUserActivity_=function(){function a(a){e(),this.clearInterval(b)}var b,c,d,e=Z(this,this.reportUserActivity);this.on("mousedown",function(){e(),this.clearInterval(b),b=this.setInterval(e,250)}),this.on("mousemove",function(a){a.screenX===c&&a.screenY===d||(c=a.screenX,d=a.screenY,e())}),this.on("mouseup",a),this.on("mouseleave",a);var f,g=this.getChild("controlBar");!g||vf||hf||(g.on("mouseenter",function(a){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",e),this.on("keyup",e),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);var a=this.options_.inactivityTimeout;a<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},c.playbackRate=function(a){return void 0===a?this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1:void this.techCall_("setPlaybackRate",a)},c.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},c.isAudio=function(a){return void 0===a?!!this.isAudio_:void(this.isAudio_=!!a)},c.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},c.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},c.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;if(b=b||a,this.tech_)return this.tech_.removeRemoteTextTrack(b)},c.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},c.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},c.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},c.language=function(a){return void 0===a?this.language_:void(this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),
Lf(this)&&this.trigger("languagechange")))},c.languages=function(){return la(b.prototype.options_.languages,this.languages_)},c.toJSON=function(){var a=la(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];(d=la(d)).player=void 0,a.tracks[c]=d}return a},c.createModal=function(a,b){var c=this;(b=b||{}).content=a||"";var d=new _f(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},c.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<ti.length;c++){var d=ti[c];if(b<=this.breakpoints_[d]){if(a===d)return;a&&this.removeClass(ui[a]),this.addClass(ui[d]),this.breakpoint_=d;break}}},c.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)},c.breakpoints=function(a){return void 0===a||(this.breakpoint_="",this.breakpoints_=f({},vi,a),this.updateCurrentBreakpoint_()),f(this.breakpoints_)},c.responsive=function(a){return void 0===a?this.responsive_:(a=Boolean(a))!==this.responsive_?((this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a):void 0},c.currentBreakpoint=function(){return this.breakpoint_},c.currentBreakpointClass=function(){return ui[this.breakpoint_]||""},c.loadMedia=function(a,b){var c=this;if(a&&"object"==typeof a){this.reset(),this.cache_.media=la(a);var d=this.cache_.media,e=d.artwork,f=d.poster,g=d.src,h=d.textTracks;!e&&f&&(this.cache_.media.artwork=[{src:f,type:$a(f)}]),g&&this.src(g),f&&this.poster(f),Array.isArray(h)&&h.forEach(function(a){return c.addRemoteTextTrack(a,!1)}),this.ready(b)}},c.getMedia=function(){if(this.cache_.media)return la(this.cache_.media);var a=this.poster(),b={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}})};return a&&(b.poster=a,b.artwork=[{src:b.poster,type:$a(b.poster)}]),b},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=x(a),d=c["data-setup"];if(s(a,"vjs-fill")&&(c.fill=!0),s(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var e=Wf(d||"{}"),g=e[0],h=e[1];g&&Ze.error(g),f(c,h)}if(f(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(x(l)):"track"===m&&b.tracks.push(x(l))}return b},c.flexNotSupported_=function(){var a=Me.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},c.debug=function(a){return void 0===a?this.debugEnabled_:void(a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1))},b}(Sf);zg.names.forEach(function(a){var b=zg[a];wi.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),wi.prototype.crossorigin=wi.prototype.crossOrigin,wi.players={};var xi=Je.navigator;wi.prototype.options_={techOrder:Ng.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:xi&&(xi.languages&&xi.languages[0]||xi.userLanguage||xi.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){wi.prototype[a]=function(){return this.techGet_(a)}}),ri.forEach(function(a){wi.prototype["handleTech"+ka(a)+"_"]=function(){return this.trigger(a)}}),Sf.registerComponent("Player",wi);var yi=c(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},b(c,d)}a.exports=b}),zi=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}},Ai=c(function(a){function b(c,d,e){return zi()?a.exports=b=Reflect.construct:a.exports=b=function(a,b,c){var d=[null];d.push.apply(d,b);var e=new(Function.bind.apply(a,d));return c&&yi(e,c.prototype),e},b.apply(null,arguments)}a.exports=b}),Bi="plugin",Ci="activePlugins_",Di={},Ei=function(){function a(b){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,this.log||(this.log=this.player.log.createLogger(this.name)),ha(this),delete this.trigger,ia(this,this.constructor.defaultState),ob(b,this.name),this.dispose=Z(this,this.dispose),b.on("dispose",this.dispose)}var b=a.prototype;return b.version=function(){return this.constructor.VERSION},b.getEventHash=function(a){return void 0===a&&(a={}),a.name=this.name,a.plugin=this.constructor,a.instance=this,a},b.trigger=function(a,b){return void 0===b&&(b={}),W(this.eventBusEl_,a,this.getEventHash(b))},b.handleStateChanged=function(a){},b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[Ci][a]=!1,this.player=this.state=null,b[a]=qb(a,Di[a])},a.isBasic=function(b){var c="string"==typeof b?nb(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(mb(b))Ze.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(wi.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+typeof c+".");return Di[b]=c,b!==Bi&&(a.isBasic(c)?wi.prototype[b]=function(a,b){function c(){pb(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return ob(this,a),pb(this,{name:a,plugin:b,instance:c}),c}return Object.keys(b).forEach(function(a){c[a]=b[a]}),c}(b,c):wi.prototype[b]=qb(b,c)),c},a.deregisterPlugin=function(a){if(a===Bi)throw new Error("Cannot de-register base plugin.");mb(a)&&(delete Di[a],delete wi.prototype[a])},a.getPlugins=function(a){var b;return void 0===a&&(a=Object.keys(Di)),a.forEach(function(a){var c=nb(a);c&&((b=b||{})[a]=c)}),b},a.getPluginVersion=function(a){var b=nb(a);return b&&b.VERSION||""},a}();Ei.getPlugin=nb,Ei.BASE_PLUGIN_NAME=Bi,Ei.registerPlugin(Bi,Ei),wi.prototype.usingPlugin=function(a){return!!this[Ci]&&!0===this[Ci][a]},wi.prototype.hasPlugin=function(a){return!!mb(a)};var Fi=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&yi(a,b)},Gi=function(a){return 0===a.indexOf("#")?a.slice(1):a};if(rb.hooks_={},rb.hooks=function(a,b){return rb.hooks_[a]=rb.hooks_[a]||[],b&&(rb.hooks_[a]=rb.hooks_[a].concat(b)),rb.hooks_[a]},rb.hook=function(a,b){rb.hooks(a,b)},rb.hookOnce=function(a,b){rb.hooks(a,[].concat(b).map(function(b){return function c(){return rb.removeHook(a,c),b.apply(void 0,arguments)}}))},rb.removeHook=function(a,b){var c=rb.hooks(a).indexOf(b);return!(c<=-1||(rb.hooks_[a]=rb.hooks_[a].slice(),rb.hooks_[a].splice(c,1),0))},!0!==Je.VIDEOJS_NO_DYNAMIC_STYLE&&l()){var Hi=yf(".vjs-styles-defaults");if(!Hi){Hi=O("vjs-styles-defaults");var Ii=yf("head");Ii&&Ii.insertBefore(Hi,Ii.firstChild),P(Hi,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}M(1,rb),rb.VERSION=He,rb.options=wi.prototype.options_,rb.getPlayers=function(){return wi.players},rb.getPlayer=function(a){var b,c=wi.players;if("string"==typeof a){var d=Gi(a),e=c[d];if(e)return e;b=yf("#"+d)}else b=a;if(m(b)){var f=b,g=f.player,h=f.playerId;if(g||c[h])return g||c[h]}},rb.getAllPlayers=function(){return Object.keys(wi.players).map(function(a){return wi.players[a]}).filter(Boolean)},rb.players=wi.players,rb.getComponent=Sf.getComponent,rb.registerComponent=function(a,b){Ng.isTech(b)&&Ze.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Sf.registerComponent.call(Sf,a,b)},rb.getTech=Ng.getTech,rb.registerTech=Ng.registerTech,rb.use=function(a,b){Og[a]=Og[a]||[],Og[a].push(b)},Object.defineProperty(rb,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(rb.middleware,"TERMINATOR",{value:Qg,writeable:!1,enumerable:!0}),rb.browser=xf,rb.TOUCH_ENABLED=sf,rb.extend=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};for(var e in"object"==typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),Fi(c,a),a&&(c.super_=a),d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c},rb.mergeOptions=la,rb.bind=Z,rb.registerPlugin=Ei.registerPlugin,rb.deregisterPlugin=Ei.deregisterPlugin,rb.plugin=function(a,b){return Ze.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ei.registerPlugin(a,b)},rb.getPlugins=Ei.getPlugins,rb.getPlugin=Ei.getPlugin,rb.getPluginVersion=Ei.getPluginVersion,rb.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),rb.options.languages=la(rb.options.languages,((c={})[a]=b,c)),rb.options.languages[a]},rb.log=Ze,rb.createLogger=$e,rb.createTimeRange=rb.createTimeRanges=oa,rb.formatTime=db,rb.setFormatTime=function(a){eh=a},rb.resetFormatTime=function(){eh=cb},rb.parseUrl=wa,rb.isCrossOrigin=za,rb.EventTarget=_,rb.on=U,rb.one=X,rb.off=V,rb.trigger=W,rb.xhr=rg,rb.TextTrack=tg,rb.AudioTrack=ug,rb.VideoTrack=vg,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){rb[a]=function(){return Ze.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),Af[a].apply(null,arguments)}}),rb.computedStyle=i,rb.dom=Af,rb.url=mg,rb.defineLazyProperty=lb;var Ji,Ki=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},Li=function(a,b){a.prototype=Object.create(b.prototype),(a.prototype.constructor=a).__proto__=b},Mi="undefined"!=typeof Ie?Ie:"undefined"!=typeof window?window:{},Ni="undefined"!=typeof document?document:Mi["__GLOBAL_DOCUMENT_CACHE@4"]||(Mi["__GLOBAL_DOCUMENT_CACHE@4"]=Ke),Oi="undefined"!=typeof window?window:"undefined"!=typeof Ie?Ie:"undefined"!=typeof self?self:{},Pi=sb(c(function(a,b){var c,d,e,f,g;c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),!(b=b.trim())){if(!c.alwaysNormalize)return a;var e=g.parseURL(a);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g.normalizePath(e.path),g.buildURLFromParts(e)}var f=g.parseURL(b);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=g.normalizePath(f.path),g.buildURLFromParts(f)):b;var h=g.parseURL(a);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var i=d.exec(h.path);h.netLoc=i[1],h.path=i[2]}h.netLoc&&!h.path&&(h.path="/");var j={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(j.netLoc=h.netLoc,"/"!==f.path[0]))if(f.path){var k=h.path,l=k.substring(0,k.lastIndexOf("/")+1)+f.path;j.path=g.normalizePath(l)}else j.path=h.path,f.params||(j.params=h.params,f.query||(j.query=h.query));return null===j.path&&(j.path=c.alwaysNormalize?g.normalizePath(f.path):f.path),g.buildURLFromParts(j)},parseURL:function(a){var b=c.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}},a.exports=g})),Qi=sb(Je),Ri=function(a,b){return/^[a-z]+:/i.test(b)?b:(/\/\//i.test(a)||(a=Pi.buildAbsoluteURL(Qi.location&&Qi.location.href||"",a)),Pi.buildAbsoluteURL(a,b))},Si=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),-1<c},b.trigger=function(a,b){var c=this.listeners[a];if(c)if(2===arguments.length)for(var d=c.length,e=0;e<d;++e)c[e].call(this,b);else for(var f=Array.prototype.slice.call(arguments,1),g=c.length,h=0;h<g;++h)c[h].apply(this,f)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),Ti=(Ji=Je)&&"object"==typeof Ji&&"default"in Ji?Ji.default:Ji,Ui=function(b){for(var c=function(b){return Ti.atob?Ti.atob(b):a.from(b,"base64").toString("binary")}(b),d=new Uint8Array(c.length),e=0;e<c.length;e++)d[e]=c.charCodeAt(e);return d},Vi=function(a){function b(){var b;return(b=a.call(this)||this).buffer="",b}return Uf(b,a),b.prototype.push=function(a){var b;for(this.buffer+=a,b=this.buffer.indexOf("\n");-1<b;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)},b}(Si),Wi=function(a){function b(){var b;return(b=a.call(this)||this).customParsers=[],b.tagMappers=[],b}Uf(b,a);var c=b.prototype;return c.push=function(a){var b,c,d=this;0!==(a=a.trim()).length&&("#"===a[0]?this.tagMappers.reduce(function(b,c){var d=c(a);return d===a?b:b.concat([d])},[a]).forEach(function(a){for(var e=0;e<d.customParsers.length;e++)if(d.customParsers[e].call(d,a))return;if(0===a.indexOf("#EXT"))if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))d.trigger("data",{type:"tag",tagType:"m3u"});else{if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))return c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),void d.trigger("data",c);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"totalduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))return c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),void d.trigger("data",c);if(b=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"byterange"},b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),void d.trigger("data",c);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))return c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){var f=tb(b[1]);if(f.URI&&(c.uri=f.URI),f.BYTERANGE){var g=f.BYTERANGE.split("@"),h=g[0],i=g[1];c.byterange={},h&&(c.byterange.length=parseInt(h,10)),i&&(c.byterange.offset=parseInt(i,10))}}d.trigger("data",c)}else if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"stream-inf"},b[1]){if(c.attributes=tb(b[1]),c.attributes.RESOLUTION){var j=c.attributes.RESOLUTION.split("x"),k={};j[0]&&(k.width=parseInt(j[0],10)),j[1]&&(k.height=parseInt(j[1],10)),c.attributes.RESOLUTION=k}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}d.trigger("data",c)}else{if(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))return c={type:"tag",tagType:"media"},b[1]&&(c.attributes=tb(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-ENDLIST/.exec(a))d.trigger("data",{type:"tag",tagType:"endlist"});else if(b=/^#EXT-X-DISCONTINUITY/.exec(a))d.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))return c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-KEY:?(.*)$/.exec(a))return c={type:"tag",tagType:"key"},b[1]&&(c.attributes=tb(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void d.trigger("data",c);if(b=/^#EXT-X-START:?(.*)$/.exec(a))return c={type:"tag",tagType:"start"},b[1]&&(c.attributes=tb(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void d.trigger("data",c);if(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);if(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);if(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))return c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c);d.trigger("data",{type:"tag",data:a.slice(4)})}}}else d.trigger("data",{type:"comment",text:a.slice(1)})}):this.trigger("data",{type:"uri",uri:a}))},c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!=typeof e&&(e=function(a){return a}),this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})},c.addTagMapper=function(a){var b=a.expression,c=a.map;this.tagMappers.push(function(a){return b.test(a)?c(a):a})},b}(Si),Xi=function(a){function b(){var b;(b=a.call(this)||this).lineStream=new Vi,b.parseStream=new Wi,b.lineStream.pipe(b.parseStream);var c,d,e=Tf(b),f=[],g={},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},i=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var j=0;return b.parseStream.on("data",function(a){var b,k;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in a&&((g.byterange=b).length=a.length,"offset"in a||(a.offset=j)),"offset"in a&&((g.byterange=b).offset=a.offset),j=b.offset+b.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<a.duration&&(g.duration=a.duration),0===a.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=f},key:function(){if(a.attributes)if("NONE"!==a.attributes.METHOD)if(a.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===a.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(a.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:Ui(a.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!=typeof a.attributes.IV&&(d.iv=a.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else d=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,i=a.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){c={},a.uri&&(c.uri=a.uri),a.byterange&&(c.byterange=a.byterange)},"stream-inf":function(){this.manifest.playlists=f,this.manifest.mediaGroups=this.manifest.mediaGroups||h,a.attributes?(g.attributes||(g.attributes={}),_e(g.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME){var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{},b=c[a.attributes["GROUP-ID"]],(k={default:/yes/i.test(a.attributes.DEFAULT)}).default?k.autoselect=!0:k.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(k.language=a.attributes.LANGUAGE),a.attributes.URI&&(k.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(k.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(k.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(k.forced=/yes/i.test(a.attributes.FORCED)),b[a.attributes.NAME]=k}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){i+=1,g.discontinuity=!0,this.manifest.discontinuityStarts.push(f.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),g.dateTimeString=a.dateTimeString,g.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||a.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):this.manifest.targetDuration=a.duration},totalduration:function(){!isFinite(a.duration)||a.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration}):this.manifest.totalDuration=a.duration},start:function(){a.attributes&&!isNaN(a.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){g.cueOut=a.data},"cue-out-cont":function(){g.cueOutCont=a.data},"cue-in":function(){g.cueIn=a.data}})[a.tagType]||function(){}).call(e)},uri:function(){g.uri=a.uri,f.push(g),!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration),d&&(g.key=d),g.timeline=i,c&&(g.map=c),g={}},comment:function(){},custom:function(){a.segment?(g.custom=g.custom||{},g.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(e)}),b}Uf(b,a);var c=b.prototype;return c.push=function(a){this.lineStream.push(a)},c.end=function(){this.lineStream.push("\n")},c.addParser=function(a){this.parseStream.addParser(a)},c.addTagMapper=function(a){this.parseStream.addTagMapper(a)},b}(Si),Yi=c(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,d=/^application\/dash\+xml/i;b.simpleTypeFromSourceType=function(a){return c.test(a)?"hls":d.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null}});b(Yi);var Zi=Yi.simpleTypeFromSourceType,$i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_i=new RegExp("[\\-\\.0-9"+$i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),aj=new RegExp("^"+$i.source+_i.source+"*(?::"+$i.source+_i.source+"*)?$"),bj=0,cj=1,dj=2,ej=3,fj=4,gj=5,hj=6,ij=7;ub.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument(),Ab(b,b={}),function(a,b,c,d,e){function f(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?function(a){if(65535<a){var b=55296+((a-=65536)>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}(parseInt(b.substr(1).replace("x","0x"))):(e.error("entity not found:"+a),a)}function g(b){if(o<b){var c=a.substring(o,b).replace(/&#?\w+;/g,f);l&&h(o),d.characters(c,0,b-o),o=b}}function h(b,c){for(;j<=b&&(c=k.exec(a));)i=c.index,j=i+c[0].length,l.lineNumber++;l.columnNumber=b-i+1}for(var i=0,j=0,k=/.*(?:\r\n?|\n)|.*$/g,l=d.locator,m=[{currentNSMap:b}],n={},o=0;;){try{var p=a.indexOf("<",o);if(p<0){if(!a.substr(o).match(/^\s*$/)){var q=d.doc,r=q.createTextNode(a.substr(o));q.appendChild(r),d.currentElement=r}return}switch(o<p&&g(p),a.charAt(p+1)){case"/":var s=a.indexOf(">",p+3),t=a.substring(p+2,s),u=m.pop();s<0?(t=a.substring(p+2).replace(/[\s<].*/,""),e.error("end tag name: "+t+" is not complete:"+u.tagName),s=p+1+t.length):t.match(/\s</)&&(t=t.replace(/[\s<].*/,""),e.error("end tag name: "+t+" maybe not complete"),s=p+1+t.length);var v=u.localNSMap,w=u.tagName==t;if(w||u.tagName&&u.tagName.toLowerCase()==t.toLowerCase()){if(d.endElement(u.uri,u.localName,t),v)for(var x in v)d.endPrefixMapping(x);w||e.fatalError("end tag name: "+t+" is not match the current start tagName:"+u.tagName)}else m.push(u);s++;break;case"?":l&&h(p),s=Cb(a,p,d);break;case"!":l&&h(p),s=Bb(a,p,d,e);break;default:l&&h(p);var y=new Db,z=m[m.length-1].currentNSMap,A=(s=wb(a,p,y,z,f,e),y.length);if(!y.closed&&zb(a,s,y.tagName,n)&&(y.closed=!0,c.nbsp||e.warning("unclosed xml attribute")),l&&A){for(var B=vb(l,{}),C=0;C<A;C++){var D=y[C];h(D.offset),D.locator=vb(l,{})}d.locator=B,xb(y,d,z)&&m.push(y),d.locator=l}else xb(y,d,z)&&m.push(y);"http://www.w3.org/1999/xhtml"!==y.uri||y.closed?s++:s=yb(a,s,y.tagName,f,d)}}catch(a){e.error("element parse error: "+a),s=-1}o<s?o=s:g(Math.max(p,o)+1)}}(a,b,c,d,this.errorHandler),d.endDocument()}},Db.prototype={setTagName:function(a){if(!aj.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!aj.test(a))throw new Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}},Eb({},Eb.prototype)instanceof Eb||(Eb=function(a,b){function c(){}for(b in c.prototype=b,c=new c,a)c[b]=a[b];return c});var jj={XMLReader:ub},kj="http://www.w3.org/1999/xhtml",lj={},mj=lj.ELEMENT_NODE=1,nj=lj.ATTRIBUTE_NODE=2,oj=lj.TEXT_NODE=3,pj=lj.CDATA_SECTION_NODE=4,qj=lj.ENTITY_REFERENCE_NODE=5,rj=lj.ENTITY_NODE=6,sj=lj.PROCESSING_INSTRUCTION_NODE=7,tj=lj.COMMENT_NODE=8,uj=lj.DOCUMENT_NODE=9,vj=lj.DOCUMENT_TYPE_NODE=10,wj=lj.DOCUMENT_FRAGMENT_NODE=11,xj=lj.NOTATION_NODE=12,yj={},zj={},Aj=(yj.INDEX_SIZE_ERR=(zj[1]="Index size error",1),yj.DOMSTRING_SIZE_ERR=(zj[2]="DOMString size error",2),yj.HIERARCHY_REQUEST_ERR=(zj[3]="Hierarchy request error",3)),Bj=(yj.WRONG_DOCUMENT_ERR=(zj[4]="Wrong document",4),yj.INVALID_CHARACTER_ERR=(zj[5]="Invalid character",5),yj.NO_DATA_ALLOWED_ERR=(zj[6]="No data allowed",6),yj.NO_MODIFICATION_ALLOWED_ERR=(zj[7]="No modification allowed",7),yj.NOT_FOUND_ERR=(zj[8]="Not found",8)),Cj=(yj.NOT_SUPPORTED_ERR=(zj[9]="Not supported",9),yj.INUSE_ATTRIBUTE_ERR=(zj[10]="Attribute in use",10));yj.INVALID_STATE_ERR=(zj[11]="Invalid state",11),yj.SYNTAX_ERR=(zj[12]="Syntax error",12),yj.INVALID_MODIFICATION_ERR=(zj[13]="Invalid modification",13),yj.NAMESPACE_ERR=(zj[14]="Invalid namespace",14),yj.INVALID_ACCESS_ERR=(zj[15]="Invalid access",15),Hb.prototype=Error.prototype,Fb(yj,Hb),Ib.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)lc(this[d],c,a,b);return c.join("")}},Jb.prototype.item=function(a){return Kb(this),this[a]},Gb(Jb,Ib),Lb.prototype={length:0,item:Ib.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Hb(Cj);var c=this.getNamedItem(a.nodeName);return Nb(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new Hb(Cj);return b=this.getNamedItemNS(a.namespaceURI,a.localName),Nb(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return Ob(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return Ob(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},Pb.prototype={hasFeature:function(a,b){var c=this._features[a.toLowerCase()];return!(!c||b&&!(b in c))},createDocument:function(a,b,c){var d=new Tb;if(d.implementation=this,d.childNodes=new Ib,(d.doctype=c)&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new cc;return d.name=a,d.nodeName=a,d.publicId=b,d.systemId=c,d}},Qb.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Xb(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return Wb(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return function a(b,c,d){var e=new c.constructor;for(var f in c){var g=c[f];"object"!=typeof g&&g!=e[f]&&(e[f]=g)}switch(c.childNodes&&(e.childNodes=new Ib),e.ownerDocument=b,e.nodeType){case mj:var h=c.attributes,i=e.attributes=new Lb,j=h.length;i._ownerElement=e;for(var k=0;k<j;k++)e.setAttributeNode(a(b,h.item(k),!0));break;case nj:d=!0}if(d)for(var l=c.firstChild;l;)e.appendChild(a(b,l,d)),l=l.nextSibling;return e}(this.ownerDocument||this,this,a);
},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==oj&&a.nodeType==oj?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==nj?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==nj?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}},Fb(lj,Qb),Fb(lj,Qb.prototype),Tb.prototype={nodeName:"#document",nodeType:uj,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType!=wj)return null==this.documentElement&&a.nodeType==mj&&(this.documentElement=a),Xb(this,a,b),a.ownerDocument=this,a;for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Wb(this,a)},importNode:function(a,b){return function a(b,c,d){var e;switch(c.nodeType){case mj:(e=c.cloneNode(!1)).ownerDocument=b;case wj:break;case nj:d=!0}if(e=e||c.cloneNode(!1),e.ownerDocument=b,e.parentNode=null,d)for(var f=c.firstChild;f;)e.appendChild(a(b,f,d)),f=f.nextSibling;return e}(this,a,b)},getElementById:function(a){var b=null;return Sb(this.documentElement,function(c){if(c.nodeType==mj&&c.getAttribute("id")==a)return b=c,!0}),b},createElement:function(a){var b=new Yb;return b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.childNodes=new Ib,(b.attributes=new Lb)._ownerElement=b},createDocumentFragment:function(){var a=new gc;return a.ownerDocument=this,a.childNodes=new Ib,a},createTextNode:function(a){var b=new _b;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new ac;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new bc;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new hc;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new Zb;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new fc;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new Yb,d=b.split(":"),e=c.attributes=new Lb;return c.childNodes=new Ib,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c},createAttributeNS:function(a,b){var c=new Zb,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},Gb(Tb,Qb),Tb.prototype.getElementsByTagName=(Yb.prototype={nodeType:mj,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===wj?this.insertBefore(a,null):function(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b),d=a.lastChild}return d=a.lastChild,b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,Vb(a.ownerDocument,a,b),b}(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new Jb(this,function(b){var c=[];return Sb(b,function(d){d===b||d.nodeType!=mj||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new Jb(this,function(c){var d=[];return Sb(c,function(e){e===c||e.nodeType!==mj||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}}).getElementsByTagName,Tb.prototype.getElementsByTagNameNS=Yb.prototype.getElementsByTagNameNS,Gb(Yb,Qb),Zb.prototype.nodeType=nj,Gb(Zb,Qb),$b.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(zj[Aj])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){c=this.data.substring(0,a)+c+this.data.substring(a+b),this.nodeValue=this.data=c,this.length=c.length}},Gb($b,Qb),_b.prototype={nodeName:"#text",nodeType:oj,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},Gb(_b,$b),ac.prototype={nodeName:"#comment",nodeType:tj},Gb(ac,$b),bc.prototype={nodeName:"#cdata-section",nodeType:pj},Gb(bc,$b),cc.prototype.nodeType=vj,Gb(cc,Qb),dc.prototype.nodeType=xj,Gb(dc,Qb),ec.prototype.nodeType=rj,Gb(ec,Qb),fc.prototype.nodeType=qj,Gb(fc,Qb),gc.prototype.nodeName="#document-fragment",gc.prototype.nodeType=wj,Gb(gc,Qb),hc.prototype.nodeType=sj,Gb(hc,Qb),ic.prototype.serializeToString=function(a,b,c){return jc.call(a,b,c)},Qb.prototype.toString=jc;try{Object.defineProperty&&(Object.defineProperty(Jb.prototype,"length",{get:function(){return Kb(this),this.$$length}}),Object.defineProperty(Qb.prototype,"textContent",{get:function(){return function a(b){switch(b.nodeType){case mj:case wj:var c=[];for(b=b.firstChild;b;)7!==b.nodeType&&8!==b.nodeType&&c.push(a(b)),b=b.nextSibling;return c.join("");default:return b.nodeValue}}(this)},set:function(a){switch(this.nodeType){case mj:case wj:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),mc=function(a,b,c){a["$$"+b]=c})}catch(a){}var Dj={DOMImplementation:Pb,XMLSerializer:ic},Ej=c(function(a,b){function c(a){this.options=a||{locator:{}}}function d(){this.cdata=!1}function e(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function f(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function g(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function h(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}c.prototype.parseFromString=function(a,b){var c=this.options,e=new i,g=c.domBuilder||new d,h=c.errorHandler,j=c.locator,k=c.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return j&&g.setDocumentLocator(j),e.errorHandler=function(a,b,c){function e(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a),g[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+f(c))}||function(){}}if(!a){if(b instanceof d)return b;a=b}var g={},h=a instanceof Function;return c=c||{},e("warning"),e("error"),e("fatalError"),g}(h,g,j),e.domBuilder=c.domBuilder||g,/\/x?html?$/.test(b)&&(l.nbsp=" ",l.copy="©",k[""]="http://www.w3.org/1999/xhtml"),k.xml=k.xml||"http://www.w3.org/XML/1998/namespace",a?e.parse(a,k,l):e.errorHandler.error("invalid doc source"),g.doc},d.prototype={startDocument:function(){this.doc=(new j).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var f=this.doc,g=f.createElementNS(a,c||b),i=d.length;h(this,g),this.currentElement=g,this.locator&&e(this.locator,g);for(var j=0;j<i;j++){a=d.getURI(j);var k=d.getValue(j),l=(c=d.getQName(j),f.createAttributeNS(a,c));this.locator&&e(d.getLocator(j),l),l.value=l.nodeValue=k,g.setAttributeNode(l)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName,this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&e(this.locator,c),h(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=g.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&e(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=g.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&e(this.locator,d),h(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var f=d.createDocumentType(a,b,c);this.locator&&e(this.locator,f),h(this,f)}},warning:function(a){},error:function(a){},fatalError:function(a){throw a}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){d.prototype[a]=function(){return null}});var i=jj.XMLReader,j=b.DOMImplementation=Dj.DOMImplementation;b.XMLSerializer=Dj.XMLSerializer,b.DOMParser=c}),Fj=(Ej.DOMImplementation,Ej.XMLSerializer,Ej.DOMParser),Gj="INVALID_NUMBER_OF_PERIOD",Hj="DASH_EMPTY_MANIFEST",Ij="DASH_INVALID_XML",Jj="NO_BASE_URL",Kj="SEGMENT_TIME_UNSPECIFIED",Lj="UNSUPPORTED_UTC_TIMING_SCHEME",Mj={static:function(a){var b=a.duration,c=a.timescale,d=void 0===c?1:c,e=a.sourceDuration;return{start:0,end:Math.ceil(e/(b/d))}},dynamic:function(a){var b=a.NOW,c=a.clientOffset,d=a.availabilityStartTime,e=a.timescale,f=void 0===e?1:e,g=a.duration,h=a.start,i=void 0===h?0:h,j=a.minimumUpdatePeriod,k=void 0===j?0:j,l=a.timeShiftBufferDepth,m=void 0===l?1/0:l,n=(b+c)/1e3,o=d+i,p=n+k-o,q=Math.ceil(p*f/g),r=Math.floor((n-o-m)*f/g),s=Math.floor((n-o)*f/g);return{start:Math.max(0,r),end:Math.min(q,s)}}},Nj=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Oj={mediaPresentationDuration:function(a){return Gc(a)},availabilityStartTime:function(a){return function(a){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z"),Date.parse(a)}(a)/1e3},minimumUpdatePeriod:function(a){return Gc(a)},suggestedPresentationDelay:function(a){return Gc(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return Gc(a)},start:function(a){return Gc(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?Gc(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Pj={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Qj=uc,Rj=Math.pow(2,32),Sj=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},d=12;0===c.version?(c.earliestPresentationTime=b.getUint32(d),c.firstOffset=b.getUint32(d+4),d+=8):(c.earliestPresentationTime=b.getUint32(d)*Rj+b.getUint32(d+4),c.firstOffset=b.getUint32(d+8)*Rj+b.getUint32(d+12),d+=16),d+=2;var e=b.getUint16(d);for(d+=2;0<e;d+=12,e--)c.references.push({referenceType:(128&a[d])>>>7,referencedSize:2147483647&b.getUint32(d),subsegmentDuration:b.getUint32(d+4),startsWithSap:!!(128&a[d+8]),sapType:(112&a[d+8])>>>4,sapDeltaTime:268435455&b.getUint32(d+8)});return c},Tj=c(function(a,b){function c(a){return a instanceof Uint8Array?a:new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0)}function d(a){if(!a)return"";a=Array.prototype.slice.call(a);var b=String.fromCharCode.apply(null,c(a));try{return decodeURIComponent(escape(b))}catch(a){}return b}function e(a,b){void 0===b&&(b=0);var d=(a=c(a))[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(16&a[b+5])>>4?20+d:10+d}function f(a,b){return void 0===b&&(b=0),(a=c(a)).length-b<10||"ID3"!==d(a.subarray(b,b+3))?b:f(a,b+=e(a,b))}Object.defineProperty(b,"__esModule",{value:!0});var g={aac:function(a){var b=f(a);return a.length>=b+2&&255==(255&a[b])&&224==(224&a[b+1])&&16==(22&a[b+1])},mp3:function(a){var b=f(a);return a.length>=b+2&&255==(255&a[b])&&224==(224&a[b+1])&&2==(6&a[b+1])},webm:function(a){return 4<=a.length&&26==(255&a[0])&&69==(255&a[1])&&223==(255&a[2])&&163==(255&a[3])},mp4:function(a){return 8<=a.length&&/^(f|s)typ$/.test(d(a.subarray(4,8)))&&!/^ftyp3g$/.test(d(a.subarray(4,10)))},"3gp":function(a){return 10<=a.length&&/^ftyp3g$/.test(d(a.subarray(4,10)))},ts:function(a){if(a.length<189&&1<=a.length)return 71===a[0];for(var b=0;b+188<a.length&&b<188;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){return 4<=a.length&&/^fLaC$/.test(d(a.subarray(0,4)))},ogg:function(a){return 4<=a.length&&/^OggS$/.test(d(a.subarray(0,4)))}},h=Object.keys(g).filter(function(a){return"ts"!==a}).concat("ts");h.forEach(function(a){var b=g[a];g[a]=function(a){return b(c(a))}}),b.detectContainerForBytes=function(a){a=c(a);for(var b=0;b<h.length;b++){var d=h[b];if(g[d](a))return d}return""},b.getId3Offset=f,b.id3Size=e,b.isLikely=g,b.isLikelyFmp4MediaSegment=function(a){a=c(a);for(var b=0;b<a.length;){var e=(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0;if("moof"===d(a.subarray(b+4,b+8)))return!0;0==e||e+b>a.length?b=a.length:b+=e}return!1}});b(Tj);var Uj=Tj.detectContainerForBytes,Vj=Tj.getId3Offset,Wj=(Tj.id3Size,Tj.isLikely,Tj.isLikelyFmp4MediaSegment),Xj=c(function(a,b){function c(a){return a instanceof Uint8Array?a:new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0)}Object.defineProperty(b,"__esModule",{value:!0}),b.bytesToString=function(a){if(!a)return"";a=Array.prototype.slice.call(a);var b=String.fromCharCode.apply(null,c(a));try{return decodeURIComponent(escape(b))}catch(a){}return b},b.concatTypedArrays=function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];var e=b.reduce(function(a,b){return a+=b&&(b.byteLength||b.length)||0},0),f=new Uint8Array(e),g=0;return b.forEach(function(a){a=c(a),f.set(a,g),g+=a.byteLength}),f},b.isTypedArray=function(a){return ArrayBuffer.isView(a)},b.stringToBytes=function(a,b){return void 0===b&&(b=!1),"string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a?[]:(b||(a=unescape(encodeURIComponent(a))),a.split("").map(function(a){return 255&a.charCodeAt(0)}))},b.toUint8=c});b(Xj),Xj.bytesToString;var Yj=Xj.concatTypedArrays,Zj=(Xj.isTypedArray,Xj.stringToBytes),$j=Xj.toUint8,_j=27,ak=15,bk=21;Pc.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},Pc.prototype.push=function(a){this.trigger("data",a)},Pc.prototype.flush=function(a){this.trigger("done",a)},Pc.prototype.partialFlush=function(a){this.trigger("partialdone",a)},Pc.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},Pc.prototype.reset=function(a){this.trigger("reset",a)},new Pc;var ck,dk,ek,fk,gk={parseType:function(a,b){var c=Rc(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},parsePat:function(a){var b=Sc(a),c=4+Tc(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},parsePmt:function(a){var b={},c=Sc(a),d=4+Tc(a);if(c&&(d+=a[d]+1),1&a[d+5]){var e;e=3+((15&a[d+1])<<8|a[d+2])-4;for(var f=12+((15&a[d+10])<<8|a[d+11]);f<e;){var g=d+f;b[(31&a[g+1])<<8|a[g+2]]=a[g],f+=5+((15&a[g+3])<<8|a[g+4])}return b}},parsePayloadUnitStartIndicator:Sc,parsePesType:function(a,b){switch(b[Rc(a)]){case _j:return"video";case ak:return"audio";case bk:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!Sc(a))return null;var b=4+Tc(a);if(b>=a.byteLength)return null;var c,d=null;return 192&(c=a[b+7])&&((d={}).pts=(14&a[b+9])<<27|(255&a[b+10])<<20|(254&a[b+11])<<12|(255&a[b+12])<<5|(254&a[b+13])>>>3,d.pts*=4,d.pts+=(6&a[b+13])>>>1,d.dts=d.pts,64&c&&(d.dts=(14&a[b+14])<<27|(255&a[b+15])<<20|(254&a[b+16])<<12|(255&a[b+17])<<5|(254&a[b+18])>>>3,d.dts*=4,d.dts+=(6&a[b+18])>>>1)),d},videoPacketContainsKeyFrame:function(a){for(var b=4+Tc(a),c=a.subarray(b),d=0,e=0,f=!1;e<c.byteLength-3;e++)if(1===c[e+2]){d=e+5;break}for(;d<c.byteLength;)switch(c[d]){case 0:if(0!==c[d-1]){d+=2;break}if(0!==c[d-2]){d++;break}for(e+3!==d-2&&"slice_layer_without_partitioning_rbsp_idr"===Uc(31&c[e+3])&&(f=!0);1!==c[++d]&&d<c.length;);e=d-2,d+=3;break;case 1:if(0!==c[d-1]||0!==c[d-2]){d+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Uc(31&c[e+3])&&(f=!0),e=d-2,d+=3;break;default:d+=3}return c=c.subarray(e),d-=e,e=0,c&&3<c.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Uc(31&c[e+3])&&(f=!0),f}},hk=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ik={isLikelyAacData:function(a){var b=function a(b,c){return b.length-c<10||b[c]!=="I".charCodeAt(0)||b[c+1]!=="D".charCodeAt(0)||b[c+2]!=="3".charCodeAt(0)?c:a(b,c+=Vc(b,c))}(a,0);return a.length>=b+2&&255==(255&a[b])&&240==(240&a[b+1])&&16==(22&a[b+1])},parseId3TagSize:Vc,parseAdtsSize:function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3;return 6144&a[b+3]|d|c},parseType:function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":!0&a[b]&&240==(240&a[b+1])?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240==(246&a[b+1]))return hk[(60&a[b+2])>>>2];b++}return null},parseAacTimestamp:function(a){var b,c,d;b=10,64&a[5]&&(b+=4,b+=Wc(a.subarray(10,14)));do{if((c=Wc(a.subarray(b+4,b+8)))<1)return null;if("PRIV"===String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3])){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e}(d,0,e)))break;var f=d.subarray(e+1),g=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;return g*=4,g+=3&f[7]}}b+=10,b+=c}while(b<a.byteLength);return null}},jk=9e4,kk=(ck=function(a){return 9e4*a},dk=function(a,b){return a*b},ek=function(a){return a/9e4},fk=function(a,b){return a/b},jk),lk=Qc,mk={};mk.ts=gk,mk.aac=ik;var nk,ok,pk,qk=jk,rk=188,sk=function(a,b){var c;return(c=mk.aac.isLikelyAacData(a)?function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;3<=a.length-h;){switch(mk.aac.parseType(a,h)){case"timed-metadata":if(a.length-h<10){c=!0;break}if((g=mk.aac.parseId3TagSize(a,h))>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=mk.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7){c=!0;break}if((g=mk.aac.parseAdtsSize(a,h))>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=mk.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var i=qk/e;return{audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*i,pts:f+1024*d*i}]}}(a):Zc(a))&&(c.audio||c.video)?(function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"==typeof c&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=lk(a.dts,c),a.pts=lk(a.pts,c),a.dtsTime=a.dts/qk,a.ptsTime=a.pts/qk})}if(a.video&&a.video.length){var d=b;if("undefined"==typeof d&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=lk(a.dts,d),a.pts=lk(a.pts,d),a.dtsTime=a.dts/qk,a.ptsTime=a.pts/qk}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=lk(e.dts,d),e.pts=lk(e.pts,d),e.dtsTime=e.dts/qk,e.ptsTime=e.dts/qk}}}(c,b),c):null},tk=function(a){return a>>>0},uk=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},vk=tk,wk=function a(b,c){var d,e,f,g,h,i=[];if(!c.length)return null;for(d=0;d<b.byteLength;)e=vk(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]),f=uk(b.subarray(d+4,d+8)),g=1<e?d+e:b.byteLength,f===c[0]&&(1===c.length?i.push(b.subarray(d+8,g)):(h=a(b.subarray(d+8,g),c.slice(1))).length&&(i=i.concat(h))),d=g;return i},xk=tk,yk=function(a){return("00"+a.toString(16)).slice(-2)};nk=function(a,b){var c,d,e;return c=wk(b,["moof","traf"]),d=[].concat.apply([],c.map(function(b){return wk(b,["tfhd"]).map(function(c){var d,e,f;return d=xk(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),e=a[d]||9e4,(f="number"!=typeof(f=wk(b,["tfdt"]).map(function(a){var b,c;return b=a[0],c=xk(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),1===b&&(c*=Math.pow(2,32),c+=xk(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),c})[0])||isNaN(f)?1/0:f)/e})})),e=Math.min.apply(null,d),isFinite(e)?e:0},ok=function(a){var b=wk(a,["moov","trak"]),c=[];return b.forEach(function(a){var b,d,e={},f=wk(a,["tkhd"])[0];f&&(d=(b=new DataView(f.buffer,f.byteOffset,f.byteLength)).getUint8(0),e.id=0===d?b.getUint32(12):b.getUint32(20));var g=wk(a,["mdia","hdlr"])[0];if(g){var h=uk(g.subarray(8,12));e.type="vide"===h?"video":"soun"===h?"audio":h}var i=wk(a,["mdia","minf","stbl","stsd"])[0];if(i){var j=i.subarray(8);e.codec=uk(j.subarray(4,8));var k,l=wk(j,[e.codec])[0];l&&(/^[a-z]vc[1-9]$/i.test(e.codec)?(k=l.subarray(78),"avcC"===uk(k.subarray(4,8))&&11<k.length?(e.codec+=".",e.codec+=yk(k[9]),e.codec+=yk(k[10]),e.codec+=yk(k[11])):e.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(e.codec)?(k=l.subarray(28),"esds"===uk(k.subarray(4,8))&&20<k.length&&0!==k[19]?(e.codec+="."+yk(k[19]),e.codec+="."+yk(k[20]>>>2&63).replace(/^0/,"")):e.codec="mp4a.40.2"):e.codec=e.codec.toLowerCase())}var m=wk(a,["mdia","mdhd"])[0];m&&(e.timescale=pk(m)),c.push(e)}),c};var zk=nk,Ak=ok,Bk=(pk=function(a){var b=0===a[0]?12:20;return xk(a[b]<<24|a[1+b]<<16|a[2+b]<<8|a[3+b])},c(function(a,b){function c(a){return a?a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){return"avc1."+("00"+Number(b).toString(16)).slice(-2)+"00"+("00"+Number(c).toString(16)).slice(-2)}):a}function d(a){return a.map(c)}function e(a){void 0===a&&(a="");var b=a.split(","),c={},d=[];return b.forEach(function(a){var b;a=a.trim(),l.forEach(function(d){var e=k[d].exec(a.toLowerCase());if(e&&!(e.length<=1)){b=d;var f=a.substring(0,e[1].length),g=a.replace(f,"");c[d]={type:f,details:g}}}),b||d.push(a)}),d.length&&(c.unknown=d),c}function f(a){return void 0===a&&(a=""),k.audio.test(a.trim().toLowerCase())}function g(a){return void 0===a&&(a=""),k.text.test(a.trim().toLowerCase())}function h(a){if(a&&"string"==typeof a){var b=a.toLowerCase().split(",").map(function(a){return c(a.trim())}),d="video";1===b.length&&f(b[0])?d="audio":1===b.length&&g(b[0])&&(d="application");var e="mp4";return b.every(function(a){return k.mp4.test(a)})?e="mp4":b.every(function(a){return k.webm.test(a)})?e="webm":b.every(function(a){return k.ogg.test(a)})&&(e="ogg"),d+"/"+e+';codecs="'+a+'"'}}Object.defineProperty(b,"__esModule",{value:!0});var i,j=(i=Je)&&"object"==typeof i&&"default"in i?i.default:i,k={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},l=["video","audio","text"],m=["Video","Audio","Text"];b.DEFAULT_AUDIO_CODEC="mp4a.40.2",b.DEFAULT_VIDEO_CODEC="avc1.4d400d",b.browserSupportsCodec=function(a){return void 0===a&&(a=""),j.MediaSource&&j.MediaSource.isTypeSupported&&j.MediaSource.isTypeSupported(h(a))||!1},b.codecsFromDefault=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var f=c[d];if(f.default&&f.playlists)return e(f.playlists[0].attributes.CODECS)}return null},b.getMimeForCodec=h,b.isAudioCodec=f,b.isTextCodec=g,b.isVideoCodec=function(a){return void 0===a&&(a=""),k.video.test(a.trim().toLowerCase())},b.mapLegacyAvcCodecs=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return d([a])[0]})},b.muxerSupportsCodec=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(a){a=a.trim();for(var b=0;b<m.length;b++)if(k["muxer"+m[b]].test(a))return!0;return!1})},b.parseCodecs=e,b.translateLegacyCodec=c,b.translateLegacyCodecs=d}));b(Bk);var Ck,Dk=Bk.DEFAULT_AUDIO_CODEC,Ek=Bk.DEFAULT_VIDEO_CODEC,Fk=Bk.browserSupportsCodec,Gk=Bk.codecsFromDefault,Hk=Bk.getMimeForCodec,Ik=Bk.isAudioCodec,Jk=(Bk.isTextCodec,Bk.isVideoCodec),Kk=(Bk.mapLegacyAvcCodecs,Bk.muxerSupportsCodec),Lk=Bk.parseCodecs,Mk=Bk.translateLegacyCodec,Nk=(Bk.translateLegacyCodecs,Ri),Ok=rb.log,Pk=rb.mergeOptions,Qk=function(a){function b(b,c,d){var e;if(void 0===d&&(d={}),e=a.call(this)||this,!b)throw new Error("A non-empty playlist URL or object is required");var f=d,g=f.withCredentials,h=void 0!==g&&g,i=f.handleManifestRedirects,j=void 0!==i&&i;e.src=b,e.vhs_=c,e.withCredentials=h,e.handleManifestRedirects=j;var k=c.options_;return e.customTagParsers=k&&k.customTagParsers||[],e.customTagMappers=k&&k.customTagMappers||[],e.state="HAVE_NOTHING",e.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.vhs_.xhr({uri:Nk(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(a,b){if(e.request)return a?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}),e}Li(b,a);var c=b.prototype;return c.playlistRequestError=function(a,b,c){var d=b.uri,e=b.id;this.request=null,c&&(this.state=c),this.error={playlist:this.master.playlists[e],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:500<=a.status?4:2},this.trigger("error")},c.haveMetadata=function(a){var b=this,c=a.playlistString,d=a.playlistObject,e=a.url,f=a.id;this.request=null,this.state="HAVE_METADATA";var g=d||ad({manifestString:c,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});g.lastRequest=Date.now(),cd({playlist:g,uri:e,id:f});var h=fd(this.master,g);this.targetDuration=g.targetDuration,h?(this.master=h,this.media_=this.master.playlists[f]):this.trigger("playlistunchanged"),this.media().endList||(Oi.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Oi.setTimeout(function(){b.trigger("mediaupdatetimeout")},gd(this.media(),!!h))),this.trigger("loadedplaylist")},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),Oi.clearTimeout(this.mediaUpdateTimeout),Oi.clearTimeout(this.finalRenditionTimeout),this.off()},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof a){if(!this.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}if(Oi.clearTimeout(this.finalRenditionTimeout),b){var d=a.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=Oi.setTimeout(this.media.bind(this,a,!1),d)}else{var e=this.state,f=!this.media_||a.id!==this.media_.id;if(this.master.playlists[a.id].endList||a.endList&&a.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,void(f&&(this.trigger("mediachanging"),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(f){if(this.state="SWITCHING_MEDIA",this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,d){if(c.request){if(a.lastRequest=Date.now(),a.resolvedUri=$c(c.handleManifestRedirects,a.resolvedUri,d),b)return c.playlistRequestError(c.request,a,e);c.haveMetadata({playlistString:d.responseText,url:a.uri,id:a.id}),"HAVE_MASTER"===e?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}}},c.pause=function(){this.stopRequest(),Oi.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},c.load=function(a){var b=this;Oi.clearTimeout(this.mediaUpdateTimeout);var c=this.media();if(a){var d=c?c.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Oi.setTimeout(function(){return b.load()},d)}else this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},c.start=function(){var a=this;return this.started=!0,"object"==typeof this.src?(this.src.uri||(this.src.uri=Oi.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){a.setupInitialPlaylist(a.src)},0)):void(this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(b,c){if(a.request){if(a.request=null,b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.src+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.src=$c(a.handleManifestRedirects,a.src,c);var d=ad({manifestString:c.responseText,customTagParsers:a.customTagParsers,customTagMappers:a.customTagMappers});a.setupInitialPlaylist(d)}}))},c.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},c.setupInitialPlaylist=function(a){if(this.state="HAVE_MASTER",a.playlists)return this.master=a,dd(this.master,this.srcUri()),a.playlists.forEach(function(a){a.segments&&a.segments.forEach(function(b){ed(b,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var b=this.srcUri()||Oi.location.href;this.master=function(a,b){var c=_c(0,b),d={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Oi.location.href,resolvedUri:Oi.location.href,playlists:[{uri:b,id:c,resolvedUri:b,attributes:{}}]};return d.playlists[c]=d.playlists[0],d.playlists[b]=d.playlists[0],d}(0,b),this.haveMetadata({playlistObject:a,url:b,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},b}(rb.EventTarget),Rk=1/30,Sk=rb.createTimeRange,Tk={duration:nd,seekable:function(a,b,c){var d=b||0,e=qd(a,b,!0,c);return null===e?Sk():Sk(d,e)},safeLiveIndex:pd,getMediaInfoForTime:function(a,b,c,d){var e,f=a.segments.length,g=b-d;if(g<0){if(0<c)for(e=c-1;0<=e;e--)if(0<(g+=a.segments[e].duration+Rk))return{mediaIndex:e,startTime:d-od(a,c,e)};return{mediaIndex:0,startTime:b}}if(c<0){for(e=c;e<0;e++)if((g-=a.targetDuration)<0)return{mediaIndex:0,startTime:b};c=0}for(e=c;e<f;e++)if((g-=a.segments[e].duration+Rk)<0)return{mediaIndex:e,startTime:d+od(a,c,e)};return{mediaIndex:f-1,startTime:b}},isEnabled:td,isDisabled:function(a){return a.disabled},isBlacklisted:rd,isIncompatible:sd,playlistEnd:qd,isAes:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},hasAttribute:ud,estimateSegmentRequestTime:function(a,b,c,d){
return void 0===d&&(d=0),ud("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:vd},Uk=rb.xhr,Vk=rb.mergeOptions,Wk=Object.freeze({__proto__:null,createTransferableMessage:Bd,initSegmentId:Cd,segmentKeyId:Dd,hexDump:Ed,tagDump:function(a){var b=a.bytes;return Ed(b)},textRanges:function(a){var b,c,d,e="";for(b=0;b<a.length;b++)d=b,e+=(c=a).start(d)+"-"+c.end(d)+" ";return e}}),Xk=rb.mergeOptions,Yk=function(a){function b(b,c,d,e){var f;void 0===d&&(d={}),(f=a.call(this)||this).masterPlaylistLoader_=e||Ki(f),e||(f.isMaster_=!0);var g=d,h=g.withCredentials,i=void 0!==h&&h,j=g.handleManifestRedirects,k=void 0!==j&&j;if(f.vhs_=c,f.withCredentials=i,f.handleManifestRedirects=k,!b)throw new Error("A non-empty playlist URL or object is required");return f.on("minimumUpdatePeriod",function(){f.refreshXml_()}),f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().id)}),f.state="HAVE_NOTHING",f.loadedPlaylists_={},f.isMaster_?(f.masterPlaylistLoader_.srcUrl=b,f.masterPlaylistLoader_.sidxMapping_={}):f.childPlaylist_=b,f}Li(b,a);var c=b.prototype;return c.requestErrored_=function(a,b,c){return!this.request||(this.request=null,a?(this.error="object"!=typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2}:a,c&&(this.state=c),this.trigger("error"),!0):void 0)},c.addSidxSegments_=function(a,b,c){var d=this,e=a.sidx&&Id(a.sidx);if(a.sidx&&e&&!this.masterPlaylistLoader_.sidxMapping_[e]){var f=$c(this.handleManifestRedirects,a.sidx.resolvedUri),g=this.masterPlaylistLoader_.sidxMapping_;g[e]={sidxInfo:a.sidx};var h=function(f,h){if(!d.requestErrored_(f,h,b)){var i=Sj($j(h.response).subarray(8));return g[e].sidx=i,Qj(a,i,a.sidx.resolvedUri),c(!0)}};this.request=function(a,b,c){function d(a,b,d,e){return b.abort(),h=!0,c(a,b,d,e)}function e(a,b){if(!h){if(a)return d(a,b,"",g);var c=b.responseText.substring(g&&g.byteLength||0,b.responseText.length);if(g=Yj(g,Zj(c,!0)),f=f||Vj(g),g.length<10||f&&g.length<f+2)return Hd(b,function(){return d(a,b,"",g)});var e=Uj(g);return"ts"===e&&g.length<188?Hd(b,function(){return d(a,b,"",g)}):!e&&g.length<376?Hd(b,function(){return d(a,b,"",g)}):d(null,b,e,g)}}var f,g=[],h=!1,i=b({uri:a,beforeSend:function(a){a.overrideMimeType("text/plain; charset=x-user-defined"),a.addEventListener("progress",function(b){return b.total,b.loaded,wd(a,null,{statusCode:a.status},e)})}},function(a,b){return wd(i,a,b,e)});return i}(f,this.vhs_.xhr,function(b,c,e,g){if(b)return h(b,c);if(!e||"mp4"!==e)return h({status:c.status,message:"Unsupported "+(e||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:a,internal:!0,blacklistDuration:1/0,code:2},c);var i=a.sidx.byterange,j=i.offset,k=i.length;return g.length>=k+j?h(b,{response:g.subarray(j,j+k),status:c.status,uri:c.uri}):void(d.request=d.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:yd({byterange:a.sidx.byterange})},h))})}else this.mediaRequest_=Oi.setTimeout(function(){return c(!1)},0)},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Oi.clearTimeout(this.minimumUpdatePeriodTimeout_),Oi.clearTimeout(this.mediaRequest_),Oi.clearTimeout(this.mediaUpdateTimeout),this.off()},c.hasPendingRequest=function(){return this.request||this.mediaRequest_},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"==typeof a){if(!this.masterPlaylistLoader_.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.masterPlaylistLoader_.master.playlists[a]}var d=!this.media_||a.id!==this.media_.id;return d&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,void(d&&(this.trigger("mediachanging"),this.trigger("mediachange")))):void(d&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,c,function(d){b.haveMetadata({startingState:c,playlist:a})})))},c.haveMetadata=function(a){var b=a.startingState,c=a.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[c.id]=c,this.mediaRequest_=null,this.refreshMedia_(c.id),"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")},c.pause=function(){this.stopRequest(),Oi.clearTimeout(this.mediaUpdateTimeout),Oi.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},c.load=function(a){var b=this;Oi.clearTimeout(this.mediaUpdateTimeout),Oi.clearTimeout(this.minimumUpdatePeriodTimeout_);var c=this.media();if(a){var d=c?c.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Oi.setTimeout(function(){return b.load()},d)}else this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},c.start=function(){var a=this;this.started=!0,this.isMaster_?this.requestMaster_(function(b,c){a.haveMaster_(),a.hasPendingRequest()||a.media_||a.media(a.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Oi.setTimeout(function(){return a.haveMaster_()},0)},c.requestMaster_=function(a){var b=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(c,d){if(!b.requestErrored_(c,d)){var e=d.responseText!==b.masterPlaylistLoader_.masterXml_;return b.masterPlaylistLoader_.masterXml_=d.responseText,d.responseHeaders&&d.responseHeaders.date?b.masterLoaded_=Date.parse(d.responseHeaders.date):b.masterLoaded_=Date.now(),b.masterPlaylistLoader_.srcUrl=$c(b.handleManifestRedirects,b.masterPlaylistLoader_.srcUrl,d),e?(b.handleMaster_(),void b.syncClientServerClock_(function(){return a(d,e)})):a(d,e)}"HAVE_NOTHING"===b.state&&(b.started=!1)})},c.syncClientServerClock_=function(a){var b=this,c=Oc(this.masterPlaylistLoader_.masterXml_);return null===c?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===c.method?(this.masterPlaylistLoader_.clientOffset_=c.value-Date.now(),a()):void(this.request=this.vhs_.xhr({uri:Nk(this.masterPlaylistLoader_.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.masterPlaylistLoader_.clientOffset_=b.masterLoaded_-Date.now(),a();var f;f="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText),b.masterPlaylistLoader_.clientOffset_=f-Date.now(),a()}}))},c.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},c.handleMaster_=function(){this.mediaRequest_=null;var a=function(a){var b=a.masterXml,c=a.srcUrl,d=a.clientOffset,e=a.sidxMapping,f=Nc(b,{manifestUri:c,clientOffset:d,sidxMapping:e});return dd(f,c),f}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),b=this.masterPlaylistLoader_.master;b&&(a=function(a,b,c){for(var d=!0,e=Xk(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod}),f=0;f<b.playlists.length;f++){var g=b.playlists[f];if(g.sidx){var h=Id(g.sidx);c&&c[h]&&Qj(g,c[h].sidx,g.sidx.resolvedUri)}var i=fd(e,g);i&&(e=i,d=!1)}return bd(b,function(a,b,c,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id,h=fd(e,a.playlists[0]);h&&((e=h).mediaGroups[b][c][f].playlists[0]=e.playlists[g],d=!1)}}),b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1),d?null:e}(b,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||b;var c=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return c&&c!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=c),(!b||a&&b.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},c.updateMinimumUpdatePeriodTimeout_=function(){function a(c){b.minimumUpdatePeriodTimeout_=Oi.setTimeout(function(){b.trigger("minimumUpdatePeriod"),a(c)},c)}var b=this;Oi.clearTimeout(this.minimumUpdatePeriodTimeout_);var c=this.masterPlaylistLoader_.master&&this.masterPlaylistLoader_.master.minimumUpdatePeriod;0<c?a(c):0===c&&(this.media()?a(1e3*this.media().targetDuration):this.one("loadedplaylist",function(){a(1e3*b.media().targetDuration)}))},c.refreshXml_=function(){var a=this;this.requestMaster_(function(b,c){c&&(a.media_&&(a.media_=a.masterPlaylistLoader_.master.playlists[a.media_.id]),a.masterPlaylistLoader_.sidxMapping_=function(a,b){var c=Jd(a.playlists,b);return bd(a,function(a,d,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists;c=Xk(c,Jd(g,b))}}),c}(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.sidxMapping_),a.addSidxSegments_(a.media(),a.state,function(b){a.refreshMedia_(a.media().id)}))})},c.refreshMedia_=function(a){var b=this;if(!a)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var c=this.masterPlaylistLoader_.master.playlists,d=!this.media_||this.media_!==c[a];d?this.media_=c[a]:this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=Oi.setTimeout(function(){b.trigger("mediaupdatetimeout")},gd(this.media(),Boolean(d)))),this.trigger("loadedplaylist")},b}(rb.EventTarget),Zk={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},$k=[],_k=function(){Ck=null,$k.length&&("function"==typeof(Ck=$k.shift())?Ck():Ld(Ck))},al=function(a){Nd("reset",a)},bl=function(){Ck=null,$k.length=0},cl=function(a){Nd("endTimeline",a)},dl=2,el=-101,fl=-102,gl="undefined"!=typeof window?window:{},hl="undefined"==typeof Symbol?"__target":Symbol(),il="application/javascript",jl=gl.BlobBuilder||gl.WebKitBlobBuilder||gl.MozBlobBuilder||gl.MSBlobBuilder,kl=gl.URL||gl.webkitURL||kl&&kl.msURL,ll=gl.Worker;if(ll){var ml,nl=Xd("self.onmessage = function () {}"),ol=new Uint8Array(1);try{(ml=new ll(nl)).postMessage(ol,[ol.buffer])}catch(a){ll=null}finally{kl.revokeObjectURL(nl),ml&&ml.terminate()}}var pl,ql=new Wd("./transmuxer-worker.worker.js",function(a,b){var c=this;!function(){function a(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),-1<d)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}}function b(a,b){var c={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c}function d(a){for(var b=[];a--;)b.push(0);return b}function e(){if(!pa){var a={96e3:[Ea,[227,64],d(154),[56]],88200:[Ea,[231],d(170),[56]],64e3:[Ea,[248,192],d(240),[56]],48e3:[Ea,[255,192],d(268),[55,148,128],d(54),[112]],44100:[Ea,[255,192],d(268),[55,163,128],d(84),[112]],32e3:[Ea,[255,192],d(268),[55,234],d(226),[112]],24e3:[Ea,[255,192],d(268),[55,255,128],d(268),[111,112],d(126),[224]],16e3:[Ea,[255,192],d(268),[55,255,128],d(268),[111,255],d(269),[223,108],d(195),[1,192]],12e3:[Fa,d(268),[3,127,248],d(268),[6,255,240],d(268),[13,255,224],d(268),[27,253,128],d(259),[56]],11025:[Fa,d(268),[3,127,248],d(268),[6,255,240],d(268),[13,255,224],d(268),[27,255,192],d(268),[55,175,128],d(108),[112]],8e3:[Fa,d(268),[3,121,16],d(47),[7]]};pa=function(a){return Object.keys(a).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})}(a)}return pa}function f(){f.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new bb(0,0),new bb(0,1),new bb(1,0),new bb(1,1)],this.cc708Stream_=new $a,this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this),this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done"))}function g(a){return 32<=a&&a<=127||160<=a&&a<=255}function h(a){this.windowNum=a,this.reset()}function i(a){this.serviceNum=a,this.text="",this.currentWindow=new h(-1),this.windows=[]}function j(a){return null===a?"":(a=_a[a]||a,String.fromCharCode(a))}function k(){for(var a=[],b=15;b--;)a.push("");return a}function l(a,b){var c=1;for(b<a&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a}function m(a){var b,c;m.prototype.init.call(this),this.type_=a||"shared",this.push=function(a){"shared"!==this.type_&&a.type!==this.type_||(void 0===c&&(c=a.dts),a.dts=l(a.dts,c),a.pts=l(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){b=c=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}function n(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e}function o(a,b,c){return decodeURIComponent(n(a,b,c))}function p(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]}function q(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return c=0<=c?c:0,(16&a[b+5])>>4?c+20:c+10}function r(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function s(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}}function t(a,b){var c=[],d=0,e=0,f=0,g=1/0,h=null,i=null;b=b||{},t.prototype.init.call(this),this.push=function(b){Ta(a,b),a&&Hb.forEach(function(c){a[c]=b[c]}),c.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.processFrames_=function(){var j,k,l,m,n;0!==c.length&&0!==(j=Na(c,a,e)).length&&(a.baseMediaDecodeTime=Sa(a,b.keepOriginalTimestamps),Ma(a,j,f,g),a.samples=Oa(j),l=ua(Pa(j)),c=[],k=va(d,[a]),d++,a.initSegment=wa([a]),(m=new Uint8Array(k.byteLength+l.byteLength)).set(k),m.set(l,k.byteLength),Ra(a),null===h&&(i=h=j[0].pts),i+=j.length*(1024*Ob/a.samplerate),n={start:h},this.trigger("timingInfo",n),this.trigger("data",{track:a,boxes:m}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:h,end:i}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Ra(a),i=h=null},this.reset=function(){this.resetTiming_(),c=[],this.trigger("reset")}}function u(a,b){var c,d,e,f=0,g=[],h=[],i=null,j=null,k=!0;b=b||{},u.prototype.init.call(this),this.push=function(b){Ta(a,b),"undefined"==typeof a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),"seq_parameter_set_rbsp"!==b.nalUnitType||c||(c=b.config,a.sps=[b.data],Ib.forEach(function(b){a[b]=c[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.data,a.pps=[b.data]),g.push(b)},this.processNals_=function(c){var d;for(g=h.concat(g);g.length&&"access_unit_delimiter_rbsp"!==g[0].nalUnitType;)g.shift();if(0!==g.length){var l=xa(g);if(l.length)if(h=l[l.length-1],c&&(l.pop(),l.duration-=h.duration,l.nalCount-=h.length,l.byteLength-=h.byteLength),l.length){if(this.trigger("timelineStartInfo",a.timelineStartInfo),k){if(!(e=ya(l))[0][0].keyFrame){if(!(e=za(e))[0][0].keyFrame)return g=[].concat.apply([],l).concat(h),void(h=[]);(l=[].concat.apply([],e)).duration=e.duration}k=!1}for(null===i&&(i=l[0].pts,j=i),j+=l.duration,this.trigger("timingInfo",{start:i,end:j}),d=0;d<l.length;d++){var m=l[d];a.samples=Ca(m);var n=ua(Da(m));Ra(a),Ta(a,m),a.baseMediaDecodeTime=Sa(a,b.keepOriginalTimestamps);var o=va(f,[a]);f++,a.initSegment=wa([a]);var p=new Uint8Array(o.byteLength+n.byteLength);p.set(o),p.set(n,o.byteLength),this.trigger("data",{track:a,boxes:p,sequence:f,videoFrameDts:m.dts,videoFramePts:m.pts})}g=[]}else g=[]}},this.resetTimingAndConfig_=function(){d=c=void 0,j=i=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),h=[],g=[],k=!0,this.trigger("reset")}}function v(a){return a.prototype=new na,a.prototype.init.call(a),a}function w(a,b){a.on("data",b.trigger.bind(b,"data")),a.on("done",b.trigger.bind(b,"done")),a.on("partialdone",b.trigger.bind(b,"partialdone")),a.on("endedtimeline",b.trigger.bind(b,"endedtimeline")),a.on("audioTimingInfo",b.trigger.bind(b,"audioTimingInfo")),a.on("videoTimingInfo",b.trigger.bind(b,"videoTimingInfo")),a.on("trackinfo",b.trigger.bind(b,"trackinfo")),a.on("id3Frame",function(c){c.dispatchType=a.metadataStream.dispatchType,c.cueTime=Ia(c.pts),b.trigger("id3Frame",c)}),a.on("caption",function(a){b.trigger("caption",a)})}function x(a){var b=null,c=!0;a=a||{},x.prototype.init.call(this),a.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.push=function(d){if(c){var e=Rb(d);!e||b&&"aac"===b.type?e||b&&"ts"===b.type||(b=function(a){var b={type:"ts",tracks:{audio:null,video:null},packet:new pb.TransportPacketStream,parse:new pb.TransportParseStream,elementary:new pb.ElementaryStream,timestampRollover:new pb.TimestampRolloverStream,adts:new Nb.Adts,h264:new Nb.h264.H264Stream,captionStream:new pb.CaptionStream,metadataStream:new pb.MetadataStream};return b.headOfPipeline=b.packet,b.packet.pipe(b.parse).pipe(b.elementary).pipe(b.timestampRollover),b.timestampRollover.pipe(b.h264),b.h264.pipe(b.captionStream),b.timestampRollover.pipe(b.metadataStream),b.timestampRollover.pipe(b.adts),b.elementary.on("data",function(c){if("metadata"===c.type){for(var d=0;d<c.tracks.length;d++)b.tracks[c.tracks[d].type]||(b.tracks[c.tracks[d].type]=c.tracks[d],b.tracks[c.tracks[d].type].timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime);b.tracks.video&&!b.videoSegmentStream&&(b.videoSegmentStream=new Qb(b.tracks.video,a),b.videoSegmentStream.on("timelineStartInfo",function(c){b.tracks.audio&&!a.keepOriginalTimestamps&&b.audioSegmentStream.setEarliestDts(c.dts-a.baseMediaDecodeTime)}),b.videoSegmentStream.on("timingInfo",b.trigger.bind(b,"videoTimingInfo")),b.videoSegmentStream.on("data",function(a){b.trigger("data",{type:"video",data:a})}),b.videoSegmentStream.on("done",b.trigger.bind(b,"done")),b.videoSegmentStream.on("partialdone",b.trigger.bind(b,"partialdone")),b.videoSegmentStream.on("endedtimeline",b.trigger.bind(b,"endedtimeline")),b.h264.pipe(b.videoSegmentStream)),b.tracks.audio&&!b.audioSegmentStream&&(b.audioSegmentStream=new Pb(b.tracks.audio,a),b.audioSegmentStream.on("data",function(a){b.trigger("data",{type:"audio",data:a})}),b.audioSegmentStream.on("done",b.trigger.bind(b,"done")),b.audioSegmentStream.on("partialdone",b.trigger.bind(b,"partialdone")),b.audioSegmentStream.on("endedtimeline",b.trigger.bind(b,"endedtimeline")),b.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),b.adts.pipe(b.audioSegmentStream)),b.trigger("trackinfo",{hasAudio:!!b.tracks.audio,hasVideo:!!b.tracks.video})}}),b.captionStream.on("data",function(c){var d;d=b.tracks.video&&b.tracks.video.timelineStartInfo.pts||0,c.startTime=La(c.startPts,d,a.keepOriginalTimestamps),c.endTime=La(c.endPts,d,a.keepOriginalTimestamps),b.trigger("caption",c)}),(b=v(b)).metadataStream.on("data",b.trigger.bind(b,"id3Frame")),b}(a),w(b,this)):(b=function(a){var b={type:"aac",tracks:{audio:null},metadataStream:new pb.MetadataStream,aacStream:new Gb,audioRollover:new pb.TimestampRolloverStream("audio"),timedMetadataRollover:new pb.TimestampRolloverStream("timed-metadata"),adtsStream:new vb(!0)};return b.headOfPipeline=b.aacStream,b.aacStream.pipe(b.audioRollover).pipe(b.adtsStream),b.aacStream.pipe(b.timedMetadataRollover).pipe(b.metadataStream),b.metadataStream.on("timestamp",function(a){b.aacStream.setTimestamp(a.timeStamp)}),b.aacStream.on("data",function(c){"timed-metadata"!==c.type&&"audio"!==c.type||b.audioSegmentStream||(b.tracks.audio=b.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:a.baseMediaDecodeTime},codec:"adts",type:"audio"},b.audioSegmentStream=new Pb(b.tracks.audio,a),b.audioSegmentStream.on("data",function(a){b.trigger("data",{type:"audio",data:a})}),b.audioSegmentStream.on("partialdone",b.trigger.bind(b,"partialdone")),b.audioSegmentStream.on("done",b.trigger.bind(b,"done")),b.audioSegmentStream.on("endedtimeline",b.trigger.bind(b,"endedtimeline")),b.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),b.adtsStream.pipe(b.audioSegmentStream),b.trigger("trackinfo",{hasAudio:!!b.tracks.audio,hasVideo:!!b.tracks.video}))}),(b=v(b)).metadataStream.on("data",b.trigger.bind(b,"id3Frame")),b}(a),w(b,this)),c=!1}b.headOfPipeline.push(d)},this.flush=function(){b&&(c=!0,b.headOfPipeline.flush())},this.partialFlush=function(){b&&b.headOfPipeline.partialFlush()},this.endTimeline=function(){b&&b.headOfPipeline.endTimeline()},this.reset=function(){b&&b.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(c){a.keepOriginalTimestamps||(a.baseMediaDecodeTime=c),b&&(b.tracks.audio&&(b.tracks.audio.timelineStartInfo.dts=void 0,b.tracks.audio.timelineStartInfo.pts=void 0,Ra(b.tracks.audio),b.audioRollover&&b.audioRollover.discontinuity()),b.tracks.video&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[]),b.tracks.video.timelineStartInfo.dts=void 0,b.tracks.video.timelineStartInfo.pts=void 0,Ra(b.tracks.video)),b.timestampRollover&&b.timestampRollover.discontinuity())},this.setRemux=function(c){a.remux=c,b&&b.coalesceStream&&b.coalesceStream.setRemux(c)},this.setAudioAppendStart=function(a){b&&b.tracks.audio&&b.audioSegmentStream&&b.audioSegmentStream.setAudioAppendStart(a)},this.alignGopsWith=function(a){}}function y(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null}function z(a,b){var c=Wb(a,["moof","traf"]),d=Wb(a,["mdat"]),e={},f=[];return d.forEach(function(a,b){var d=c[b];f.push({mdat:a,traf:d})}),f.forEach(function(a){var c,d=a.mdat,f=a.traf,g=Wb(f,["tfhd"]),h=_b(g[0]),i=h.trackId,j=Wb(f,["tfdt"]),k=0<j.length?Yb(j[0]).baseMediaDecodeTime:0,l=Wb(f,["trun"]);b===i&&0<l.length&&(c=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i=[];for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=y(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:ac(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else{if(!g)break;d.pts=g.pts,d.dts=g.dts}i.push(d)}return i}(d,function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=$b(a).samples;b.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),a.pts=d+a.compositionTimeOffset,d+=a.duration}),h=h.concat(b)}),h}(l,k,h),i),e[i]||(e[i]=[]),e[i]=e[i].concat(c))}),e}function A(a){return"AudioSegmentStream"===a?"audio":"VideoSegmentStream"===a?"video":""}a.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},a.prototype.push=function(a){this.trigger("data",a)},a.prototype.flush=function(a){this.trigger("done",a)},a.prototype.partialFlush=function(a){this.trigger("partialdone",a)},a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},a.prototype.reset=function(a){this.trigger("reset",a)};var B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na=a,oa=Math.pow(2,32)-1;!function(){var a;if(W={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in W)W.hasOwnProperty(a)&&(W[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);X=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Z=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Y=new Uint8Array([0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),_=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),aa={video:$,audio:_},da=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ca=new Uint8Array([0,0,0,0,0,0,0,0]),ea=new Uint8Array([0,0,0,0,0,0,0,0]),fa=ea,ga=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ha=ea,ba=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),B=function(a){var b,c,d=[],e=0;for(b=1;b<arguments.length;b++)d.push(arguments[b]);for(b=d.length;b--;)e+=d[b].byteLength;for(c=new Uint8Array(e+8),new DataView(c.buffer,c.byteOffset,c.byteLength).setUint32(0,c.byteLength),c.set(a,4),b=0,e=8;b<d.length;b++)c.set(d[b],e),e+=d[b].byteLength;return c},C=function(){return B(W.dinf,B(W.dref,da))},D=function(a){return B(W.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},P=function(a){return B(W.hdlr,aa[a])},O=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=255&a.samplerate),B(W.mdhd,b)},N=function(a){return B(W.mdia,O(a),P(a.type),G(a))},F=function(a){return B(W.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},G=function(a){return B(W.minf,"video"===a.type?B(W.vmhd,ba):B(W.smhd,ca),C(),R(a))},H=function(a,b){for(var c=[],d=b.length;d--;)c[d]=T(b[d]);return B.apply(null,[W.moof,F(a)].concat(c))},I=function(a){for(var b=a.length,c=[];b--;)c[b]=L(a[b]);return B.apply(null,[W.moov,K(4294967295)].concat(c).concat(J(a)))},J=function(a){for(var b=a.length,c=[];b--;)c[b]=U(a[b]);return B.apply(null,[W.mvex].concat(c))},K=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return B(W.mvhd,b)},Q=function(a){var b,c,d=a.samples||[],e=new Uint8Array(4+d.length);for(c=0;c<d.length;c++)b=d[c].flags,e[c+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return B(W.sdtp,e)},R=function(a){return B(W.stbl,S(a),B(W.stts,ha),B(W.stsc,fa),B(W.stsz,ga),B(W.stco,ea))},S=function(a){return B(W.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===a.type?ia(a):ja(a))},ia=function(a){var b,c,d=a.sps||[],e=a.pps||[],f=[],g=[];for(b=0;b<d.length;b++)f.push((65280&d[b].byteLength)>>>8),f.push(255&d[b].byteLength),f=f.concat(Array.prototype.slice.call(d[b]));for(b=0;b<e.length;b++)g.push((65280&e[b].byteLength)>>>8),g.push(255&e[b].byteLength),g=g.concat(Array.prototype.slice.call(e[b]));if(c=[W.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),B(W.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([d.length],f,[e.length],g))),B(W.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var h=a.sarRatio[0],i=a.sarRatio[1];c.push(B(W.pasp,new Uint8Array([(4278190080&h)>>24,(16711680&h)>>16,(65280&h)>>8,255&h,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))}return B.apply(null,c)},ja=function(a){return B(W.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),D(a))},M=function(a){var b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return B(W.tkhd,b)},T=function(a){var b,c,d,e,f,g;return b=B(W.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),f=Math.floor(a.baseMediaDecodeTime/(1+oa)),g=Math.floor(a.baseMediaDecodeTime%(1+oa)),c=B(W.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,255&f,g>>>24&255,g>>>16&255,g>>>8&255,255&g])),"audio"===a.type?(d=V(a,92),B(W.traf,b,c,d)):(e=Q(a),d=V(a,e.length+92),B(W.traf,b,c,d,e))},L=function(a){return a.duration=a.duration||4294967295,B(W.trak,M(a),N(a))},U=function(a){var b=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),B(W.trex,b)},ma=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},la=function(a,b){var c,d,e,f,g,h;for(b+=20+16*(f=a.samples||[]).length,e=ma(f,b),(d=new Uint8Array(e.length+16*f.length)).set(e),c=e.length,h=0;h<f.length;h++)g=f[h],d[c++]=(4278190080&g.duration)>>>24,d[c++]=(16711680&g.duration)>>>16,d[c++]=(65280&g.duration)>>>8,d[c++]=255&g.duration,d[c++]=(4278190080&g.size)>>>24,d[c++]=(16711680&g.size)>>>16,d[c++]=(65280&g.size)>>>8,d[c++]=255&g.size,d[c++]=g.flags.isLeading<<2|g.flags.dependsOn,d[c++]=g.flags.isDependedOn<<6|g.flags.hasRedundancy<<4|g.flags.paddingValue<<1|g.flags.isNonSyncSample,d[c++]=61440&g.flags.degradationPriority,d[c++]=15&g.flags.degradationPriority,d[c++]=(4278190080&g.compositionTimeOffset)>>>24,d[c++]=(16711680&g.compositionTimeOffset)>>>16,d[c++]=(65280&g.compositionTimeOffset)>>>8,d[c++]=255&g.compositionTimeOffset;return B(W.trun,d)},ka=function(a,b){var c,d,e,f,g,h;for(b+=20+8*(f=a.samples||[]).length,e=ma(f,b),(c=new Uint8Array(e.length+8*f.length)).set(e),d=e.length,h=0;h<f.length;h++)g=f[h],c[d++]=(4278190080&g.duration)>>>24,c[d++]=(16711680&g.duration)>>>16,c[d++]=(65280&g.duration)>>>8,c[d++]=255&g.duration,c[d++]=(4278190080&g.size)>>>24,c[d++]=(16711680&g.size)>>>16,c[d++]=(65280&g.size)>>>8,c[d++]=255&g.size;return B(W.trun,c)},V=function(a,b){return"audio"===a.type?ka(a,b):la(a,b)},E=function(){
return B(W.ftyp,X,Y,X,Z)};var pa,qa,ra,sa,ta,ua=function(a){return B(W.mdat,a)},va=H,wa=function(a){var b,c=E(),d=I(a);return(b=new Uint8Array(c.byteLength+d.byteLength)).set(c),b.set(d,c.byteLength),b},xa=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,b=d.byteLength=0;b<a.length;b++)"access_unit_delimiter_rbsp"===(c=a[b]).nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),(d=[c]).byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},ya=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)(c=a[b]).keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),(d=[c]).nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},za=function(a){var b;return!a[0][0].keyFrame&&1<a.length&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},Aa=function(a,c){var d,e,f,g,h,i=c||0,j=[];for(d=0;d<a.length;d++)for(g=a[d],e=0;e<g.length;e++)h=g[e],i+=(f=b(h,i)).size,j.push(f);return j},Ba=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=new Uint8Array(i+4*j),l=new DataView(k.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],l.setUint32(h,g.data.byteLength),h+=4,k.set(g.data,h),h+=g.data.byteLength;return k},Ca=function(a,c){var d,e=[];return d=b(a,c||0),e.push(d),e},Da=function(a){var b,c,d=0,e=a.byteLength,f=a.length,g=new Uint8Array(e+4*f),h=new DataView(g.buffer);for(b=0;b<a.length;b++)c=a[b],h.setUint32(d,c.data.byteLength),d+=4,g.set(c.data,d),d+=c.data.byteLength;return g},Ea=[33,16,5,32,164,27],Fa=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ga=9e4,Ha=qa=function(a){return 9e4*a},Ia=(ra=function(a,b){return a*b},sa=function(a){return a/9e4}),Ja=(ta=function(a,b){return a/b},function(a,b){return qa(ta(a,b))}),Ka=function(a,b){return ra(sa(a),b)},La=function(a,b,c){return sa(c?a:a-b)},Ma=function(a,b,c,d){var f,g,h,i,j,k=0,l=0,m=0;if(b.length&&(f=Ja(a.baseMediaDecodeTime,a.samplerate),g=Math.ceil(Ga/(a.samplerate/1024)),c&&d&&(k=f-Math.max(c,d),m=(l=Math.floor(k/g))*g),!(l<1||Ga/2<m))){for(h=(h=e()[a.samplerate])||b[0].data,i=0;i<l;i++)j=b[0],b.splice(0,0,{data:h,dts:j.dts-g,pts:j.pts-g});return a.baseMediaDecodeTime-=Math.floor(Ka(m,a.samplerate)),m}},Na=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c&&(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0)}))},Oa=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},Pa=function(a){var b,c,d=0,e=new Uint8Array(function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].data.byteLength;return c}(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},Qa=Ga,Ra=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},Sa=function(a,b){var c,d=a.minSegmentDts;return b||(d-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=d,c=Math.max(0,c),"audio"===a.type&&(c*=a.samplerate/Qa,c=Math.floor(c)),c},Ta=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},Ua=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&4===d){if("GA94"===String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6])){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}c.payload=void 0}b+=e,e=d=0}return c},Va=function(a){return 181!==a.payload[0]?null:49!=(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},Wa=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)f={type:3&b[2+(e=3*c)],pts:a},4&b[2+e]&&(f.ccData=b[3+e]<<8|b[4+e],g.push(f));return g},Xa=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Ya=4;(f.prototype=new na).push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=Ua(a.escapedRBSP)).payload&&b.payloadType===Ya&&(c=Va(b)))if(a.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=Wa(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},f.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},f.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),this.captionPackets_.length=0),this.flushCCStreams(a)},f.prototype.flush=function(){return this.flushStream("flush")},f.prototype.partialFlush=function(){return this.flushStream("partialFlush")},f.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},f.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},f.prototype.setsChannel1Active=function(a){return 4096==(30720&a.ccData)},f.prototype.setsChannel2Active=function(a){return 6144==(30720&a.ccData)},f.prototype.setsTextOrXDSActive=function(a){return 256==(28928&a.ccData)||4138==(30974&a.ccData)||6186==(30974&a.ccData)},f.prototype.dispatchCea708Packet=function(a){this.cc708Stream_.push(a)};var Za={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};h.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},h.prototype.getText=function(){return this.rows.join("\n")},h.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},h.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(a),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},h.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},h.prototype.addText=function(a){this.rows[this.rowIdx]+=a},h.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}},i.prototype.init=function(a,b){this.startPts=a;for(var c=0;c<8;c++)this.windows[c]=new h(c),"function"==typeof b&&(this.windows[c].beforeRowOverflow=b)},i.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]};var $a=function a(){a.prototype.init.call(this);var b=this;this.current708Packet=null,this.services={},this.push=function(a){3===a.type?b.new708Packet():null===b.current708Packet&&b.new708Packet(),b.add708Bytes(a)}};$a.prototype=new na,$a.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},$a.prototype.add708Bytes=function(a){var b=a.ccData,c=b>>>8,d=255&b;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(c),this.current708Packet.data.push(d)},$a.prototype.push708Packet=function(){var a=this.current708Packet,b=a.data,c=null,d=null,e=0,f=b[e++];for(a.seq=f>>6,a.sizeCode=63&f;e<b.length;e++)d=31&(f=b[e++]),7===(c=f>>5)&&0<d&&(c=f=b[e++]),this.pushServiceBlock(c,e,d),0<d&&(e+=d-1)},$a.prototype.pushServiceBlock=function(a,b,c){var d,e=b,f=this.current708Packet.data,h=this.services[a];for(h=h||this.initService(a,e);e<b+c&&e<f.length;e++)d=f[e],g(d)?e=this.handleText(e,h):16===d?e=this.extendedCommands(e,h):128<=d&&d<=135?e=this.setCurrentWindow(e,h):152<=d&&d<=159?e=this.defineWindow(e,h):136===d?e=this.clearWindows(e,h):140===d?e=this.deleteWindows(e,h):137===d?e=this.displayWindows(e,h):138===d?e=this.hideWindows(e,h):139===d?e=this.toggleWindows(e,h):151===d?e=this.setWindowAttributes(e,h):144===d?e=this.setPenAttributes(e,h):145===d?e=this.setPenColor(e,h):146===d?e=this.setPenLocation(e,h):143===d?h=this.reset(e,h):8===d?h.currentWindow.backspace():12===d?h.currentWindow.clearText():13===d?h.currentWindow.pendingNewLine=!0:14===d?h.currentWindow.clearText():141===d&&e++},$a.prototype.extendedCommands=function(a,b){var c=this.current708Packet.data[++a];return g(c)&&(a=this.handleText(a,b,!0)),a},$a.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},$a.prototype.initService=function(a,b){var c=this;return this.services[a]=new i(a),this.services[a].init(this.getPts(b),function(b){c.flushDisplayed(b,c.services[a])}),this.services[a]},$a.prototype.handleText=function(a,b,c){var d=function(a){var b=Za[a]||a;return 4096&a&&a===b?"":String.fromCharCode(b)}((c?4096:0)|this.current708Packet.data[a]),e=b.currentWindow;return e.pendingNewLine&&!e.isEmpty()&&e.newLine(this.getPts(a)),e.pendingNewLine=!1,e.addText(d),a},$a.prototype.setCurrentWindow=function(a,b){var c=7&this.current708Packet.data[a];return b.setCurrentWindow(c),a},$a.prototype.defineWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;b.setCurrentWindow(e);var f=b.currentWindow;return d=c[++a],f.visible=(32&d)>>5,f.rowLock=(16&d)>>4,f.columnLock=(8&d)>>3,f.priority=7&d,d=c[++a],f.relativePositioning=(128&d)>>7,f.anchorVertical=127&d,d=c[++a],f.anchorHorizontal=d,d=c[++a],f.anchorPoint=(240&d)>>4,f.rowCount=15&d,d=c[++a],f.columnCount=63&d,d=c[++a],f.windowStyle=(56&d)>>3,f.penStyle=7&d,f.virtualRowCount=f.rowCount+1,a},$a.prototype.setWindowAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.winAttr;return d=c[++a],e.fillOpacity=(192&d)>>6,e.fillRed=(48&d)>>4,e.fillGreen=(12&d)>>2,e.fillBlue=3&d,d=c[++a],e.borderType=(192&d)>>6,e.borderRed=(48&d)>>4,e.borderGreen=(12&d)>>2,e.borderBlue=3&d,d=c[++a],e.borderType+=(128&d)>>5,e.wordWrap=(64&d)>>6,e.printDirection=(48&d)>>4,e.scrollDirection=(12&d)>>2,e.justify=3&d,d=c[++a],e.effectSpeed=(240&d)>>4,e.effectDirection=(12&d)>>2,e.displayEffect=3&d,a},$a.prototype.flushDisplayed=function(a,b){for(var c=[],d=0;d<8;d++)b.windows[d].visible&&!b.windows[d].isEmpty()&&c.push(b.windows[d].getText());b.endPts=a,b.text=c.join("\n\n"),this.pushCaption(b),b.startPts=a},$a.prototype.pushCaption=function(a){""!==a.text&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts)},$a.prototype.displayWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=1);return a},$a.prototype.hideWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=0);return a},$a.prototype.toggleWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible^=1);return a},$a.prototype.clearWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].clearText();return a},$a.prototype.deleteWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].reset();return a},$a.prototype.setPenAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penAttr;return d=c[++a],e.textTag=(240&d)>>4,e.offset=(12&d)>>2,e.penSize=3&d,d=c[++a],e.italics=(128&d)>>7,e.underline=(64&d)>>6,e.edgeType=(56&d)>>3,e.fontStyle=7&d,a},$a.prototype.setPenColor=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penColor;return d=c[++a],e.fgOpacity=(192&d)>>6,e.fgRed=(48&d)>>4,e.fgGreen=(12&d)>>2,e.fgBlue=3&d,d=c[++a],e.bgOpacity=(192&d)>>6,e.bgRed=(48&d)>>4,e.bgGreen=(12&d)>>2,e.bgBlue=3&d,d=c[++a],e.edgeRed=(48&d)>>4,e.edgeGreen=(12&d)>>2,e.edgeBlue=3&d,a},$a.prototype.setPenLocation=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,d=c[++a],e.row=15&d,d=c[++a],e.column=63&d,a},$a.prototype.reset=function(a,b){var c=this.getPts(a);return this.flushDisplayed(c,b),this.initService(b.serviceNum,a)};var _a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ab=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],bb=function a(b,c){a.prototype.init.call(this),this.field_=b||0,this.dataChannel_=c||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if((b=32639&a.ccData)!==this.lastControlCode_){if(4096==(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=k();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=k();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=k()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))f=j((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),f=j((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14==(14&e)&&this.addFormatting(a.pts,["i"]),1==(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=ab.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16==(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14==(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=j(d),f+=j(e),this[this.mode_](a.pts,f),this.column_+=f.length)}else this.lastControlCode_=null}};bb.prototype=new na,bb.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(a){return""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},bb.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=k(),this.nonDisplayed_=k(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},bb.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},bb.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&b<=63},bb.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&b<=63},bb.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&b<=47},bb.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&b<=35},bb.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&b<=127},bb.prototype.isColorPAC=function(a){return 64<=a&&a<=79||96<=a&&a<=127},bb.prototype.isNormalChar=function(a){return 32<=a&&a<=127},bb.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=k(),this.displayed_=k()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},bb.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},bb.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},bb.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},bb.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},bb.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<15;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},bb.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var cb={CaptionStream:f,Cea608Stream:bb,Cea708Stream:$a},db={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};m.prototype=new na;var eb,fb=m,gb={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=o(a.data,1,b),a.value=o(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=o(a.data,1,b),a.url=o(a.data,b+1,a.data.length);break}},PRIV:function(a){var b,c;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=(c=a.data,unescape(n(c,0,b)));break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};(eb=function(a){var b,c={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},d=0,e=[],f=0;if(eb.prototype.init.call(this),this.dispatchType=db.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,g,h,i,j;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))c.debug;else if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=p(a.data.subarray(6,10)),d+=10),!(f<d)){for(b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts},j=0;j<d;)b.data.set(e[0].data.subarray(0,d-j),j),j+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();g=10,64&b.data[5]&&(g+=4,g+=p(b.data.subarray(10,14)),d-=p(b.data.subarray(16,20)));do{if((h=p(b.data.subarray(g+4,g+8)))<1)return;if((i={id:String.fromCharCode(b.data[g],b.data[g+1],b.data[g+2],b.data[g+3]),data:b.data.subarray(g+10,g+h+10)}).key=i.id,gb[i.id]&&(gb[i.id](i),"com.apple.streaming.transportStreamTimestamp"===i.owner)){var k=i.data,l=(1&k[3])<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;l*=4,l+=3&k[7],i.timeStamp=l,void 0===b.pts&&void 0===b.dts&&(b.pts=i.timeStamp,b.dts=i.timeStamp),this.trigger("timestamp",i)}b.frames.push(i),g+=10,g+=h}while(g<d);this.trigger("data",b)}}}).prototype=new na;var hb,ib,jb,kb=eb,lb=fb;(hb=function(){var a=new Uint8Array(188),b=0;hb.prototype.init.call(this),this.push=function(c){var d,e=0,f=188;for(b?((d=new Uint8Array(c.byteLength+b)).set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)71!==d[e]||71!==d[f]?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=188,f+=188);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}}).prototype=new na,(ib=function(){var a,b,c,d;ib.prototype.init.call(this),(d=this).packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=3+((15&a[1])<<8|a[2])-4,e=12+((15&a[10])<<8|a[11]);e<c;){var f=a[e],g=(31&a[e+1])<<8|a[e+2];f===db.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=g:f===db.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=g:f===db.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][g]=f),e+=5+((15&a[e+3])<<8|a[e+4])}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],1<(48&b[3])>>>4&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=db.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=db.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}}).prototype=new na,ib.STREAM_TYPES={h264:27,adts:15},(jb=function(){function a(a,b,d){var e,f,g=new Uint8Array(a.size),h={type:b},i=0,j=0;if(a.data.length&&!(a.size<9)){for(h.trackId=a.data[0].pid,i=0;i<a.data.length;i++)f=a.data[i],g.set(f.data,j),j+=f.data.byteLength;!function(a,b){var c;b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=0!=(4&a[6]),192&(c=a[7])&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8])}(g,h),e="video"===b||h.packetLength<=a.size,(d||e)&&(a.size=0,a.data.length=0),e&&c.trigger("data",h)}}var b,c=this,d={data:[],size:0},e={data:[],size:0},f={data:[],size:0};jb.prototype.init.call(this),this.push=function(g){({pat:function(){},pes:function(){var b,c;switch(g.streamType){case db.H264_STREAM_TYPE:b=d,c="video";break;case db.ADTS_STREAM_TYPE:b=e,c="audio";break;case db.METADATA_STREAM_TYPE:b=f,c="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&a(b,c,!0),b.data.push(g),b.size+=g.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]};null!==(b=g.programMapTable).video&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.video,codec:"avc",type:"video"}),null!==b.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.audio,codec:"adts",type:"audio"}),c.trigger("data",a)}})[g.type]()},this.reset=function(){d.size=0,d.data.length=0,e.size=0,e.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(d,"video"),a(e,"audio"),a(f,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new na;var mb={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:hb,TransportParseStream:ib,ElementaryStream:jb,TimestampRolloverStream:lb,CaptionStream:cb.CaptionStream,Cea608Stream:cb.Cea608Stream,Cea708Stream:cb.Cea708Stream,MetadataStream:kb};for(var nb in db)db.hasOwnProperty(nb)&&(mb[nb]=db[nb]);var ob,pb=mb,qb=Ga,rb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ob=function(a){var b,c=0;ob.prototype.init.call(this),this.push=function(d){var e,f,g,h,i,j,k=0;if(a||(c=0),"audio"===d.type)for(b?(h=b,(b=new Uint8Array(h.byteLength+d.data.byteLength)).set(h),b.set(d.data,h.byteLength)):b=d.data;k+5<b.length;)if(255===b[k]&&240==(246&b[k+1])){if(f=2*(1&~b[k+1]),e=(3&b[k+3])<<11|b[k+4]<<3|(224&b[k+5])>>5,j=(i=1024*(1+(3&b[k+6])))*qb/rb[(60&b[k+2])>>>2],g=k+e,b.byteLength<g)return;if(this.trigger("data",{pts:d.pts+c*j,dts:d.dts+c*j,sampleCount:i,audioobjecttype:1+(b[k+2]>>>6&3),channelcount:(1&b[k+2])<<2|(192&b[k+3])>>>6,samplerate:rb[(60&b[k+2])>>>2],samplingfrequencyindex:(60&b[k+2])>>>2,samplesize:16,data:b.subarray(k+7+f,g)}),c++,b.byteLength===g)return void(b=void 0);b=b.subarray(g)}else k++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}}).prototype=new na;var sb,tb,ub,vb=ob,wb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;a<d||(a-=d,a-=8*(e=Math.floor(a/8)),b-=e,this.loadWord()),c<<=a,d-=a},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return 0<(d-=e)?c<<=e:0<b&&this.loadWord(),0<(e=a-e)?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!=(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(tb=function(){var a,b,c=0;tb.prototype.init.call(this),this.push=function(d){for(var e,f=(b=b?((e=new Uint8Array(b.byteLength+d.data.byteLength)).set(b),e.set(d.data,b.byteLength),e):d.data).byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}for(c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));1!==b[++a]&&a<f;);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&3<b.byteLength&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new na,ub={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(sb=function(){var a,b,c,d,e,f,g,h=new tb;sb.prototype.init.call(this),(a=this).push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g};switch(31&g[0]){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d=8,e=8;for(c=0;c<a;c++)0!==e&&(e=(d+b.readExpGolomb()+256)%256),d=0===e?d:e},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,
e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o,p=0,q=0,r=0,s=0,t=1;if(c=(b=new wb(a)).readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),ub[c]&&(3===(f=b.readUnsignedExpGolomb())&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(m=3!==f?8:12,o=0;o<m;o++)b.readBoolean()&&g(o<6?16:64,b);if(b.skipUnsignedExpGolomb(),0===(h=b.readUnsignedExpGolomb()))b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),o=0;o<i;o++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),0===(l=b.readBits(1))&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(p=b.readUnsignedExpGolomb(),q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb(),s=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(b.readUnsignedByte()){case 1:n=[1,1];break;case 2:n=[12,11];break;case 3:n=[10,11];break;case 4:n=[16,11];break;case 5:n=[40,33];break;case 6:n=[24,11];break;case 7:n=[20,11];break;case 8:n=[32,11];break;case 9:n=[80,33];break;case 10:n=[18,11];break;case 11:n=[15,11];break;case 12:n=[64,33];break;case 13:n=[160,99];break;case 14:n=[4,3];break;case 15:n=[3,2];break;case 16:n=[2,1];break;case 255:n=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}n&&(t=n[0]/n[1])}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:Math.ceil((16*(j+1)-2*p-2*q)*t),height:(2-l)*(k+1)*16-2*r-2*s,sarRatio:n}}}).prototype=new na;var xb,yb={H264Stream:sb,NalByteStream:tb},zb=function(a){var b=function a(b,c){return b.length-c<10||b[c]!=="I".charCodeAt(0)||b[c+1]!=="D".charCodeAt(0)||b[c+2]!=="3".charCodeAt(0)?c:a(b,c+=q(b,c))}(a,0);return a.length>=b+2&&255==(255&a[b])&&240==(240&a[b+1])&&16==(22&a[b+1])},Ab=q,Bb=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3;return 6144&a[b+3]|d|c};(xb=function(){var a=new Uint8Array,b=0;xb.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,(a=new Uint8Array(c.byteLength+g)).set(a.subarray(0,g)),a.set(c,g)):a=c;3<=a.length-i;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(255!=(255&a[i])||240!=(240&a[i+1]))i++;else{if(a.length-i<7)break;if(i+(h=Bb(a,i))>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else{if(a.length-i<10)break;if(i+(h=Ab(a,i))>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=0<d?a.subarray(i):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new na;var Cb,Db,Eb,Fb,Gb=xb,Hb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ib=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Jb=yb.H264Stream,Kb=zb,Lb=Ga;(Db=function(a,b){var c=[],d=0,e=0,f=0,g=1/0;b=b||{},Db.prototype.init.call(this),this.push=function(b){Ta(a,b),a&&Hb.forEach(function(c){a[c]=b[c]}),c.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,l,m,n;0!==c.length&&(h=Na(c,a,e),a.baseMediaDecodeTime=Sa(a,b.keepOriginalTimestamps),n=Ma(a,h,f,g),a.samples=Oa(h),j=ua(Pa(h)),c=[],i=va(d,[a]),k=new Uint8Array(i.byteLength+j.byteLength),d++,k.set(i),k.set(j,i.byteLength),Ra(a),l=Math.ceil(1024*Lb/a.samplerate),h.length&&(m=h.length*l,this.trigger("segmentTimingInfo",s(Ja(a.baseMediaDecodeTime,a.samplerate),h[0].dts,h[0].pts,h[0].dts+m,h[0].pts+m,n||0)),this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+m})),this.trigger("data",{track:a,boxes:k})),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ra(a),c=[],this.trigger("reset")}}).prototype=new na,(Cb=function(a,b){var c,d,e=0,f=[],g=[];b=b||{},Cb.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){Ta(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||c||(c=b.config,a.sps=[b.data],Ib.forEach(function(b){a[b]=c[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var c,d,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(c=xa(f),(h=ya(c))[0][0].keyFrame||((d=this.getGopForFusion_(f[0],a))?(n=d.duration,h.unshift(d),h.byteLength+=d.byteLength,h.nalCount+=d.nalCount,h.pts=d.pts,h.dts=d.dts,h.duration+=d.duration):h=za(h)),g.length){var o;if(!(o=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h)))return this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ra(a),h=o}Ta(a,h),a.samples=Aa(h),j=ua(Ba(h)),a.baseMediaDecodeTime=Sa(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",s(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),i=va(e,[a]),k=new Uint8Array(i.byteLength+j.byteLength),e++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){Ra(a),d=c=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=1/0;for(g=0;g<this.gopCache_.length;g++)e=(f=this.gopCache_[g]).gop,a.pps&&r(a.pps[0],f.pps[0])&&a.sps&&r(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||-1e4<=(c=b.dts-e.dts-e.duration)&&c<=45e3&&(!d||c<h)&&(d=f,h=c));return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:((j=a.slice(c)).byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){var b,c,d,e,f,h,i;for(b=g.length-1,c=a.length-1,f=null,h=!1;0<=b&&0<=c;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}if(!h&&null===f)return null;if(0===(i=h?c:f))return a;var j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}}).prototype=new na,(Fb=function(a,b){this.numberOfTracks=0,this.metadataStream=b,"undefined"!=typeof(a=a||{}).remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Fb.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),void("audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))))}}).prototype=new na,Fb.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,Ib.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Hb.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=wa(this.pendingTracks),g.initSegment=new Uint8Array(d.byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)(b=this.pendingCaptions[e]).startTime=La(b.startPts,h,this.keepOriginalTimestamps),b.endTime=La(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)(c=this.pendingMetadata[e]).cueTime=La(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Fb.prototype.setRemux=function(a){this.remuxTracks=a},(Eb=function(a){var b,c,d=this,e=!0;Eb.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new pb.MetadataStream,e.aacStream=new Gb,e.audioTimestampRolloverStream=new pb.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new pb.TimestampRolloverStream("timed-metadata"),e.adtsStream=new vb,e.coalesceStream=new Fb(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type&&"audio"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Db(c,a),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b}))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};(this.transmuxPipeline_=e).type="ts",e.metadataStream=new pb.MetadataStream,e.packetStream=new pb.TransportPacketStream,e.parseStream=new pb.TransportParseStream,e.elementaryStream=new pb.ElementaryStream,e.timestampRolloverStream=new pb.TimestampRolloverStream,e.adtsStream=new vb,e.h264Stream=new Jb,e.captionStream=new pb.CaptionStream,e.coalesceStream=new Fb(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||((c=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(b=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime;b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new Cb(b,a),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Db(c,a),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(d){var e=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d),c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,Ra(c),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),b&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,Ra(b),e.captionStream.reset()),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.push=function(a){if(e){var b=Kb(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new na;var Mb={Transmuxer:Eb,VideoSegmentStream:Cb,AudioSegmentStream:Db,AUDIO_PROPERTIES:Hb,VIDEO_PROPERTIES:Ib,generateSegmentTimingInfo:s},Nb={Adts:vb,h264:yb},Ob=Ga;t.prototype=new na;var Pb=t;u.prototype=new na;var Qb=u,Rb=zb;x.prototype=new na;var Sb=x,Tb=function(a){return a>>>0},Ub=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},Vb=Tb,Wb=function a(b,c){var d,e,f,g,h,i=[];if(!c.length)return null;for(d=0;d<b.byteLength;)e=Vb(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]),f=Ub(b.subarray(d+4,d+8)),g=1<e?d+e:b.byteLength,f===c[0]&&(1===c.length?i.push(b.subarray(d+8,g)):(h=a(b.subarray(d+8,g),c.slice(1))).length&&(i=i.concat(h))),d=g;return i},Xb=Tb,Yb=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:Xb(a[4]<<24|a[5]<<16|a[6]<<8|a[7])};return 1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=Xb(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),b},Zb=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},$b=function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:Zb(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=Zb(a.subarray(l,l+4)),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},_b=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},ac=Xa,bc=cb.CaptionStream,cc=function(){var a,b,c,d,e,f,g=!1;this.isInitialized=function(){return g},this.init=function(b){a=new bc,g=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0})},this.isNewInit=function(a,b){return!(a&&0===a.length||b&&"object"==typeof b&&0===Object.keys(b).length||c===a[0]&&d===b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized())return null;if(!f||!g)return null;if(this.isNewInit(f,g))c=f[0],d=g[c];else if(null===c||!d)return b.push(a),null;for(;0<b.length;){var i=b.shift();this.parse(i,f,g)}return null!==(h=function(a,b,c){return null===b?null:{seiNals:z(a,b)[b],timescale:c}}(a,c,d))&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),e):null},this.pushNals=function(b){return this.isInitialized()&&b&&0!==b.length?void b.forEach(function(b){a.push(b)}):null},this.flushStream=function(){return this.isInitialized()?void(f?a.partialFlush():a.flush()):null},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?void a.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],d=c=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},dc=function(){function a(a,b){this.options=b||{},this.self=a,this.init()}var b=a.prototype;return b.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new Sb(this.options):new Mb.Transmuxer(this.options),this.options.handlePartialData?function(a,b){b.on("data",function(b){var c={data:b.data.track.initSegment.buffer,byteOffset:b.data.track.initSegment.byteOffset,byteLength:b.data.track.initSegment.byteLength},d={boxes:{data:b.data.boxes.buffer,byteOffset:b.data.boxes.byteOffset,byteLength:b.data.boxes.byteLength},initSegment:c,type:b.type,sequence:b.data.sequence};"undefined"!=typeof b.data.videoFrameDts&&(d.videoFrameDtsTime=Ia(b.data.videoFrameDts)),"undefined"!=typeof b.data.videoFramePts&&(d.videoFramePtsTime=Ia(b.data.videoFramePts)),a.postMessage({action:"data",segment:d},[d.boxes.data,d.initSegment.data])}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("done",function(b){a.postMessage({action:"done",type:A(b)})}),b.on("partialdone",function(b){a.postMessage({action:"partialdone",type:A(b)})}),b.on("endedsegment",function(b){a.postMessage({action:"endedSegment",type:A(b)})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){if(null!==b.start){var c={start:Ia(b.start)};b.end&&(c.end=Ia(b.end)),a.postMessage({action:"audioTimingInfo",audioTimingInfo:c})}else a.postMessage({action:"audioTimingInfo",audioTimingInfo:b})}),b.on("videoTimingInfo",function(b){var c={start:Ia(b.start)};b.end&&(c.end=Ia(b.end)),a.postMessage({action:"videoTimingInfo",videoTimingInfo:c})})}(this.self,this.transmuxer):function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};var d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){var c={start:{decode:Ia(b.start.dts),presentation:Ia(b.start.pts)},end:{decode:Ia(b.end.dts),presentation:Ia(b.end.pts)},baseMediaDecodeTime:Ia(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=Ia(b.prependedContentDuration)),a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:c})}),b.on("audioSegmentTimingInfo",function(b){var c={start:{decode:Ia(b.start.dts),presentation:Ia(b.start.pts)},end:{decode:Ia(b.end.dts),presentation:Ia(b.end.pts)},baseMediaDecodeTime:Ia(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=Ia(b.prependedContentDuration)),a.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:c})}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ia(b.start),end:Ia(b.end)}})}),b.on("videoTimingInfo",function(b){a.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ia(b.start),end:Ia(b.end)}})})}(this.self,this.transmuxer)},b.pushMp4Captions=function(a){this.captionParser||(this.captionParser=new cc,this.captionParser.init());var b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.captionParser.parse(b,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],data:b.buffer},[b.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ha(b)))},b.setAudioAppendStart=function(a){this.transmuxer.setAudioAppendStart(Math.ceil(Ha(a.appendStart)))},b.setRemux=function(a){this.transmuxer.setRemux(a.remux)},b.flush=function(a){this.transmuxer.flush(),c.postMessage({action:"done",type:"transmuxed"})},b.partialFlush=function(a){this.transmuxer.partialFlush(),c.postMessage({action:"partialdone",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),c.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())},a}();new function(a){a.onmessage=function(b){"init"===b.data.action&&b.data.options?this.messageHandlers=new dc(a,b.data.options):(this.messageHandlers||(this.messageHandlers=new dc(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action]&&this.messageHandlers[b.data.action](b.data))}}(c)}()}),rl=$d("PlaylistSelector"),sl=function(a){function b(b,c){var d;if(d=a.call(this)||this,!b)throw new TypeError("Initialization settings are required");if("function"!=typeof b.currentTime)throw new TypeError("No currentTime getter specified");if(!b.mediaSource)throw new TypeError("No MediaSource specified");return d.bandwidth=b.bandwidth,d.throughput={rate:0,count:0},d.roundTrip=NaN,d.resetStats_(),d.mediaIndex=null,d.hasPlayed_=b.hasPlayed,d.currentTime_=b.currentTime,d.seekable_=b.seekable,d.seeking_=b.seeking,d.duration_=b.duration,d.mediaSource_=b.mediaSource,d.vhs_=b.vhs,d.loaderType_=b.loaderType,d.currentMediaInfo_=void 0,d.startingMediaInfo_=void 0,d.segmentMetadataTrack_=b.segmentMetadataTrack,d.goalBufferLength_=b.goalBufferLength,d.sourceType_=b.sourceType,d.sourceUpdater_=b.sourceUpdater,d.inbandTextTracks_=b.inbandTextTracks,d.state_="INIT",d.handlePartialData_=b.handlePartialData,d.timelineChangeController_=b.timelineChangeController,d.shouldSaveSegmentTimingInfo_=!0,d.checkBufferTimeout_=null,d.error_=void 0,d.currentTimeline_=-1,d.pendingSegment_=null,d.xhrOptions_=null,d.pendingSegments_=[],d.audioDisabled_=!1,d.isPendingTimestampOffset_=!1,d.gopBuffer_=[],d.timeMapping_=0,d.safeAppend_=11<=rb.browser.IE_VERSION,d.appendInitSegment_={audio:!0,video:!0},d.playlistOfLastInitSegment_={audio:null,video:null},d.callQueue_=[],d.loadQueue_=[],d.metadataQueue_={id3:[],caption:[]},d.activeInitSegmentId_=null,d.initSegments_={},d.cacheEncryptionKeys_=b.cacheEncryptionKeys,d.keyCache_={},d.decrypter_=b.decrypter,d.syncController_=b.syncController,d.syncPoint_={segmentIndex:0,time:0},d.transmuxer_=d.createTransmuxer_(),d.triggerSyncInfoUpdate_=function(){return d.trigger("syncinfoupdate")},d.syncController_.on("syncinfoupdate",d.triggerSyncInfoUpdate_),d.mediaSource_.addEventListener("sourceopen",function(){d.isEndOfStream_()||(d.ended_=!1)}),d.fetchAtBuffer_=!1,d.logger_=$d("SegmentLoader["+d.loaderType_+"]"),Object.defineProperty(Ki(d),"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a,this.trigger("statechange"))}}),d.sourceUpdater_.on("ready",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"main"===d.loaderType_&&d.timelineChangeController_.on("pendingtimelinechange",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"audio"===d.loaderType_&&d.timelineChangeController_.on("timelinechange",function(){d.hasEnoughInfoToLoad_()&&d.processLoadQueue_(),d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),d}Li(b,a);var c=b.prototype;return c.createTransmuxer_=function(){var a=new ql;return a.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),a},c.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},c.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),bl()),this.resetStats_(),this.checkBufferTimeout_&&Oi.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},c.setAudio=function(a){this.audioDisabled_=!a,a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},c.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},c.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},c.checkForAbort_=function(a){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==a:(this.state="READY",!0)},c.error=function(a){return"undefined"!=typeof a&&(this.logger_("error occurred:",a),this.error_=a),this.pendingSegment_=null,this.error_},c.endOfStream=function(){this.ended_=!0,this.transmuxer_&&al(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},c.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return rb.createTimeRanges();if("main"===this.loaderType_){var a=this.startingMediaInfo_,b=a.hasAudio,c=a.hasVideo,d=a.isMuxed;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Cd(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales}),d||a},c.segmentKey=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Dd(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});var e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e},c.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},c.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.playlist=function(a,b){if(void 0===b&&(b={}),a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0});var e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_("playlist update ["+e+" => "+(a.id||a.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri)return null===this.mediaIndex&&!this.handlePartialData_||this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var f=a.mediaSequence-c.mediaSequence;this.logger_("live window shift ["+f+"]"),null!==this.mediaIndex&&(this.mediaIndex-=f),d&&(d.mediaIndex-=f,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,a)}},c.pause=function(){this.checkBufferTimeout_&&(Oi.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},c.paused=function(){return null===this.checkBufferTimeout_},c.resetEverything=function(a){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,a),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},c.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},c.resyncLoader=function(){this.transmuxer_&&al(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},c.remove=function(a,b,c){if(void 0===c&&(c=function(){}),b===1/0&&(b=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var d=1,e=function(){0===--d&&c()};for(var f in this.audioDisabled_||(d++,this.sourceUpdater_.removeAudio(a,b,e)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(a,b,c,d){
for(var e=Math.ceil((b-d)*kk),f=Math.ceil((c-d)*kk),g=a.slice(),h=a.length;h--&&!(a[h].pts<=f););if(-1===h)return g;for(var i=h+1;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g}(this.gopBuffer_,a,b,this.timeMapping_),d++,this.sourceUpdater_.removeVideo(a,b,e)),this.inbandTextTracks_)ge(a,b,this.inbandTextTracks_[f]);ge(a,b,this.segmentMetadataTrack_),e()}},c.monitorBuffer_=function(){this.checkBufferTimeout_&&Oi.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Oi.setTimeout(this.monitorBufferTick_.bind(this),1)},c.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Oi.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Oi.setTimeout(this.monitorBufferTick_.bind(this),500)},c.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.buffered_(),b=this.checkBuffer_(a,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);b&&(b.timestampOffset=je({segmentTimeline:b.timeline,currentTimeline:this.currentTimeline_,startOfSegment:b.startOfSegment,buffered:a,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof b.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:b.timeline}),this.loadSegment_(b))}},c.isEndOfStream_=function(a,b){if(void 0===a&&(a=this.mediaIndex),void 0===b&&(b=this.playlist_),!b||!this.mediaSource_)return!1;var c=a+1===b.segments.length;return b.endList&&"open"===this.mediaSource_.readyState&&c},c.checkBuffer_=function(a,b,c,d,e,f){var g=0;a.length&&(g=a.end(a.length-1));var h=Math.max(0,g-e);if(!b.segments.length)return null;if(h>=this.goalBufferLength_())return null;if(!d&&1<=h)return null;var i,j=null,k=!1;if(null===f)j=this.getSyncSegmentCandidate_(b),k=!0;else if(null!==c){var l=b.segments[c];i=l&&l.end?l.end:g,j=c+1}else if(this.fetchAtBuffer_){var m=Tk.getMediaInfoForTime(b,g,f.segmentIndex,f.time);j=m.mediaIndex,i=m.startTime}else{var n=Tk.getMediaInfoForTime(b,e,f.segmentIndex,f.time);j=n.mediaIndex,i=n.startTime}var o=this.generateSegmentInfo_(b,j,i,k);return!o||this.mediaSource_&&this.playlist_&&o.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+o.uri,{segmentInfo:o,playlist:b,currentMediaIndex:c,nextMediaIndex:j,startOfSegment:i,isSyncRequest:k}),o)},c.getSyncSegmentCandidate_=function(a){var b=this;if(-1===this.currentTimeline_)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)},c.generateSegmentInfo_=function(a,b,c,d){if(b<0||b>=a.segments.length)return null;var e,f,g=a.segments[b],h=this.sourceUpdater_.audioBuffered(),i=this.sourceUpdater_.videoBuffered();return h.length&&(e=h.end(h.length-1)-this.sourceUpdater_.audioTimestampOffset()),i.length&&(f=function(a,b,c){if("undefined"==typeof b||null===b||!a.length)return[];var d,e=Math.ceil((b-c+3)*kk);for(d=0;d<a.length&&!(a[d].pts>e);d++);return a.slice(d)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:g.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:g.duration,segment:g,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:e,gopsToAlignWith:f}},c.earlyAbortWhenNeeded_=function(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)){var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=Tk.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=function(a,b,c){return void 0===c&&(c=1),((a.length?a.end(a.length-1):0)-b)/c}(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;if(!(e<=f)){var g=function(a){var b=a.master,c=a.currentTime,d=a.bandwidth,e=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,i=a.syncController,j=b.playlists.filter(function(a){return!Tk.isIncompatible(a)}),k=j.filter(Tk.isEnabled);k.length||(k=j.filter(function(a){return!Tk.isDisabled(a)}));var l=k.filter(Tk.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var b=i.getSyncPoint(a,e,h,c)?1:2;return{playlist:a,rebufferingImpact:Tk.estimateSegmentRequestTime(f,d,a)*b-g}}),m=l.filter(function(a){return a.rebufferingImpact<=0});return be(m,function(a,b){return ce(b.playlist,a.playlist)}),m.length?m[0]:(be(l,function(a,b){return a.rebufferingImpact-b.rebufferingImpact}),l[0]||null)}({master:this.vhs_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(g){var h=e-f-g.rebufferingImpact,i=.5;f<=Rk&&(i=1),!g.playlist||g.playlist.uri===this.playlist_.uri||h<i||(this.bandwidth=g.playlist.attributes.BANDWIDTH*Zk.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},c.handleAbort_=function(){this.mediaRequestsAborted+=1},c.handleProgress_=function(a,b){this.earlyAbortWhenNeeded_(b.stats),this.checkForAbort_(b.requestId)||this.trigger("progress")},c.handleTrackInfo_=function(a,b){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;var c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(f!==d[e])return!1;if(a[f]!==b[f])return!1}return!0}(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=b,this.currentMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},c.handleTimingInfo_=function(a,b,c,d){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var e=this.pendingSegment_,f=ie(b);e[f]=e[f]||{},e[f][c]=d,this.logger_("timinginfo: "+b+" - "+c+" - "+d),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},c.handleCaptions_=function(a,b){var c=this;if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(0!==b.length)if(this.pendingSegment_.hasAppendedData_){var d=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),e={};b.forEach(function(a){e[a.stream]=e[a.stream]||{startTime:1/0,captions:[],endTime:0};var b=e[a.stream];b.startTime=Math.min(b.startTime,a.startTime+d),b.endTime=Math.max(b.endTime,a.endTime+d),b.captions.push(a)}),Object.keys(e).forEach(function(a){var b=e[a],f=b.startTime,g=b.endTime,h=b.captions,i=c.inbandTextTracks_;c.logger_("adding cues from "+f+" -> "+g+" for "+a),function(a,b,c){if(!a[c]){b.trigger({type:"usage",name:"vhs-608"}),b.trigger({type:"usage",name:"hls-608"});var d=b.textTracks().getTrackById(c);a[c]=d||b.addRemoteTextTrack({kind:"captions",id:c,label:c},!1).track}}(i,c.vhs_.tech_,a),ge(f,g,i[a]),function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=Oi.WebKitDataCue||Oi.VTTCue;c.forEach(function(a){var c=a.stream;b[c].addCue(new e(a.startTime+d,a.endTime+d,a.text))})}}({captionArray:h,inbandTextTracks:i,timestampOffset:d})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b));else this.logger_("SegmentLoader received no captions from a caption event")},c.handleId3_=function(a,b,c){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(this.pendingSegment_.hasAppendedData_){var d=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(a,b,c){a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=b)}(this.inbandTextTracks_,c,this.vhs_.tech_),fe({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:d,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c))},c.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(a){return a()}),this.metadataQueue_.caption.forEach(function(a){return a()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},c.processCallQueue_=function(){var a=this.callQueue_;this.callQueue_=[],a.forEach(function(a){return a()})},c.processLoadQueue_=function(){var a=this.loadQueue_;this.loadQueue_=[],a.forEach(function(a){return a()})},c.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var a=this.pendingSegment_;return!(!a||this.currentMediaInfo_&&ke({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var a=this.pendingSegment_;if(!a||!a.trackInfo)return!1;if(!this.handlePartialData_){var b=this.currentMediaInfo_,c=b.hasAudio,d=b.hasVideo,e=b.isMuxed;if(d&&!a.videoTimingInfo)return!1;if(c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo)return!1}return!ke({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},c.handleData_=function(a,b){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var c=this.pendingSegment_;if(this.setTimeMapping_(c.timeline),this.updateMediaSecondsLoaded_(c.segment),"closed"!==this.mediaSource_.readyState){if(a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map),a.key&&this.segmentKey(a.key,!0),c.isFmp4=a.isFmp4,c.timingInfo=c.timingInfo||{},c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[ie(b.type)].start;else{var d,e="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;e&&(d=this.handlePartialData_?b.videoFramePtsTime:c.videoTimingInfo.start),c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:e,firstVideoFrameTimeForData:d,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}this.updateAppendInitSegmentStatus(c,b.type),this.updateSourceBufferTimestampOffset_(c),c.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(c,b)}}else this.callQueue_.push(this.handleData_.bind(this,a,b))},c.updateAppendInitSegmentStatus=function(a,b){"main"!==this.loaderType_||"number"!=typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)},c.getInitSegmentAndUpdateState_=function(a){var b=a.type,c=a.initSegment,d=a.map,e=a.playlist;if(d){var f=Cd(d);if(this.activeInitSegmentId_===f)return null;c=this.initSegmentForMap(d,!0).bytes,this.activeInitSegmentId_=f}return c&&this.appendInitSegment_[b]?(this.playlistOfLastInitSegment_[b]=e,this.appendInitSegment_[b]=!!d,this.activeInitSegmentId_=null,c):null},c.appendToSourceBuffer_=function(a){var b=this,c=a.segmentInfo,d=a.type,e=a.initSegment,f=a.data,g=[f],h=f.byteLength;e&&(g.unshift(e),h+=e.byteLength);var i=function(a){var b,c=0;return a.bytes&&(b=new Uint8Array(a.bytes),a.segments.forEach(function(a){b.set(a,c),c+=a.byteLength})),b}({bytes:h,segments:g});this.sourceUpdater_.appendBuffer({segmentInfo:c,type:d,bytes:i},function(a){a&&(b.error(d+" append of "+i.length+"b failed for segment #"+c.mediaIndex+" in playlist "+c.playlist.id),b.trigger("appenderror"))})},c.handleSegmentTimingInfo_=function(a,b,c){if(this.pendingSegment_&&b===this.pendingSegment_.requestId){var d=this.pendingSegment_.segment,e=a+"TimingInfo";d[e]||(d[e]={}),d[e].transmuxerPrependedSeconds=c.prependedContentDuration||0,d[e].transmuxedPresentationStart=c.start.presentation,d[e].transmuxedDecodeStart=c.start.decode,d[e].transmuxedPresentationEnd=c.end.presentation,d[e].transmuxedDecodeEnd=c.end.decode,d[e].baseMediaDecodeTime=c.baseMediaDecodeTime}},c.appendData_=function(a,b){var c=b.type,d=b.data;if(d&&d.byteLength&&("audio"!==c||!this.audioDisabled_)){var e=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null});this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:e,data:d})}},c.loadSegment_=function(a){var b=this;this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),"number"==typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(a):this.loadQueue_.push(function(){var c=b.buffered_();"number"==typeof a.timestampOffset&&(a.timestampOffset=je({segmentTimeline:a.timeline,currentTimeline:b.currentTimeline_,startOfSegment:a.startOfSegment,buffered:c,overrideCheck:!0})),delete a.audioAppendStart;var d=b.sourceUpdater_.audioBuffered();d.length&&(a.audioAppendStart=d.end(d.length-1)-b.sourceUpdater_.audioTimestampOffset()),b.updateTransmuxerAndRequestSegment_(a)})},c.updateTransmuxerAndRequestSegment_=function(a){this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));var b=this.createSimplifiedSegmentObj_(a);a.abortRequests=Vd({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:b,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},c.trimBackBuffer_=function(a){var b=function(a,b,c){var d=b-Zk.BACK_BUFFER_LENGTH;a.length&&(d=Math.max(d,a.start(0)));var e=b-c;return Math.min(e,d)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<b&&this.remove(0,b)},c.createSimplifiedSegmentObj_=function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith},d=a.playlist.segments[a.mediaIndex-1];if(d&&d.timeline===b.timeline&&(d.videoTimingInfo?c.baseStartTime=d.videoTimingInfo.transmuxedDecodeEnd:d.audioTimingInfo&&(c.baseStartTime=d.audioTimingInfo.transmuxedDecodeEnd)),b.key){var e=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);c.key=this.segmentKey(b.key),c.key.iv=e}return b.map&&(c.map=this.initSegmentForMap(b.map)),c},c.saveTransferStats_=function(a){this.mediaRequests+=1,a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)},c.saveBandwidthRelatedStats_=function(a,b){this.pendingSegment_.byteLength=b.bytesReceived,a<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+a+" is less than the min to record "+1/60):(this.bandwidth=b.bandwidth,this.roundTrip=b.roundTripTime)},c.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},c.segmentRequestFinished_=function(a,b,c){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));else if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId){if(a){if(this.pendingSegment_=null,this.state="READY",a.code===fl)return;return this.pause(),a.code===el?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error"))}var d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats),d.endOfAllRequests=b.endOfAllRequests,c.gopInfo&&(this.gopBuffer_=function(a,b,c){if(!b.length)return a;if(c)return b.slice();for(var d=b[0].pts,e=0;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)}(this.gopBuffer_,c.gopInfo,this.safeAppend_)),this.state="APPENDING";var e=this.isEndOfStream_(d.mediaIndex,d.playlist),f=null!==this.mediaIndex,g=d.timeline!==this.currentTimeline_&&0<d.timeline;!d.isFmp4&&(e||f&&g)&&cl(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(d)}},c.setTimeMapping_=function(a){var b=this.syncController_.mappingForTimeline(a);null!==b&&(this.timeMapping_=b)},c.updateMediaSecondsLoaded_=function(a){"number"==typeof a.start&&"number"==typeof a.end?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration},c.shouldUpdateTransmuxerTimestampOffset_=function(a){return null!==a&&("main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset())},c.trueSegmentStart_=function(a){var b=a.currentStart,c=a.playlist,d=a.mediaIndex,e=a.firstVideoFrameTimeForData,f=a.currentVideoTimestampOffset,g=a.useVideoTimingInfo,h=a.videoTimingInfo,i=a.audioTimingInfo;if("undefined"!=typeof b)return b;if(!g)return i.start;var j=c.segments[d-1];return 0!==d&&j&&"undefined"!=typeof j.start&&j.end===e+f?h.start:e},c.waitForAppendsToComplete_=function(a){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var b=this.currentMediaInfo_,c=b.hasAudio,d=b.hasVideo,e=b.isMuxed,f="main"===this.loaderType_&&d,g=!this.audioDisabled_&&c&&!e;return a.waitingOnAppends=0,a.hasAppendedData_?(f&&a.waitingOnAppends++,g&&a.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a)),void 0):(a.timingInfo||"number"!=typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),void this.checkAppendsDone_(a))},c.checkAppendsDone_=function(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())},c.checkForIllegalMediaSwitch=function(a){var b=function(a,b,c){return"main"===a&&b&&c?c.hasAudio||c.hasVideo?b.hasVideo&&!c.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.hasVideo&&c.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,a);return!!b&&(this.error({message:b,blacklistDuration:1/0}),this.trigger("error"),!0)},c.updateSourceBufferTimestampOffset_=function(a){if(null!==a.timestampOffset&&"number"==typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===this.loaderType_){var b=!1;a.timestampOffset-=a.timingInfo.start,a.changedTimestampOffset=!0,a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0),a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0),b&&this.trigger("timestampoffset")}},c.updateTimingInfoEnd_=function(a){a.timingInfo=a.timingInfo||{};var b="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo;b&&(a.timingInfo.end="number"==typeof b.end?b.end:b.start+a.duration)},c.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_;this.updateTimingInfoEnd_(a),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(a){var b=a.segment,c=b.start,d=b.end,e=a.playlist,f=e.mediaSequence,g=e.id,h=e.segments,i=void 0===h?[]:h,j=a.mediaIndex,k=a.timeline;return["appending ["+j+"] of ["+f+", "+(f+i.length)+"] from playlist ["+g+"]","["+c+" => "+d+"] in timeline ["+k+"]"].join(" ")}(a));var b=me(a,this.sourceType_);if(b&&("warn"===b.severity?rb.log.warn(b.message):this.logger_(b.message)),this.recordThroughput_(a),this.pendingSegment_=null,this.state="READY",a.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(a),this.fetchAtBuffer_=!0,this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline})),this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate");var c=a.segment;c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.isEndOfStream_(a.mediaIndex,a.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_())}},c.recordThroughput_=function(a){if(a.duration<1/60)this.logger_("Ignoring segment's throughput because its duration of "+a.duration+" is less than the min to record "+1/60);else{var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8*1e3);this.throughput.rate+=(d-b)/++this.throughput.count}},c.addSegmentMetadataCue_=function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if(he(c)&&he(d)){ge(c,d,this.segmentMetadataTrack_);var e=Oi.WebKitDataCue||Oi.VTTCue,f={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d},g=new e(c,d,JSON.stringify(f));g.value=f,this.segmentMetadataTrack_.addCue(g)}}},b}(rb.EventTarget),tl=["video","audio"],ul=function(a,b){return function(c,d){var e=d[c+"Buffer"];se(d.mediaSource,e)&&(d.logger_("Appending segment "+b.mediaIndex+"'s "+a.length+" bytes to "+c+"Buffer"),e.appendBuffer(a))}},vl=function(a,b){return function(c,d){var e=d[c+"Buffer"];se(d.mediaSource,e)&&(d.logger_("Removing "+a+" to "+b+" from "+c+"Buffer"),e.remove(a,b))}},wl=function(a){return function(b,c){var d=c[b+"Buffer"];se(c.mediaSource,d)&&(c.logger_("Setting "+b+"timestampOffset to "+a),d.timestampOffset=a)}},xl=function(a){return function(b,c){a()}},yl=function(a){return function(b){if("open"===b.mediaSource.readyState){b.logger_("Calling mediaSource endOfStream("+(a||"")+")");try{b.mediaSource.endOfStream(a)}catch(a){rb.log.warn("Failed to call media source endOfStream",a)}}}},zl=function(a){return function(b){b.logger_("Setting mediaSource duration to "+a);try{b.mediaSource.duration=a}catch(a){rb.log.warn("Failed to set media source duration",a)}}},Al=function(){return function(a,b){if("open"===b.mediaSource.readyState){var c=b[a+"Buffer"];if(se(b.mediaSource,c)){b.logger_("calling abort on "+a+"Buffer");try{c.abort()}catch(b){rb.log.warn("Failed to abort on "+a+"Buffer",b)}}}}},Bl=function(a,b){return function(c){var d=oe(a),e=Hk(b);c.logger_("Adding "+a+"Buffer with codec "+b+" to mediaSource");var f=c.mediaSource.addSourceBuffer(e);f.addEventListener("updateend",c["on"+d+"UpdateEnd_"]),f.addEventListener("error",c["on"+d+"Error_"]),c.codecs[a]=b,c[a+"Buffer"]=f}},Cl=function(a){return function(b){var c=b[a+"Buffer"];if(re(a,b),se(b.mediaSource,c)){b.logger_("Removing "+a+"Buffer with codec "+b.codecs[a]+" from mediaSource");try{b.mediaSource.removeSourceBuffer(c)}catch(b){rb.log.warn("Failed to removeSourceBuffer "+a+"Buffer",b)}}}},Dl=function(a){return function(b,c){var d=c[b+"Buffer"],e=Hk(a);se(c.mediaSource,d)&&c.codecs[b]!==a&&(c.logger_("changing "+b+"Buffer codec from "+c.codecs[b]+" to "+a),d.changeType(e),c.codecs[b]=a)}},El=function(a){function b(b){var c;return(c=a.call(this)||this).mediaSource=b,c.sourceopenListener_=function(){return qe("mediaSource",Ki(c))},c.mediaSource.addEventListener("sourceopen",c.sourceopenListener_),c.logger_=$d("SourceUpdater"),c.audioTimestampOffset_=0,c.videoTimestampOffset_=0,c.queue=[],c.queuePending={audio:null,video:null},c.delayedAudioAppendQueue_=[],c.videoAppendQueued_=!1,c.codecs={},c.onVideoUpdateEnd_=ue("video",Ki(c)),c.onAudioUpdateEnd_=ue("audio",Ki(c)),c.onVideoError_=function(a){c.videoError_=a},c.onAudioError_=function(a){c.audioError_=a},c.createdSourceBuffers_=!1,c.initializedEme_=!1,c.triggeredReady_=!1,c}Li(b,a);var c=b.prototype;return c.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},c.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},c.hasInitializedAnyEme=function(){return this.initializedEme_},c.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},c.createSourceBuffers=function(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},c.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},c.addSourceBuffer=function(a,b){te({type:"mediaSource",sourceUpdater:this,action:Bl(a,b),name:"addSourceBuffer"})},c.abort=function(a){te({type:a,sourceUpdater:this,action:Al(a),name:"abort"})},c.removeSourceBuffer=function(a){this.canRemoveSourceBuffer()?te({type:"mediaSource",sourceUpdater:this,action:Cl(a),name:"removeSourceBuffer"}):rb.log.error("removeSourceBuffer is not supported!")},c.canRemoveSourceBuffer=function(){return!rb.browser.IE_VERSION&&!rb.browser.IS_FIREFOX&&Oi.MediaSource&&Oi.MediaSource.prototype&&"function"==typeof Oi.MediaSource.prototype.removeSourceBuffer},b.canChangeType=function(){return Oi.SourceBuffer&&Oi.SourceBuffer.prototype&&"function"==typeof Oi.SourceBuffer.prototype.changeType},c.canChangeType=function(){return this.constructor.canChangeType()},c.changeType=function(a,b){this.canChangeType()?te({type:a,sourceUpdater:this,action:Dl(b),name:"changeType"}):rb.log.error("changeType is not supported!")},c.addOrChangeSourceBuffers=function(a){var b=this;if(!a||"object"!=typeof a||0===Object.keys(a).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(function(c){var d=a[c];return b.hasCreatedSourceBuffers()?void(b.canChangeType()&&b.changeType(c,d)):b.addSourceBuffer(c,d)})},c.appendBuffer=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes;if(this.processedAppend_=!0,"audio"===e&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([a,b]),void this.logger_("delayed audio append of "+f.length+" until video append");if(te({type:e,sourceUpdater:this,action:ul(f,d||{mediaIndex:-1}),doneFn:b,name:"appendBuffer"}),"video"===e){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var g=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(a){c.appendBuffer.apply(c,a)})}},c.audioBuffered=function(){return se(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:rb.createTimeRange()},c.videoBuffered=function(){return se(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:rb.createTimeRange()},c.buffered=function(){var a=se(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=se(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():function(a,b){var c=null,d=null,e=0,f=[],g=[];if(!(a&&a.length&&b&&b.length))return rb.createTimeRange();for(var h=a.length;h--;)f.push({time:a.start(h),type:"start"}),f.push({time:a.end(h),type:"end"});for(h=b.length;h--;)f.push({time:b.start(h),type:"start"}),f.push({time:b.end(h),type:"end"});for(f.sort(function(a,b){return a.time-b.time}),h=0;h<f.length;h++)"start"===f[h].type?2===++e&&(c=f[h].time):"end"===f[h].type&&1===--e&&(d=f[h].time),null!==c&&null!==d&&(g.push([c,d]),d=c=null);return rb.createTimeRanges(g)}(this.audioBuffered(),this.videoBuffered())},c.setDuration=function(a,b){void 0===b&&(b=ne),te({type:"mediaSource",sourceUpdater:this,action:zl(a),name:"duration",doneFn:b})},c.endOfStream=function(a,b){void 0===a&&(a=null),void 0===b&&(b=ne),"string"!=typeof a&&(a=void 0),te({type:"mediaSource",sourceUpdater:this,action:yl(a),name:"endOfStream",doneFn:b})},c.removeAudio=function(a,b,c){void 0===c&&(c=ne),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?te({type:"audio",sourceUpdater:this,action:vl(a,b),doneFn:c,name:"remove"}):c()},c.removeVideo=function(a,b,c){void 0===c&&(c=ne),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?te({type:"video",sourceUpdater:this,action:vl(a,b),doneFn:c,name:"remove"}):c()},c.updating=function(){return!(!pe("audio",this)&&!pe("video",this))},c.audioTimestampOffset=function(a){return"undefined"!=typeof a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(te({type:"audio",sourceUpdater:this,action:wl(a),name:"timestampOffset"}),this.audioTimestampOffset_=a),this.audioTimestampOffset_},c.videoTimestampOffset=function(a){return"undefined"!=typeof a&&this.videoBuffer&&this.videoTimestampOffset!==a&&(te({type:"video",sourceUpdater:this,action:wl(a),name:"timestampOffset"}),this.videoTimestampOffset_=a),this.videoTimestampOffset_},c.audioQueueCallback=function(a){this.audioBuffer&&te({type:"audio",sourceUpdater:this,action:xl(a),name:"callback"})},c.videoQueueCallback=function(a){this.videoBuffer&&te({type:"video",sourceUpdater:this,action:xl(a),name:"callback"})},c.dispose=function(){var a=this;this.trigger("dispose"),tl.forEach(function(b){a.abort(b),a.canRemoveSourceBuffer()?a.removeSourceBuffer(b):a[b+"QueueCallback"](function(){return re(b,a)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},b}(rb.EventTarget),Fl=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),Gl=function(a){function b(b,c){var d;return void 0===c&&(c={}),(d=a.call(this,b,c)||this).handlePartialData_=!1,d.mediaSource_=null,d.subtitlesTrack_=null,d.loaderType_="subtitle",d.featuresNativeTextTracks_=b.featuresNativeTextTracks,d.shouldSaveSegmentTimingInfo_=!1,d}Li(b,a);var c=b.prototype;return c.createTransmuxer_=function(){return null},c.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return rb.createTimeRanges();var a=this.subtitlesTrack_.cues,b=a[0].startTime,c=a[a.length-1].startTime;return rb.createTimeRanges([[b,c]])},c.initSegmentForMap=function(a,b){
if(void 0===b&&(b=!1),!a)return null;var c=Cd(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){var e=Fl.byteLength+a.bytes.byteLength,f=new Uint8Array(e);f.set(a.bytes),f.set(Fl,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:f}}return d||a},c.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.track=function(a){return"undefined"==typeof a||(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},c.remove=function(a,b){ge(a,b,this.subtitlesTrack_)},c.fillBuffer_=function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b)){if(null===this.syncController_.timestampOffsetForTimeline(b.timeline))return this.syncController_.one("timestampoffset",function(){a.state="READY",a.paused()||a.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(b)}},c.skipEmptySegments_=function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a},c.stopForError=function(a){this.error(a),this.state="READY",this.pause(),this.trigger("error")},c.segmentRequestFinished_=function(a,b,c){var d=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(b.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(a)return a.code===el&&this.handleTimeout_(),a.code===fl?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(a);var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,b.stats),this.state="APPENDING",this.trigger("appending");var f=e.segment;if(f.map&&(f.map.bytes=b.map.bytes),e.bytes=b.bytes,"function"!=typeof Oi.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var g,h=function(){d.subtitlesTrack_.tech_.off("vttjsloaded",g),d.stopForError({message:"Error loading vtt.js"})};return g=function(){d.subtitlesTrack_.tech_.off("vttjserror",h),d.segmentRequestFinished_(a,b,c)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",g),void this.subtitlesTrack_.tech_.one("vttjserror",h)}f.requested=!0;try{this.parseVTTCues_(e)}catch(a){return void this.stopForError({message:a.message})}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.cues.length?e.timingInfo={start:e.cues[0].startTime,end:e.cues[e.cues.length-1].endTime}:e.timingInfo={start:e.startOfSegment,end:e.startOfSegment+e.duration},e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,e.cues.forEach(function(a){d.subtitlesTrack_.addCue(d.featuresNativeTextTracks_?new Oi.VTTCue(a.startTime,a.endTime,a.text):a)}),function(a){var b=a.cues;if(b)for(var c=0;c<b.length;c++){for(var d=[],e=0,f=0;f<b.length;f++)b[c].startTime===b[f].startTime&&b[c].endTime===b[f].endTime&&b[c].text===b[f].text&&1<++e&&d.push(b[f]);d.length&&d.forEach(function(b){return a.removeCue(b)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},c.handleData_=function(){},c.updateTimingInfoEnd_=function(){},c.parseVTTCues_=function(a){var b,c=!1;"function"==typeof Oi.TextDecoder?b=new Oi.TextDecoder("utf8"):(b=Oi.WebVTT.StringDecoder(),c=!0);var d=new Oi.WebVTT.Parser(Oi,Oi.vttjs,b);if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=function(b){a.timestampmap=b},d.onparsingerror=function(a){rb.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){var e=a.segment.map.bytes;c&&(e=ve(e)),d.parse(e)}var f=a.bytes;c&&(f=ve(f)),d.parse(f),d.flush()},c.updateTimeMapping_=function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,f=e.MPEGTS/kk-e.LOCAL+b.mapping;if(a.cues.forEach(function(a){a.startTime+=f,a.endTime+=f}),!c.syncInfo){var g=a.cues[0].startTime,h=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(g,h-d.duration)}}}else d.empty=!0},b}(sl),Hl=[{name:"VOD",run:function(a,b,c,d,e){return c===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!a.datetimeToDisplayTime)return null;var f=b.segments||[],g=null,h=null;e=e||0;for(var i=0;i<f.length;i++){var j=f[i];if(j.dateTimeObject){var k=j.dateTimeObject.getTime()/1e3+a.datetimeToDisplayTime,l=Math.abs(e-k);if(null!==h&&(0===l||h<l))break;h=l,g={time:k,segmentIndex:i}}}return g}},{name:"Segment",run:function(a,b,c,d,e){var f=b.segments||[],g=null,h=null;e=e||0;for(var i=0;i<f.length;i++){var j=f[i];if(j.timeline===d&&"undefined"!=typeof j.start){var k=Math.abs(e-j.start);if(null!==h&&h<k)break;(!g||null===h||k<=h)&&(h=k,g={time:j.start,segmentIndex:i})}}return g}},{name:"Discontinuity",run:function(a,b,c,d,e){var f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length)for(var g=null,h=0;h<b.discontinuityStarts.length;h++){var i=b.discontinuityStarts[h],j=b.discontinuitySequence+h+1,k=a.discontinuities[j];if(k){var l=Math.abs(e-k.time);if(null!==g&&g<l)break;(!f||null===g||l<=g)&&(g=l,f={time:k.time,segmentIndex:i})}}return f}},{name:"Playlist",run:function(a,b,c,d,e){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}],Il=function(a){function b(b){var c;return(c=a.call(this)||this).timelines=[],c.discontinuities=[],c.datetimeToDisplayTime=null,c.logger_=$d("SyncController"),c}Li(b,a);var c=b.prototype;return c.getSyncPoint=function(a,b,c,d){var e=this.runStrategies_(a,b,c,d);return e.length?this.selectSyncPoint_(e,{key:"time",value:d}):null},c.getExpiredTime=function(a,b){if(!a||!a.segments)return null;var c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;var d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return 0<d.segmentIndex&&(d.time*=-1),Math.abs(d.time+od(a,d.segmentIndex,0))},c.runStrategies_=function(a,b,c,d){for(var e=[],f=0;f<Hl.length;f++){var g=Hl[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e},c.selectSyncPoint_=function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy ["+e+"]: [time:"+c.time+", segmentIndex:"+c.segmentIndex+"]"),c},c.saveExpiredSegmentInfo=function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!=typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start},this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+", mediaSequence: "+b.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},c.setDateTimeMapping=function(a){if(!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject){var b=a.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-b}},c.saveSegmentTimingInfo=function(a){var b=a.segmentInfo,c=a.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(b,b.timingInfo,c)&&(this.saveDiscontinuitySyncInfo_(b),b.playlist.syncInfo||(b.playlist.syncInfo={mediaSequence:b.playlist.mediaSequence+b.mediaIndex,time:b.segment.start}))},c.timestampOffsetForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].time},c.mappingForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].mapping},c.calculateSegmentTimeMapping_=function(a,b,c){var d=a.segment,e=this.timelines[a.timeline];if(null!==a.timestampOffset)e={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=e,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": [time: "+e.time+"] [mapping: "+e.mapping+"]")),d.start=a.startOfSegment,d.end=b.end+e.mapping;else{if(!e)return!1;d.start=b.start+e.mapping,d.end=b.end+e.mapping}return!0},c.saveDiscontinuitySyncInfo_=function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){var i=void 0;i=g<0?c.start-od(b,a.mediaIndex,e):c.end+od(b,a.mediaIndex+1,e),this.discontinuities[f]={time:i,accuracy:h}}}},c.dispose=function(){this.trigger("dispose"),this.off()},b}(rb.EventTarget),Jl=function(a){function b(){var b;return(b=a.call(this)||this).pendingTimelineChanges_={},b.lastTimelineChanges_={},b}Li(b,a);var c=b.prototype;return c.clearPendingTimelineChange=function(a){this.pendingTimelineChanges_[a]=null,this.trigger("pendingtimelinechange")},c.pendingTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.pendingTimelineChanges_[b]={type:b,from:c,to:d},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[b]},c.lastTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.lastTimelineChanges_[b]={type:b,from:c,to:d},delete this.pendingTimelineChanges_[b],this.trigger("timelinechange")),this.lastTimelineChanges_[b]},c.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},b}(rb.EventTarget),Kl=new Wd("./decrypter-worker.worker.js",function(a,b){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function d(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24}var e,f,g,h,i,j,k,l=this;e=function(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a},f=function(a,b){a.prototype=Object.create(b.prototype),(a.prototype.constructor=a).__proto__=b},g=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),-1<c},b.trigger=function(a,b){var c=this.listeners[a];if(c)if(2===arguments.length)for(var d=c.length,e=0;e<d;++e)c[e].call(this,b);else for(var f=Array.prototype.slice.call(arguments,1),g=c.length,h=0;h<g;++h)c[h].apply(this,f)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),h=null,i=function(){function a(a){var b,c,d;h=h||function(){var a,b,c,d,e,f,g,h,i=[[[],[],[],[],[]],[[],[],[],[],[]]],j=i[0],k=i[1],l=j[4],m=k[4],n=[],o=[];for(a=0;a<256;a++)o[(n[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!l[b];b^=d||1,c=o[c]||1)for(f=(f=c^c<<1^c<<2^c<<3^c<<4)>>8^255&f^99,h=16843009*n[e=n[d=n[m[l[b]=f]=b]]]^65537*e^257*d^16843008*b,g=257*n[f]^16843008*f,a=0;a<4;a++)j[a][b]=g=g<<24^g>>>8,k[a][f]=h=h<<24^h>>>8;for(a=0;a<5;a++)j[a]=j[a].slice(0),k[a]=k[a].slice(0);return i}(),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var e=this._tables[0][4],f=this._tables[1],g=a.length,i=1;if(4!==g&&6!==g&&8!==g)throw new Error("Invalid aes key size");var j=a.slice(0),k=[];for(this._key=[j,k],b=g;b<4*g+28;b++)d=j[b-1],(b%g==0||8===g&&b%g==4)&&(d=e[d>>>24]<<24^e[d>>16&255]<<16^e[d>>8&255]<<8^e[255&d],b%g==0&&(d=d<<8^d>>>24^i<<24,i=i<<1^283*(i>>7))),j[b]=j[b-g]^d;for(c=0;b;c++,b--)d=j[3&c?b:b-4],k[c]=b<=4||c<4?d:f[0][e[d>>>24]]^f[1][e[d>>16&255]]^f[2][e[d>>8&255]]^f[3][e[255&d]]}return a.prototype.decrypt=function(a,b,c,d,e,f){var g,h,i,j,k=this._key[1],l=a^k[0],m=d^k[1],n=c^k[2],o=b^k[3],p=k.length/4-2,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(j=0;j<p;j++)g=s[l>>>24]^t[m>>16&255]^u[n>>8&255]^v[255&o]^k[q],h=s[m>>>24]^t[n>>16&255]^u[o>>8&255]^v[255&l]^k[q+1],i=s[n>>>24]^t[o>>16&255]^u[l>>8&255]^v[255&m]^k[q+2],o=s[o>>>24]^t[l>>16&255]^u[m>>8&255]^v[255&n]^k[q+3],q+=4,l=g,m=h,n=i;for(j=0;j<4;j++)e[(3&-j)+f]=w[l>>>24]<<24^w[m>>16&255]<<16^w[n>>8&255]<<8^w[255&o]^k[q++],g=l,l=m,m=n,n=o,o=g},a}(),j=function(a){function b(){var b;return(b=a.call(this,g)||this).jobs=[],b.delay=1,b.timeout_=null,b}f(b,a);var c=b.prototype;return c.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},b}(g),k=function(){function a(b,c,e,f){var g=a.STEP,h=new Int32Array(b.buffer),i=new Uint8Array(b.byteLength),k=0;for(this.asyncStream_=new j,this.asyncStream_.push(this.decryptChunk_(h.subarray(k,k+g),c,e,i)),k=g;k<h.length;k+=g)e=new Uint32Array([d(h[k-4]),d(h[k-3]),d(h[k-2]),d(h[k-1])]),this.asyncStream_.push(this.decryptChunk_(h.subarray(k,k+g),c,e,i));this.asyncStream_.push(function(){f(null,function(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}(i))})}return a.prototype.decryptChunk_=function(a,b,c,e){return function(){var f=function(a,b,c){var e,f,g,h,j,k,l,m,n,o=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),p=new i(Array.prototype.slice.call(b)),q=new Uint8Array(a.byteLength),r=new Int32Array(q.buffer);for(e=c[0],f=c[1],g=c[2],h=c[3],n=0;n<o.length;n+=4)j=d(o[n]),k=d(o[n+1]),l=d(o[n+2]),m=d(o[n+3]),p.decrypt(j,k,l,m,r,n),r[n]=d(r[n]^e),r[n+1]=d(r[n+1]^f),r[n+2]=d(r[n+2]^g),r[n+3]=d(r[n+3]^h),e=j,f=k,g=l,h=m;return q}(a,b,c);e.set(f,a.byteOffset)}},e(a,null,[{key:"STEP",get:function(){return 32e3}}]),a}(),new function(a){a.onmessage=function(b){var c=b.data,d=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength),e=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),f=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new k(d,e,f,function(b,d){a.postMessage(function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b}({source:c.source,decrypted:d}),[d.buffer])})}}(l)}),Ll={AUDIO:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;xe(c,d);var f=d.activeTrack(),g=d.activeGroup(),h=(g.filter(function(a){return a.default})[0]||g[0]).id,i=d.tracks[h];if(f!==i){for(var j in rb.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),d.tracks)d.tracks[j].enabled=d.tracks[j]===i;d.onTrackChanged()}else e({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];rb.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),xe(c,d);var e=d.activeTrack();e&&(e.mode="disabled"),d.onTrackChanged()}}},Ml={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Ll[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Ll[a](a,c))}},Nl={AUDIO:function(a,b){function c(c){function f(f){var j=i[a][c][f];!h.filter(function(a){return a.resolvedUri!==j.resolvedUri}).length&&h.length&&delete j.resolvedUri;var k=void 0;if(k="vhs-json"===e&&j.playlists?new Qk(j.playlists[0],d,g):j.resolvedUri?new Qk(j.resolvedUri,d,g):j.playlists&&"dash"===e?new Yk(j.playlists[0],d,g,n):null,j=rb.mergeOptions({id:f,playlistLoader:k},j),Ml[a](a,j.playlistLoader,b),l[c].push(j),"undefined"==typeof m[f]){var o=new rb.AudioTrack({id:f,kind:function(a){var b=a.default?"main":"alternative";return a.characteristics&&0<=a.characteristics.indexOf("public.accessibility.describes-video")&&(b="main-desc"),b}(j),enabled:!1,language:j.language,default:j.default,label:f});m[f]=o}}l[c]||(l[c]=[]);var h=j.filter(function(b){return b.attributes[a]===c});for(var k in i[a][c])f(k)}var d=b.vhs,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master,i=h.mediaGroups,j=h.playlists,k=b.mediaTypes[a],l=k.groups,m=k.tracks,n=b.masterPlaylistLoader;i[a]&&0!==Object.keys(i[a]).length||(i[a]={main:{default:{default:!0}}});for(var o in i[a])c(o);f.on("error",Ll[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.vhs,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,i=b.mediaTypes[a],j=i.groups,k=i.tracks,l=b.masterPlaylistLoader;for(var m in h[a])for(var n in j[m]||(j[m]=[]),h[a][m])if(!h[a][m][n].forced){var o=h[a][m][n],p=void 0;if("hls"===e)p=new Qk(o.resolvedUri,d,g);else if("dash"===e){if(!o.playlists.filter(function(a){return a.excludeUntil!==1/0}).length)return;p=new Yk(o.playlists[0],d,g,l)}else"vhs-json"===e&&(p=new Qk(o.playlists?o.playlists[0]:o.resolvedUri,d,g));if(o=rb.mergeOptions({id:n,playlistLoader:p},o),Ml[a](a,o.playlistLoader,b),j[m].push(o),"undefined"==typeof k[n]){var q=c.addRemoteTextTrack({id:n,kind:"subtitles",default:o.default&&o.autoselect,language:o.language,label:n},!1).track;k[n]=q}}f.on("error",Ll[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a],f=e.groups,g=e.tracks;for(var h in d[a])for(var i in f[h]||(f[h]=[]),d[a][h]){var j=d[a][h][i];if(j.instreamId.match(/CC\d/)&&(f[h].push(rb.mergeOptions({id:i},j)),"undefined"==typeof g[i])){var k=c.addRemoteTextTrack({id:j.instreamId,kind:"captions",default:j.default&&j.autoselect,language:j.language,label:i},!1).track;g[i]=k}}}},Ol={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},Pl=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Ql=function(a){function b(b){var c;c=a.call(this)||this;var d=b.src,e=b.handleManifestRedirects,f=b.withCredentials,g=b.tech,h=b.bandwidth,i=b.externVhs,j=b.useCueTags,k=b.blacklistDuration,l=b.enableLowInitialPlaylist,m=b.sourceType,n=b.cacheEncryptionKeys,o=b.handlePartialData,p=b.experimentalBufferBasedABR;if(!d)throw new Error("A non-empty playlist URL or JSON manifest string is required");pl=i,c.experimentalBufferBasedABR=Boolean(p),c.withCredentials=f,c.tech_=g,c.vhs_=g.vhs,c.sourceType_=m,c.useCueTags_=j,c.blacklistDuration=k,c.enableLowInitialPlaylist=l,c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType=""),c.requestOptions_={withCredentials:f,handleManifestRedirects:e,timeout:null},c.on("error",c.pauseLoading),c.mediaTypes_=function(){var a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ne,activeTrack:ne,onGroupChanged:ne,onTrackChanged:ne}}),a}(),c.mediaSource=new Oi.MediaSource,c.handleDurationChange_=c.handleDurationChange_.bind(Ki(c)),c.handleSourceOpen_=c.handleSourceOpen_.bind(Ki(c)),c.handleSourceEnded_=c.handleSourceEnded_.bind(Ki(c)),c.mediaSource.addEventListener("durationchange",c.handleDurationChange_),c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_),c.mediaSource.addEventListener("sourceended",c.handleSourceEnded_),c.seekable_=rb.createTimeRanges(),c.hasPlayed_=!1,c.syncController_=new Il(b),c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,c.decrypter_=new Kl,c.sourceUpdater_=new El(c.mediaSource),c.inbandTextTracks_={},c.timelineChangeController_=new Jl;var q={vhs:c.vhs_,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.duration()},hasPlayed:function(){return c.hasPlayed_},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:h,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:n,handlePartialData:o,sourceUpdater:c.sourceUpdater_,timelineChangeController:c.timelineChangeController_};return c.masterPlaylistLoader_="dash"===c.sourceType_?new Yk(d,c.vhs_,c.requestOptions_):new Qk(d,c.vhs_,c.requestOptions_),c.setupMasterPlaylistLoaderListeners_(),c.mainSegmentLoader_=new sl(rb.mergeOptions(q,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),b),c.audioSegmentLoader_=new sl(rb.mergeOptions(q,{loaderType:"audio"}),b),c.subtitleSegmentLoader_=new Gl(rb.mergeOptions(q,{loaderType:"vtt",featuresNativeTextTracks:c.tech_.featuresNativeTextTracks}),b),c.setupSegmentLoaderListeners_(),c.experimentalBufferBasedABR&&(c.masterPlaylistLoader_.one("loadedplaylist",function(){return c.startABRTimer_()}),c.tech_.on("pause",function(){return c.stopABRTimer_()}),c.tech_.on("play",function(){return c.startABRTimer_()})),Pl.forEach(function(a){c[a+"_"]=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]}.bind(Ki(c),a)}),c.logger_=$d("MPC"),c.triggeredFmp4Usage=!1,c.masterPlaylistLoader_.load(),c}Li(b,a);var c=b.prototype;return c.checkABR_=function(){var a=this.selectPlaylist();this.shouldSwitchToMedia_(a)&&this.masterPlaylistLoader_.media(a)},c.startABRTimer_=function(){var a=this;this.stopABRTimer_(),this.abrTimer_=Oi.setInterval(function(){return a.checkABR_()},250)},c.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Oi.clearInterval(this.abrTimer_),this.abrTimer_=null)},c.setupMasterPlaylistLoaderListeners_=function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;vd(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load()),ze({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,vhs:a.vhs_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),b),a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(!b){var c;if(a.excludeUnsupportedVariants_(),a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),!(c=c||a.selectPlaylist())||!a.shouldSwitchToMedia_(c))return;if(a.initialMedia_=c,a.masterPlaylistLoader_.media(a.initialMedia_),!("vhs-json"===a.sourceType_&&a.initialMedia_.segments))return;b=a.initialMedia_}a.handleUpdatedMediaPlaylist(b)}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;vd(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},c.handleUpdatedMediaPlaylist=function(a){this.useCueTags_&&this.updateAdCues_(a),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.updateDuration(!a.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},c.triggerPresenceUsage_=function(a,b){var c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(var f in c.AUDIO)for(var g in c.AUDIO[f])c.AUDIO[f][g].uri||(d=!1);d&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(c.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),pl.Playlist.isAes(b)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&1<Object.keys(c.AUDIO[e[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},c.shouldSwitchToMedia_=function(a){var b=this.masterPlaylistLoader_.media(),c=this.tech_.buffered();return function(a){var b=a.currentPlaylist,c=a.nextPlaylist,d=a.forwardBuffer,e=a.bufferLowWaterLine,f=a.bufferHighWaterLine,g=a.duration,h=a.experimentalBufferBasedABR,i=a.log;if(!c)return rb.log.warn("We received no playlist to switch to. Please check your stream."),!1;var j="allowing switch "+(b&&b.id||"null")+" -> "+c.id;if(!b||!b.endList)return i(j+" as current playlist "+(b?"is live":"is not set")),!0;if(c.id===b.id)return!1;var k=h?Zk.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Zk.MAX_BUFFER_LOW_WATER_LINE;if(g<k)return i(j+" as duration < max low water line ("+g+" < "+k+")"),!0;var l=c.attributes.BANDWIDTH,m=b.attributes.BANDWIDTH;if(l<m&&(!h||d<f)){var n=j+" as next bandwidth < current bandwidth ("+l+" < "+m+")";return h&&(n+=" and forwardBuffer < bufferHighWaterLine ("+d+" < "+f+")"),i(n),!0}if((!h||m<l)&&e<=d){var o=j+" as forwardBuffer >= bufferLowWaterLine ("+d+" >= "+e+")";return h&&(o+=" and next bandwidth > current bandwidth ("+l+" > "+m+")"),i(o),!0}return i("not "+j+" as no switching criteria met"),!1}({currentPlaylist:b,nextPlaylist:a,forwardBuffer:c.length?c.end(c.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},c.setupSegmentLoaderListeners_=function(){function a(){if(!b.sourceUpdater_.hasCreatedSourceBuffers())return b.tryToCreateSourceBuffers_();var a=b.getCodecsOrExclude_();a&&b.sourceUpdater_.addOrChangeSourceBuffers(a)}var b=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var a=b.selectPlaylist();b.shouldSwitchToMedia_(a)&&b.masterPlaylistLoader_.media(a),b.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){b.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){b.blacklistCurrentPlaylist(b.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){b.error=b.mainSegmentLoader_.error_,b.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){b.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){b.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),b.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){b.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){b.error=b.audioSegmentLoader_.error_,b.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){b.logger_("main segment loader ended"),b.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){b.experimentalBufferBasedABR||(b.delegateLoaders_("all",["abort"]),b.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){b.triggeredFmp4Usage||(b.tech_.trigger({type:"usage",name:"vhs-fmp4"}),b.tech_.trigger({type:"usage",name:"hls-fmp4"}),b.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){b.triggeredFmp4Usage||(b.tech_.trigger({type:"usage",name:"vhs-fmp4"}),b.tech_.trigger({type:"usage",name:"hls-fmp4"}),b.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){b.logger_("audioSegmentLoader ended"),b.onEndOfStream()})},c.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},c.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},c.smoothQualityChange_=function(a){void 0===a&&(a=this.selectPlaylist()),a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())},c.fastQualityChange_=function(a){var b=this;void 0===a&&(a=this.selectPlaylist()),a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetEverything(function(){rb.browser.IE_VERSION||rb.browser.IS_EDGE?b.tech_.setCurrentTime(b.tech_.currentTime()+.04):b.tech_.setCurrentTime(b.tech_.currentTime())}))},c.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.tech_.setCurrentTime(a.end(a.length-1)):void 0}},c.setupFirstPlay=function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(rb.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay"),a.tech_.setCurrentTime(c.end(0)),a.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(c.end(0))}return this.hasPlayed_=!0,this.load(),!0},c.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var a=this.tech_.play();"undefined"!=typeof a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")},c.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Math.abs(b)===1/0?Number.MAX_VALUE:b}}},c.handleDurationChange_=function(){
this.tech_.trigger("durationchange")},c.onEndOfStream=function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},c.stuckAtPlaylistEnd_=function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.duration());if(null===b)return!1;var c=pl.Playlist.playlistEnd(a,b),d=this.tech_.currentTime(),e=this.tech_.buffered();if(!e.length)return c-d<=.1;var f=e.end(e.length-1);return f-d<=.1&&c-f<=.1},c.blacklistCurrentPlaylist=function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();if(b=b||a.blacklistDuration||this.blacklistDuration,!c)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var d=this.masterPlaylistLoader_.master.playlists,e=d.filter(td),f=1===e.length&&e[0]===c;if(1===d.length&&b!==1/0)return rb.log.warn("Problem encountered with playlist "+c.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var g=!1;d.forEach(function(a){if(a!==c){var b=a.excludeUntil;"undefined"!=typeof b&&b!==1/0&&(g=!0,delete a.excludeUntil)}}),g&&(rb.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}c.excludeUntil=Date.now()+1e3*b,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var h=this.selectPlaylist();if(!h)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var i=a.internal?this.logger_:rb.log.warn,j=a.message?" "+a.message:"";i((a.internal?"Internal problem":"Problem")+" encountered with playlist "+c.id+"."+j+" Switching to playlist "+h.id+"."),h.attributes.AUDIO!==c.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==c.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var k=h.targetDuration/2*1e3||5e3,l="number"==typeof h.lastRequest&&Date.now()-h.lastRequest<=k;return this.masterPlaylistLoader_.media(h,f||l)},c.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},c.delegateLoaders_=function(a,b){var c=this,d=[],e="all"===a;!e&&"main"!==a||d.push(this.masterPlaylistLoader_);var f=[];!e&&"audio"!==a||f.push("AUDIO"),!e&&"subtitle"!==a||(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(a){var b=c.mediaTypes_[a]&&c.mediaTypes_[a].activePlaylistLoader;b&&d.push(b)}),["main","audio","subtitle"].forEach(function(b){var e=c[b+"SegmentLoader_"];!e||a!==b&&"all"!==a||d.push(e)}),d.forEach(function(a){return b.forEach(function(b){"function"==typeof a[b]&&a[b]()})})},c.setCurrentTime=function(a){var b=id(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?b&&b.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},c.duration=function(){if(!this.masterPlaylistLoader_)return 0;var a=this.masterPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:pl.Playlist.duration(a):1/0:0},c.seekable=function(){return this.seekable_},c.onSyncInfoUpdate_=function(){var a;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var d=this.masterPlaylistLoader_.master.suggestedPresentationDelay,e=pl.Playlist.seekable(b,c,d);if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(b=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(c=this.syncController_.getExpiredTime(b,this.duration())))return;if(0===(a=pl.Playlist.seekable(b,c,d)).length)return}var f,g;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),g=this.seekable_.start(0)),a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=rb.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===g||(this.logger_("seekable updated ["+kd(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},c.updateDuration=function(a){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,a),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(a){var b=this.seekable();if(!b.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<b.end(b.length-1))&&this.sourceUpdater_.setDuration(b.end(b.length-1))}else{var c=this.tech_.buffered(),d=pl.Playlist.duration(this.masterPlaylistLoader_.media());0<c.length&&(d=Math.max(d,c.end(c.length-1))),this.mediaSource.duration!==d&&this.sourceUpdater_.setDuration(d)}},c.dispose=function(){var a=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(b){var c=a.mediaTypes_[b].groups;for(var d in c)c[d].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},c.master=function(){return this.masterPlaylistLoader_.master},c.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},c.areMediaTypesKnown_=function(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||a&&!this.audioSegmentLoader_.currentMediaInfo_)},c.getCodecsOrExclude_=function(){var a=this,b={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};b.video=b.main;var c=Zd(this.master(),this.media()),d={},e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(b.main.hasVideo&&(d.video=c.video||b.main.videoCodec||Ek),b.main.isMuxed&&(d.video+=","+(c.audio||b.main.audioCodec||Dk)),(b.main.hasAudio&&!b.main.isMuxed||b.audio.hasAudio||e)&&(d.audio=c.audio||b.main.audioCodec||b.audio.audioCodec||Dk,b.audio.isFmp4=b.main.hasAudio&&!b.main.isMuxed?b.main.isFmp4:b.audio.isFmp4),d.audio||d.video){var f,g={};if(["video","audio"].forEach(function(a){if(d.hasOwnProperty(a)&&!function(a,b){return a?Fk(b):Kk(b)}(b[a].isFmp4,d[a])){var c=b[a].isFmp4?"browser":"muxer";g[c]=g[c]||[],g[c].push(d[a]),"audio"===a&&(f=c)}}),e&&f&&this.media().attributes.AUDIO){var h=this.media().attributes.AUDIO;this.master().playlists.forEach(function(b){(b.attributes&&b.attributes.AUDIO)===h&&b!==a.media()&&(b.excludeUntil=1/0)}),this.logger_("excluding audio group "+h+" as "+f+' does not support codec(s): "'+d.audio+'"')}if(!Object.keys(g).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var i=[];if(["video","audio"].forEach(function(b){var c=(Lk(a.sourceUpdater_.codecs[b]||"")[b]||{}).type,e=(Lk(d[b]||"")[b]||{}).type;c&&e&&c.toLowerCase()!==e.toLowerCase()&&i.push('"'+a.sourceUpdater_.codecs[b]+'" -> "'+d[b]+'"')}),i.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+i.join(", ")+".",blacklistDuration:1/0,internal:!0})}return d}var j=Object.keys(g).reduce(function(a,b){return a&&(a+=", "),a+=b+' does not support codec(s): "'+g[b].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:j,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},c.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();if(a){this.sourceUpdater_.createSourceBuffers(a);var b=[a.video,a.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(b)}}},c.excludeUnsupportedVariants_=function(){var a=this,b=this.master().playlists,c=[];Object.keys(b).forEach(function(d){var e=b[d];if(-1===c.indexOf(e.id)){c.push(e.id);var f=Zd(a.master,e),g=[];!f.audio||Kk(f.audio)||Fk(f.audio)||(e.excludeUntil=1/0,g.push("audio codec "+f.audio)),!f.video||Kk(f.video)||Fk(f.video)||(e.excludeUntil=1/0,g.push("video codec "+f.video)),f.text&&"stpp.ttml.im1t"===f.text&&(e.excludeUntil=1/0,g.push("text codec "+f.text)),g.length&&a.logger_("excluding "+e.id+" as codecs "+g.join(", ")+" are unsupported")}})},c.excludeIncompatibleVariants_=function(a){var b=this,c=Lk(a),d=Object.keys(c).length;this.master().playlists.forEach(function(a){if(a.excludeUntil!==1/0){var e={},f=2,g=[],h=Zd(b.masterPlaylistLoader_.master,a);if(h.audio||h.video){var i=[h.video,h.audio].filter(Boolean).join(",");e=Lk(i),f=Object.keys(e).length}f!==d&&(g.push('codec count "'+f+'" !== "'+d+'"'),a.excludeUntil=1/0),b.sourceUpdater_.canChangeType()||(e.video&&c.video&&e.video.type.toLowerCase()!==c.video.type.toLowerCase()&&(g.push('video codec "'+e.video.type+'" !== "'+c.video.type+'"'),a.excludeUntil=1/0),e.audio&&c.audio&&e.audio.type.toLowerCase()!==c.audio.type.toLowerCase()&&(a.excludeUntil=1/0,g.push('audio codec "'+e.audio.type+'" !== "'+c.audio.type+'"'))),g.length&&b.logger_("blacklisting "+a.id+": "+g.join(" && "))}})},c.updateAdCues_=function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0)),function(a,b,c){if(void 0===c&&(c=0),a.segments)for(var d,e=c,f=0;f<a.segments.length;f++){var g=a.segments[f];if(d=d||we(b,e+g.duration/2)){if("cueIn"in g){d.endTime=e,d.adEndTime=e,e+=g.duration,d=null;continue}if(e<d.endTime){e+=g.duration;continue}d.endTime+=g.duration}else if("cueOut"in g&&((d=new Oi.VTTCue(e,e+g.duration,g.cueOut)).adStartTime=e,d.adEndTime=e+parseFloat(g.cueOut),b.addCue(d)),"cueOutCont"in g){var h=g.cueOutCont.split("/").map(parseFloat),i=h[0],j=h[1];(d=new Oi.VTTCue(e,e+g.duration,"")).adStartTime=e-i,d.adEndTime=d.adStartTime+j,b.addCue(d)}e+=g.duration}}(a,this.cueTagsTrack_,b)},c.goalBufferLength=function(){var a=this.tech_.currentTime(),b=Zk.GOAL_BUFFER_LENGTH,c=Zk.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,Zk.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)},c.bufferLowWaterLine=function(){var a=this.tech_.currentTime(),b=Zk.BUFFER_LOW_WATER_LINE,c=Zk.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,Zk.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,Zk.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,this.experimentalBufferBasedABR?e:d)},c.bufferHighWaterLine=function(){return Zk.BUFFER_HIGH_WATER_LINE},b}(rb.EventTarget),Rl=["seeking","seeked","pause","playing","error"],Sl=function(){function a(a){function b(){return f.monitorCurrentTime_()}function c(){return f.techWaiting_()}function d(){return f.cancelTimer_()}function e(){return f.fixesBadSeeks_()}var f=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=$d("PlaybackWatcher"),this.logger_("initialize");var g=this.masterPlaylistController_,h=["main","subtitle","audio"],i={};h.forEach(function(a){i[a]={reset:function(){return f.resetSegmentDownloads_(a)},updateend:function(){return f.checkSegmentDownloads_(a)}},g[a+"SegmentLoader_"].on("appendsdone",i[a].updateend),g[a+"SegmentLoader_"].on("playlistupdate",i[a].reset),f.tech_.on(["seeked","seeking"],i[a].reset)}),this.tech_.on("seekablechanged",e),this.tech_.on("waiting",c),this.tech_.on(Rl,d),this.tech_.on("canplay",b),this.dispose=function(){f.logger_("dispose"),f.tech_.off("seekablechanged",e),f.tech_.off("waiting",c),f.tech_.off(Rl,d),f.tech_.off("canplay",b),h.forEach(function(a){g[a+"SegmentLoader_"].off("appendsdone",i[a].updateend),g[a+"SegmentLoader_"].off("playlistupdate",i[a].reset),f.tech_.off(["seeked","seeking"],i[a].reset)}),f.checkCurrentTimeTimeout_&&Oi.clearTimeout(f.checkCurrentTimeTimeout_),f.cancelTimer_()}}var b=a.prototype;return b.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Oi.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Oi.setTimeout(this.monitorCurrentTime_.bind(this),250)},b.resetSegmentDownloads_=function(a){var b=this.masterPlaylistController_[a+"SegmentLoader_"];0<this[a+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+a+" loader"),this[a+"StalledDownloads_"]=0,this[a+"Buffered_"]=b.buffered_()},b.checkSegmentDownloads_=function(a){var b=this.masterPlaylistController_,c=b[a+"SegmentLoader_"],d=c.buffered_(),e=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1}(this[a+"Buffered_"],d);this[a+"Buffered_"]=d,e?this.resetSegmentDownloads_(a):(this[a+"StalledDownloads_"]++,this.logger_("found #"+this[a+"StalledDownloads_"]+" "+a+" appends that did not increase buffer (possible stalled download)",{playlistId:c.playlist_&&c.playlist_.id,buffered:ld(d)}),this[a+"StalledDownloads_"]<10||(this.logger_(a+" loader stalled download exclusion"),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:"vhs-"+a+"-download-exclusion"}),"subtitle"!==a&&b.blacklistCurrentPlaylist({message:"Excessive "+a+" segment downloading detected."},1/0)))},b.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+.1>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}},b.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},b.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var a,b=this.seekable(),c=this.tech_.currentTime();if(this.afterSeekableWindow_(b,c,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(a=b.end(b.length-1)),this.beforeSeekableWindow_(b,c)){var d=b.start(0);a=d+(d===b.end(0)?0:.1)}if("undefined"!=typeof a)return this.logger_("Trying to seek outside of seekable at time "+c+" with seekable range "+kd(b)+". Seeking to "+a+"."),this.tech_.setCurrentTime(a),!0;var e=this.tech_.buffered();return!!function(a){var b=a.buffered,c=a.targetDuration,d=a.currentTime;return!(!b.length||b.end(0)-b.start(0)<2*c||d>b.start(0)||!(b.start(0)-d<c))}({buffered:e,targetDuration:this.media().targetDuration,currentTime:c})&&(a=e.start(0)+.1,this.logger_("Buffered region starts ("+e.start(0)+")  just beyond seek point ("+c+"). Seeking to "+a+"."),this.tech_.setCurrentTime(a),!0)},b.waiting_=function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered(),c=id(b,a);return c.length&&a+3<=c.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region ["+c.start(0)+" -> "+c.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},b.techWaiting_=function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b)){var c=a.end(a.length-1);return this.logger_("Fell out of live window at time "+b+". Seeking to live point (seekable end) "+c),this.cancelTimer_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var d=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,e=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:d.audioBuffered(),videoBuffered:d.videoBuffered(),currentTime:b}))return this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=jd(e,b);if(0<f.length){var g=f.start(0)-b;return this.logger_("Stopped at "+b+", setting timer for "+g+", seeking to "+f.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*g,b),!0}return!1},b.afterSeekableWindow_=function(a,b,c,d){if(void 0===d&&(d=!1),!a.length)return!1;var e=a.end(a.length-1)+.1;return!c.endList&&d&&(e=a.end(a.length-1)+3*c.targetDuration),e<b},b.beforeSeekableWindow_=function(a,b){return!!(a.length&&0<a.start(0)&&b<a.start(0)-this.liveRangeSafeTimeDelta)},b.videoUnderflow_=function(a){var b=a.videoBuffered,c=a.audioBuffered,d=a.currentTime;if(b){var e;if(b.length&&c.length){var f=id(b,d-3),g=id(b,d),h=id(c,d);h.length&&!g.length&&f.length&&(e={start:f.end(0),end:h.end(0)})}else jd(b,d).length||(e=this.gapFromVideoUnderflow_(b,d));return!!e&&(this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+d),!0)}},b.skipTheGap_=function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime(),d=jd(b,c);this.cancelTimer_(),0!==d.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+Rk),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},b.gapFromVideoUnderflow_=function(a,b){for(var c=function(a){if(a.length<2)return rb.createTimeRanges();for(var b=[],c=1;c<a.length;c++){var d=a.end(c-1),e=a.start(c);b.push([d,e])}return rb.createTimeRanges(b)}(a),d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(b-e<4&&2<b-e)return{start:e,end:f}}return null},a}(),Tl={errorInterval:30,getSource:function(a){return a(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Ul={PlaylistLoader:Qk,Playlist:Tk,utils:Wk,STANDARD_PLAYLIST_SELECTOR:ee,INITIAL_PLAYLIST_SELECTOR:function(){var a=this,b=this.playlists.master.playlists.filter(Tk.isEnabled);return be(b,function(a,b){return ce(a,b)}),b.filter(function(b){return!!Zd(a.playlists.master,b).video})[0]||null},lastBandwidthSelector:ee,movingAverageBandwidthSelector:function(a){var b=-1;if(a<0||1<a)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var c=this.useDevicePixelRatio&&Oi.devicePixelRatio||1;return b<0&&(b=this.systemBandwidth),b=a*this.systemBandwidth+(1-a)*b,de(this.playlists.master,b,parseInt(ae(this.tech_.el(),"width"),10)*c,parseInt(ae(this.tech_.el(),"height"),10)*c,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:ce,comparePlaylistResolution:function(a,b){var c,d;return a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width),c=c||Oi.Number.MAX_VALUE,b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),c===(d=d||Oi.Number.MAX_VALUE)&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:xd()};Object.keys(Zk).forEach(function(a){Object.defineProperty(Ul,a,{get:function(){return rb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),Zk[a]},set:function(b){rb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof b||b<0?rb.log.warn("value of Vhs."+a+" must be greater than or equal to 0"):Zk[a]=b}})});var Vl="videojs-vhs";Ul.canPlaySource=function(){return rb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Ul.supportsNativeHls=function(){if(!Ni||!Ni.createElement)return!1;var a=Ni.createElement("video");return!!rb.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),Ul.supportsNativeDash=!!(Ni&&Ni.createElement&&rb.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ni.createElement("video").canPlayType("application/dash+xml")),Ul.supportsTypeNatively=function(a){return"hls"===a?Ul.supportsNativeHls:"dash"===a&&Ul.supportsNativeDash},Ul.isSupported=function(){return rb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Wl=function(a){function b(b,c,d){var e;if(e=a.call(this,c,rb.mergeOptions(d.hls,d.vhs))||this,d.hls&&Object.keys(d.hls).length&&rb.log.warn("Using hls options is deprecated. Use vhs instead."),e.logger_=$d("VhsHandler"),c.options_&&c.options_.playerId){var f=rb(c.options_.playerId);f.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){return rb.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"hls-player-access"}),Ki(e)},configurable:!0}),f.hasOwnProperty("vhs")||Object.defineProperty(f,"vhs",{get:function(){return rb.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"vhs-player-access"}),Ki(e)},configurable:!0}),f.hasOwnProperty("dash")||Object.defineProperty(f,"dash",{get:function(){return rb.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ki(e)},configurable:!0}),e.player_=f}if(e.tech_=c,e.source_=b,e.stats={},e.ignoreNextSeekingEvent_=!1,e.setOptions_(),e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return e.on(Ni,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){var b=Ni.fullscreenElement||Ni.webkitFullscreenElement||Ni.mozFullScreenElement||Ni.msFullscreenElement;b&&b.contains(e.tech_.el())&&e.masterPlaylistController_.smoothQualityChange_()}),e.on(e.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),e.on(e.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),e.on(e.tech_,"play",e.play),e}Li(b,a);var c=b.prototype;return c.setOptions_=function(){var a=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=Fe();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Zk.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zk.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta"].forEach(function(b){"undefined"!=typeof a.source_[b]&&(a.options_[b]=a.source_[b])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},c.src=function(a,b){var c=this;if(a){this.setOptions_(),this.options_.src=function(a){return 0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ul,this.options_.sourceType=Zi(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a)},this.masterPlaylistController_=new Ql(this.options_);var d=rb.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Sl(d),this.masterPlaylistController_.on("error",function(){var a=rb.players[c.tech_.options_.playerId],b=c.masterPlaylistController_.error;"object"!=typeof b||b.code?"string"==typeof b&&(b={message:b,code:3}):b.code=3,a.error(b)});var e=this.options_.experimentalBufferBasedABR?Ul.movingAverageBandwidthSelector(.55):Ul.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):e.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ul.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var a,b=1/(this.bandwidth||1);return a=0<this.throughput?1/this.throughput:0,Math.floor(1/(b+a))},set:function(){rb.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return ld(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ld(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){c.options_.useBandwidthFromLocalStorage&&function(a){if(Oi.localStorage){var b=Fe();b=b?rb.mergeOptions(b,a):a;try{Oi.localStorage.setItem(Vl,JSON.stringify(b))}catch(a){return}}}({bandwidth:c.bandwidth,throughput:Math.round(c.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(a){var b=a.playlists;a.representations=function(){return b&&b.master&&b.master.playlists?b.master.playlists.filter(function(a){return!sd(a)}).map(function(b,c){return new Ae(a,b,b.id)}):[]}}(c)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){c.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Oi.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},c.setupEme_=function(){var a=this,b=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,c=Ee({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:b&&b.media()});11!==rb.browser.IE_VERSION&&c?(this.logger_("waiting for EME key session creation"),De({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:b&&b.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){a.logger_("created EME key session"),a.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(b){a.logger_("error while creating EME key session",b),a.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},c.setupQualityLevels_=function(){
var a=this,b=rb.players[this.tech_.options_.playerId];b&&b.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)}),Ce(a,b.playlists)}(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){Ce(a.qualityLevels_,a.playlists)}))},b.version=function(){return{"@videojs/http-streaming":"2.4.2","mux.js":"5.8.0","mpd-parser":"0.15.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},c.version=function(){return this.constructor.version()},c.canChangeType=function(){return El.canChangeType()},c.play=function(){this.masterPlaylistController_.play()},c.setCurrentTime=function(a){this.masterPlaylistController_.setCurrentTime(a)},c.duration=function(){return this.masterPlaylistController_.duration()},c.seekable=function(){return this.masterPlaylistController_.seekable()},c.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Oi.URL.revokeObjectURL&&(Oi.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),a.prototype.dispose.call(this)},c.convertToProgramTime=function(a,b){return Fd({playlist:this.masterPlaylistController_.media(),time:a,callback:b})},c.seekToProgramTime=function(a,b,c,d){return void 0===c&&(c=!0),void 0===d&&(d=2),Gd({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})},b}(rb.getComponent("Component")),Xl={name:"videojs-http-streaming",VERSION:"2.4.2",canHandleSource:function(a,b){void 0===b&&(b={});var c=rb.mergeOptions(rb.options,b);return Xl.canPlayType(a.type,c)},handleSource:function(a,b,c){void 0===c&&(c={});var d=rb.mergeOptions(rb.options,c);return b.vhs=new Wl(a,b,d),rb.hasOwnProperty("hls")||Object.defineProperty(b,"hls",{get:function(){return rb.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),b.vhs},configurable:!0}),b.vhs.xhr=xd(),b.vhs.src(a.src,a.type),b.vhs},canPlayType:function(a,b){void 0===b&&(b={});var c=rb.mergeOptions(rb.options,b).vhs.overrideNative,d=void 0===c?!rb.browser.IS_ANY_SAFARI:c,e=Zi(a);return!e||Ul.supportsTypeNatively(e)&&!d?"":"maybe"}};return Fk("avc1.4d400d,mp4a.40.2")&&rb.getTech("Html5").registerSourceHandler(Xl,0),rb.VhsHandler=Wl,Object.defineProperty(rb,"HlsHandler",{get:function(){return rb.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Wl},configurable:!0}),rb.VhsSourceHandler=Xl,Object.defineProperty(rb,"HlsSourceHandler",{get:function(){return rb.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Xl},configurable:!0}),rb.Vhs=Ul,Object.defineProperty(rb,"Hls",{get:function(){return rb.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ul},configurable:!0}),rb.use||(rb.registerComponent("Hls",Ul),rb.registerComponent("Vhs",Ul)),rb.options.vhs=rb.options.vhs||{},rb.options.hls=rb.options.hls||{},rb.registerPlugin?rb.registerPlugin("reloadSourceOnError",Be):rb.plugin("reloadSourceOnError",Be),rb})}(a("1d").Buffer,a("1b"))}),a.registerDynamic("1e",[],!0,function(a,b,c){function d(a,b,c){function d(){function d(){c||(f=a.apply(h,g)),e=null}var g=arguments,h=this;return e?clearTimeout(e):c&&(f=a.apply(h,g)),e=setTimeout(d,b),f}var e,f;return d.cancel=function(){clearTimeout(e)},d}this||self;c.exports=d}),a.register("1f",["12","13","14","17","20","1c","1e"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i=function(){function a(b){c(this,a),APP.viewers={},this.S7_CONFIG=Drupal.settings.hermes_global.dam_config,this.posterBreakpoints=[414,768,1024,1280,1560,1900],this.containersToInit=[].concat(d(document.querySelectorAll(b.elements))),this.viewersPositions=[],this.IPOD_IPHONE=/i(Phone|Pod)/.test(navigator.appVersion),this.IPAD=/iPad/.test(navigator.appVersion),this.ISMOBILE=f.isSmall(),this.ISTAB=f.isMedium(),this.ISDESKTOP=f.isLarge(),this.isMovingCursor=!1,this.isProcessingFullScreen=!1,this.allVideo=[]}return b(a,[{key:"init",value:function(){var a=this;document.getElementsByClassName("has-animation").length?this.containersToInit.forEach(function(b){return a.buildVideo(b)}):!function(){var b=h(function(){var c=a.tryLaunchRemainingInitContainers();a.catchMenuContentVideoJS(),c&&window.removeEventListener("scroll",b)},50);a.tryLaunchRemainingInitContainers(),window.addEventListener("scroll",b)}(),this.IPOD_IPHONE||APP.pubsub.subscribe("scroll",h(this.scrollListener.bind(this),100)),jQuery(window).on("load",this.scrollListener.bind(this)),jQuery(document).ready(this.analyticsVideoJS.bind(this)),APP.pubsub.subscribe("resize",this.resizePoster.bind(this)),this.catchMenuContentVideoJS()}},{key:"resizePoster",value:function(a,b){var c=[414,768,1024,1280,1560,1900],d=Math.max.apply(Math,c),e=Array.prototype.slice.apply(document.querySelectorAll(".vjs-poster"));e.forEach(function(a){c.forEach(function(a){b.width<=a&&d===Math.max.apply(Math,c)&&(d=a)});var e=a.getAttribute("style");e=e.replace(new RegExp("wid=[0-9]{0,4}&"),"wid="+d+"&"),a.setAttribute("style",e)})}},{key:"tryLaunchRemainingInitContainers",value:function(){var a=this,b=this.ISMOBILE?150:100,c=this.containersToInit.filter(function(c){return a.checkVisible(c,b)});return c.forEach(function(b){return a.buildVideo(b)}),c.length&&(this.containersToInit=this.containersToInit.filter(function(a){return!c.includes(a)})),!this.containersToInit.length}},{key:"checkVisible",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(a&&a.getBoundingClientRect){var c=a.getBoundingClientRect(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(c.top-b-d<=0)return!0}return!1}},{key:"togglePlayOnce",value:function(a){a.init&&(a.oncanplay=function(){a.pause(),a.oncanplay=!1},a.onplay=function(){a.pause(),a.onplay=!1,a.muted=!1},a.muted=!0,a.play(),delete a.init)}},{key:"togglePlay",value:function(a,b){var c=!!jQuery(a).parents(".hidden").length;if(c)return void this.togglePlayOnce(a);var d={controls:parseInt(b.controls||0,10),mute:parseInt(b.mute||0,10),autoplay:parseInt(b.autoplay||0,10)};return a.init&&(a.muted=!0,this.IPAD&&(a.playsinline=!0)),this.IPOD_IPHONE||this.checkVisible(a)&&1===d.autoplay&&!c?(this.IPAD&&(a.playsinline=!0),a.play(),a.autopaused=!1,APP.pubsub.publish("Autoplay",a),void delete a.init):(a.playing&&d.autoplay&&(a.autopaused=!0,a.pause()),void delete a.init)}},{key:"scrollListener",value:function(){var a=this;this.viewersPositions.forEach(function(b){var c=b.key,d=b.options,e=APP.viewers[c];if(e){d.trigger="scroll";var f=a.getVideo(c,e.domElement);a.togglePlay(f,d),a.catchMenuContentVideoJS()}})}},{key:"getVideo",value:function(a,b){try{var c='[id="'+APP.viewers[a].getComponent("videoPlayer").compId+'"] video';return this.IPOD_IPHONE?APP.viewers[a].getComponent("videoPlayer"):(b||document).querySelector(c)}catch(a){return null}}},{key:"bindMuteControl",value:function(a){jQuery(a.domElement).on("touchstart",function(){var b=a.getComponent("videoPlayer");b&&b.unmute()})}},{key:"getVideoIDString",value:function(a){return a.dataset.videoid?(a.dataset.video+"_"+a.dataset.videoid).replace(/\s/g,"_"):a.dataset.video}},{key:"parseOptions",value:function(a){return{controls:this.IPAD||this.IPOD_IPHONE?1:parseInt(a.dataset.controls||0,10),mute:this.IPAD||this.IPOD_IPHONE?0:parseInt(a.dataset.mute||0,10),autoplay:this.IPAD||this.IPOD_IPHONE?0:parseInt(a.dataset.autoplay||0,10),poster:a.dataset.poster||"",product:parseInt(a.dataset.product||0,10),loop:this.IPAD||this.IPOD_IPHONE?0:parseInt(a.dataset.loop||0,10),preload:a.dataset.preload||"none"}}},{key:"buildVideo",value:function(a){var b=this,c=this.getVideoIDString(a),d=jQuery(a).find('[id="vjs-container-'+c+'"]');APP.viewers[c]&&(c+="-0",d.attr("id","vjs-container-"+c));var e=a.dataset.video,f=d.get(0),h=this.parseOptions(a),i=h&&h.product?this.S7_CONFIG.hermes_product_container:this.S7_CONFIG.hermes_editorial_container,j=this.S7_CONFIG.scene7_url;a.dataset.loop&&jQuery(a).on("click.loop",function(c){c.preventDefault(),c.stopPropagation();var d=jQuery(b).parent(),e=d.find('[data-videoid="'+a.dataset.videoid+'"]');e.length>1&&(b.IPOD_IPHONE||(e.eq(1).removeClass("hidden"),e.eq(0).addClass("hidden")),b.switchVideosAndPlay(e,d,f,a))});var k="1"===a.dataset.loopMuteAutoplay,l="1"===a.dataset.controls,m={videoName:e,uri:j,hasLoopMuteAutoplay:k,hasControls:l,source:i,wrapper:f,videoIdString:c,posterUrl:h.poster,preload:h.preload};if(jQuery(a).find('[id="vjs-container-'+m.videoIdString+'"]').length){var n="vjs_"+m.videoIdString,o='role="presentation" playsinline',p="video-js vjs-default-skin vjs-big-play-centered",q=m.uri+"is/content"+this.S7_CONFIG.hermes_editorial_container+m.videoName+".m3u8",r="application/x-mpegURL";m.wrapper.innerHTML='<video id="'+n+'" '+o+' class="'+p+'"><source src="'+q+'" type="'+r+'"></video>',this.player=g(n,{fluid:!0,controls:m.hasControls,loop:m.hasLoopMuteAutoplay,muted:m.hasLoopMuteAutoplay,autoplay:m.hasLoopMuteAutoplay,poster:this.choosePosterUrl(m.posterUrl,m.wrapper),preload:m.preload}),this.allVideo.push(this.player),this.ISMOBILE&&m.hasLoopMuteAutoplay&&!m.hasControls&&!function(){var b=jQuery(a).find("video");b.on("click",function(){b.get(0).play()})}(),this.catchMenuContentVideoJS()}}},{key:"choosePosterUrl",value:function(a,b){if(""===a)return"";var c=a.split("?")[0],d=0;return this.posterBreakpoints.forEach(function(a){b.clientWidth<=a&&0===d&&(d=a)}),0===d&&(d=this.posterBreakpoints[this.posterBreakpoints.length-1]),d=Math.floor(d*window.devicePixelRatio),c+"?wid="+d+"&fit=wrap,0&qlt=40"}},{key:"switchVideosAndPlay",value:function(a,b,c,d){var e=this,f=this.parseOptions(d),g=this.getVideoIDString(a.get(0)),h=this.getVideo(g,b.get(0));h&&(h.pause(),g=this.getVideoIDString(a.get(1))),h=this.getVideo(g,b.get(0)),h&&h.readyState&&4===h.readyState?(this.togglePlay(h,f),h.unmute&&!f.mute&&h.unmute(),h.muted=!1):this.IPOD_IPHONE?(h.oncanplay=!1,this.togglePlay(h,f),h.unmute&&!f.mute&&h.unmute(),h.muted=!1,h.oncanplay=!1):h.oncanplay=function(){e.togglePlay(h,f),h.unmute&&!f.mute&&h.unmute(),h.muted=!1,h.oncanplay=!1,h.onpause=!1},this.IPOD_IPHONE||a.off("click.loop")}},{key:"destroyVideo",value:function(a){var b=APP.viewers[a].domElement,c=this.getVideo(a,b);c&&c.pause(),b.innerHTML="",delete APP.viewers[a]}},{key:"analyticsVideoJS",value:function(){var a=this.allVideo,b=this;a.forEach(function(a){a.firstPlay=!0,a.lastPercent=0,a.on("play",b.onPlay.bind(a)),a.on("timeupdate",b.onTimeUpdate.bind(a)),a.on("pause",b.onPause.bind(a)),a.on("ended",function(){APP.pubsub.publish(e.PLAYER.stop,a)}),a.on("fullscreenchange",b.onFullScreenChange.bind(a)),a.on("volumechange",b.onVolumeChange.bind(a))})}},{key:"onFullScreenChange",value:function(a){var b=a.target.player;b&&(this.isProcessingFullScreen=!0,APP.pubsub.publish(e.PLAYER.fullscreen,b))}},{key:"onVolumeChange",value:function(a){var b=a.target.player;b&&b.muted()&&APP.pubsub.publish(e.PLAYER.mute,this.player)}},{key:"onPlay",value:function(a){var b=a.target.player;if(b){if(b.isMovingCursor)return void(b.isMovingCursor=!1);if(b.isProcessingFullScreen)return void(b.isProcessingFullScreen=!1);b.autoplay()&&b.firstPlay?APP.pubsub.publish(e.PLAYER.autoplay,b):b.autoplay()||APP.pubsub.publish(b.firstPlay?e.PLAYER.firstPlay:e.PLAYER.newPlay,b),b.firstPlay=!1}}},{key:"onTimeUpdate",value:function(a){var b=a.target.player;b&&!function(){var a=parseInt((b.currentTime()/b.duration()*100).toFixed(0),10),c=[25,50,75,95];if(c.forEach(function(b){Math.abs(a-b)<3&&(a=b)}),c.includes(a)&&b.lastPercent!==a){var d=a+"%";b.currentPercent=d,b.autoplay()||APP.pubsub.publish("Progress",b),b.lastPercent=a}}()}},{key:"onPause",value:function(a){var b=a.target.player;if(b){if(b.seeking()||b.scrubbing())return void(b.isMovingCursor=!0);if(b.isProcessingFullScreen)return void(b.isProcessingFullScreen=!1);var c=parseInt((b.currentTime()/b.duration()*100).toFixed(0),10);if(100===c)return;b.autoplay()||APP.pubsub.publish(e.PLAYER.pause,b)}}},{key:"catchMenuContentVideoJS",value:function(){var a=[].slice.call(document.querySelectorAll("div.media-video"));"IntersectionObserver"in window&&!function(){var b=new IntersectionObserver(function(a){a.forEach(function(a){if(a.isIntersecting){var c=a.target;c.querySelectorAll(".vjs-menu-content").forEach(function(a){0===a.childNodes.length?a.removeAttribute("role"):a.querySelectorAll("li").forEach(function(a){a.hasAttribute("role")||a.setAttribute("role","menuitem")})}),b.unobserve(c)}})});a.forEach(function(a){b.observe(a)})}()}}]),a}(),a("default",i)}}}),a.register("21",["12","13","22"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(){c(this,a),this.layer={event:"impressions",category:"ecommerce",action:"impressions",ecommerce:{}},this.impressions=[],this.queueSize=2,this.pushCounter=0,this.reinit()}return b(a,[{key:"reinit",value:function(){throw new TypeError("You must override this method")}},{key:"buildImpression",value:function(a){throw new TypeError("You must override this method"+JSON.stringify(a))}},{key:"bind",value:function(){var a=this;this.articles&&this.articles.length>0&&Array.prototype.forEach.call(this.articles,function(b){a.articleIsInViewPort(b)||document.addEventListener("scroll",function(){a.articleIsInViewPort(b)})})}},{key:"articleIsInViewPort",value:function(a){return!(void 0===this.products||!this.products.length)&&(a.inViewport?a.inViewport:(a.inViewport=d.isInViewport(a),a.inViewport&&this.pushMerchImpression(this.getProductFromArticleNode(a)),a.inViewport))}},{key:"getProductFromArticleNode",value:function(a){var b=this.products.find(function(b){var c=jQuery(a).find("[data-product]");if(void 0!==c)return b.position=a.position,c.data("product")===b.sku});return this.pushCounter=a.indexPush,APP.pubsub.publish("analytics.pushCounter.incremented",this.pushCounter),b}},{key:"pushMerchImpression",value:function(a){void 0!==a&&(this.impressions.push(this.buildImpression(a)),this.impressions.length===this.queueSize&&(this.layer.ecommerce={impressions:this.impressions},dataLayer.push(this.layer),this.reinit()))}},{key:"defineProductCategory",value:function(a){return a.department_code&&a.family_code?a.department_code+"/"+a.family_code:a.dimension6&&a.dimension7?a.dimension6+"/"+a.dimension7:"unknown"}}]),a}(),a("default",e)}}}),a.registerDynamic("23",[],!0,function(a,b,c){"format cjs";this||self;!function(a,d){function e(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function f(a){return n?n(a):"[object Array]"===o.call(a)}function g(a){return a&&"[object Object]"===o.call(a)}function h(a,b){var c;a=a||{},b=b||{};for(c in b)b.hasOwnProperty(c)&&null==a[c]&&(a[c]=b[c]);return a}function i(a,b,c){var d,e,f=[];if(!a)return f;if(m&&a.map===m)return a.map(b,c);for(d=0,e=a.length;d<e;d++)f[d]=b.call(c,a[d],d,a);return f}function j(a,b){return a=Math.round(Math.abs(a)),isNaN(a)?b:a}function k(a){var b=l.settings.currency.format;return"function"==typeof a&&(a=a()),e(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:e(b)?l.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var l={};l.version="0.4.1",l.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var m=Array.prototype.map,n=Array.isArray,o=Object.prototype.toString,p=l.unformat=l.parse=function(a,b){if(f(a))return i(a,function(a){return p(a,b)});if(a=a||0,"number"==typeof a)return a;b=b||l.settings.number.decimal;var c=new RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(d)?0:d},q=l.toFixed=function(a,b){b=j(b,l.settings.number.precision);var c=Math.pow(10,b);return(Math.round(l.unformat(a)*c)/c).toFixed(b)},r=l.formatNumber=l.format=function(a,b,c,d){if(f(a))return i(a,function(a){return r(a,b,c,d)});a=p(a);var e=h(g(b)?b:{precision:b,thousand:c,decimal:d},l.settings.number),k=j(e.precision),m=a<0?"-":"",n=parseInt(q(Math.abs(a||0),k),10)+"",o=n.length>3?n.length%3:0;return m+(o?n.substr(0,o)+e.thousand:"")+n.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(k?e.decimal+q(Math.abs(a),k).split(".")[1]:"")},s=l.formatMoney=function(a,b,c,d,e,m){if(f(a))return i(a,function(a){return s(a,b,c,d,e,m)});a=p(a);var n=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:e,format:m},l.settings.currency),o=k(n.format),q=a>0?o.pos:a<0?o.neg:o.zero;return q.replace("%s",n.symbol).replace("%v",r(Math.abs(a),j(n.precision),n.thousand,n.decimal))};l.formatColumn=function(a,b,c,d,m,n){if(!a)return[];var o=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:m,format:n},l.settings.currency),q=k(o.format),s=q.pos.indexOf("%s")<q.pos.indexOf("%v"),t=0,u=i(a,function(a,b){if(f(a))return l.formatColumn(a,o);a=p(a);var c=a>0?q.pos:a<0?q.neg:q.zero,d=c.replace("%s",o.symbol).replace("%v",r(Math.abs(a),j(o.precision),o.thousand,o.decimal));return d.length>t&&(t=d.length),d});return i(u,function(a,b){return e(a)&&a.length<t?s?a.replace(o.symbol,o.symbol+new Array(t-a.length+1).join(" ")):new Array(t-a.length+1).join(" ")+a:a})},"undefined"!=typeof b?("undefined"!=typeof c&&c.exports&&(b=c.exports=l),b.accounting=l):"function"==typeof d&&define.amd?define([],function(){return l}):(l.noConflict=function(b){return function(){return a.accounting=b,l.noConflict=d,l}}(a.accounting),a.accounting=l)}(this)}),a.registerDynamic("24",["23"],!0,function(a,b,c){this||self;c.exports=a("23")}),a.register("25",["12","13","26"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.ProductLocatorTools}],execute:function(){"use strict";e=function(){function a(){c(this,a)}return b(a,null,[{key:"pushEvent",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],d=arguments.length<=3||void 0===arguments[3]?null:arguments[3],e=arguments.length<=4||void 0===arguments[4]?null:arguments[4],f=arguments.length<=5||void 0===arguments[5]?null:arguments[5],g={};g.event="uaevent",a&&(g.eventcategory=a),b&&(g.eventaction=b),c&&(g.eventlabel=c),d&&(g.eventvalue=d),e&&(g.virtualpageuri=e),f&&(g.pagetype=f),dataLayer.push(g)}},{key:"trackReserveInStoreClick",value:function(b,c,d){b&&c&&d&&a.pushEvent("Product_locator","Reserve in store",d+"_"+b,c)}},{key:"trackContinueExperienceClick",value:function(b){b&&a.pushEvent("Eresa","Eresa_confirmation_experience_button",b)}},{key:"getAvailabilityHitLabel",value:function(a){return d.isAvailableStockHCom(a)&&d.isAvailableStockRetail(a)?"ecom_store":d.isAvailableStockHCom(a)?"ecom":d.isAvailableStockRetail(a)?"store":"unavailable"}},{key:"trackConfirmEreservationClick",value:function(b){b&&a.pushEvent("Eresa","Eresa_confirm_button",b)}},{key:"trackEreservationCreated",value:function(b){if(b){var c="/"+Drupal.settings.pathPrefix+"eresa_confirmation";a.pushEvent("Eresa","Eresa_confirmation",b,null,c,"eresa")}}}]),a}(),a("default",e)}}}),a.registerDynamic("27",[],!0,function(a,b,c){this||self;c.exports=function(){}}),a.registerDynamic("28",[],!0,function(a,b,c){this||self;c.exports=function(a,b){return{value:b,done:!!a}}}),a.registerDynamic("29",["27","28","7","2a","2b"],!0,function(a,b,c){"use strict";var d=(this||self,a("27")),e=a("28"),f=a("7"),g=a("2a");c.exports=a("2b")(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")}),a.registerDynamic("a",["29","7"],!0,function(a,b,c){this||self;a("29");var d=a("7");d.NodeList=d.HTMLCollection=d.Array}),a.registerDynamic("2c",["2d","2e","8"],!0,function(a,b,c){var d=(this||self,a("2d")),e=a("2e");c.exports=a("8").getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}}),a.registerDynamic("2f",["a","b","2c"],!0,function(a,b,c){this||self;a("a"),a("b"),c.exports=a("2c")}),a.registerDynamic("e",["2f"],!0,function(a,b,c){this||self;c.exports={default:a("2f"),__esModule:!0}}),a.registerDynamic("30",[],!0,function(a,b,c){"format cjs";this||self;!function(a,d){"use strict";var e={};a.PubSub=e,d(e),"object"==typeof b&&(void 0!==c&&c.exports&&(b=c.exports=e),b.PubSub=e,c.exports=b=e)}("object"==typeof window&&window||this,function(a){"use strict";function b(a){var b;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function c(a){return function(){throw a}}function d(a,b,d){try{a(b,d)}catch(a){setTimeout(c(a),0)}}function e(a,b,c){a(b,c)}function f(a,b,c,f){var g,h=k[b],i=f?e:d;if(Object.prototype.hasOwnProperty.call(k,b))for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&i(h[g],a,c)}function g(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(f(a,a,b,c);e!==-1;)d=d.substr(0,e),e=d.lastIndexOf("."),f(a,d,b,c);f(a,m,b,c)}}function h(a){var c=String(a),d=Boolean(Object.prototype.hasOwnProperty.call(k,c)&&b(k[c]));return d}function i(a){for(var b=String(a),c=h(b)||h(m),d=b.lastIndexOf(".");!c&&d!==-1;)b=b.substr(0,d),d=b.lastIndexOf("."),c=h(b);return c}function j(a,b,c,d){a="symbol"==typeof a?a.toString():a;var e=g(a,b,d),f=i(a);return!!f&&(c===!0?e():setTimeout(e,0),!0)}var k={},l=-1,m="*";a.publish=function(b,c){return j(b,c,!1,a.immediateExceptions)},a.publishSync=function(b,c){return j(b,c,!0,a.immediateExceptions)},a.subscribe=function(a,b){if("function"!=typeof b)return!1;a="symbol"==typeof a?a.toString():a,Object.prototype.hasOwnProperty.call(k,a)||(k[a]={});var c="uid_"+String(++l);return k[a][c]=b,c},a.subscribeAll=function(b){return a.subscribe(m,b)},a.subscribeOnce=function(b,c){var d=a.subscribe(b,function(){a.unsubscribe(d),c.apply(this,arguments)});return a},a.clearAllSubscriptions=function(){k={}},a.clearSubscriptions=function(a){var b;for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&delete k[b]},a.countSubscriptions=function(a){var b,c=0;for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&c++;return c},a.getSubscriptions=function(a){var b,c=[];for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&c.push(b);return c},a.unsubscribe=function(b){var c,d,e,f=function(a){var b;for(b in k)if(Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a))return!0;return!1},g="string"==typeof b&&(Object.prototype.hasOwnProperty.call(k,b)||f(b)),h=!g&&"string"==typeof b,i="function"==typeof b,j=!1;if(g)return void a.clearSubscriptions(b);for(c in k)if(Object.prototype.hasOwnProperty.call(k,c)){if(d=k[c],h&&d[b]){delete d[b],j=b;break}if(i)for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&d[e]===b&&(delete d[e],j=!0)}return j}})}),a.registerDynamic("31",["30"],!0,function(a,b,c){this||self;c.exports=a("30")}),a.register("32",["31","33"],function(a){"use strict";function b(){B||(A=APP.templates.notification,B=document.querySelector(".notification"),D=B.querySelector(".loading-animation"),E=B.querySelector(".message-wrapper"),C=!1,jQuery(document).off("click keydown",".notification-overlay",m).on("click keydown",".notification-overlay",m),jQuery(document).off("click",".js-try-again",l).on("click",".js-try-again",l))}function c(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];clearTimeout(F),t(!0),B&&(o(),g(),h(a))}function d(a){jQuery("."+a).addClass("loader-animation"),jQuery("."+a).addClass("visible-loader-button")}function e(a){jQuery("."+a).removeClass("loader-animation"),jQuery("."+a).removeClass("visible-loader-button")}function f(a){y.text(a),setTimeout(function(){return y.fadeIn("slow")},500),setTimeout(function(){return y.fadeOut("slow")},5500)}function g(){TweenLite.to(B,.2,{autoAlpha:1,ease:window.Power2.easeInOut})}function h(a){jQuery(B).addClass("loader");var b=void 0;b=Drupal.settings.pathTheme?Drupal.settings.pathTheme+"/img/loader":document.querySelector(".login-block-wrapper").getAttribute("data-loaderpath");var c=Math.floor(6*Math.random()),d=".gif";D.style.backgroundImage="url("+b+"-"+c+d+")",TweenLite.set(D,{opacity:1}),a&&u()}function i(){jQuery(B).removeClass("loader"),TweenLite.to(D,.2,{opacity:0,ease:window.Power2.easeInOut})}function j(a){if(a.type&&B.setAttribute("data-type",a.type),a.extraclass&&jQuery(B).addClass(a.extraclass),clearTimeout(F),!a.message)throw new Error("showMessage: Cant show notification without content.");if(u(),a.inject)setTimeout(function(){E.innerHTML=a.message,g()},150);else{var b=x.render(A,a.message);a.messageVariables&&(b=x.render(b,a.messageVariables),b=x.render(b,{locale:Drupal.settings.hermes_url_locale})),a.showSpinner||i(),o(),E.innerHTML=b,g(),a.afterRender&&a.afterRender(),"critical"!==a.type&&"super-critical"!==a.type&&k(a.callback)}}function k(a){clearTimeout(F),F=setTimeout(function(){i(),n(),a&&"function"==typeof a&&a()},z)}function l(a){a.preventDefault(),n()}function m(a){a&&"super-critical"!==B.getAttribute("data-type")&&jQuery(".message-wrapper").html().length&&("click"===a.type||27===a.keyCode)&&n()}function n(){clearTimeout(F),B&&(TweenLite.to(B,.2,{autoAlpha:0,ease:window.Power2.easeInOut,onComplete:o}),v(),setTimeout(function(){t(!1)},200))}function o(){E&&(E.innerHTML="",D.style.backgroundImage="")}function p(){var a={message:Drupal.settings.hermes_translations.notification.incognitoError,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.incognitoError.variables),j(a)}function q(a){var b={message:Drupal.settings.hermes_translations.notification.account.errorMessage,messageVariables:{},type:"critical",afterRender:function(){a&&jQuery(".notification").find(".js-try-again").off("click.notification").on("click.notification",function(b){a(b)})}};jQuery.extend(b.messageVariables,Drupal.settings.hermes_translations.notification.account.errorMessage.variables),j(b);var c=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:c,message:b.message.description})}function r(){var a={message:Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific.variables),j(a);var b=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:b,message:a.message.description})}function s(){return C}function t(a){C=a}function u(){document.body.classList.add("body-noscroll")}function v(){document.body.classList.remove("body-noscroll")}var w,x,y,z,A,B,C,D,E,F;return{setters:[function(a){w=a.default},function(a){x=a.default}],execute:function(){y=jQuery("#cart-notification"),z=4e3,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||w,APP.pubsub.subscribe("app.start",b),a("init",b),a("noIncognito",p),a("showLoader",c),a("showLoaderButton",d),a("hideLoaderButton",e),a("showCartNotification",f),a("showMessage",j),a("clearNotification",k),a("hideOverlay",n),a("technicalError",q),a("isLocked",s),a("setLock",t),a("technicalErrorSpecific",r)}}}),a.register("34",["12","13"],function(a){function b(){if(!e)return"en";var a=e.location.pathname.match("/[a-z]{2}/([a-z]{2})/");if(a&&a[1])return a[1];if(e.location.search&&window.URLSearchParams){var b=new window.URLSearchParams(e.location.search),c=b.get("locale");if(!c)return"en";if(c=c.split("_"),c[1])return c[1]}return"en"}var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=window&&"undefined"==typeof window.document?0:window.document,f={map:{API_KEY:"gme-hermesinternational",URL:"https://maps.googleapis.com/maps/api/js?client=gme-hermesinternational&libraries=places",pins:{store:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",size:{x:22,y:29},anchor:{x:11,y:29}},clickedStore:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojOWE5YTlhO30uc3Qxe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExLjIsMEM1LDAsMCw1LDAsMTEuMmMwLDIuNiwwLjgsNSwyLjQsN2w3LjIsOWwxLjYsMmwxLjYtMmw1LjgtNy40bDEuMi0xLjZjMS42LTIsMi40LTQuNCwyLjQtN0MyMi4yLDUsMTcuMiwwLDExLjIsMHoiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4KPC9zdmc+",size:{x:22,y:29},anchor:{x:11,y:29}},user:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABQCAMAAABVumeJAAAAYFBMVEVMaXHpj4fibWTojYXaTEHeWU7rnpfso53vsa3eX1TURDjicmjkeG/kfnXmhHvXPzHYQjbdTUHSOCvZRTjfUEXdSD7hVEjbRzrhV0xuNC/FRjyCODK2QjhyNjFqMi6UPDSgygjXAAAAD3RSTlMAXLV37+JEKhHN+p6MhaGQa3UDAAACi0lEQVR4AY3Th46sMAyFYVPS6IQ6/f3f8lqxljmKGG7+LWqfjswUijNZkzulXN5khi4zrdvnMbQs46ga85vW+zyv6xwauW1bcn1KbbOvkmCZH5bansy6dd2Fz6CZKx1brZie4mUqs8iWu3SCt2lATUbtF3ibRrjEuvWwZ3gbSnPgbt6vlrk+/7PZChZeOsBTX8ARl1cw/jukmL92/4Wnvg7DKh4+xTKdzUBhOMJydT6v0jHM/0bmYANWlgybPfyEmI7Pz+PxeY4zDHPDZEjPog57f9xCjydiuaMdkbJ93V6h2+0p9sA55SMLkdxaiRV9h2HGjhxjKQx/xIbeHxyeBkVqxsYXdHvdF7BDGeH7C3s/r/B6v8HuTfAEeIQjYJk1YraM3TJ+myvY5e443CvKtxH18WowfX/AMnbUAubkdWYbhhc4Yuhr0ngG92Qtu+HiCXBGtgS9cPfHO/SI7WCI8okFtsmnrlqEBisnE2WAD78t8AoL9gVjq1AHJEXD8o0thsOJRCqW8zVxMo0stjDM0/12QSXfkGTVEFO0MmxJogwwSLC+oKO8R4lW8o6+mXIAE8/yjyao6E+p4D48HeT6iKJVFikeElNOo5RDUKL1HbDjEHCHHOAIyGwRDa8DD+MRcEg0G/I1nWUda6BycGnpNN33IGXbZ/Sj3AMU6+hXugJ5MSx1ngHanH5nKqScpotymb68GF+QpIslB9PyGl+UIW7pOouPaK6tPCI+XuIdvvgvtuUfrviKlDsSrpAKH6j3bQI2lZc0JeTEKkqpEVwnYS04S8K29Jy8cIlHK0qrlZPT0uknyyvdG0pMefncJ5V7n1NqhXwwkp8wS8bGe5OMbVXZdFyW6Zico7P+AbjAlYsTQvYhAAAAAElFTkSuQmCC",size:{x:44,y:80},scaled:{x:22,y:40},anchor:{x:11,y:40}},HERMES_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgLTEgMjcgMzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI2LjkyMiAxMy42MThDMjYuOTIyIDYuMDk4IDIwLjg5NSAwIDEzLjQ2MiAwIDYuMDI3IDAgMCA2LjEgMCAxMy42MThjMCAzLjIxOCAxLjEwMyA2LjE3NCAyLjk1IDguNTA1aC0uMDA0YzMuNDc3IDQuMzkyIDguMzg4IDEwLjYwMiA5Ljk4NSAxMi42MjMuMTM1LjE2LjMyNi4yNTQuNTMyLjI1NC4yMDQgMCAuMzk1LS4wOTMuNTMtLjI1NGw5Ljk4LTEyLjYxN2MuMDAzIDAgLjAwMy0uMDA0LjAwMy0uMDA0bC0uMDAzLS4wMDNjMS44NDUtMi4zMyAyLjk1LTUuMjg3IDIuOTUtOC41MDUiIGZpbGw9IiM0NDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMTBoNC4wMDZ2MS40MjJoLTEuMjZ2Mi40MzJoNC41MDZ2LTIuNDMyaC0xLjI2OFYxMEgxOXYxLjQyMmgtMS4yOHY3LjE2SDE5VjIwaC00LjAxNnYtMS40MTdoMS4yNjh2LTMuMzJsLTQuNTA2LS4wMDJ2My4zMjNoMS4yNlYyMEg5di0xLjQxN2gxLjI3N3YtNy4xNkg5Ii8+PC9zdmc+",cluster:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyOSI+PHN0eWxlPi5zdDB7ZmlsbDojNDQ0NDQ0O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yIDBDNSAwIDAgNSAwIDExLjJjMCAyLjYuOCA1IDIuNCA3bDcuMiA5IDEuNiAyIDEuNi0yIDUuOC03LjQgMS4yLTEuNmMxLjYtMiAyLjQtNC40IDIuNC03IDAtNi4yLTUtMTEuMi0xMS0xMS4yeiIvPjwvc3ZnPg=="
}}}},g={baidu:{map:{pins:f.map.pins,API_KEY:"",URL:""}},google:f,hermes:{store:{languages:{fr:"fre-FR",en:"eng-GB",de:"ger-DE",es:"esl-ES",zh:"chi-CN",it:"ita-IT",ja:"jpn-JP",ko:"kor-KR"},language:b(),URL:"/sites/all/modules/custom/hermes_store_locator/includes/stores.json",ACCESS_TOKEN:"$/+8KDDU334$4a<C2M(6/<bhGyneX.e8i:6?&[57#n3h8=}z?*5Kc4W62;$BMLS#?P2Q7_PD~zxLK4x4_nPa8^HQ5H@4yMBLWev7y9iw754/k,biG6VxT33;tvg=}bcV"},paging:{pagesize:8,productLocatorPageSize:5}},iplocator:{url:"https://freegeoip.net/json/1.1.16.23"},locations:{initial:{location:{lat:0,lng:0},zoom:1}},hermesPath:{customThemeJs:e.location.origin+"/sites/all/themes/custom/hermes/js"}},h=function(){function a(){d(this,a)}return c(a,null,[{key:"currentMapEngine",value:function(){return e&&new RegExp(/(hermes)*cn\//).test(e.location.href)?a.mapenginetype.BAIDU:a.mapenginetype.GOOGLE}},{key:"mapenginetype",get:function(){return{GOOGLE:"mapengine-google",BAIDU:"mapengine-baidu"}}},{key:"google",get:function(){return g.google}},{key:"baidu",get:function(){return g.baidu.map.API_KEY=Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,g.baidu.map.URL="https://api.map.baidu.com/api?v=2.0&ak="+Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,g.baidu}},{key:"mapengine",get:function(){return a.currentMapEngine()===a.mapenginetype.GOOGLE?a.google:a.currentMapEngine()===a.mapenginetype.BAIDU?a.baidu:void 0}},{key:"hermes",get:function(){return g.hermes}},{key:"locations",get:function(){return g.locations}},{key:"hermesPath",get:function(){return g.hermesPath}}]),a}(),a("default",h)}}}),a.register("26",["12","13","17","32","34","e"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(){c(this,a)}return b(a,null,[{key:"forceClearList",value:function(){var a=document.getElementById("no-store-close-msg"),b=document.getElementById("stores-found-msg"),c=document.getElementById("product-locator-map-error-msg"),d=document.getElementById("list-store"),e=document.getElementById("pl-concessionary-disclaimer-msg");a&&(a.style.display="none"),b&&(b.innerHTML=""),c&&(c.innerHTML=""),d&&d.hasChildNodes()&&d.removeAllChildren(),e&&(e.innerHTML="")}},{key:"enableDisablePLButton",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0],b=jQuery("#tray-product-locator input#btfind");b&&b.length>0&&(a?(b.attr("disabled","disabled"),b.addClass("disabled")):(b.removeAttr("disabled"),b.removeClass("disabled")))}},{key:"productLocatorScript",value:function(b,c){var d=arguments.length<=2||void 0===arguments[2]?null:arguments[2];a.enableDisableFindInStoreLoader(),APP.productLocatorMapLoaded===!0?c(b,d):jQuery.getScript(f.hermesPath.customThemeJs+"/page-product-store-locator.js").done(function(){var a=0,e=setInterval(function(){a++,APP.productLocatorMapLoaded===!0?(c(b,d),clearInterval(e)):15===a&&clearInterval(e)},200)})}},{key:"initTrayConfigurator",value:function(){var a=Drupal.settings.hermes_products.data;return APP.trayController.triggerTray({name:"tray-configurator",dontAdd:!0,products:a?a.products:void 0,sku:a&&a.default_variant?a.default_variant.sku:void 0,attributes:a&&a.attributes?a.attributes:void 0,isAppleWatchKit:a&&a.products&&a.products.length&&a.products[0].set_type===d.KIT_APPLEWATCH})}},{key:"refreshStockHComAvailability",value:function(a){if(a){null===Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts=a);for(var b in Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts)a.hasOwnProperty(b)&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b]=a[b]),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b].hasOwnProperty("in_stock")&&Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b].in_stock&&(Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock=!0)}}},{key:"setProductAttributes",value:function(){if((!Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")||null===Drupal.settings.hermes_products.data.products_attributes||!Drupal.settings.hermes_products.data.products_attributes)&&Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")){Drupal.settings.hermes_products.data.products_attributes={};for(var a=0;a<Drupal.settings.hermes_products.data.products.length;a++)Drupal.settings.hermes_products.data.products[a]&&Drupal.settings.hermes_products.data.products[a].hasOwnProperty("sku")&&Drupal.settings.hermes_products.data.products[a].hasOwnProperty("attributes")&&(Drupal.settings.hermes_products.data.products_attributes[Drupal.settings.hermes_products.data.products[a].sku]=Drupal.settings.hermes_products.data.products[a].attributes)}}},{key:"getCurrentProductVariation",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=g(this.getAllProducts());!(a=(d=e.next()).done);a=!0){var f=d.value;if(f.sku&&f.sku===this.getSelectedSku())return f}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return{}}},{key:"setAllProducts",value:function(){Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")&&!Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&(Drupal.settings.hermes_products.data.all_products=Drupal.settings.hermes_products.data.products)}},{key:"getAllProducts",value:function(){return Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products}},{key:"refreshStockRetailPresentability",value:function(a,b){if(a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("presentabilities")){var c=a.data.presentabilities;Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts={};for(var d=0;d<b.length;d++){for(var e=!1,f=0;f<c.length;f++)if(c[f].hasOwnProperty("sku")&&c[f].hasOwnProperty("presentability")&&c[f].sku===b[d]){e=c[f].presentability;break}e&&(Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock=!0),Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts[b[d]]={has_stock_retail:e}}}}},{key:"getSelectedSku",value:function(){return Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null}},{key:"checkIfAllSizeAreDisabled",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=!0;for(var c=0;c<b.length;c++)if(b[c]&&!b[c].disabled){a=!1;break}}return a}},{key:"typeOfListedSize",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=[];for(var c=0;c<b.length;c++)if(b[c]){if(b[c].checked)return null;var d=b[c].getAttribute("stock-type");switch(!0){case d===this.noStockKey&&!a.includes(this.noStockKey):a.push(this.noStockKey);break;case d===this.retailOnlyKey&&!a.includes(this.retailOnlyKey):a.push(this.retailOnlyKey);break;case d===this.hComOnlyKey&&!a.includes(this.hComOnlyKey):a.push(this.hComOnlyKey);break;case d===this.hComAndRetailKey&&!a.includes(this.hComAndRetailKey):a.push(this.hComAndRetailKey)}}}return this.sizeTypes(a)}},{key:"sizeTypes",value:function(a){return a&&0!==a.length?a.includes(this.hComAndRetailKey)||a.includes(this.hComOnlyKey)&&a.includes(this.retailOnlyKey)?this.hComAndRetailKey:a.includes(this.retailOnlyKey)?this.retailOnlyKey:a.includes(this.hComOnlyKey)?this.hComOnlyKey:1===a.length&&a.includes(this.noStockKey)?this.noStockKey:null:null}},{key:"enableDisableFindInStoreLoader",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];if(!a)return e.hideOverlay(),void e.hideLoaderButton("loader-button-find-in-store");var b=document.querySelectorAll(".product-locator-container-button.fis-as-a-button .loader-button-find-in-store");if(b.length)return void e.showLoaderButton("loader-button-find-in-store");var c=document.querySelectorAll(".product-locator-container-button.fis-as-a-link .loader-button-find-in-store");c.length&&e.showLoader()}},{key:"refreshAllButtons",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=this.getSelectedSku();if(b&&!a){var c=this.isAvailableStockHCom(b),d=this.isAvailableStockRetail(b),e=document.getElementsByClassName("product-locator-container-button"),f=document.querySelectorAll(".product-locator-container-button button"),g=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.enableAllAttributesButtons();var h=this,i=null;setTimeout(function(){switch(i=h.typeOfListedSize(),!0){case!c&&!d&&null===i||i===h.noStockKey:h.hasNotHcomNotStockRetail(e,f,g);break;case c&&d||i===h.hComAndRetailKey:h.hasHcomStockRetail(e,f,g);break;case!c&&d||i===h.retailOnlyKey:h.hasNotHcomStockRetail(e,f,g);break;case c&&!d||i===h.hComOnlyKey:h.hasHcomNotStockRetail(e,f,g)}},50)}}},{key:"disableAllButtons",value:function(){var a=document.getElementsByClassName("product-locator-container-button"),b=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.addClassToMultiElements(a,"add",["hidden"]),this.addClassToMultiElements(a,"remove",["fis-as-a-link","fis-as-a-button"]),this.addClassToMultiElements(b,"add",["show","button-full-opacity"]),this.addClassToMultiElements(b,"remove",["hidden"]),e.showLoaderButton("loader-button-add-to-cart")}},{key:"enableDisableCartButtons",value:function(a,b){if(a){switch(b){case!0:document.body.classList.add("in-stock");break;case!1:document.body.classList.remove("in-stock")}for(var c=0;c<a.length;c++)a[c].setAttribute("aria-disabled",(!!b).toString())}}},{key:"hasNotHcomNotStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.noStockKey),this.showHideStockOnlyMessage(),this.enableDisableCartButtons(c,!1),e.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(a,"add",["hidden"])}},{key:"hasNotHcomStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.retailOnlyKey),this.showHideStockOnlyMessage("show"),this.addClassToMultiElements(a,"add",["fis-as-a-button","show"]),this.addClassToMultiElements(a,"remove",["fis-as-a-link","hidden"]),this.addClassToMultiElements(b,"add",["button"]),this.addClassToMultiElements(b,"remove",["product-attribute-item"]),this.addClassToMultiElements(c,"add",["hidden"]),this.addClassToMultiElements(c,"remove",["button-full-opacity"]),e.showLoaderButton("loader-button-add-to-cart"),this.enableDisableCartButtons(c,!1)}},{key:"hasHcomNotStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.hComOnlyKey),this.showHideStockOnlyMessage(),e.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(a,"add",["hidden"]),this.enableDisableCartButtons(c,!0)}},{key:"hasHcomStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.hComAndRetailKey),this.showHideStockOnlyMessage(),this.addClassToMultiElements(b,"remove",["button"]),this.addClassToMultiElements(b,"add",["product-attribute-item"]),this.addClassToMultiElements(a,"remove",["fis-as-a-button","hidden"]),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),e.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(a,"add",["fis-as-a-link","show"]),this.enableDisableCartButtons(c,!0)}},{key:"isSizeVariationIsSelected",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=!1;for(var c=0;c<b.length;c++)if(b[c].checked){a=!0;break}}return a}},{key:"setAccessibilityMessageToSelectedAttribute",value:function(a){if(this.isSizeVariationIsSelected()!==!1){var b=document.querySelectorAll('.product-attributes button.tray-trigger[aria-controls="panel-configurator"]'),c="aria-label",d=",";if(b&&b.length>0)for(var e=0;e<b.length;e++){var f=this.removePresentabilityAccessibilityMessage(b[e].getAttribute(c),d);switch(a){case this.hComOnlyKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case this.retailOnlyKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case this.hComAndRetailKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}}},{key:"removePresentabilityAccessibilityMessage",value:function(a,b){return"string"!=typeof a||","!==b?a:(a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly),""),a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly),""),a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail),""))}},{key:"stringRegularExpression",value:function(a){return"string"!=typeof a?null:new RegExp(a,"g")}},{key:"setAccessibilityMessageToVariation",value:function(a,b,c){if(a&&a.length>0&&2===this.productLocatorVersion())for(var d=0;d<a.length;d++)if(a[d]){var e=a[d].parent("li").find("span.accessibility-availability-type-message");switch(!0){case!b&&!c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.noStock);break;case!b&&c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case b&&!c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case b&&c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}},{key:"showHideStockOnlyMessage",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"hide":arguments[0],b=document.querySelectorAll(".product-locator-container-button .only-retail-stock-message");0!==b.length&&b.forEach(function(b){b&&(b.innerHTML="show"===a?Drupal.settings.hermes_translations.storeLocator.productLocator.stockRetailOnlyMessage:"")})}},{key:"addClassToMultiElements",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(a&&("add"===b||"remove"===b))for(var d=0;d<a.length;d++)for(var e=0;e<c.length;e++)a[d].classList[b](c[e])}},{key:"enableAllAttributesButtons",value:function(){for(var a=document.querySelectorAll(".product-attributes button"),b=0;b<a.length;b++)a[b].removeAttribute("disabled"),a[b].classList.remove("disabled")}},{key:"isProductLocatorActive",value:function(){return!!Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("active")&&!!Drupal.settings.product_locator_configuration.active}},{key:"productLocatorVersion",value:function(){return this.isProductLocatorActive()&&Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("version")?Drupal.settings.product_locator_configuration.version:null}},{key:"productLocatorStockRetailWS",value:function(){return Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("stockRetailWebservice")?Drupal.settings.product_locator_configuration.stockRetailWebservice:null}},{key:"forceActivatingPL",value:function(){Drupal.settings.product_locator_configuration.active=!0}},{key:"isProductExcluded",value:function(){if(Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("excludedDeptCodes")){var a="";return Drupal.settings.hermes_products.data.products&&Drupal.settings.hermes_products.data.products.hasOwnProperty(0)&&Drupal.settings.hermes_products.data.products[0].department_code&&(a=Drupal.settings.hermes_products.data.products[0].department_code),!(Drupal.settings.product_locator_configuration.excludedDeptCodes.split(/[ ,]+/).filter(Boolean).indexOf(a)===-1)}return!1}},{key:"isAvailableStockRetail",value:function(a){if(Drupal.settings.hermes_products&&Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.retailPresentability&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock){var b=Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts;for(var c in b)if(c.replace(/\s/g,"")===a.replace(/\s/g,"")&&b[c].has_stock_retail)return!0}return!1}},{key:"isAvailableStockHCom",value:function(a){if(Drupal.settings.hermes_products.stock_status.hComAvailability&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock){var b=Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts;for(var c in b)if(c.replace(/\s/g,"")===a.replace(/\s/g,"")&&b[c].in_stock)return!0}return!1}},{key:"hasRetailStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("retailPresentability")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock}},{key:"hasHcomStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("hComAvailability")&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock}},{key:"hasStockRetailOnly",value:function(b){var c=this,d=0;return b.forEach(function(b){b&&c.isAvailableStockRetail(b)&&!a.isAvailableStockHCom(b)&&d++}),d===b.length&&b.length>0}},{key:"enableSlashedSize",value:function(a){a&&(a.attr("disabled",!1),a.parent("li").find("span.name").addClass("slashed-size"))}},{key:"disableSlashedSize",value:function(a){a&&a.parent("li").find("span.name").removeClass("slashed-size")}},{key:"setStockTypeAttr",value:function(a,b,c,d){if(c&&d&&1!==this.productLocatorVersion())switch(!0){case!a&&!b:c.attr(this.stockTypeKey,this.noStockKey),d.attr(this.stockTypeKey,this.noStockKey);break;case!!a&&!b:c.attr(this.stockTypeKey,this.hComOnlyKey),d.attr(this.stockTypeKey,this.hComOnlyKey);break;case!a&&!!b:c.attr(this.stockTypeKey,this.retailOnlyKey),d.attr(this.stockTypeKey,this.retailOnlyKey);break;case!!a&&!!b:c.attr(this.stockTypeKey,this.hComAndRetailKey),d.attr(this.stockTypeKey,this.hComAndRetailKey)}}},{key:"removeSlashInAllSize",value:function(a){if(a)for(var b=0;b<a.length;b++)this.disableSlashedSize(jQuery(a[b]))}},{key:"hasAnyStock",value:function(a){return this.isAvailableStockHCom(a)||this.isAvailableStockRetail(a)}},{key:"setSelectedSku",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0],b=Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null;b=a||b?a:Drupal.settings.hermes_products.data.default_variant.sku?Drupal.settings.hermes_products.data.default_variant.sku:null,Drupal.settings.hermes_products.data.selected_sku=b}},{key:"productColorId",value:function(a){if(Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes"))for(var b in Drupal.settings.hermes_products.data.products_attributes){var c=Drupal.settings.hermes_products.data.products_attributes;if(a===b&&c[b].hasOwnProperty("field_color_hermes")&&c[b].field_color_hermes.hasOwnProperty("id"))return c[b].field_color_hermes.id}return null}},{key:"isProductLocatorConfigurationInitialized",value:function(){return!!Drupal.settings.product_locator_configuration}},{key:"isConfiguratorIsLoaded",value:function(){return!!Drupal.settings.product_locator_configuration&&!!Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded}},{key:"setConfiguratorIsLoaded",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded=a}},{key:"stringBase64Encode",value:function(a){return window.btoa(unescape(encodeURIComponent(a)))}},{key:"stringBase64Decode",value:function(a){return decodeURIComponent(escape(window.atob(a)))}},{key:"checkIfRetailPresentabilityIsNull",value:function(){return!!Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("stock_status")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasOwnProperty("stockProducts")&&null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts}},{key:"formatProductPrice",value:function(b){if(!b||!b.price)return null;var c=b.price;if(b.hasOwnProperty("price_without_currency")&&Drupal.settings.hasOwnProperty("hermes_locale")&&Drupal.settings.hasOwnProperty("currency_parameters")&&a.countryListForcedToInverseCurrency.includes(Drupal.settings.hermes_locale)){var d=Drupal.settings.currency_parameters;c=d.hasOwnProperty("symbol_after")?d.symbol_after:"",c+=d.hasOwnProperty("code_spacer")?d.code_spacer:"",c+=d.hasOwnProperty("code_after")?d.code_after:"",c+=d.hasOwnProperty("symbol_spacer")?d.symbol_spacer:"",c+=b.price_without_currency,c+=d.hasOwnProperty("symbol_spacer")?d.symbol_spacer:"",c+=d.hasOwnProperty("code_before")?d.code_before:"",c+=d.hasOwnProperty("code_spacer")?d.code_spacer:"",c+=d.hasOwnProperty("negative")?d.negative:"",c+=d.hasOwnProperty("symbol_before")?d.symbol_before:"",c=c.replace(/  +/g," ")}return c}},{key:"countryListForcedToInverseCurrency",get:function(){return["it_it","fi_en","ie_en","lu_fr","at_de","nl_en"]}},{key:"hComOnlyKey",get:function(){return"hComOnly"}},{key:"retailOnlyKey",get:function(){return"retailOnly"}},{key:"hComAndRetailKey",get:function(){return"hComAndRetail"}},{key:"noStockKey",get:function(){return"noStock"}},{key:"stockTypeKey",get:function(){return"stock-type"}}]),a}(),a("ProductLocatorTools",h)}}}),a.register("35",["12","13","17","26"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.ProductLocatorTools}],execute:function(){"use strict";f=function(){function a(){c(this,a)}return b(a,null,[{key:"getProductType",value:function(a){var b=void 0;return b=a.hasOwnProperty("set_items")?"complex":"simple"}},{key:"mapProducts",value:function(a){var b=[],c=this;return a.map(function(a,d){var e=c.getProductType(a);switch(e){case"simple":b[d]=c.mapProductSimpleOrComplex(a,!1);break;case"complex":b[d]=c.mapProductSimpleOrComplex(a,!0)}}),b}},{key:"mapProductSimpleOrComplex",value:function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],c=this,d={};return d=c.getCommonAttributes(0,d,a,b),d=b?c.getComplexProduct(d,a):c.getSimpleProduct(d,a),d=c.getCommonAttributes(1,d,a,b)}},{key:"getCommonAttributes",value:function(a,b,c){!(arguments.length<=3||void 0===arguments[3])&&arguments[3];switch(a){case 0:c.name&&(b.name=c.name),c.unit_price&&(b.price=parseFloat(c.unit_price).toFixed(2)),b.brand=d.BRAND,c.qty&&(b.quantity=c.qty);break;case 1:b.dimension37=c.stock,b.dimension52=c.dku?"yes":"no",b.in_store_only=String(e.hasStockRetailOnly([c.sku]))}return b}},{key:"getComplexProduct",value:function(a,b){var c=!(!b.options||!b.options.perso_info);return c?a.id=b.options.container_sku:b.sku&&(a.id=b.sku.replace(/-/g,"|")),b&&b.set_items&&(b.display_single_line?(a.category=b.set_items[0].department_code+"|"+b.set_items[1].department_code+"/"+b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.variant=b.set_items[0].color||b.set_items[1].color?b.set_items[0].color+"|"+b.set_items[1].color:"N/V",a.dimension5=""!==b.size?b.size:"N/A",a.dimension6=b.set_items[0].department_code+"|"+b.set_items[1].department_code,a.dimension7=b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.dimension8=b.set_items[0].product_code+"|"+b.set_items[1].product_code,a.dimension9=b.set_items[0].division_code+"|"+b.set_items[1].division_code):b.options&&b.options.container_type&&b.options.container_type.includes("BELTKIT")?(a.category=b.set_items[0].department_code+"|"+b.set_items[1].department_code+"/"+b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.variant=b.set_items[0].color||b.set_items[1].color?b.set_items[1].color+"|"+b.set_items[0].color:"N/A",a.dimension5=""+b.set_items[1].size,a.dimension6=b.set_items[0].department_code+"|"+b.set_items[1].department_code,a.dimension7=b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.dimension8=b.set_items[1].product_code+"|"+b.set_items[0].product_code,a.dimension9=b.set_items[0].division_code+"|"+b.set_items[1].division_code):c?(a.category=b.departmentCode+"/"+b.familyCode,a.variant=b.sku||"N/A",a.dimension5=""!==b.size?b.size:"N/A",a.dimension6=b.departmentCode,a.dimension7=b.familyCode,a.dimension8=b.productCode,a.dimension9=b.divisionCode):(a.category=b.set_items[0].department_code+"/"+b.set_items[0].family_code,a.variant=b.set_items.map(function(a){return a.sku}).join("|"),a.dimension5=b.set_items.length.toString(),a.dimension6=b.set_items[0].department_code,a.dimension7=b.set_items[0].family_code,a.dimension8=b.set_items.map(function(a){return a.product_code}).join("|"),a.dimension9=b.set_items.map(function(a){return a.division_code}).join("|"),a.dimension10=b.set_items.map(function(a){return a.sku}).join("|"))),a}},{key:"getSimpleProduct",value:function(a,b){return b.sku&&(a.id=b.sku),b.department_code&&b.family_code&&(a.category=b.department_code+"/"+b.family_code),b.color_code?a.variant=b.color_code:b.color?a.variant=b.color:a.variant=d.NONAPP,a.dimension5=b.size?b.size:d.NONAPP,b.department_code&&(a.dimension6=b.department_code),b.family_code&&(a.dimension7=b.family_code),b.product_code&&(a.dimension8=b.product_code),b.division_code&&(a.dimension9=b.division_code),a}}]),a}(),a("default",f)}}}),a.register("36",["12","13"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"helpLink",value:function(b,c,d){var e=arguments.length<=3||void 0===arguments[3]?null:arguments[3],f=e?e:jQuery(b.currentTarget).text().trim();a.pushEvent(c,d,f)}},{key:"pushEvent",value:function(a,b,c){dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b,eventlabel:c})}}]),a}(),a("default",d)}}}),a.register("37",["17","24","25","26","35","36","38","39"],function(a){function b(){"use strict";function a(a){var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=void 0,f=[],g=Drupal.settings.products_grid_analytics,h=Drupal.settings.hermes_products,i="object"==typeof h?h.data:void 0,k=b.getEnglishOrFrenchUrl(),l=c?"404 error cat | Hermès":document.title;db=b.getPageType(),hb=b.getDeviceType(),kb=b.getBuildVersion();var m={event:0===qb?"pageview":"impressions",pagename:l,pagetype:db,languagecode:j.get("currentLanguage"),countrycode:j.get("currentCountry"),mainstepindicator:ib,mainstepname:jb,buildVersion:kb,devicetype:hb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:k};if(b.getUser(tb,m),b.getUserAgent(m),b.getCategories(m,db),e=b.isSearchResult(m,db),h&&i)f=b.ProductPage(i,m),m.ecommerce={detail:{products:f}};else if(Drupal.settings.hermes_products){var n=b.ProductsGrid(e,m,g);if(m.category="ecommerce",m.action="impressions",m.ecommerce={impressions:n},b.getProductsAttribute(g,"department_code"))for(var o=0;o<dataLayer.length;o++)if("pageview"===dataLayer[o].event){dataLayer[o].departmentcode=b.getProductsAttribute(g,"department_code");break}}else m.pagetype=db;var p=j.get("analytics_payment_dsecure"),q=m.pagetype.includes(d.VALIDATE_3DS_PAGE);p&&q&&(m.d_secure=p),qb++,dataLayer.push(m)}function c(b,c){c&&a()}function f(){dataLayer.push({event:"uaevent",eventcategory:"Header",eventaction:"TopNavigationHead",eventlabel:"Account",virtualpageuri:vb+"/account",pagetype:"account"})}function g(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=arguments.length<=3||void 0===arguments[3]?"":arguments[3];dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b||"",eventlabel:c,eventvalue:d})}function l(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"":arguments[2];dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b||"",eventlabel:c})}function m(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Size_Guide"})}function n(a,b){var c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=arguments.length<=3||void 0===arguments[3]?"":arguments[3];dataLayer.push({event:a,eventcategory:b,eventaction:c,eventlabel:d})}function o(a,b,c,d){void 0===b&&(b=""),void 0===c&&(c=""),"Module_PracticalInfo"===a&&(c=""),dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b,eventlabel:c,blocktype:d.blocktype,isblockpushmerch:d.isblockpushmerch})}function p(a,b,c){var d={step:b.step||0,list:b.list||a.list};c&&delete d.step,a.department_code&&a.family_code?a.category=a.department_code+"/"+a.family_code:a.dimension6&&a.dimension7?a.category=a.dimension6+"/"+a.dimension7:a.category="unknown",dataLayer.push({event:"productClick",ecommerce:{currencyCode:APP.CURRENCY_MAP[j.get("currentStore")].code,click:{products:[a],actionField:d}}})}function q(a,b){var c=a.url;delete a.url,dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:b},products:[a]}},eventCallback:function(){document.location=c}})}function r(a){var c=h.mapProducts(a);b.getUser(tb,dataLayer),hb=b.getDeviceType(),kb=b.getBuildVersion(),ib="1",jb="cart","mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/cart/":"desktop"===hb&&(lb=vb+"/checkout/cart/"),dataLayer.push({event:d.CHECKOUT.toLowerCase(),pagename:d.CHECKOUT+" | Hermès",pagetype:d.CHECKOUT+" cart",mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,devicetype:hb,buildVersion:kb,languagecode:j.get("currentLanguage"),countrycode:j.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[j.get("currentStore")].code,checkout:{actionField:{step:1,option:"Cart",action:"checkout"},products:c}}})}function s(a,c){var d=h.mapProducts(c.items),e=b.getEnglishOrFrenchUrl();bb=d,bb&&(b.getUser(tb,dataLayer),eb=eb?"":dataLayer.clienttype,fb=fb?"":dataLayer.clientgender,db="Checkout delivery",hb=b.getDeviceType(),kb=b.getBuildVersion(),jb="delivery",ib="2","mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/shipping/":"desktop"===hb&&(lb=vb+"/checkout/multipage/shipping/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:e,devicetype:hb,buildVersion:kb,languagecode:j.get("currentLanguage"),countrycode:j.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[j.get("currentStore")].code,checkout:{actionField:{step:2,option:"Delivery",action:"checkout"},products:d}}}))}function t(a,b){l("Checkout_Payment","Fapiao_invoice",b)}function u(){dataLayer.push({event:"uaevent",eventcategory:"Order_Account",eventaction:"Efapiao"})}function v(){if(bb){var a=b.getEnglishOrFrenchUrl();b.getUser(tb,dataLayer),hb=b.getDeviceType(),kb=b.getBuildVersion(),ib="3",jb="payment",db="Checkout payment",j.get("shipping_method")&&(nb=j.get("shipping_method"));var c=Fa();ob=c.date&&c.time?"none"===c.date.value&&"none"===c.time.value?"no":"yes":"no",j.set("shipping_preference",ob),j.get("shipping_choice")?mb=j.get("shipping_choice"):(mb="Deliver",
j.set("shipping_choice",mb)),"mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/payment/":"desktop"===hb&&(lb=vb+"/checkout/multipage/payment/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:a,shipping_choice:mb,shipping_method:nb,shipping_preference:ob,devicetype:hb,buildVersion:kb,languagecode:j.get("currentLanguage"),countrycode:j.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[j.get("currentStore")].code,checkout:{actionField:{step:3,option:"Payment",action:"checkout"},products:bb}}})}}function w(a){if(a)return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function x(){pb=jQuery("body"),_a()}function y(){g("Header","Logo")}function z(){g("Header","TopNavigationHead","MenuBurger")}function A(){g("Account","my_account","my_orders")}function B(a,b){g("Account","my_orders",a,b)}function C(a,b,c){g("Account",a,b,c)}function D(){B("more")}function E(){var a=jQuery(this).parent().siblings().attr("data-order-id");a&&B("status_"+a)}function F(a){B("detail_"+a.return_type+"_"+a.order_id)}function G(a){B(a.mode+"_"+a.order_id,vb+"/account/"+a.mode)}function H(a){C(a.mode,"checkbox")}function I(a){C(a.mode,"continue")}function J(a){C(a.mode,"order_details",vb+"/account/"+a.mode+"/order_details")}function K(a){C(a.mode,"choice_delivery_"+a.delivery_type)}function L(a){C(a.mode,"proceed_"+a.id,vb+"/account/return_order_instuctions")}function M(a){C(a.mode,"return_print")}function N(a){C(a.mode,"order_details",vb+"/account/"+a.mode+"/"+a.mode+"_details")}function O(a){C(a.mode,"invoice_print")}function P(a,b){var c=void 0;"object"==typeof b&&(c=b.day+" "+b.time),B("PickUp_"+c,"ExchangeReturn","/exchangereturn/pickup/")}function Q(){B("SubmitExchangeButton","ExchangeReturn","/exchangereturn/pickup/")}function R(){dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/exchangereturn/submissionsuccess/",pagetype:"Manage Order"})}function S(a){var b="empty",c=void 0;void 0!==a?a.length>=1&&(c=cb,b="full"):void 0!==bb&&bb.length>=1&&(c=bb,b="full"),c&&c.length&&(dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/cart/",pagetype:"cart",cartstatus:b}),r(c))}function T(){var a=!!(tb&&tb.basket&&tb.basket.items&&tb.basket.items.length>0)&&tb.basket.items,b=!(!Drupal.settings.hermes_global||!Drupal.settings.hermes_global.cartPageAngular)&&Drupal.settings.hermes_global.cartPageAngular;g("Header","TopNavigationHead","ShoppingCart"),a&&!b&&r(a)}function U(){dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/checkoutlogin/",pagetype:"Log in"})}function V(a){var b=jQuery(a.currentTarget).attr("href").split("/"),c=a.currentTarget.dataset,d=b.length<2?c.trackCountry+"/"+c.trackLanguage:b[b.length-3]+"/"+b[b.length-2];switch(ab){case"header":g("Navigation","Country selector",d);break;case"footer":g("Footer",d)}}function W(){g("Header","FindAStore")}function X(){var a=jQuery(this).parent().parent().parent().parent()[0].className.split("-")[0];"header"===a&&i.pushEvent("Header","Help"),"footer"===a&&i.pushEvent("Services","Contact Us","Footer")}function Y(a){g("Footer","SocialNetworksIcons",a.currentTarget.querySelector("span").innerHTML)}function Z(a){g("Footer",jQuery(a.currentTarget).closest("ul").prev().html(),a.currentTarget.innerHTML.trim())}function $(){g(d.PRODUCTSIMPLEPAGELABEL,"Zoom")}function _(){ea("ContactUs",null)}function aa(){g(d.PRODUCTSIMPLEPAGELABEL,"Sticky_Header","Buy")}function ba(a){ea("Alternative_View",parseInt(a.currentTarget.dataset.index,10)+1)}function ca(){Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&"LOOK_SET"===Drupal.settings.hermes_products.data.configurator_type?g(d.LOOKPAGELABEL,"Menu_Burger"):g(d.PRODUCTSIMPLEPAGELABEL,"Menu_Burger")}function da(a){var b=a.currentTarget.querySelector(".name span")||a.currentTarget.querySelector(".name"),c=w(b.getAttribute("data-event-id")?b.getAttribute("data-event-id"):b.innerHTML);qb=0,fa(a);for(var d=0;d<wb.length;d++){var e=jQuery(a.currentTarget).closest("fieldset").attr("id");e&&e.indexOf(wb[d])>-1&&ea(w(wb[d])+"_Selector",c,a)}}function ea(a,b,c){var e=Drupal.settings.hermes_products.data.configurator_type;switch(e){case"LOOK_SET":g(d.LOOKPAGELABEL,a,b);break;case"BIKINI_SET":"configurator-field_ref_size_top"===c.delegateTarget.id&&g(d.PRODUCTDOUBLEPAGELABEL,a+"_Top",b),"configurator-field_ref_size_bot1"===c.delegateTarget.id&&g(d.PRODUCTDOUBLEPAGELABEL,a+"_Bottom",b);break;case"DOUBLE_PRODUCT":g(d.PRODUCTDOUBLEPAGELABEL,a,b);break;default:g(d.PRODUCTSIMPLEPAGELABEL,a,b)}}function fa(a){var b=Drupal.settings.hermes_products.data.configurator_type;switch(b){case"VARIANT_PRODUCT":Drupal.settings.hermes_products.data.default_variant.sku=a.currentTarget.dataset.sku;break;case"DOUBLE_PRODUCT":break;case"BIKINI_SET":"configurator-field_ref_size_top"===a.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[0]=a.currentTarget.dataset.sku),"configurator-field_ref_size_bot1"===a.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[1]=a.currentTarget.dataset.sku);break;case"LOOK_SET":var c=a.delegateTarget.id.replace(/^\D+/g,"")?a.delegateTarget.id.replace(/^\D+/g,""):"0";Drupal.settings.hermes_products.data.default_variant.sku[c]=a.currentTarget.dataset.sku;break;case"PERFUME_SET":}}function ga(){g("Cart","ContinueToCheckout")}function ha(a){g("Cart","ComplimentaryServices",a.currentTarget.getAttribute("href"))}function ia(){g("Cart","ContinueShopping")}function ja(b,c){a(b,c)}function ka(a){var b=jQuery(a.currentTarget).closest("[data-track-list]"),c=b.find("[data-product]"),d=a.currentTarget.dataset.product,e="",f=j.get("nav");if(Drupal.settings.hermes_products){"undefined"===f&&(f="direct");var g=jQuery.grep(Drupal.settings.hermes_products,function(a){return a.sku===d})[0];g&&(jQuery.extend(g,{list:b.data("track-list"),position:c.index(jQuery('[data-product="'+d+'"]'))+1,name:g.name||g.title,id:d,price:e,category:f}),delete g.title,delete g.sku,delete g.avg_color,delete g.raw_price,delete g.image,delete g.url,p(g,{step:1},!1))}}function la(a){var b=jQuery(a.currentTarget).closest("[data-track-cross-sales]"),c=b.data("track-cross-sales"),f=a.currentTarget.dataset.product,g=Drupal.settings.hermes_cross_sales_products[c].filter(function(a){return a.sku===f})[0];if(g){var h=g.attributes&&g.attributes.field_color_hermes&&g.attributes.field_color_hermes.name?g.attributes.field_color_hermes.name:d.NONAPP,i=g.real_price?e.unformat(g.real_price).toFixed(2):d.NONAPP,j={};j.name=g.name||g.title,j.id=f,j.price=i,j.category=g.department_code+"/"+g.family_code,j.variant=h,j.dimension5=g.ref_size?g.ref_size:d.SIZE_LESS,j.dimension6=g.department_code,j.dimension7=g.family_code,j.dimension8=g.product_code,j.dimension9=g.division_code,j.url=g.url,q(j,c)}}function ma(a){var b=jQuery(a.currentTarget).closest("[data-track-list]"),c=a.currentTarget.dataset.product,e=Drupal.settings.hermes_merchandising_pushes_products.data;if(e){var f=e.filter(function(a){return a}).find(function(a){return a.sku===c});if(f){var g={list:b.data("track-list")+"_"+rb},h={name:f.name||f.title,id:c,price:f.price,brand:d.BRAND,category:f.department_code+"/"+f.family_code,variant:d.NONAPP,dimension5:d.NONAPP,dimension6:f.department_code,dimension7:f.family_code,dimension8:f.product_code,dimension9:f.division_code};p(h,g,!0)}}}function na(a,b){rb=b}function oa(a){var b=jQuery(a.currentTarget),c="Collections",d=void 0;d=b.find("span span").length?b.find("span span").text().trim():b.text().trim(),g("Product_Grid",c,d)}function pa(a,c){var e=jQuery(c),f=e.attr("data-event-id")?e.attr("data-event-id"):e.text().trim(),h="true"===e.attr("aria-expanded"),i=b.getPageType(),j=void 0,k=void 0;i&&(i.includes(d.FAQ_PAGE)?(k="Faq_content",j=h?"Open_content":"Close_content"):(j=h?"openFilter":"closeFilter",i.includes(d.PRODUCT_PAGE)?k="SingleProductPage":i.includes(d.PRODUCT_GRID)&&(k="Product_Grid"))),g(k,j,f)}function qa(a,b){var c=jQuery(b),d=c.parents(".section").find("span:first").text(),e=sa(c);ub.includes(e)?ub.includes(e)&&c.prop("checked")===!0&&g("Product_Grid","Filters",d+"_"+e):(g("Product_Grid","Filters",d+"_"+e),ub.push(e))}function ra(){g("Product_Grid","Filters","Clear",null)}function sa(a){var b=a.attr("id"),c=b.split("-");return c=c[c.length-1]}function ta(a){g("Product_Grid","SortBy",jQuery(a.currentTarget).find("option:selected").text())}function ua(a,b){b.basket&&(bb=b.basket.items)}function va(a,b){b.basket&&b.basket.items&&(cb=b.basket.items,S(cb))}function wa(a){a.basket&&a.basket.items&&r(a.basket.items)}function xa(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"ViewCartButton"})}function ya(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"Close"})}function za(){g("Checkout_Delivery","Gifting","GiftBoxTicked")}function Aa(){g("Checkout_Delivery","Gifting","MessageAdded")}function Ba(){g("Checkout_Delivery","Gifting","PriceLess")}function Ca(a){var b=Da(a.currentTarget.value);l("Checkout_Delivery","DeliveryPreference",b)}function Da(a){if("none"===a)return"AnyDate";var b=new Date,c=new Date(a),d=c.getDate()-b.getDate();return"Day"+d}function Ea(a){var b=a.currentTarget.value,c={none:"All_Day","01":"morning",12:"12pm_2pm",14:"2pm_4pm",16:"4pm_6pm",18:"6pm_8pm",19:"7pm_9pm"};l("Checkout_Delivery","DeliverySchedule",c[b])}function Fa(){var a=document.getElementById("hermes-checkout-delivery-form"),b=a.querySelector("select#edit-sagawa-select-a-date"),c=a.querySelector("select#edit-sagawa-select-a-time");return{date:b,time:c}}function Ga(a){"deliver"===a.currentTarget.value?j.set("shipping_choice","Deliver"):"pickup"===a.currentTarget.value&&j.set("shipping_choice","Collect in store")}function Ha(a){g("Checkout_Delivery","shipping_method",a.currentTarget.value)}function Ia(a){dataLayer.push({event:"uaevent",eventcategory:"EditoPage",eventaction:"edito push link",eventlabel:a.innerText})}function Ja(a,b,c){var d=c||jQuery(a).closest(".block-wrapper").find(".editorial-block-title").text(),e=jQuery(a).text(),f=Ka(a,b);o(b,d,e,f)}function Ka(a,b){var c={},d=Ma(b)||"",e="Mershandising_Pushes"===d?"yes":"no";return c.blocktype=d,c.isblockpushmerch=e,c}function La(a){if(jQuery(a).attr("href").indexOf("www.google.fr/maps")>-1){var b=jQuery(a).text()||"";Ja(a,"Module_PracticalInfo",b)}}function Ma(a){var b={Module_TextBlocks:"Text_Blocks",Module_EditorialPushes:"Editorial_Pushes",Module_MershandisingPushes:"Mershandising_Pushes",Module_ImagesGalleries:"Images_Galleries",Module_CarouselPushes:"Carrousel_Push",Module_PracticalInfo:"Practical_Info"},c=k(b).map(function(c){if(a===c)return b[c]});return c.find(function(a){return a})}function Na(){g("Checkout_Payment","Breadcrumb","PreviousStep")}function Oa(a){var b=jQuery(a).hasClass("paypal")?"payWithPayPal":"payWithCard";g("Checkout_Payment","PaymentMethod",b)}function Pa(){jQuery(document).ready(a)}function Qa(a,c){var e=h.mapProducts(c.items),f=b.getEnglishOrFrenchUrl();e.forEach(function(a){return a.dimension58=c.apple_pay_widget?"yes":"no"}),db=d.CHECKOUT_CONFIRMATION,hb=b.getDeviceType(),kb=b.getBuildVersion(),ib=4,jb="confirmation";var g="NO";c.subscribed&&(g="YES"),"mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/review/":"desktop"===hb&&(lb=vb+"/checkout/multipage/review/"),mb=j.get("shipping_choice"),nb=j.get("shipping_method"),ob=j.get("shipping_preference");var i=b.getPaymentMethod(),k={event:"transaction",newsletter_optin:g,pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:f,shipping_choice:mb,shipping_method:nb,shipping_preference:ob,devicetype:hb,paymentMethod:i,d_secure:j.get("analytics_payment_dsecure"),buildVersion:kb,languagecode:j.get("currentLanguage"),countrycode:j.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[j.get("currentStore")].code,purchase:{actionField:{id:c.increment_id,revenue:c.subtotal,tax:c.tax_amount,shipping:c.shipping_amount},products:e}}};b.getUser(tb,k),(""===k.clienttype||void 0===k.clientgender&&void 0===k.userId)&&(k.userId=c.customer_id,k.clientgender=c.prefix,k.clienttype=b.getUserType(c.user_type)),c.fapiao_invoice&&(k.fapiao_invoice=c.fapiao_invoice),dataLayer.push(k)}function Ra(a,b){b.basket&&b.basket.shipping_method&&j.set("shipping_method",b.basket.shipping_method)}function Sa(a,b){var c=b.id_;switch(a){case"Autoplay":n("nonintuaevent",d.MODULE_VIDEO,a,c);break;case"Progress":n("uaevent",d.MODULE_VIDEO,b.currentPercent,c);break;default:n("uaevent",d.MODULE_VIDEO,a,c)}}function Ta(a){var b=a.currentTarget.firstChild.data;Ja(a.currentTarget,"Module_EditorialPushes",b)}function Ua(a,b){var c=b.attr("data-track-category-highlight-position"),d=a.find(".category-highlight-title"),e=d.text(),f=jQuery.trim(e),g="Module_CategoryHighlight";Drupal.settings.hermes_master_page&&(g="Module_Masterpage"),dataLayer.push({event:"uaevent",eventcategory:g,eventaction:c+" | "+f,eventlabel:a.attr("href")})}function Va(a){var b=jQuery(a.currentTarget).parents(".search-suggestion").find("span").not(".sr-only").toArray(),c=b.map(function(a,b){return{el:a,id:b}}),d=c.find(function(b){return b.el===a.currentTarget.children[0]});if(j.set("nav","search"),!d)return void console.warn("Suggestion link clicked not found!");var e=d.id,f=jQuery(".field-search").val(),h=a.currentTarget.innerText.split("\n")[0];g("Search","Search suggest list",f+":"+h,e)}function Wa(a,b){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Product Locator",eventlabel:b.sku})}function Xa(a,b){dataLayer.push({event:"uaevent",eventcategory:"error message",eventaction:b.path,eventlabel:b.message})}function Ya(a,b){var c="Geobanner",d=void 0,e=void 0,f=void 0;switch(a){case"geoFilteringBanner.view":d="nonintuaevent",e="View",f=b;break;case"geoFilteringBanner.stayCountry":d="uaevent",e="Click",f="Stay"+b;break;case"geoFilteringBanner.switchCountry":d="uaevent",e="Click",f="SwitchCountry";break;case"geoFilteringBanner.close":d="uaevent",e="Click",f="Close";break;default:return}dataLayer.push({event:d,eventcategory:c,eventaction:e,eventlabel:f})}function Za(a,b){dataLayer.push({event:"uaevent",eventcategory:"Store Locator",eventaction:"Map view click marker",eventlabel:b})}function $a(a){dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"Prefooter",eventlabel:a})}function _a(){jQuery(document).ready(function(){var c=b.getPageType();c&&c.includes(d.PRODUCT_PAGE)&&!function(){var b={stock:!1},c=!1,d=!1;jQuery(document).ajaxComplete(function(e,f,g){var h=g.url.search("stock")!==-1;h&&Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&(Drupal.settings.hermes_products.data.belts=f.responseJSON),b.stock=h&&("PERFUME_SET"!==Drupal.settings.hermes_products.data.configurator_type||c)||b.stock,c=h&&"PERFUME_SET"===Drupal.settings.hermes_products.data.configurator_type,jQuery("button").click(function(){jQuery(this).is("[data-bind]")&&(d=!0)}),b.stock&&!d&&0===sb&&(sb++,jQuery(document).ready(a))})}(),!c||c.includes(d.VALIDATE_3DS_PAGE)||c.includes(d.PRODUCT_PAGE)||jQuery(document).ready(a)}),APP.pubsub.subscribe("configurator.change",c),APP.pubsub.subscribe("geoFilteringBanner.view",Ya),APP.pubsub.subscribe("geoFilteringBanner.stayCountry",Ya),APP.pubsub.subscribe("geoFilteringBanner.switchCountry",Ya),APP.pubsub.subscribe("geoFilteringBanner.close",Ya),APP.pubsub.subscribe("analytics.payment.dsecure",Pa),APP.pubsub.subscribe("gtm.basket",ua),APP.pubsub.subscribe("gtm.openCart",wa),APP.pubsub.subscribe("analytics.grid",ja),APP.pubsub.subscribe("analytics.delivery",s),APP.pubsub.subscribe("cart.update",Ra),APP.pubsub.subscribe("analytics.payment",v),APP.pubsub.subscribe("analytics.confirmation",Qa),APP.pubsub.subscribe("tray.checkout",U),APP.pubsub.subscribe("timeslot.selected",P),APP.pubsub.subscribe("analytics.exchange.submit",Q),APP.pubsub.subscribe("analytics.exchange.success",R),APP.pubsub.subscribe("Pause",Sa),APP.pubsub.subscribe("FirstPlay",Sa),APP.pubsub.subscribe("NewPlay",Sa),APP.pubsub.subscribe("Stop",Sa),APP.pubsub.subscribe("Mute",Sa),APP.pubsub.subscribe("Fullscreen",Sa),APP.pubsub.subscribe("Autoplay",Sa),APP.pubsub.subscribe("Progress",Sa),APP.pubsub.subscribe("analytics.payment.fapiao",t),APP.pubsub.subscribe("analytics.generate.fapiao",u),APP.pubsub.subscribe("analytics.accordion.openOrCloseFilter",pa),APP.pubsub.subscribe("analytics.filter.checked",qa),APP.pubsub.subscribe("analytics.product.locator.button.click",Wa),APP.pubsub.subscribe("analytics.oops.error",Xa),APP.pubsub.subscribe("analytics.store-locator.pin.click",Za),APP.pubsub.subscribe("analytics.size_guide.open",m),APP.pubsub.subscribe("analytics.pushCounter.incremented",na),APP.pubsub.subscribe("analytics.viewCartFromNotification",xa),APP.pubsub.subscribe("analytics.closeAddtoCartNotification",ya),APP.pubsub.subscribe("analytics.cart-event",va),jQuery("[data-track-logo]").on("click",y),jQuery("[data-track-menu]").on("click",z),jQuery("[data-track-account]").on("click",f),jQuery("[data-track-cart]").on("click",T),APP.pubsub.subscribe("analytics-open-tray-account",function(){f()}),APP.pubsub.subscribe("analytics-open-tray-order-list",function(){A(),E()}),APP.pubsub.subscribe("analytics-open-exchange-return-details",function(a,b){F(b)}),APP.pubsub.subscribe("analytics-open-exchange-return-request",function(a,b){G(b)}),APP.pubsub.subscribe("analytics-enable-exchange-return",function(a,b){H(b)}),APP.pubsub.subscribe("analytics-continue-exchange-return",function(a,b){I(b)}),APP.pubsub.subscribe("analytics-order-details-exchange-return",function(a,b){J(b)}),APP.pubsub.subscribe("analytics-choice-delivery-exchange-return",function(a,b){K(b)}),APP.pubsub.subscribe("analytics-proceed-exchange-return",function(a,b){L(b)}),APP.pubsub.subscribe("analytics-return-print-exchange-return",function(a,b){M(b)}),APP.pubsub.subscribe("analytics-refund-details-exchange-return",function(a,b){N(b)}),APP.pubsub.subscribe("analytics-print-invoice",function(a,b){O(b)}),jQuery("body").on("click",'[data-track-prefooter="help-faq"] a',function(){$a("FAQs")}),jQuery("body").on("click",'[data-track-prefooter="call-us"] a',function(){$a("Call-us")}),jQuery("body").on("click",'[data-track-prefooter="find-store"] a',function(){$a("Find-store")}),jQuery("body").on("click",'[data-tray-trigger="tray-order-list"]',A),jQuery("body").on("click","button.js-to-order-details",E),jQuery("body").on("click",".js-show-all-orders",D),jQuery("body").on("click",".order-track-cta a",E),jQuery("body").on("click",'[data-bind="exchange-return-details"]',F),jQuery("[data-order-id]").on("click",F),jQuery("body").on("click",".search-suggestion > dd ul li",Va),jQuery("[data-track-store]").on("click",W),jQuery('[data-tray-trigger="tray-help"]').on("click",X),jQuery(".js-locale-tray").on("click",function(a){ab=jQuery(a.currentTarget).closest("ul.header-links").length>0?"header":"footer"}),jQuery("[data-track-language]").on("click","ul li a",V),jQuery("[data-track-social]").on("click","a, button",Y),jQuery("[data-track-footer]").on("click","ul li a",Z),jQuery("[data-track-zoom]").on("click","img",$),jQuery("[data-track-info]").on("click","a",_),jQuery("[data-track-banner-buy]").on("click",aa),jQuery("[data-track-thumbs]").on("click","li button",ba),jQuery("[data-track-back]").on("click",ca),jQuery("[data-track-configurator]").on("click","label",da),jQuery("[data-track-cross-sales]").on("click",".product-grid-list li a",la),jQuery("[data-track-continue-checkout]").on("click",ga),jQuery("[data-track-complimentary]").on("click","a",ha),jQuery("[data-track-cart-shopping]").on("click","a",ia),jQuery("[data-track-cart-services]").on("click",ha),jQuery("[data-track-products]").on("click",".product-item > a, .product-history-item > a",ka),jQuery("[data-track-categories]").on("click",".filter-cat-subcat",oa),jQuery("[data-track-sort]").on("change",ta),jQuery("body").on("click",".filter-button-clear",ra),jQuery(".form-item-gift input").on("change",za),jQuery(".form-item-hide-price input").on("change",Ba),jQuery('[data-bind="add-message-link"]').on("click",Aa),jQuery(".checkout-addresses-choices").on("change",'input[type="radio"]',Ga),jQuery(".shipping-method-list").on("change",'input[type="radio"]',Ha),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-date",Ca),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-time",Ea),jQuery("[data-track-editorial-push]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_EditorialPushes")}),jQuery("[data-track-editorial-cta]").on("click",function(){Ia(this,"Module_TextBlocks")}),jQuery("body").on("click","a.editorial-story-cta",Ta),jQuery("[data-track-text-blocks]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_TextBlocks")}),jQuery("[data-track-gallery-carousel]").on("click",function(){Ja(this,"Module_CarouselPushes")}),jQuery("[data-track-merchandising-push]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_MershandisingPushes")}),jQuery("[data-track-products-push-merch]").on("click",".product-item > a, .product-history-item > a",ma),jQuery("[data-track-image-galleries]").on("click",function(){Ja(this,"Module_ImagesGalleries","CTA")}),jQuery(".block-edito-media-text a").on("click",function(){La(this)}),jQuery("[data-track-previous-step]").on("click",Na),jQuery("[data-track-payment-method]").on("click",function(){Oa(this)}),jQuery("[data-track-category-highlight-position]").on("click",".category-highlight-link",function(a){var b=jQuery(a.currentTarget),c=jQuery(a.delegateTarget);Ua(b,c)})}var ab=void 0,bb=void 0,cb=void 0,db=void 0,eb=void 0,fb=void 0,gb=void 0,hb=void 0,ib=void 0,jb=void 0,kb=void 0,lb=void 0,mb=void 0,nb=void 0,ob=void 0,pb=void 0,qb=0,rb=0,sb=0,tb=j.get("user"),ub=[],vb="/"+Drupal.settings.hermes_url_locale,wb=["color","size"];x()}function c(a,b){b&&b.sku&&(APP.selectedSku=b.sku)}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.ProductLocatorTools},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";b.getGender=function(a){var b=void 0;switch(a){case"Ms.":case"Mrs.":case"Mme":case"Mlle":case"Miss":case"女士":case"Sig.na":case"Sig.ra":case"Frau":case"Srta.":case"Sra.":case"F":b="W";break;case"Mr.":case"M.":case"先生":case"Sig.":case"Herr":case"Sr.":case"M":b="M";break;case"Dr":case"Prof":case"Honorable":case"Dr.":b="U";break;default:b=a}return b},b.getUserType=function(a){var b=void 0;switch(a){case"0":b="newclient";break;case"1":b="buyer";break;default:b=""}return b},b.getDeviceType=function(){var a=void 0;return a=window.screen.width<991?"mobile":window.screen.width<1199?"tablet":"desktop"},b.getBuildVersion=function(){var a=void 0;return a=d.HOSTNAME.indexOf(window.location.hostname)>-1?"Production version":"Development version"},b.getProductsAttribute=function(a,b){var c=null;for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];c=e[b]&&!c?e[b]:c}return c},b.getPageType=function(){var a={".front":d.FRONT_PAGE,".faq-dispatch":d.FAQ_PAGE,".node-type-faq-theme":d.FAQ_PAGE,".node-type-terms-and-conditions":d.LEGAL_PAGE,".node-type-text-only-page":d.PAGE_404,".section-product-category":d.LISTING_PAGE,".node-type-story":d.STORY_PAGE,".node-type-hermes-product-display":d.PRODUCT_PAGE,".pane-hermes-grid":d.PRODUCT_GRID,".grid-wrapper":d.PRODUCT_GRID,"#store-locator":d.FIND_STORE_PAGE,".successful-order":d.CHECKOUT_CONFIRMATION,".page-validate3ds":d.VALIDATE_3DS_PAGE,".page-account-create":d.ACCOUNT_PROFIL_PAGE,".page-profil":d.ACCOUNT_PROFIL_PAGE},b=k(a).map(function(b){if(jQuery(b).length>0)return a[b]}),c=b.find(function(a){return a});if(c===d.PRODUCT_PAGE)switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":c=d.PRODUCT_PAGE_SINGLE;break;case"DOUBLE_PRODUCT":c=d.PRODUCT_PAGE_DOUBLE;break;case"BIKINI_SET":c=d.PRODUCT_PAGE_DOUBLE;break;case"LOOK_SET":c=d.PRODUCT_PAGE_LOOK;break;case"PERFUME_SET":c=d.PRODUCT_PAGE_SET}return Drupal.settings.hermes_master_page&&(c=d.MASTER_PAGE),c},b.getEnglishOrFrenchUrl=function(){var a=void 0,c=document.getElementsByTagName("link"),d=j.get("currentLanguage"),e=j.get("currentCountry");if("en"!==d)a=b.getUrlEquivalent(a,c,"en-"+e);else for(var f=0;f<c.length;f++)"canonical"===c[f].rel&&(a=c[f].href);a=b.getUrlEquivalent(a,c,"en-us"),a=b.getUrlEquivalent(a,c,"en-gb"),a=b.getUrlEquivalent(a,c,"fr-"+e),a=b.getUrlEquivalent(a,c,"fr-fr"),"undefined"==typeof a&&(a="no english nor french equivalent found");var g=void 0;return g=a.indexOf("hermes.cn")!==-1&&Drupal.settings.baseUrl.indexOf("hermes.com")!==-1?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+1:a.indexOf("hermes.com")!==-1&&Drupal.settings.baseUrl.indexOf("hermes.cn")!==-1?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+3:Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+2,a=a.substr(g)},b.getUrlEquivalent=function(a,b,c){if("undefined"==typeof a)for(var d=0;d<b.length;d++)b[d].hreflang===c&&(a=b[d].href);return a},b.getUserAgent=function(a){var b=window.navigator.userAgent.toLowerCase(),c=/micromessenger/.test(b);c&&(a.user_agent=window.navigator.userAgent)},b.ProductPage=function(a,h){var i=[],j=b.setProductArray(a),k=b.setSkuArray(a);if(h.productname=b.getProductName(a),h.productsku=b.getProductSku(a),h.departmentcode=b.getProductDepartmentCode(a),h.productlocator=g.isProductLocatorActive()&&!g.isProductExcluded()?"yes":"no",h.in_store_only=String(g.hasStockRetailOnly(k)),APP.pubsub.subscribe("configurator.change",c),APP.selectedSku&&a&&a.productsWithStock){var l=a.productsWithStock.find(function(a){return a.sku===APP.selectedSku});l&&(h.productsku=l.sku)}if(g.isProductLocatorActive()&&(h.availability_hit=f.getAvailabilityHitLabel(h.productsku)),Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&k.length>0){var m={name:"buckle",sku:k[0],brand:d.BRAND,stock:Drupal.settings.hermes_products.data.belts[k[0]].in_stock?"in stock":"out of stock"};j.push(m)}if(j.length>0)for(var n in j)for(var o in k)if(k[o].replace(/\s/g,"")===j[n].sku.replace(/\s/g,"")){var p=j[n],q=e.unformat(p.price).toFixed(2),r=b.getColor(p),s=p.department_code?p.department_code:t.departmentcode,t={name:p.title,id:p.sku,price:q,brand:d.BRAND,category:s+"/"+p.family_code,variant:r,dimension5:p.ref_size,dimension6:p.department_code,dimension7:p.family_code,dimension8:p.product_code,dimension9:p.division_code,dimension37:p.stock,in_store_only:String(g.hasStockRetailOnly([p.sku]))};g.isProductLocatorActive()&&(t.dimension53=f.getAvailabilityHitLabel(p.sku)),i.push(t)}return i},b.getProductDepartmentCode=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":case"PERFUME_SET":a&&a.productsWithStock&&a.productsWithStock.length&&(b=a.productsWithStock[0].department_code?a.productsWithStock[0].department_code:"unavailable");break;case"LOOK_SET":case"BIKINI_SET":a&&a.productsWithStock&&a.productsWithStock.length&&a.productsWithStock[0]&&a.productsWithStock[0].length&&(b=a.productsWithStock[0][0].department_code?a.productsWithStock[0][0].department_code:"unavailable");break;default:b="error"}return b},b.getProductSku=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":b=a.targeted_variant.sku;break;case"DOUBLE_PRODUCT":b=a.default_variant.set_sku;break;case"LOOK_SET":case"PERFUME_SET":case"BIKINI_SET":b=a.set.sku;break;default:b=null}return b},b.getProductName=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":b=a.targeted_variant.title;break;case"BIKINI_SET":case"PERFUME_SET":case"LOOK_SET":b=a.set.title;break;default:b=null}return b},b.setProductArray=function(a){var b=[];if(a.productsWithStock)switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":b=a.productsWithStock.slice(0);break;case"PERFUME_SET":for(var c=a.set.selection,d=0;d<c.length;d++)for(var e=0;e<a.productsWithStock.length;e++)c[d].sku===a.productsWithStock[e].sku&&b.push(a.productsWithStock[e]);break;case"LOOK_SET":case"BIKINI_SET":for(var d=0;d<a.productsWithStock.length;d++)for(var e=0;e<a.productsWithStock[d].length;e++)b.push(a.productsWithStock[d][e])}return b},b.setSkuArray=function(a){var c=b.setProductArray(a),d=c&&c[0]?c[0].sku_list:null;APP.selectedSku&&(d=APP.selectedSku);var e=[];switch(a.configurator_type){case"VARIANT_PRODUCT":e.push(a.selected_sku);break;case"DOUBLE_PRODUCT":e=d?d.split(", "):[];break;case"BIKINI_SET":e=a.default_variant.sku;break;case"PERFUME_SET":for(var f=0;f<c.length;f++)e.push(c[f].sku);break;case"LOOK_SET":e=a.default_variant.sku;break;default:e=[]}return e},b.ProductsGrid=function(a,c,f){var g=[];c.departmentcode=b.getProductsAttribute(f,"department_code");for(var h in Drupal.settings.hermes_products)if(Drupal.settings.hermes_products.hasOwnProperty(h)){var i=a?d.SEARCH_RESULTS:d.PRODUCT_GRID,j=Drupal.settings.hermes_products[h],k=e.unformat(j.price).toFixed(2),l=j.department_code&&!c.departmentcode?j.department_code:c.departmentcode;g.push({name:j.title,id:j.sku,price:k,brand:d.BRAND,category:l+"/"+j.family_code,dimension5:j.ref_size,dimension6:j.department_code,dimension7:j.family_code,dimension8:j.product_code,dimension9:j.division_code,position:parseInt(h,10)+1,list:i})}return g},b.getUser=function(a,c){if(a){a.customer_id&&(c.userId=a.customer_id);var e=a.gender?a.gender:a.prefix;c.clienttype=b.getUserType(a.user_type),c.clientgender=b.getGender(e)}else c.clientgender=null,c.clienttype=d.NONCONNECTED},b.getMenuLvl=function(a){var b=j.get("nav");if(b){var c=b.split("/");void 0!==c[0]&&(a.menu_lv1=c[0]),void 0!==c[1]?a.menu_lv2=c[1]:a.menu_lv2=null,void 0!==c[2]?a.menu_lv3=c[2]:a.menu_lv3=null}},b.isSearchResult=function(a,c){var e=!1;if(c!==d.FRONT_PAGE&&c!==d.STORY_PAGE)window.location.pathname.indexOf("search")>-1&&(e=!0,j.set("nav","direct")),b.getMenuLvl(a);else if(c===d.MASTER_PAGE){var f=j.get("nav");f||j.set("nav","direct"),b.getMenuLvl(a)}else j.set("nav","direct");return e},b.getCategories=function(a,b){b!==d.MASTER_PAGE&&b!==d.STORY_PAGE&&b!==d.FRONT_PAGE||(a.editorialcategory=Drupal.settings.theme&&Drupal.settings.theme.editorial_category?Drupal.settings.theme.editorial_category:d.NONAPP,a.editorialtypology=Drupal.settings.theme&&Drupal.settings.theme.editorial_typology?Drupal.settings.theme.editorial_typology:d.NONAPP,a.editorialitem=Drupal.settings.theme&&Drupal.settings.theme.editorial_item?Drupal.settings.theme.editorial_item:d.NONAPP)},b.getColor=function(a){return a.attributes&&a.attributes.field_color_hermes&&a.attributes.field_color_hermes.name?a.attributes.field_color_hermes.name:d.NONAPP},b.getPaymentMethod=function(){var a=void 0,b=j.get("paymentMethod"),c=j.get("ccType");if(b===d.PAYMENT_METHOD.creditCard||b===d.PAYMENT_METHOD.adyenOneclick)switch(c){case"VI":a="1";break;case"MC":a="2";break;case"AE":a="3";break;case"SM":a="4";break;case"DC":a="5";break;case"DI":a="6";break;case"JCB":a="7";break;case"CUP":a="8";break;case"cartebancaire":case void 0:a="9";break;default:a="unknown"}else a=b===d.PAYMENT_METHOD.paypal?"10":b===d.PAYMENT_METHOD.alipay?"11":b===d.PAYMENT_METHOD.wechat?"12":b===d.PAYMENT_METHOD.hsbcCup?"13":"unknown";return a},a("default",b)}}}),a.register("3a",["12","13","17","21","24","37","3b","3c"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function e(){c(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return i(e,a),
b(e,[{key:"setArticles",value:function(a){this.articles=a}},{key:"setProducts",value:function(a){this.products=a}},{key:"reinit",value:function(){this.impressions=[],this.layer.ecommerce={}}},{key:"buildImpression",value:function(a){var b=g.getPageType(),c=f.unformat(a.price).toFixed(2);return a.category=this.defineProductCategory(a),{name:a.title,id:a.sku,price:c,brand:d.BRAND,category:a.category,dimension5:a.ref_size,dimension6:a.department_code,dimension7:a.family_code,dimension8:a.product_code,dimension9:a.division_code,list:b===d.FRONT_PAGE?"merchandising_homepage_"+this.pushCounter:"merchandising_edito_page_"+this.pushCounter,position:a.position}}}]),e}(e),a("default",j)}}}),a.register("3d",["10","12","13","22","24","33","39","3a"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function a(b,c){d(this,a),this.campaignId=b,this.htmlElement=c},k=function(){function a(){d(this,a),this._initPushes(),this._initLocale(),this._callFredhopper(),this.analyticsPushMerch=new i}return c(a,[{key:"_initPushes",value:function(){this.pushes=[];for(var a=jQuery("div[data-merch-campaignid]"),b=0;b<a.length;b++)this.pushes.push(new j(a[b].dataset.merchCampaignid,a[b]))}},{key:"_initLocale",value:function(){this.location=location.valueOf();var a=/(\w+)\/(\w+)\/.*/i,b=this.location.pathname.match(a);this.country=b[1],this.language=b[2],this.location.prefix=this.country+"/"+this.language}},{key:"_callFredhopper",value:function(){var a=this.country+"_"+this.language,b=this.location.prefix,c={locale:a,url_locale:b},d=this.pushes.map(function(a){return a.campaignId});if(d.length&&a&&b){var e=Drupal.settings.hermes_global.url_cde+"/personalize/campaign?cid="+d.join(",");jQuery.ajax({url:e,method:"POST",contentType:"application/json",data:JSON.stringify(c),xhrFields:{withCredentials:!0}}).done(this._replacePush.bind(this))}}},{key:"_replacePush",value:function(a){var c=this,d=APP.CURRENCY_MAP[this.country+"_"+this.language];d&&(d.precision=0);var i=APP.templates.listItemProduct,j=[],k=[],l=[],m=[];h(this.pushes).forEach(function(h){var n=c.pushes[h],o=n.campaignId,p=jQuery(n.htmlElement).find("ul[data-fill-merch]"),q=a.stories.items[o]?a.stories.items[o]:[];if(q&&q.length)for(var r=0;r<q.length;r++)q[r]&&q[r].image&&(q[r].image=e.urlTransform(q[r].image));var s="/"+c.location.prefix;g.parse(i);var t=[];p&&p.children()&&(t=p.children().map(function(a){var b=a>=q.length?0:a,c=q[b];if(c&&c.url&&(c.url.includes(s)||(c.url=""+s+c.url),c.price=f.formatMoney(c.price,d),c.more_colors=c.more_colors?Drupal.settings.hermes_translations.ui.more_colors:"",c.avg_color="colorless"!==c.avg_color&&c.avg_color),q&&q.length>0)return g.render(i,q[b])}).get().join("")),p.html(t),p.find("li article a img, li article a div.product-item-meta").each(function(){jQuery(this).css("opacity","1")}),l.push(p.find("article")),m.push(q),l[parseInt(h)]&&Array.prototype.forEach.call(b(l[parseInt(h)]),function(a,b){a.campaignId=o,a.indexPush=parseInt(h)+1,a.position=b+1,j.push(a)}),m[parseInt(h)]&&k.push(m[parseInt(h)])});var n=j.length>0?[].concat.apply([],j):"",o=k.length>0?[].concat.apply([],k):"";n.length>0&&this.analyticsPushMerch.setArticles(n),o.length>0&&this.analyticsPushMerch.setProducts(o),this.analyticsPushMerch.bind()}}]),a}(),a("default",k)}}}),a.registerDynamic("3e",[],!0,function(a,b,c){function d(a,b){"use strict";function c(){var a=B.splice(0,B.length);for(bb=0;a.length;)a.shift().call(null,a.shift())}function d(a,b){for(var c=0,d=a.length;c<d;c++)q(a[c],b)}function e(a){for(var b,c=0,d=a.length;c<d;c++)b=a[c],I(b,ha[g(b)])}function f(a){return function(b){Oa(b)&&(q(b,a),ia.length&&d(b.querySelectorAll(ia),a))}}function g(a){var b=Ua.call(a,"is"),c=a.nodeName.toUpperCase(),d=ka.call(ga,b?da+b.toUpperCase():ca+c);return b&&-1<d&&!h(c,b)?-1:d}function h(a,b){return-1<ia.indexOf(a+'[is="'+b+'"]')}function i(a){var b=a.currentTarget,c=a.attrChange,d=a.attrName,e=a.target,f=a[Y]||2,g=a[$]||3;!hb||e&&e!==b||!b[S]||"style"===d||a.prevValue===a.newValue&&(""!==a.newValue||c!==f&&c!==g)||b[S](d,c===f?null:a.prevValue,c===g?null:a.newValue)}function j(a){var b=f(a);return function(a){B.push(b,a.target),bb&&clearTimeout(bb),bb=setTimeout(c,1)}}function k(a){gb&&(gb=!1,a.currentTarget.removeEventListener(aa,k)),ia.length&&d((a.target||y).querySelectorAll(ia),a.detail===Q?Q:O),Ma&&o()}function l(a,b){var c=this;Xa.call(c,a,b),C.call(c,{target:c})}function m(a,b,c){var d=b.apply(a,c),f=g(d);return-1<f&&I(d,ha[f]),c.pop()&&ia.length&&e(d.querySelectorAll(ia)),d}function n(a,b){Ia(a,b),F?F.observe(a,_a):(fb&&(a.setAttribute=l,a[M]=E(a),a[N](ba,C)),a[N](_,i)),a[W]&&hb&&(a.created=!0,a[W](),a.created=!1)}function o(){for(var a,b=0,c=Pa.length;b<c;b++)a=Pa[b],ja.contains(a)||(c--,Pa.splice(b--,1),q(a,Q))}function p(a){throw new Error("A "+a+" type is already registered")}function q(a,b){var c,d,e=g(a);-1<e&&!Sa.call(a,"TEMPLATE")&&(H(a,ha[e]),e=0,b!==O||a[O]?b!==Q||a[Q]||(a[O]=!1,a[Q]=!0,d="disconnected",e=1):(a[Q]=!1,a[O]=!0,d="connected",e=1,Ma&&ka.call(Pa,a)<0&&Pa.push(a)),e&&(c=a[b+P]||a[d+P])&&c.call(a))}function r(){}function s(a,b,c){var d=c&&c[R]||"",e=b.prototype,f=Ha(e),g=b.observedAttributes||pa,h={prototype:f};Na(f,W,{value:function(){if(Ca)Ca=!1;else if(!this[wa]){this[wa]=!0,new b(this),e[W]&&e[W].call(this);var a=Da[Fa.get(b)];(!ya||a.create.length>1)&&v(this)}}}),Na(f,S,{value:function(a){-1<ka.call(g,a)&&e[S]&&e[S].apply(this,arguments)}}),e[U]&&Na(f,T,{value:e[U]}),e[V]&&Na(f,X,{value:e[V]}),d&&(h[R]=d),a=a.toUpperCase(),Da[a]={constructor:b,create:d?[d,Ga(a)]:[a]},Fa.set(b,a),y[K](a.toLowerCase(),h),w(a),Ea[a].r()}function t(a){var b=Da[a.toUpperCase()];return b&&b.constructor}function u(a){return"string"==typeof a?a:a&&a.is||""}function v(a){for(var b,c=a[S],d=c?a.attributes:pa,e=d.length;e--;)b=d[e],c.call(a,b.name||b.nodeName,null,b.value||b.nodeValue)}function w(a){return a=a.toUpperCase(),a in Ea||(Ea[a]={},Ea[a].p=new Ba(function(b){Ea[a].r=b})),Ea[a].p}function x(){xa&&delete a.customElements,oa(a,"customElements",{configurable:!0,value:new r}),oa(a,"CustomElementRegistry",{configurable:!0,value:r});for(var b=function(b){var c=a[b];if(c){a[b]=function(a){var b,d;return a||(a=this),a[wa]||(Ca=!0,b=Da[Fa.get(a.constructor)],d=ya&&1===b.create.length,a=d?Reflect.construct(c,pa,b.constructor):y.createElement.apply(y,b.create),a[wa]=!0,Ca=!1,d||v(a)),a},a[b].prototype=c.prototype;try{c.prototype.constructor=a[b]}catch(d){va=!0,oa(c,wa,{value:a[b]})}}},c=A.get(/^HTML[A-Z]*[a-z]/),d=c.length;d--;b(c[d]));y.createElement=function(a,b){var c=u(b);return c?$a.call(this,a,Ga(c)):$a.call(this,a)},cb||(eb=!0,y[K](""))}var y=a.document,z=a.Object,A=function(a){var b,c,d,e,f=/^[A-Z]+[a-z]/,g=function(a){var b,c=[];for(b in i)a.test(b)&&c.push(b);return c},h=function(a,b){b=b.toLowerCase(),b in i||(i[a]=(i[a]||[]).concat(b),i[b]=i[b.toUpperCase()]=a)},i=(z.create||z)(null),j={};for(c in a)for(e in a[c])for(d=a[c][e],i[e]=d,b=0;b<d.length;b++)i[d[b].toLowerCase()]=i[d[b].toUpperCase()]=e;return j.get=function(a){return"string"==typeof a?i[a]||(f.test(a)?[]:""):g(a)},j.set=function(a,b){return f.test(a)?h(a,b):h(b,a),j},j}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof b&&(b={type:b||"auto"});var B,C,D,E,F,G,H,I,J,K="registerElement",L=1e5*a.Math.random()>>0,M="__"+K+L,N="addEventListener",O="attached",P="Callback",Q="detached",R="extends",S="attributeChanged"+P,T=O+P,U="connected"+P,V="disconnected"+P,W="created"+P,X=Q+P,Y="ADDITION",Z="MODIFICATION",$="REMOVAL",_="DOMAttrModified",aa="DOMContentLoaded",ba="DOMSubtreeModified",ca="<",da="=",ea=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,fa=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],ga=[],ha=[],ia="",ja=y.documentElement,ka=ga.indexOf||function(a){for(var b=this.length;b--&&this[b]!==a;);return b},la=z.prototype,ma=la.hasOwnProperty,na=la.isPrototypeOf,oa=z.defineProperty,pa=[],qa=z.getOwnPropertyDescriptor,ra=z.getOwnPropertyNames,sa=z.getPrototypeOf,ta=z.setPrototypeOf,ua=!!z.__proto__,va=!1,wa="__dreCEv1",xa=a.customElements,ya=!/^force/.test(b.type)&&!!(xa&&xa.define&&xa.get&&xa.whenDefined),za=z.create||z,Aa=a.Map||function(){var a,b=[],c=[];return{get:function(a){return c[ka.call(b,a)]},set:function(d,e){a=ka.call(b,d),a<0?c[b.push(d)-1]=e:c[a]=e}}},Ba=a.Promise||function(a){function b(a){for(d=!0;c.length;)c.shift()(a)}var c=[],d=!1,e={catch:function(){return e},then:function(a){return c.push(a),d&&setTimeout(b,1),e}};return a(b),e},Ca=!1,Da=za(null),Ea=za(null),Fa=new Aa,Ga=function(a){return a.toLowerCase()},Ha=z.create||function a(b){return b?(a.prototype=b,new a):this},Ia=ta||(ua?function(a,b){return a.__proto__=b,a}:ra&&qa?function(){function a(a,b){for(var c,d=ra(b),e=0,f=d.length;e<f;e++)c=d[e],ma.call(a,c)||oa(a,c,qa(b,c))}return function(b,c){do a(b,c);while((c=sa(c))&&!na.call(c,b));return b}}():function(a,b){for(var c in b)a[c]=b[c];return a}),Ja=a.MutationObserver||a.WebKitMutationObserver,Ka=a.HTMLAnchorElement,La=(a.HTMLElement||a.Element||a.Node).prototype,Ma=!na.call(La,ja),Na=Ma?function(a,b,c){return a[b]=c.value,a}:oa,Oa=Ma?function(a){return 1===a.nodeType}:function(a){return na.call(La,a)},Pa=Ma&&[],Qa=La.attachShadow,Ra=La.cloneNode,Sa=La.closest||function(a){for(var b=this;b&&b.nodeName!==a;)b=b.parentNode;return b},Ta=La.dispatchEvent,Ua=La.getAttribute,Va=La.hasAttribute,Wa=La.removeAttribute,Xa=La.setAttribute,Ya=y.createElement,Za=y.importNode,$a=Ya,_a=Ja&&{attributes:!0,characterData:!0,attributeOldValue:!0},ab=Ja||function(a){fb=!1,ja.removeEventListener(_,ab)},bb=0,cb=K in y&&!/^force-all/.test(b.type),db=!0,eb=!1,fb=!0,gb=!0,hb=!0;if(Ja&&(J=y.createElement("div"),J.innerHTML="<div><div></div></div>",new Ja(function(a,b){if(a[0]&&"childList"==a[0].type&&!a[0].removedNodes[0].childNodes.length){J=qa(La,"innerHTML");var c=J&&J.set;c&&oa(La,"innerHTML",{set:function(a){for(;this.lastChild;)this.removeChild(this.lastChild);c.call(this,a)}})}b.disconnect(),J=null}).observe(J,{childList:!0,subtree:!0}),J.innerHTML=""),cb||(ta||ua?(H=function(a,b){na.call(b,a)||n(a,b)},I=n):(H=function(a,b){a[M]||(a[M]=z(!0),n(a,b))},I=H),Ma?(fb=!1,function(){var a=qa(La,N),b=a.value,c=function(a){var b=new CustomEvent(_,{bubbles:!0});b.attrName=a,b.prevValue=Ua.call(this,a),b.newValue=null,b[$]=b.attrChange=2,Wa.call(this,a),Ta.call(this,b)},d=function(a,b){var c=Va.call(this,a),d=c&&Ua.call(this,a),e=new CustomEvent(_,{bubbles:!0});Xa.call(this,a,b),e.attrName=a,e.prevValue=c?d:null,e.newValue=b,c?e[Z]=e.attrChange=1:e[Y]=e.attrChange=0,Ta.call(this,e)},e=function(a){var b,c=a.currentTarget,d=c[M],e=a.propertyName;d.hasOwnProperty(e)&&(d=d[e],b=new CustomEvent(_,{bubbles:!0}),b.attrName=d.name,b.prevValue=d.value||null,b.newValue=d.value=c[e]||null,null==b.prevValue?b[Y]=b.attrChange=0:b[Z]=b.attrChange=1,Ta.call(c,b))};a.value=function(a,f,g){a===_&&this[S]&&this.setAttribute!==d&&(this[M]={className:{name:"class",value:this.className}},this.setAttribute=d,this.removeAttribute=c,b.call(this,"propertychange",e)),b.call(this,a,f,g)},oa(La,N,a)}()):Ja||(ja[N](_,ab),ja.setAttribute(M,1),ja.removeAttribute(M),fb&&(C=function(a){var b,c,d,e=this;if(e===a.target){b=e[M],e[M]=c=E(e);for(d in c){if(!(d in b))return D(0,e,d,b[d],c[d],Y);if(c[d]!==b[d])return D(1,e,d,b[d],c[d],Z)}for(d in b)if(!(d in c))return D(2,e,d,b[d],c[d],$)}},D=function(a,b,c,d,e,f){var g={attrChange:a,currentTarget:b,attrName:c,prevValue:d,newValue:e};g[f]=a,i(g)},E=function(a){for(var b,c,d={},e=a.attributes,f=0,g=e.length;f<g;f++)b=e[f],c=b.name,"setAttribute"!==c&&(d[c]=b.value);return d})),y[K]=function(a,b){if(c=a.toUpperCase(),db&&(db=!1,Ja?(F=function(a,b){function c(a,b){for(var c=0,d=a.length;c<d;b(a[c++]));}return new Ja(function(d){for(var e,f,g,h=0,i=d.length;h<i;h++)e=d[h],"childList"===e.type?(c(e.addedNodes,a),c(e.removedNodes,b)):(f=e.target,hb&&f[S]&&"style"!==e.attributeName&&(g=Ua.call(f,e.attributeName),g!==e.oldValue&&f[S](e.attributeName,e.oldValue,g)))})}(f(O),f(Q)),G=function(a){return F.observe(a,{childList:!0,subtree:!0}),a},G(y),Qa&&(La.attachShadow=function(){return G(Qa.apply(this,arguments))})):(B=[],y[N]("DOMNodeInserted",j(O)),y[N]("DOMNodeRemoved",j(Q))),y[N](aa,k),y[N]("readystatechange",k),y.importNode=function(a,b){switch(a.nodeType){case 1:return m(y,Za,[a,!!b]);case 11:for(var c=y.createDocumentFragment(),d=a.childNodes,e=d.length,f=0;f<e;f++)c.appendChild(y.importNode(d[f],!!b));return c;default:return Ra.call(a,!!b)}},La.cloneNode=function(a){return m(this,Ra,[!!a])}),eb)return eb=!1;if(-2<ka.call(ga,da+c)+ka.call(ga,ca+c)&&p(a),!ea.test(c)||-1<ka.call(fa,c))throw new Error("The type "+a+" is invalid");var c,e,g=function(){return i?y.createElement(l,c):y.createElement(l)},h=b||la,i=ma.call(h,R),l=i?b[R].toUpperCase():c;return i&&-1<ka.call(ga,ca+l)&&p(l),e=ga.push((i?da:ca)+c)-1,ia=ia.concat(ia.length?",":"",i?l+'[is="'+a.toLowerCase()+'"]':l),g.prototype=ha[e]=ma.call(h,"prototype")?h.prototype:Ha(La),ia.length&&d(y.querySelectorAll(ia),O),g},y.createElement=$a=function(a,b){var c=u(b),d=c?Ya.call(y,a,Ga(c)):Ya.call(y,a),e=""+a,f=ka.call(ga,(c?da:ca)+(c||e).toUpperCase()),g=-1<f;return c&&(d.setAttribute("is",c=c.toLowerCase()),g&&(g=h(e.toUpperCase(),c))),hb=!y.createElement.innerHTMLHelper,g&&I(d,ha[f]),d}),addEventListener("beforeunload",function(){delete y.createElement,delete y.importNode,delete y[K]},!1),r.prototype={constructor:r,define:ya?function(a,b,c){if(c)s(a,b,c);else{var d=a.toUpperCase();Da[d]={constructor:b,create:[d]},Fa.set(b,d),xa.define(a,b)}}:s,get:ya?function(a){return xa.get(a)||t(a)}:t,whenDefined:ya?function(a){return Ba.race([xa.whenDefined(a),w(a)])}:w},!xa||/^force/.test(b.type))x();else if(!b.noBuiltIn)try{!function(b,c,d){var e=new RegExp("^<a\\s+is=('|\")"+d+"\\1></a>$");if(c[R]="a",b.prototype=Ha(Ka.prototype),b.prototype.constructor=b,a.customElements.define(d,b,c),!e.test(y.createElement("a",{is:d}).outerHTML)||!e.test((new b).outerHTML))throw c}(function a(){return Reflect.construct(Ka,[],a)},{},"document-register-element-a"+L)}catch(a){x()}if(!b.noBuiltIn)try{if(Ya.call(y,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(a){Ga=function(a){return{is:a.toLowerCase()}}}}var e=this||self;c.exports=d,d(e)}),a.registerDynamic("3f",["3e"],!0,function(a,b,c){this||self;c.exports=a("3e")}),a.registerDynamic("40",["41"],!0,function(a,b,c){var d=(this||self,a("41"));c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}}),a.registerDynamic("2a",["40","42"],!0,function(a,b,c){var d=(this||self,a("40")),e=a("42");c.exports=function(a){return d(e(a))}}),a.registerDynamic("43",["2a","44"],!0,function(a,b,c){var d=(this||self,a("2a"));a("44")("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})}),a.registerDynamic("45",["46","43"],!0,function(a,b,c){var d=(this||self,a("46"));a("43"),c.exports=function(a,b){return d.getDesc(a,b)}}),a.registerDynamic("47",["45"],!0,function(a,b,c){this||self;c.exports={default:a("45"),__esModule:!0}}),a.registerDynamic("3b",["47"],!0,function(a,b,c){"use strict";var d=(this||self,a("47").default);b.default=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;e=!1,null===f&&(f=Function.prototype);var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;if(void 0===j)return;return j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return;a=k,b=g,c=h,e=!0,i=k=void 0}},b.__esModule=!0}),a.registerDynamic("48",["46"],!0,function(a,b,c){var d=(this||self,a("46"));c.exports=function(a,b){return d.create(a,b)}}),a.registerDynamic("49",["48"],!0,function(a,b,c){this||self;c.exports={default:a("48"),__esModule:!0}}),a.registerDynamic("4a",["46","4b","2d","4c"],!0,function(a,b,c){var d=(this||self,a("46").getDesc),e=a("4b"),f=a("2d"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};c.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("4c")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return g(a,b),c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g}}),a.registerDynamic("4d",["4e","4a"],!0,function(a,b,c){var d=(this||self,a("4e"));d(d.S,"Object",{setPrototypeOf:a("4a").set})}),a.registerDynamic("4f",["4d","8"],!0,function(a,b,c){this||self;a("4d"),c.exports=a("8").Object.setPrototypeOf}),a.registerDynamic("50",["4f"],!0,function(a,b,c){this||self;c.exports={default:a("4f"),__esModule:!0}}),a.registerDynamic("3c",["49","50"],!0,function(a,b,c){"use strict";var d=(this||self,a("49").default),e=a("50").default;b.default=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e?e(a,b):a.__proto__=b)},b.__esModule=!0}),a.registerDynamic("51",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){"undefined"==typeof String.prototype.capitalizeFirstLetter&&(String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),"undefined"==typeof String.prototype.minimizeFirstLetter&&(String.prototype.minimizeFirstLetter=function(){return this.charAt(0).toLowerCase()+this.slice(1)}),"undefined"==typeof String.prototype.camelCaseToDash&&(String.prototype.camelCaseToDash=function(){const a=this.charAt(0).toLowerCase()+this.slice(1);return a?a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}):null}),"undefined"==typeof Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180}),"undefined"==typeof Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),JSON&&JSON.prototype&&"undefined"==typeof JSON.prototype.merge&&(JSON.prototype.merge=function(a,b){var c=Object.create(b);for(var d in a)c.hasOwnProperty(d)?null!=a[d]&&a[d].constructor===Object&&(c[d]=JSON.merge(a[d],c[d])):c[d]=a[d];return c}),"undefined"==typeof Number.prototype.format&&(Number.prototype.format=function(a,b,c,d){var e="\\d(?=(\\d{"+(b||3)+"})+"+(a>0?"\\D":"$")+")",f=this.toFixed(Math.max(0,~~a));return(d?f.replace(".",d):f).replace(new RegExp(e,"g"),"$&"+(c||""))}),"undefined"!=typeof HTMLElement&&("undefined"==typeof HTMLElement.prototype.removeAllChildren&&(HTMLElement.prototype.removeAllChildren=function(){for(;this.firstChild;)this.removeChild(this.firstChild)}),"undefined"==typeof HTMLElement.prototype.isShown&&(HTMLElement.prototype.isShown=function(){return"none"!==this.style.display}),"undefined"==typeof HTMLElement.prototype.isShown&&(HTMLElement.prototype.isShown=function(){return"none"!==this.style.display}),"undefined"==typeof HTMLElement.loadScript&&(HTMLElement.loadScript=function(a,b,c){for(var d=a.head||a.getElementsByTagName("head")[0],e=a.getElementsByTagName("script"),f=!1,g=e.length;g--;)e[g].src===b&&(f=!0);if(f)c();else{var h=document.createElement("script");h.addEventListener("load",c),h.src=b,h.async=!1,d.insertBefore(h,d.firstChild)}}))}(this),e()}),a.register("52",["12","13","51","53","3b","3c"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(a){function g(){c(this,g),e(Object.getPrototypeOf(g.prototype),"constructor",this).call(this),this.createdCallback()}return f(g,a),b(g,null,[{key:"create",value:function(){return document.createElement(this.tagname())}},{key:"tagname",value:function(){return this.name.camelCaseToDash()}},{key:"identRender",value:function(){return this.name.charAt(0).toLowerCase()+this.name.slice(1)}},{key:"register",value:function(){document.registerElement?document.registerElement(this.tagname(),{prototype:this.prototype}):window.customElements.define(this.tagname(),this.prototype.constructor)}},{key:"name",get:function(){return"Component"}}]),b(g,[{key:"getObjectClassName",value:function(){var a=this.constructor.name;if(/\-/.test(a)){var b=a.split("-"),c="";return b.forEach(function(a){c+=a.capitalizeFirstLetter()}),c}return a}},{key:"identTemplate",value:function(){return this.getObjectClassName().minimizeFirstLetter()}},{key:"loadScript",value:function(a,b){HTMLElement.loadScript(this.mainDocument,a,b)}},{key:"find",value:function(a){var b=this.root.querySelector(a);return b||(b=document.querySelector(a)),b}},{key:"clearChildrenOf",value:function(a){for(var b=this.find(a);b.firstChild;)b.removeChild(b.firstChild)}},{key:"catchEvent",value:function(a,b,c){var d=this.find(a);d&&d.addEventListener(b,c)}},{key:"render",value:function(a){var b=d.render(this.identTemplate(),a||{});return this.root.innerHTML=b,this.onDidRender(),b}},{key:"onAttach",value:function(){this.render()}},{key:"createdCallback",value:function(){this.root=this,this.onDidCreate()}},{key:"attachedCallback",value:function(){this.onAttach()}},{key:"connectedCallback",value:function(){this.attachedCallback()}},{key:"hide",value:function(){this.onWillDisappear();var a=this.root.getElementsByTagName("div")[0];a.classList.remove("component-locator-show"),a.classList.add("component-locator-hide"),this.onDidDisappear()}},{key:"show",value:function(){this.onWillAppear();var a=this.root.getElementsByTagName("div")[0];a.classList.remove("component-locator-hide"),a.classList.add("component-locator-show"),this.onDidAppear()}},{key:"hideMapBeforeList",value:function(){var a=this.root.getElementsByTagName("div")[0];a.classList.remove("component-locator-map-show"),a.setAttribute("style","overflow: hidden;"),a.classList.add("component-locator-map-hide")}},{key:"showMapAfterList",value:function(){var a=this.root.getElementsByTagName("div")[0];a.classList.remove("component-locator-map-hide"),a.classList.add("component-locator-map-show")}},{key:"onDidRender",value:function(){}},{key:"onDidCreate",value:function(){}},{key:"onDidDisappear",value:function(){}},{key:"onDidAppear",value:function(){}},{key:"onWillAppear",value:function(){}},{key:"onWillDisappear",value:function(){}},{key:"mainDocument",get:function(){return document.currentScript?document.currentScript.ownerDocument:document}},{key:"getRoot",get:function(){return this.root}}]),g}(HTMLElement),a("default",g)}}}),a.register("54",["2","12","13","52","53","55","56","3b","3c"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){},function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){},function(a){},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(a){function d(){c(this,d),f(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return g(d,a),b(d,[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"render",value:function(){var a=void 0,b=void 0;"ready"===this.wrapper.state?(a=this.wrapper.episode.Title,b=this.wrapper.episode.Description):(a="Loading",b="Loading");var c=e.podcastrender(d.identRender(),{title:a,description:b});this.root.innerHTML=c}}],[{key:"name",get:function(){return"PodcastDescription"}}]),d}(d),a("default",h),h.register("podcast-description")}}}),a.register("56",["2","12","13","52","53","54","55","3b","3c"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){},function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){},function(a){},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(a){function d(){c(this,d),f(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return g(d,a),b(d,[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"render",value:function(){var a=void 0;a="ready"===this.wrapper.state?this.wrapper.episode.ImageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAIAAAAxBA+LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAiXSURBVHhe7dUxAQAADMOg+ffbf0ICJrgBQJgIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIA0kQIQJoIAUgTIQBpIgQgTYQApIkQgDQRApAmQgDSRAhAmggBSBMhAGkiBCBNhACkiRCANBECkCZCANJECECaCAFIEyEAaSIEIE2EAKSJEIA0EQKQJkIAwrYHt21mW2pFvocAAAAASUVORK5CYII=";var b=e.podcastrender(d.identRender(),{srcImage:a});this.root.innerHTML=b}}],[{key:"name",get:function(){return"PodcastImage"}}]),d}(d),a("default",h),h.register("podcast-image")}}}),a.register("57",["12","13","17"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(b){c(this,a),this.seqNumber=1,this.podcastControls=b}return b(a,[{key:"pushOmny",value:function(a){var b=Math.round(Date.now()/1e3),c=this.podcastControls.audio.currentTime,e={async:!0,url:"https://traffic.omny.fm/api/consumption/events?organizationId="+d.PLAYER.orgId,method:"POST",headers:{"content-type":"application/json"},processData:!1,data:JSON.stringify({Source:"Web",Events:[{OrganizationId:d.PLAYER.orgId,ClipId:this.podcastControls.wrapper.episodeId,SessionId:this.podcastControls.guid,Type:a,Position:c,SeqNumber:this.seqNumber,Timestamp:b}]})};this.seqNumber++,jQuery.ajax(e)}},{key:"pushGoogle",value:function(a){dataLayer.push({event:"uaevent",eventcategory:a.category,eventaction:a.action,eventlabel:this.podcastControls.wrapper.episode.Title})}}]),a}(),a("default",e)}}}),a.register("2",["12","13","17","22","52","53","54","55","56","57","3b","3c"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){},function(a){},function(a){},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){"use strict";k=function(a){
function f(){c(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).apply(this,arguments)}return j(f,a),b(f,[{key:"onDidCreate",value:function(){this.wrapper=this.parentElement.parentElement,this.audio=document.createElement("AUDIO"),this.firstPlay=!0,this.guid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)}),this.lastPercent=0,this.podcastAnalytics=new h(this),this.wrapper.addEventListener("podcast.ready",this.render.bind(this))}},{key:"toggleAudio",value:function(){this.playButton=this.find('button[data-action="play_button"]');var a=this.audio.paused?d.PLAYER.start:d.PLAYER.stop,b=this.firstPlay?d.PLAYER.firstPlay:d.PLAYER.newPlay,c={category:"Module_Podcast",action:this.audio.paused?b:d.PLAYER.pause},e=this.audio.paused?"#pause-btn":"#play-btn",f=this.audio.paused?d.PLAYER.pause:d.PLAYER.play;return this.firstPlay=!this.audio.paused&&this.firstPlay,this.podcastAnalytics.pushOmny(a),this.podcastAnalytics.pushGoogle(c),this.playButton.querySelector("use").setAttribute("xlink:href",e),this.playButton.querySelector("span").innerHTML=f,this.audio.paused?void this.audio.play():void this.audio.pause()}},{key:"rewindAudio",value:function(){var a={category:"Module_Podcast",action:d.PLAYER.rw};this.audio.currentTime>15?this.audio.currentTime-=15:this.audio.currentTime=0,this.podcastAnalytics.pushGoogle(a)}},{key:"forwardAudio",value:function(){var a={category:"Module_Podcast",action:d.PLAYER.fw};this.audio.currentTime+15<this.audio.duration?this.audio.currentTime+=15:(this.audio.currentTime=this.audio.duration,this.updateTime(),this.audio.load()),this.podcastAnalytics.pushGoogle(a)}},{key:"muteAudio",value:function(){var a={category:"Module_Podcast",action:d.PLAYER.mute};this.muteButton=this.find('button[data-action="mute_button"]');var b=this.audio.muted?"#volume-on":"#volume-mute",c=this.audio.muted?d.PLAYER.unmute:d.PLAYER.mute;this.audio.muted=!this.audio.muted,this.audio.muted&&this.podcastAnalytics.pushGoogle(a),this.muteButton.querySelector("use").setAttribute("xlink:href",b),this.audio.muted?this.muteButton.classList.add("muted"):this.muteButton.classList.remove("muted"),this.muteButton.querySelector("span").innerHTML=c}},{key:"updateTime",value:function(){if(this.audio.readyState>0){this.find('span[data-action="current_time"]').innerHTML=e.secondsToHms(this.audio.currentTime),this.find('p[data-action="accessibility_time"]').innerHTML="Time elapsed "+e.secondsToHmsAccessibility(this.audio.currentTime)+", duration "+e.secondsToHmsAccessibility(this.audio.duration);var a=this.audio.duration-this.audio.currentTime,b=this.find('span[data-action="total_time"]');b.innerHTML=0===a?e.secondsToHms(a):"-"+e.secondsToHms(a);var c=this.audio.currentTime/this.audio.duration,f=parseInt((100*c).toFixed(2),10),g=[25,50,75,95],h={category:"Module_Podcast",action:f+"%"};g.includes(f)&&this.lastPercent!==f&&(this.podcastAnalytics.pushOmny(d.PLAYER.position),this.podcastAnalytics.pushGoogle(h),this.lastPercent=f);var i=this.find('input[data-action="progress_bar"]');i.value=100*c,i.setAttribute("aria-valuetext",e.secondsToHmsAccessibility(this.audio.currentTime)),i.style.backgroundImage=["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+c+", #3c3c3c),","color-stop("+c+", #f6f1eb)",")"].join(""),0===a?(this.playButton.querySelector("use").setAttribute("xlink:href","#play-btn"),h={category:"Module_Podcast",action:d.PLAYER.stop},this.podcastAnalytics.pushOmny(d.PLAYER.stop),this.podcastAnalytics.pushGoogle(h),i.classList.add("finished")):i.classList.remove("finished")}}},{key:"changeTime",value:function(a){var b=a.target.value/100*this.audio.duration,c=this.find('input[data-action="progress_bar"]');this.audio.pause(),this.firstPlay||(this.playButton.querySelector("use").setAttribute("xlink:href","#play-btn"),this.playButton.querySelector("span").innerHTML="Play"),this.audio.currentTime>=this.audio.duration?c.classList.add("finished"):c.classList.remove("finished"),this.audio.currentTime=b}},{key:"getSubscriptionList",value:function(){var a=void 0,b=this.wrapper.podcastId+"_"+this.wrapper.episodeId;return Drupal.settings.podcast&&Drupal.settings.podcast[b]&&(a=Drupal.settings.podcast[b]),a}},{key:"openSubscribeDropdown",value:function(){this.subscribeButton=this.find('button[data-action="subscribe_button"]');var a=this.subscribeButton.classList.contains("dropdown-open")?"#subscribe-btn":"#close-btn",b=this.subscribeButton.classList.contains("dropdown-open")?d.PLAYER.subscribe:d.PLAYER.subscribe_close,c={category:"Module_Subscribe_Podcast",action:"Subscribe"};this.subscribeButton.querySelector("use").setAttribute("xlink:href",a),this.subscribeButton.querySelector("span").innerHTML=b,this.subscribeButton.classList.contains("dropdown-open")?(this.subscribeButton.classList.remove("dropdown-open"),this.find("ul").classList.remove("show-dropdown"),this.find("ul").classList.add("hide-dropdown")):(this.subscribeButton.classList.add("dropdown-open"),this.find("ul").classList.remove("hide"),this.find("ul").classList.add("show-dropdown"),this.find("ul").classList.remove("hide-dropdown"),this.podcastAnalytics.pushGoogle(c))}},{key:"analyticsSubscribe",value:function(a){var b={category:"Module_Subscribe_Podcast",action:a.srcElement.innerHTML};this.podcastAnalytics.pushGoogle(b)}},{key:"render",value:function(){var a=[];"ready"===this.wrapper.state?(this.audio.src=this.wrapper.episode.AudioUrl,this.audio.addEventListener("timeupdate",this.updateTime.bind(this)),a.duration=e.secondsToHms(this.wrapper.episode.DurationSeconds),a.accessibilityTime="Time elapsed 0 second, duration "+e.secondsToHmsAccessibility(this.wrapper.episode.DurationSeconds),a.subscribe=this.getSubscriptionList()):(a.duration="00:00",this.audio.src="",a.accessibilityTime="loading",a.subscribe=null);var b=g.podcastrender(f.identRender(),a);this.root.innerHTML=b,this.catchEvent('button[data-action="rewind_button"]',"click",this.rewindAudio.bind(this)),this.catchEvent('button[data-action="play_button"]',"click",this.toggleAudio.bind(this)),this.catchEvent('button[data-action="forward_button"]',"click",this.forwardAudio.bind(this)),this.catchEvent('button[data-action="mute_button"]',"click",this.muteAudio.bind(this)),this.catchEvent('button[data-action="subscribe_button"]',"click",this.openSubscribeDropdown.bind(this)),this.catchEvent("a[data-track-subscription]","click",this.analyticsSubscribe.bind(this)),this.catchEvent('input[data-action="progress_bar"]',"change",this.changeTime.bind(this)),this.catchEvent('input[data-action="progress_bar"]',"input",this.changeTime.bind(this))}}],[{key:"name",get:function(){return"PodcastControls"}}]),f}(f),a("default",k),k.register("podcast-controls")}}}),a.registerDynamic("58",[],!0,function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");c===-1&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function e(a){var b=d(a),c=b[0],e=b[1];return 3*(c+e)/4-e}function f(a,b,c){return 3*(b+c)/4-c}function g(a){var b,c,e=d(a),g=e[0],h=e[1],i=new m(f(a,g,h)),j=0,k=h>0?g-4:g;for(c=0;c<k;c+=4)b=l[a.charCodeAt(c)]<<18|l[a.charCodeAt(c+1)]<<12|l[a.charCodeAt(c+2)]<<6|l[a.charCodeAt(c+3)],i[j++]=b>>16&255,i[j++]=b>>8&255,i[j++]=255&b;return 2===h&&(b=l[a.charCodeAt(c)]<<2|l[a.charCodeAt(c+1)]>>4,i[j++]=255&b),1===h&&(b=l[a.charCodeAt(c)]<<10|l[a.charCodeAt(c+1)]<<4|l[a.charCodeAt(c+2)]>>2,i[j++]=b>>8&255,i[j++]=255&b),i}function h(a){return k[a>>18&63]+k[a>>12&63]+k[a>>6&63]+k[63&a]}function i(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16&16711680)+(a[f+1]<<8&65280)+(255&a[f+2]),e.push(h(d));return e.join("")}function j(a){for(var b,c=a.length,d=c%3,e=[],f=16383,g=0,h=c-d;g<h;g+=f)e.push(i(a,g,g+f>h?h:g+f));return 1===d?(b=a[c-1],e.push(k[b>>2]+k[b<<4&63]+"==")):2===d&&(b=(a[c-2]<<8)+a[c-1],e.push(k[b>>10]+k[b>>4&63]+k[b<<2&63]+"=")),e.join("")}this||self;b.byteLength=e,b.toByteArray=g,b.fromByteArray=j;for(var k=[],l=[],m="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,p=n.length;o<p;++o)k[o]=n[o],l[n.charCodeAt(o)]=o;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63}),a.registerDynamic("59",["58"],!0,function(a,b,c){this||self;c.exports=a("58")}),a.registerDynamic("5a",[],!0,function(a,b,c){this||self;b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}),a.registerDynamic("5b",["5a"],!0,function(a,b,c){this||self;c.exports=a("5a")}),a.registerDynamic("5c",["59","5b"],!0,function(a,b,c){"use strict";function d(){try{var a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}function e(a){if(a>Y)throw new RangeError('The value "'+a+'" is invalid for option "size"');var b=new Uint8Array(a);return Object.setPrototypeOf(b,f.prototype),b}function f(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');return j(a)}return g(a,b,c)}function g(a,b,c){if("string"==typeof a)return k(a,b);if(ArrayBuffer.isView(a))return m(a);if(null==a)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(T(a,ArrayBuffer)||a&&T(a.buffer,ArrayBuffer))return n(a,b,c);if("undefined"!=typeof SharedArrayBuffer&&(T(a,SharedArrayBuffer)||a&&T(a.buffer,SharedArrayBuffer)))return n(a,b,c);if("number"==typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');var d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return f.from(d,b,c);var e=o(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return f.from(a[Symbol.toPrimitive]("string"),b,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function i(a,b,c){return h(a),a<=0?e(a):void 0!==b?"string"==typeof c?e(a).fill(b,c):e(a).fill(b):e(a)}function j(a){return h(a),e(a<0?0:0|p(a))}function k(a,b){if("string"==typeof b&&""!==b||(b="utf8"),!f.isEncoding(b))throw new TypeError("Unknown encoding: "+b);var c=0|r(a,b),d=e(c),g=d.write(a,b);return g!==c&&(d=d.slice(0,g)),d}function l(a){for(var b=a.length<0?0:0|p(a.length),c=e(b),d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a){if(T(a,Uint8Array)){var b=new Uint8Array(a);return n(b.buffer,b.byteOffset,b.byteLength)}return l(a)}function n(a,b,c){if(b<0||a.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw new RangeError('"length" is outside of buffer bounds');var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),Object.setPrototypeOf(d,f.prototype),d}function o(a){if(f.isBuffer(a)){var b=0|p(a.length),c=e(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}return void 0!==a.length?"number"!=typeof a.length||U(a.length)?e(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}function p(a){if(a>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),f.alloc(+a)}function r(a,b){if(f.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||T(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var c=a.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&0===c)return 0;for(var e=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return O(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return R(a).length;default:if(e)return d?-1:O(a).length;b=(""+b).toLowerCase(),e=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,U(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(U(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return S(O(b,a.length-c),a,c,d)}function y(a,b,c,d){return S(P(b),a,c,d)}function z(a,b,c,d){return S(R(b),a,c,d)}function A(a,b,c,d){return S(Q(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){var b=a.length;if(b<=Z)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=Z));return c}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=_[a[f]];return e}function H(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function K(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function L(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function M(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function N(a){if(a=a.split("=")[0],a=a.trim().replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function O(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function P(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Q(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function R(a){return V.toByteArray(N(a))}function S(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function T(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function U(a){return a!==a}var V=(this||self,a("59")),W=a("5b"),X="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;b.Buffer=f,b.SlowBuffer=q,b.INSPECT_MAX_BYTES=50;var Y=2147483647;b.kMaxLength=Y,f.TYPED_ARRAY_SUPPORT=d(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(a,b,c){return g(a,b,c)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(a,b,c){return i(a,b,c)},f.allocUnsafe=function(a){return j(a)},f.allocUnsafeSlow=function(a){return j(a)},f.isBuffer=function(a){return null!=a&&a._isBuffer===!0&&a!==f.prototype},f.compare=function(a,b){if(T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength)),!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(T(g,Uint8Array))e+g.length>d.length?f.from(g).copy(d,e):Uint8Array.prototype.set.call(d,g,e);else{if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e)}e+=g.length}return d},f.byteLength=r,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},f.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):s.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},X&&(f.prototype[X]=f.prototype.inspect),f.prototype.compare=function(a,b,c,d,e){if(T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),!f.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},f.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},f.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return Object.setPrototypeOf(d,f.prototype),d},f.prototype.readUintLE=f.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUintBE=f.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUint8=f.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),W.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),W.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),W.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),W.read(this,a,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},f.prototype.writeUint8=f.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeFloatLE=function(a,b,c){return L(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return L(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(!f.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===a.length){var e=a.charCodeAt(0);("utf8"===d&&e<128||"latin1"===d)&&(a=e)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=f.isBuffer(a)?a:f.from(a,d),i=h.length;if(0===i)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var $=/[^+/0-9A-Za-z-_]/g,_=function(){for(var a="0123456789abcdef",b=new Array(256),c=0;c<16;++c)for(var d=16*c,e=0;e<16;++e)b[d+e]=a[c]+a[e];return b}()}),a.registerDynamic("5d",["5c"],!0,function(a,b,c){this||self;c.exports=a("5c")}),a.registerDynamic("5e",["5d"],!0,function(b,c,d){this||self;d.exports=a._nodeRequire?a._nodeRequire("buffer"):b("5d")}),a.registerDynamic("1d",["5e"],!0,function(a,b,c){this||self;c.exports=a("5e")}),a.registerDynamic("5f",["1d"],!0,function(a,b,c){"format cjs";this||self;!function(a){!function(a,c){"object"==typeof b&&b&&"string"!=typeof b.nodeName?c(b):(a.Mustache={},c(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;F<G;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);
if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;e<f;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;g<h;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;i<j;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;j<k;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);if(!e||p(e)&&0===e.length)return this.renderTokens(a[4],b,c,d)},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return a.escape(d)},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.3.2",a.tags=["{{","}}"];var y=new n;return a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n,a})}(a("1d").Buffer)}),a.registerDynamic("33",["5f"],!0,function(a,b,c){this||self;c.exports=a("5f")}),a.register("53",["12","13","33"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(){c(this,a)}return b(a,null,[{key:"parseContent",value:function(a,b){return!window.DEBUG_MODE&&d?d.render(a,b):a.replace(/\{(\w+)\}/gi,function(a,c){return void 0!==b[c]?b[c]:a})}},{key:"render",value:function(b,c){if(APP.templates&&b in APP.templates){var d=APP.templates[b];return c=c?c:{},Drupal&&Drupal.settings&&(Drupal.settings.hermes_translations&&Drupal.settings.hermes_translations.storeLocator&&(c=a.mergeJson(c,Drupal.settings.hermes_translations.storeLocator)),!window.DEBUG_MODE&&Drupal.settings.hermes_store_locator&&(c=a.mergeJson(c,Drupal.settings.hermes_store_locator))),a.parseContent(d,c)}return"[no-template for "+b+"]"}},{key:"mergeJson",value:function(b,c){for(var d in c)"object"==typeof c[d]?a.mergeJson(b,c[d]):b[d]=c[d];return b}},{key:"podcastrender",value:function(b,c){if(APP.templates&&b in APP.templates){var d=APP.templates[b];return c||(c={}),a.parseContent(d,c)}return"[no-template for id: "+b+"]"}}]),a}(),a("default",e)}}}),a.register("60",["12","13"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"ajaxCall",value:function(a){var b=a.method||"GET",c=a.async||!0,d=new XMLHttpRequest;if(d.onreadystatechange=function(){4===d.readyState&&(200===d.status||201===d.status||205===d.status?a.success(d):a.fail(d))},d.open(b,a.url,c),a.headers&&a.headers.length>0)for(var e=0;e<a.headers.length;e++){var f=a.headers[e].name,g=a.headers[e].value;d.setRequestHeader(f,g)}return d.send(),d.responseText}},{key:"get",value:function(b){var c=b;return c.async=!1,a.ajaxCall(c)}}]),a}(),a("default",d)}}}),a.register("61",["12","13","17","60"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a),this.JSON=[]}return b(a,[{key:"getJSON",value:function(){return this.JSON}}],[{key:"getEpisode",value:function(a,b,c){var f="https://omny.fm/api/orgs/"+d.PLAYER.orgId+"/clips/"+b;e.get({url:f,headers:[{name:"Content-Type",value:"application/json"}],success:function(a){var b=JSON.parse(a.responseText);c&&c(b)},fail:function(a){}})}}]),a}(),a("default",f),a("PodcastJSON",f=new f)}}}),a.register("55",["2","12","13","22","52","53","54","56","61","3b","3c","3f"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){},function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){},function(a){},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){}],execute:function(){"use strict";j=function(a){function e(){c(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,a),b(e,[{key:"onDidCreate",value:function(){this.state="loading",this.podcastId=this.getAttribute("podcast-id"),this.episodeId=this.getAttribute("episode-id"),this.isInViewport()||(this.bindedEvent=this.isInViewport.bind(this),document.addEventListener("scroll",this.bindedEvent))}},{key:"isInViewport",value:function(){var a=document.querySelector("podcast-wrapper"),b=d.isInViewport(a);return b&&(g.getEpisode(this.podcastId,this.episodeId,this.responseJSON.bind(this)),document.removeEventListener("scroll",this.bindedEvent)),b}},{key:"responseJSON",value:function(a){this.episode=a;var b=new Event("podcast.ready");this.state="ready",this.dispatchEvent(b)}},{key:"render",value:function(){var a=f.podcastrender(e.identRender(),{});this.root.innerHTML=a}}],[{key:"name",get:function(){return"PodcastWrapper"}}]),e}(e),a("default",j),j.register("podcast-wrapper")}}}),a.registerDynamic("62",["63","42"],!0,function(a,b,c){var d=(this||self,a("63")),e=a("42");c.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}}),a.registerDynamic("64",[],!0,function(a,b,c){this||self;c.exports=!0}),a.registerDynamic("65",["66"],!0,function(a,b,c){this||self;c.exports=a("66")}),a.registerDynamic("67",[],!0,function(a,b,c){this||self;c.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),a.registerDynamic("68",["69"],!0,function(a,b,c){this||self;c.exports=!a("69")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),a.registerDynamic("66",["46","67","68"],!0,function(a,b,c){var d=(this||self,a("46")),e=a("67");c.exports=a("68")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}}),a.registerDynamic("6a",["46","67","6b","66","6"],!0,function(a,b,c){"use strict";var d=(this||self,a("46")),e=a("67"),f=a("6b"),g={};a("66")(g,a("6")("iterator"),function(){return this}),c.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}}),a.registerDynamic("6c",[],!0,function(a,b,c){var d=(this||self,{}.hasOwnProperty);c.exports=function(a,b){return d.call(a,b)}}),a.registerDynamic("6b",["46","6c","6"],!0,function(a,b,c){var d=(this||self,a("46").setDesc),e=a("6c"),f=a("6")("toStringTag");c.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}}),a.registerDynamic("2b",["64","4e","65","66","6c","7","6a","6b","46","6"],!0,function(a,b,c){"use strict";var d=(this||self,a("64")),e=a("4e"),f=a("65"),g=a("66"),h=a("6c"),i=a("7"),j=a("6a"),k=a("6b"),l=a("46").getProto,m=a("6")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};c.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}}),a.registerDynamic("b",["62","2b"],!0,function(a,b,c){"use strict";var d=(this||self,a("62")(!0));a("2b")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})}),a.registerDynamic("4b",[],!0,function(a,b,c){this||self;c.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),a.registerDynamic("2d",["4b"],!0,function(a,b,c){var d=(this||self,a("4b"));c.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}}),a.registerDynamic("6d",["2d"],!0,function(a,b,c){var d=(this||self,a("2d"));c.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}}),a.registerDynamic("6e",["7","6"],!0,function(a,b,c){var d=(this||self,a("7")),e=a("6")("iterator"),f=Array.prototype;c.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}}),a.registerDynamic("63",[],!0,function(a,b,c){var d=(this||self,Math.ceil),e=Math.floor;c.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}}),a.registerDynamic("6f",["63"],!0,function(a,b,c){var d=(this||self,a("63")),e=Math.min;c.exports=function(a){return a>0?e(d(a),9007199254740991):0}}),a.registerDynamic("41",[],!0,function(a,b,c){var d=(this||self,{}.toString);c.exports=function(a){return d.call(a).slice(8,-1)}}),a.registerDynamic("5",["41","6"],!0,function(a,b,c){var d=(this||self,a("41")),e=a("6")("toStringTag"),f="Arguments"==d(function(){return arguments}());c.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}}),a.registerDynamic("7",[],!0,function(a,b,c){this||self;c.exports={}}),a.registerDynamic("2e",["5","6","7","8"],!0,function(a,b,c){var d=(this||self,a("5")),e=a("6")("iterator"),f=a("7");c.exports=a("8").getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}}),a.registerDynamic("70",["71"],!0,function(a,b,c){var d=this||self,d=a("71"),e="__core-js_shared__",f=d[e]||(d[e]={});c.exports=function(a){return f[a]||(f[a]={})}}),a.registerDynamic("72",[],!0,function(a,b,c){var d=(this||self,0),e=Math.random();c.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}}),a.registerDynamic("6",["70","72","71"],!0,function(a,b,c){var d=(this||self,a("70")("wks")),e=a("72"),f=a("71").Symbol;c.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}}),a.registerDynamic("73",["6"],!0,function(a,b,c){var d=(this||self,a("6")("iterator")),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}c.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}}),a.registerDynamic("74",["4c","4e","75","6d","6e","6f","2e","73"],!0,function(a,b,c){"use strict";var d=(this||self,a("4c")),e=a("4e"),f=a("75"),g=a("6d"),h=a("6e"),i=a("6f"),j=a("2e");e(e.S+e.F*!a("73")(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})}),a.registerDynamic("76",["b","74","8"],!0,function(a,b,c){this||self;a("b"),a("74"),c.exports=a("8").Array.from}),a.registerDynamic("10",["76"],!0,function(a,b,c){this||self;c.exports={default:a("76"),__esModule:!0}}),a.registerDynamic("14",["10"],!0,function(a,b,c){"use strict";var d=(this||self,a("10").default);b.default=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return d(a)},b.__esModule=!0}),a.registerDynamic("42",[],!0,function(a,b,c){this||self;c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),a.registerDynamic("75",["42"],!0,function(a,b,c){var d=(this||self,a("42"));c.exports=function(a){return Object(d(a))}}),a.registerDynamic("71",[],!0,function(a,b,c){var d=this||self,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)}),a.registerDynamic("77",[],!0,function(a,b,c){this||self;c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),a.registerDynamic("4c",["77"],!0,function(a,b,c){var d=(this||self,a("77"));c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}}),a.registerDynamic("4e",["71","8","4c"],!0,function(a,b,c){var d=this||self,d=a("71"),e=a("8"),f=a("4c"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,c.exports=h}),a.registerDynamic("69",[],!0,function(a,b,c){this||self;c.exports=function(a){try{return!!a()}catch(a){return!0}}}),a.registerDynamic("44",["4e","8","69"],!0,function(a,b,c){var d=(this||self,a("4e")),e=a("8"),f=a("69");c.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}}),a.registerDynamic("78",["75","44"],!0,function(a,b,c){var d=(this||self,a("75"));a("44")("keys",function(a){return function(b){return a(d(b))}})}),a.registerDynamic("8",[],!0,function(a,b,c){var d=(this||self,c.exports={version:"1.2.6"});"number"==typeof __e&&(__e=d)}),a.registerDynamic("79",["78","8"],!0,function(a,b,c){this||self;a("78"),c.exports=a("8").Object.keys}),a.registerDynamic("39",["79"],!0,function(a,b,c){this||self;c.exports={default:a("79"),__esModule:!0}}),a.register("38",[],function(a){"use strict";var b;return{setters:[],execute:function(){b={set:function(a,b){"object"==typeof b&&(b=JSON.stringify(b)),this.hasSessionStorage()?sessionStorage.setItem(a,b):this.setCookie(a,b)},get:function(a){var b=this.hasSessionStorage()?sessionStorage.getItem(a):this.getCookie(a);if(b)try{return JSON.parse(b)}catch(a){return b}},deleteItem:function(a){this.hasSessionStorage()?sessionStorage.removeItem(a):this.deleteCookie(a)},clear:function(){sessionStorage.clear()},hasSessionStorage:function(){var a="test";try{return sessionStorage.setItem(a,a),sessionStorage.removeItem(a),!0}catch(a){return!1}},getCookie:function(a){if(document.cookie){var b=function(){var b=document.cookie.split(";"),c=a.length+1,d=b.map(function(a){return jQuery.trim(a)}).find(function(b){return b.substring(0,c)===a+"="});return d?{v:decodeURIComponent(d.substring(c))}:{v:void 0}}();if("object"==typeof b)return b.v}},setCookie:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=c.expires;if("number"==typeof d){var e=new Date;e.setTime(e.getTime()+24*d*60*60*1e3),d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString()),b=encodeURIComponent(b);var f=a+"="+b;for(var g in c)if(c.hasOwnProperty(g)){f+="; "+g;var h=c[g];h!==!0&&(f+="="+h)}document.cookie=f},deleteCookie:function(a){this.setCookie(a,null,{expires:-1})}},a("default",b)}}}),a.register("17",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{COLOR_LESS:"SANSCOLORIS",SIZE_LESS:"SANS_TAILLE",CANADA:"ca",FRANCE:"fr",JAPAN:"jp",HK:"hk",MACAO:"mo",TAIWAN:"tw",KOREA:"kr",US:"us",CHINA:"cn",EMIRATES:"dh",SAUDI:"ri",NEED_YUNPIAN:["cn","hk","mo","tw","kr","th"],REGION_DISTRICT_FIELDS:["hk","tw","mo","th"],PHONE_LOGIN:["cn"],DELIVER:"deliver",PICKUP:"pickup",COLOR_LESS_WITH_SPACE:"SANS_COLORIS",NB_ITEMS_GRID_FH:36,MIN_DAY:0,MAX_DAY:31,LENGTH_YEAR:4,LIMIT_AGE_USER:110,YEAR_LABEL:"year",SPECIAL_KEY:["Backspace","Del","Home","Tab","Left","Right","Up","Down","End","Spacebar","Shift"],TABLET_LANDSCAPE_WIDTH:1024,TABLET_PORTRAIT_WIDTH:768,REGION_DISABLED:-1,LOGIN_DELAY:4e3,HOSTNAME:["www.hermes.com","www.hermes.cn"],ERRORCODE:{inactivity:"401",emptyCart:"4100004",wrongEmailPassword:"2300001",oldPasswordIncorrect:"2310001",emailExist:"2400001",accountExist:"2400011",emailNewsletterInvalid:"2200000",emailInvalid:"2200001",outOfStock:"3300007",notInStock:"3400007",expiredHash:"2900005",hashNotFound:"2300005",smsBanned:"3100002",wechatbindingUserNotFound:"6000011",wechatbindingUserAlreadyBind:"6100011",wechatbindingUnionIdAlreadyUsed:"6200011",wechatbindingNeededParams:"6300011"},BRAND:"hermes",PRODUCTSIMPLEPAGELABEL:"SingleProductPage",PRODUCTDOUBLEPAGELABEL:"DoubleProductPage",LOOKPAGELABEL:"LooksProductPage",NONAPP:"N/A",MOTHERCAT:"1481",NONCONNECTED:"non-connected",FRONT_PAGE:"front page",FAQ_PAGE:"faq page",LEGAL_PAGE:"legal page",PAGE_404:"404 error page",LISTING_PAGE:"listing page",STORY_PAGE:"edito page",ACCOUNT_PROFIL_PAGE:"account",PRODUCT_PAGE:"product page",PRODUCT_PAGE_SINGLE:"single product page",PRODUCT_PAGE_DOUBLE:"double product page",PRODUCT_PAGE_LOOK:"look product page",PRODUCT_PAGE_SET:"set product page",FIND_STORE_PAGE:"store locator",VALIDATE_3DS_PAGE:"validate_3ds page",CHECKOUT_CONFIRMATION:"Checkout confirmation",PRODUCT_GRID:"product grid",MASTER_PAGE:"master page",SCROLL_PARAM:"positionsku",START_INDEX_PARAM:"fh_start_index",LIMIT_PRODUCTS_PARAM:108,SEARCH_RESULTS:"search results",MODULE_VIDEO:"Module_Video",VPURI_FINDYOURORDER:"/findyourorder/",VPURI_ORDERSTRAY:"/orderstray/",COUNTRY_USING_MILES:["US"],GENDERS:["Ms.","Mrs.","Mr.","Miss","Dr","Prof","Honorable"],EXTRA_URL_PARAM:["positionsku"],SECURITY_3DS_LOGOS:[{img:"visa",alt:"Verified by Visa"},{img:"mastercard",alt:"MasterCard SecureCode"},{img:"amex",alt:"American Express SafeKey"}],PAYMENT_OK:"payment_OK",PAYMENT_NOK:"payment_NOK",NOT_USED:"not_used",DURATION_SLIDE_TOGGLE:500,EXCHANGE:"exchange",REFUND:"refund",RETURN:"return",ENTER_KEY:"Enter",SPACE_KEY:"Space",BACKSPACE_KEY:"Backspace",ESCAPE_KEY:"Escape",ESCAPE_KEYCODE:27,DOWN_KEY:"ArrowDown",UP_KEY:"ArrowUp",TAB_KEY:"Tab",TAB_KEYCODE:9,SPACE_KEYCODE:32,END_KEYCODE:35,HOME_KEYCODE:36,LEFT_KEYCODE:37,UP_KEYCODE:38,RIGHT_KEYCODE:39,DOWN_KEYCODE:40,CHECKOUT:"Checkout",DATAGROUP:"data-group",INVALIDTYPES:[null,"file","image","submit","fieldset","reset","button","hidden"],FIELD_REF_SIZE:"field_ref_size",FIELD_COLOR_HERMES:"field_color_hermes",FIELD_MASS_VOLUME_INT:"field_mass_volume_int",FIELD_MASS_VOLUME_IMP:"field_mass_volume_imp",REQUIRED:"required",ERROR:"error",NO_SHIPPING_ADDRESS_MSG_COUNTRY_PREFIX:{US:"the"},SOAP_SET_COUNT:[3],PIPE_ENCODED:"%7C",REDIRECT_DELAY:3e3,NOTAX:"--",IS_IOS:/i(Phone|Pod|Pad)/.test(navigator.appVersion),KIT_APPLEWATCH:"KIT_APPLEWATCH",ACTIVATE_CAPTCHA_URL:"/is-captcha-activated",GET_LIST_CHINA_ADDRESS:"/address/china/infos",ADDRESS_DISTRICTS_URL:"/address/districts",PAYMENT_METHOD:{creditCard:"adyen_cc",adyenOneclick:"adyen_oneclick",paypal:"adyen_hpp_paypal",alipay:"alipay_payment",kcp:"adyen_hpp_kcp",kcp_payco:"adyen_hpp_kcp_payco",wechat:"wechatpay",hsbcCup:"hsbc_cup"},EZ_PUBLISH_COUNTRY_MAPPING:{ca:"Canada",fr:"France",us:"United States",gb:"Great Britain",cn:"China",de:"Germany",es:"Spain"},BIKINI:"BIKINI",PLAYER:{autoplay:"Autoplay",firstPlay:"FirstPlay",fullscreen:"Fullscreen",fw:"fw15",mute:"Mute",newPlay:"NewPlay",orgId:"88c3d9f3-ba13-4700-9f9f-a9030187bd5b",pause:"Pause",play:"Play",position:"Position",subscribe:"Subscribe to podcast",subscribe_close:"Close subscribe to podcast",rw:"rw15",start:"Start",stop:"Stop",unmute:"Unmute"},SAGAWA_CARRIER:"sagawa_standard",JAPAN_LASTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_LASTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_NO_NUMBERS_PATTERN:"\\d",FORGOT_PASSWORD_URL:"/forgot-password",CREATE_LIGHT_ACCOUNT_URL:"/customer/light",PRODUCT_LOCATOR_MSG_CONCESSIONARY_DISCLAIMER_COUNTRIES:["fr","us","it"],FORM_COUNTRY_DEFAULT_FIELDS_VALUES:{city:1,cityselect:-1,day:-1,district:-1,district_bis_id:-1,email:1,firstname:1,firstname2:-1,gender:-1,lastname:1,lastname2:-1,month:-1,postcode:1,postcode_bis:-1,postcode_select:-1,prefix:1,region:-1,regiontext:-1,street1:1,street2:0,subject_list:1,telephone2:-1,year:-1}})}}}),a.register("22",["12","13","17","38","39"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(){c(this,a)}return b(a,null,[{key:"getCreditCardsData",value:function(a,b){var c={},d=!1;return Array.prototype.concat.apply([],f(a).filter(function(a){return b||!/adyen_hpp_|mercury_hpp_/.test(a)}).map(function(b){return f(a[b]).map(function(c){return a[b][c]})})).filter(function(a){return c[a.data]||a.data.indexOf("alipay")!==-1?a.data.indexOf("alipay")>-1?!d&&(d=!0,!0):void 0:(c[a.data]=a.data,!0)})}},{key:"allowedAutocompleteCountries",value:function(){var a=[];for(var b in Drupal.settings.hermes_account.options_countries)Drupal.settings.hermes_account.options_countries[b]["autocomplete-address"]&&a.push(b);return a}},{key:"isAutocompleteAddressActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-address"]}},{key:"getGoogleRegionMapping",value:function(a){return Drupal.settings.hermes_account.options_countries[a.toUpperCase()]["region-mapping"]}},{key:"isChina",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.CHINA,"i"))}},{key:"isHK",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.HK,"i"))}},{key:"isMacao",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.MACAO,"i"))}},{key:"isTaiwan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.TAIWAN,"i"))}},{key:"isKorea",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.KOREA,"i"))}},{key:"needSmsProvider",value:function(){return d.NEED_YUNPIAN.includes(Drupal.settings.hermes_current_country)}},{key:"needPhoneLogin",value:function(){return d.PHONE_LOGIN.includes(Drupal.settings.hermes_current_country)}},{key:"needStateDistrictFields",value:function(a){return d.REGION_DISTRICT_FIELDS.includes(a.toLowerCase())}},{key:"isJapan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(d.JAPAN,"i"))}},{key:"hasLoginPhoneNumber",value:function(a){return a.phoneCode&&a.loginphone}},{key:"urlTransform",value:function(a){var b=a;return a?(this.isChina()&&(b=a.replace(/hermes\.com/g,"hermes.cn")),b):b}},{key:"isWechatInApp",value:function(){return navigator.userAgent.indexOf("MicroMessenger")!==-1}},{key:"findGetParameter",value:function(a,b){if(b){var c=b.split("?");c&&(b="?"+b.split("?")[1])}else b=window.location.search;var d=null,e=[];return b.substr(1).split("&").forEach(function(b){e=b.split("="),e[0]===a&&(d=decodeURIComponent(e[1]))}),d}},{key:"resizeCarousel",value:function(a){["afterChange","beforeChange"].forEach(function(b){jQuery(a).on(b,function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];b.$slides.each(function(a,b){jQuery(b).height(d.includes(a)?"100%":"1px")})})})}},{key:"generateReCaptcha",value:function(b,c){if(!a.isChina()){var d=b.success,e=parseInt(d,10);e&&jQuery.when(jQuery.getScript("https://www.google.com/recaptcha/api.js?render=explicit")).then(function(){APP=APP||{},APP.recaptcha=APP.recaptcha||{};var b=c.replace("#","");APP.recaptcha[b]||0===APP.recaptcha[b]||(a.initReCaptcha(APP,b),jQuery('<p class="captcha-label" aria-hidden="true">'+Drupal.settings.hermes_translations.validation.securityCheck+"</p>").insertBefore(c+"-captcha"))})}}},{key:"initReCaptcha",value:function(b,c){setTimeout(function(){"undefined"==typeof grecaptcha||"undefined"==typeof grecaptcha.render?a.initReCaptcha(b,c):b.recaptcha[c]=grecaptcha.render(c+"-captcha",{sitekey:Drupal.settings.hermes_global.google.apis.recaptcha.site_key,hl:e.get("currentLanguage")})}.bind(this),100)}},{key:"validateRecaptcha",value:function(b){var c=jQuery("#"+b+"-captcha");return!APP.recaptcha||"undefined"==typeof APP.recaptcha[b]||(APP.recaptcha[b]||0===APP.recaptcha[b]?window.grecaptcha.getResponse(APP.recaptcha[b])?(c.removeClass("validation-error"),!0):(a.throwErrorReCaptcha(c),window.grecaptcha.reset(),!1):(a.throwErrorReCaptcha(c),!1))}},{key:"throwErrorReCaptcha",value:function(a){a.hasClass("validation-error")||(a.addClass("validation-error"),jQuery('<p class="captcha-error-message error-message" aria-hidden="true">'+Drupal.settings.hermes_translations.validation.required+"</p>").insertAfter(a))}},{key:"ieAccordPlusToMinForIe",value:function(a,b){var c=!!document.documentMode;if(c)return a.find(".accordion-icon-plus").attr("transform","rotate("+b+")")}},{key:"trapFocusInTray",value:function(a){setTimeout(function(){var b=a.find("a:visible, object:visible, :input:visible, iframe:visible, [tabindex]:visible").filter(":not(.invisible a)"),c=b.first()[0],e=b.last()[0];a.off("keydown").on("keydown",function(a){var b=a.key===d.TAB_KEY||a.keyCode===d.TAB_KEYCODE;b&&(a.shiftKey?document.activeElement===c&&(e.focus(),a.preventDefault()):document.activeElement===e&&(c.focus(),a.preventDefault()))})},10)}},{key:"isAngularMode",value:function(){return Drupal.settings.hermes_angular||!1}},{key:"is_touch_device",value:function(){var a=" -webkit- -moz- -o- -ms- ".split(" "),b=function(a){return window.matchMedia(a).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var c=["(",a.join("touch-enabled),("),"heartz",")"].join("");return b(c)}},{key:"pwdStrengthScreenReader",value:function(a,b,c){var d=jQuery(b),e=jQuery(c),f=e.parents(".container-fieldset").find(".password-strength-label").attr("id"),g=function(b){b.map(function(a){return d.parent().attr("aria-hidden",!c.value.length),e.attr("aria-describedby",f),a}).filter(function(a){return"attributes"===a.type&&"class"===a.attributeName}).forEach(function(){return d.text(""),a.classList.contains("weak")?void d.text(": "+Drupal.settings.hermes_translations.account.weak):a.classList.contains("medium")?void d.text(": "+Drupal.settings.hermes_translations.account.medium):void(a.classList.contains("strong")&&d.text(": "+Drupal.settings.hermes_translations.account.strong))}),""===e.val()&&e.removeAttr("aria-describedby")};return new MutationObserver(g)}},{key:"secondsToHms",value:function(a){var b=Number(a),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c>0&&1===c.toString().length?c="0"+c+":":c.toString().length>1?c+=":":c="",d>0&&1===d.toString().length?d="0"+d+":":d.toString().length>1?d+=":":d="00:",e=e>0&&1===e.toString().length?"0"+e:e.toString().length>1?""+e:"00",c+d+e}},{key:"secondsToHmsAccessibility",value:function(a){var b=Number(a),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c>1?c+=" hours ":1===c?c+=": hour ":c="",d>1?d+=" minutes ":1===d?d+=" minute ":d="",e>1?e+=" secondes":1===e?e+=" seconde":e="",c+d+e}},{key:"isInViewport",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=a?a.getBoundingClientRect():null,d=window.innerHeight||document.documentElement.clientHeight,e=window.innerWidth||document.documentElement.clientWidth,f=d*(100-b)/100;if(c){if(100===b)return c.top>=0&&c.bottom<=d&&c.left>=0&&c.right<=e;var g=c.bottom>=0&&c.bottom<=f,h=c.top>=0&&c.top<=f,i=c.left>=0&&c.left<=e,j=c.right>=0&&c.right<=e;return(g||h)&&(i||j)}return!1}},{key:"isFirefox",value:function(){return navigator.userAgent.indexOf("Firefox")!==-1}},{key:"setFocusOnElement",value:function(a){var b="tabindex",c=jQuery(a);c.length>0&&(c.attr(b,"0"),c.focus())}},{key:"getLineSeparator",value:function(){var a=void 0;return a=this.isJapan()||this.isMacao()||this.isHK()||this.isKorea()?"<br/>":null}},{key:"setLatinCharOnly",value:function(a){jQuery(a).find('input[name="firstname"]').addClass("only-latin-char"),jQuery(a).find('input[name="lastname"]').addClass("only-latin-char"),jQuery(a).find('input[name="email"]').addClass("only-latin-char"),jQuery(a).find('input[name="company"]').addClass("only-latin-char"),jQuery(a).find('input[name="street1"]').addClass("only-latin-char"),jQuery(a).find('input[name="street2"]').addClass("only-latin-char"),jQuery(a).find('input[name="city"]').addClass("only-latin-char")}},{key:"setLatinCharOnlyForUaeSa",value:function(a){jQuery(a).find('input[name="firstname"]').addClass("only-latin-char-for-uae-sa"),
jQuery(a).find('input[name="lastname"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="email"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="street1"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="street2"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="city"]').addClass("only-latin-char-for-uae-sa")}},{key:"assignValues",value:function(b,c){switch(b.country_id){case"CN":a.isChina()&&(b.city=b.cityselect);break;case"TH":b.district=c,b.city=b.district,b.postcode=b.postcode_select,delete b.postcode_select}}}]),a}(),a("default",g)}}}),a.register("7a",["12","13","14","22"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a),this.animation="slide-animation",this._scrollListener=this._displayAnimation.bind(this)}return b(a,[{key:"init",value:function(){var a=this,b=!!document.querySelectorAll("[data-merch-campaignid]").length;b?jQuery(document).ajaxComplete(function(b,c,d){d.url.search("campaign")!==-1&&a._load()}):this._load()}},{key:"_load",value:function(){this._$blocksToAnimate=[].concat(d(document.getElementsByClassName("has-animation"))),this._displayAnimation(),document.addEventListener("scroll",this._scrollListener)}},{key:"_displayAnimation",value:function(){for(var a=0;a<this._$blocksToAnimate.length;){var b=this._$blocksToAnimate[a];e.isInViewport(b,20)?(b.classList.add(this.animation),this._$blocksToAnimate.splice(a,1)):a++}0===this._$blocksToAnimate.length&&document.removeEventListener("scroll",this._scrollListener)}}]),a}(),a("default",f)}}}),a.register("20",[],function(a){"use strict";function b(a){if(a&&a.matches&&(a.point||a.currentTarget&&a.currentTarget.point)){var b=a.point||a.currentTarget.point;APP.pubsub.publish("mediaQuery."+b)}}function c(){var a="";for(var c in i)i[c]&&(a=window.matchMedia(i[c]),a.point=c,b(a),a.addListener(b))}function d(){return window.matchMedia(i.small).matches}function e(){return window.matchMedia(i.medium).matches}function f(){return window.matchMedia(i.large).matches}function g(){return window.matchMedia(i.xlarge).matches}function h(){return window.matchMedia(i.xxlarge).matches}var i;return{setters:[],execute:function(){i={small:"(max-width: 767px)",medium:"(min-width: 768px) and (max-width: 1023px)",large:"(min-width: 1024px) and (max-width: 1279px)",xlarge:"(min-width: 1280px) and (max-width: 1679px)",xxlarge:"(min-width: 1680px)"},a("init",c),a("isSmall",d),a("isMedium",e),a("isLarge",f),a("isXLarge",g),a("isXXLarge",h)}}}),a.registerDynamic("46",[],!0,function(a,b,c){var d=(this||self,Object);c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach}}),a.registerDynamic("7b",["46"],!0,function(a,b,c){var d=(this||self,a("46"));c.exports=function(a,b,c){return d.setDesc(a,b,c)}}),a.registerDynamic("7c",["7b"],!0,function(a,b,c){this||self;c.exports={default:a("7b"),__esModule:!0}}),a.registerDynamic("12",["7c"],!0,function(a,b,c){"use strict";var d=(this||self,a("7c").default);b.default=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.__esModule=!0}),a.registerDynamic("13",[],!0,function(a,b,c){"use strict";this||self;b.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.__esModule=!0}),a.register("7d",["12","13"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"pushEvent",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];dataLayer.push({event:"uaevent",eventcategory:"Search",eventaction:"Search edito",eventlabel:a})}},{key:"comingFromSearch",value:function(){var a=window.location.search,b=window.location.origin,c=document.referrer?new URL(document.referrer):null,d=c?c.origin:null,e=null;a&&(e="?s="===a.substring(0,3)),c&&a&&e&&b===d&&this.pushEvent(decodeURI(a.slice(3)))}}]),a}(),a("default",d)}}}),a.register("1",["3","16","20","31","55","1f","3d","7a","7d"],function(a){"use strict";function b(){new q,new l;var a=new p({elements:"[data-video]"}),b=new r;a.init(),a.catchMenuContentVideoJS(),b.init(),m(),requestAnimationFrame(function(){jQuery(".product-item-loading").removeClass("product-item-loading")}),jQuery(".block-edito-block-category-highlight .field-collection-container").removeClass("clearfix"),j(),c(),s.comingFromSearch()}function c(){jQuery(".js-more-looks").on("click",e.bind(this)),setTimeout(function(){d()},1e3),f(),v.on("click",function(a){g(a)}),w.on("click",function(a){h(a)}),window.addEventListener("scroll",function(){k(),window.clearTimeout(z),z=setTimeout(function(){j()},100)})}function d(){jQuery(".jwplayer").addClass("jw-skin-freecaster_v7"),jQuery(".jwplayer").removeClass("jw-skin-hermes")}function e(a){a.preventDefault(),jQuery(a.currentTarget).parent().find(".editorial-gallery").toggleClass("editorial-gallery-more")}function f(){n.isSmall()||(y=75)}function g(a){a.preventDefault(),u.animate({scrollTop:0},2e3),jQuery("#content a, #content button").first().focus()}function h(a){a.preventDefault(),u.animate({scrollTop:Math.round(x.offset().top-y)},2e3,function(){i()})}function i(){var a=Math.round(x.offset().top-y);t.scrollTop()!==a&&u.animate({scrollTop:a},500)}function j(){var a=Math.round(x.offset().top-y)-5,b=Math.round(x.offset().top+x.outerHeight()),c=t.scrollTop(),d=t.scrollTop()+t.outerHeight();c>0&&v.addClass("show"),c<a&&d!==b&&w.addClass("show")}function k(){v.removeClass("show"),w.removeClass("show")}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return{setters:[function(a){l=a.default},function(a){m=a.default},function(a){n=a},function(a){o=a.default},function(a){},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default}],execute:function(){window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||o,APP.pubsub.subscribe("app.start",b),t=jQuery(window),u=jQuery("html, body"),v=jQuery(".scroll-nav-up"),w=jQuery(".scroll-nav-down"),x=jQuery("#page-footer"),y=60,z=void 0}}})})(function(a){a()});
;/*})'"*/
;/*})'"*/
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.5.9
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!1,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.hidden="hidden",e.paused=!1,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,f,d),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0),e.checkResponsive(!0)}var b=0;return c}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=c.options.asNavFor;d&&null!==d&&(d=a(d).not(c.$slider)),null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(a.currentSlide-1===0&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(d='<ul class="'+b.options.dotsClass+'">',c=0;c<=b.getDotCount();c+=1)d+="<li>"+b.options.customPaging.call(this,b,c)+"</li>";d+="</ul>",b.$dots=a(d).appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.html(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.target);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=d.slideCount%d.options.slidesToScroll!==0,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&(a("li",b.$dots).off("click.slick",b.changeSlide),b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).off("mouseenter.slick",a.proxy(b.setPaused,b,!0)).off("mouseleave.slick",a.proxy(b.setPaused,b,!1))),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.$list.off("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.html(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!==0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.setPaused,b,!0)).on("mouseleave.slick",a.proxy(b.setPaused,b,!1))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.$list.on("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}}))},b.prototype.lazyLoad=function(){function g(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")})})},d.src=c})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=e+b.options.slidesToShow,b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay(),b.options.accessibility===!0&&b.initADA()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(){var c,d,b=this;c=a("img[data-lazy]",b.$slider).length,c>0&&(d=a("img[data-lazy]",b.$slider).first(),d.attr("src",null),d.attr("src",d.attr("data-lazy")).removeClass("slick-loading").load(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad(),b.options.adaptiveHeight===!0&&b.setPosition()}).error(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad()}))},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,c.options.infinite||(c.slideCount<=c.options.slidesToShow?c.currentSlide=0:c.currentSlide>e&&(c.currentSlide=e)),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b]),b.options.autoplay===!0&&b.focusHandler()},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=b.slideWidth*d*-1,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(b,c,d){var f,g,e=this;if("responsive"===b&&"array"===a.type(c))for(g in c)if("array"!==a.type(e.options.responsive))e.options.responsive=[c[g]];else{for(f=e.options.responsive.length-1;f>=0;)e.options.responsive[f].breakpoint===c[g].breakpoint&&e.options.responsive.splice(f,1),f--;e.options.responsive.push(c[g])}else e.options[b]=c;d===!0&&(e.unload(),e.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.setPaused=function(a){var b=this;b.options.autoplay===!0&&b.options.pauseOnHover===!0&&(b.paused=a,a?b.autoPlayClear():b.autoPlay())},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d);
}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"left":"right":"vertical"},b.prototype.swipeEnd=function(a){var c,b=this;if(b.dragging=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.slideHandler(c),b.currentDirection=0,b.touchObject={},b.$slider.trigger("swipe",[b,"left"]);break;case"right":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.slideHandler(c),b.currentDirection=1,b.touchObject={},b.$slider.trigger("swipe",[b,"right"])}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.options.vertical===!1?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return 1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):a.options.autoplay===!0&&(a.paused=!1,a.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.focusHandler=function(){var b=this;b.$slider.on("focus.slick blur.slick","*",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.isPlay&&(d.is(":focus")?(b.autoPlayClear(),b.paused=!0):(b.paused=!1,b.autoPlay()))},0)})},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});
;/*})'"*/
;/*})'"*/
!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return s[a]||(s[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},{id:b.name});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=s[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=n(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b.default:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);void 0!==l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,r(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&r(a,c,d)}catch(d){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(u[a])return u[a];if("@node/"==a.substr(0,6))return u[a]=k(t(a.substr(6)));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&r(b.module.exports,"__esModule",{value:!0}),u[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){q=!1}var r;!function(){try{Object.defineProperty({},"a",{})&&(r=Object.defineProperty)}catch(a){r=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var s={},t="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&"undefined"!=typeof require.resolve&&"undefined"!=typeof process&&process.platform&&require,u={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:t,register:b,registerDynamic:c,get:n,set:function(a,b){u[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)(function(a,b){b&&b.__esModule?u[a]=b:u[a]=k(b)})(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j.default:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function(a){this.require,this.exports,this.module;!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if("string"==typeof a)return c(a,b);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=!0,f=0;f<a.length;f++){var g=c(a[f],b);e&&(d.default=g,e=!1),d[a[f].split(".").pop()]=g}return d}function e(a){if(Object.keys)Object.keys(b).forEach(a);else for(var c in b)i.call(b,c)&&a(c)}function f(a){e(function(c){if(-1==j.call(k,c)){try{var d=b[c]}catch(a){k.push(c)}a(c,d)}})}var g,h=a,i=Object.prototype.hasOwnProperty,j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];h.set("@@global-helpers",h.newModule({prepareGlobal:function(a,c,e){var h=b.define;b.define=void 0;var i;if(e){i={};for(var j in e)i[j]=b[j],b[j]=e[j]}return c||(g={},f(function(a,b){g[a]=b})),function(){var a;if(c)a=d(c);else{a={};var e,j;f(function(b,c){g[b]!==c&&"undefined"!=typeof c&&(a[b]=c,"undefined"!=typeof e?j||e===c||(j=!0):e=c)}),a=j?a:e}if(i)for(var k in i)b[k]=i[k];return b.define=h,a}}}))}("undefined"!=typeof self?self:global),a.register("2",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a),this.$cookieBannerContainer=jQuery(".cookie-banner-container"),this.cookieBannerName="cookiebanner",this.cookieBannerDurationInDays=365}return b(a,[{key:"init",value:function(){this.bannerIsPresent()&&this.bindEvents()}},{key:"bindEvents",value:function(){jQuery(".close-cookie-banner").on("click",this.closeCookieBannerHandler.bind(this)),jQuery(".cookie-banner a").on("click",this.clickOnCookieBannerLink.bind(this)),jQuery(window).bind("pageshow",this.onPageLoad.bind(this))}},{key:"closeCookieBannerHandler",value:function(a){a.preventDefault(),this.readCookie(this.cookieBannerName)||this.defineCookie(this.valueFormula()),this.closeCookieBanner()}},{key:"clickOnCookieBannerLink",value:function(){this.deleteCookie(this.cookieBannerName)}},{key:"onPageLoad",value:function(){this.checkCookieBanner()&&this.defineCookie(this.valueFormula())}},{key:"checkCookieBanner",value:function(){var a=this.readCookie(this.cookieBannerName),b=Drupal.settings.hermes_global.cookie_banner_timestamp,c=Drupal.settings.show_drupal_cookie_banner;return c&&(a<b||!a)?(this.openCookieBanner(),!0):(this.closeCookieBanner(),!1)}},{key:"defineCookie",value:function(a){this.createCookie(this.cookieBannerName,a,this.cookieBannerDurationInDays)}},{key:"closeCookieBanner",value:function(){this.$cookieBannerContainer.addClass("hide")}},{key:"openCookieBanner",value:function(){this.$cookieBannerContainer.removeClass("hide")}},{key:"deleteCookie",value:function(a){this.createCookie(a,"",-1)}},{key:"createCookie",value:function(a,b,c){var d=void 0;c&&(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3));var e=c?"; expires="+d.toGMTString():"";document.cookie=a+"="+b+e+"; path=/"}},{key:"readCookie",value:function(a){var b=a+"=",c=document.cookie.split(";"),d=new RegExp("^"+b),e=c.map(function(a){return a.replace(/^\s*/,"")}).find(function(a){return d.test(a)});return!!e&&e.replace(d,"")}},{key:"bannerIsPresent",value:function(){return!!this.$cookieBannerContainer.length}},{key:"valueFormula",value:function(){return Math.round((new Date).getTime()/1e3)}}]),a}(),a("default",d)}}}),a.registerDynamic("5",["6"],!0,function(a,b,c){"format cjs";this||self;!function(b){!function(){function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b||a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}return b}()({1:[function(a,b,c){a(276),a(212),a(214),a(213),a(216),a(218),a(223),a(217),a(215),a(225),a(224),a(220),a(221),a(219),a(211),a(222),a(226),a(227),a(178),a(180),a(179),a(229),a(228),a(199),a(209),a(210),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(208),a(182),a(183),a(184),a(185),a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(197),a(198),a(263),a(268),a(275),a(266),a(258),a(259),a(264),a(269),a(271),a(254),a(255),a(256),a(257),a(260),a(261),a(262),a(265),a(267),a(270),a(272),a(273),a(274),a(173),a(175),a(174),a(177),a(176),a(161),a(159),a(166),a(163),a(169),a(171),a(158),a(165),a(155),a(170),a(153),a(168),a(167),a(160),a(164),a(152),a(154),a(157),a(156),a(172),a(162),a(245),a(246),a(252),a(247),a(248),a(249),a(250),a(251),a(230),a(181),a(253),a(288),a(289),a(277),a(278),a(283),a(286),a(287),a(281),a(284),a(282),a(285),a(279),a(280),a(231),a(232),a(233),a(234),a(235),a(238),a(236),a(237),a(239),a(240),a(241),a(242),a(244),a(243),b.exports=a(50)},{152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,50:50}],2:[function(a,b,c){a(290),b.exports=a(50).Array.flatMap},{290:290,50:50}],3:[function(a,b,c){a(291),b.exports=a(50).Array.includes},{291:291,50:50}],4:[function(a,b,c){a(292),b.exports=a(50).Object.entries},{292:292,50:50}],5:[function(a,b,c){a(293),b.exports=a(50).Object.getOwnPropertyDescriptors},{293:293,50:50}],6:[function(a,b,c){a(294),b.exports=a(50).Object.values},{294:294,50:50}],7:[function(a,b,c){"use strict";a(230),a(295),b.exports=a(50).Promise.finally},{230:230,295:295,50:50}],8:[function(a,b,c){a(296),b.exports=a(50).String.padEnd},{296:296,50:50}],9:[function(a,b,c){a(297),b.exports=a(50).String.padStart},{297:297,50:50}],10:[function(a,b,c){a(299),b.exports=a(50).String.trimRight},{299:299,50:50}],11:[function(a,b,c){a(298),b.exports=a(50).String.trimLeft},{298:298,50:50}],12:[function(a,b,c){a(300),b.exports=a(149).f("asyncIterator")},{149:149,300:300}],13:[function(a,b,c){a(30),b.exports=a(16).global},{16:16,30:30}],14:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],15:[function(a,b,c){var d=a(26);b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{26:26}],16:[function(a,b,c){var d=b.exports={version:"2.6.11"};"number"==typeof __e&&(__e=d)},{}],17:[function(a,b,c){var d=a(14);b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{14:14}],18:[function(a,b,c){b.exports=!a(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{21:21}],19:[function(a,b,c){var d=a(26),e=a(22).document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{22:22,26:26}],20:[function(a,b,c){var d=a(22),e=a(16),f=a(17),g=a(24),h=a(23),i="prototype",j=function(a,b,c){var k,l,m,n=a&j.F,o=a&j.G,p=a&j.S,q=a&j.P,r=a&j.B,s=a&j.W,t=o?e:e[b]||(e[b]={}),u=t[i],v=o?d:p?d[b]:(d[b]||{})[i];o&&(c=b);for(k in c)l=!n&&v&&void 0!==v[k],l&&h(t,k)||(m=l?v[k]:c[k],t[k]=o&&"function"!=typeof v[k]?c[k]:r&&l?f(m,d):s&&v[k]==m?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[i]=a[i],b}(m):q&&"function"==typeof m?f(Function.call,m):m,q&&((t.virtual||(t.virtual={}))[k]=m,a&j.R&&u&&!u[k]&&g(u,k,m)))};j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,b.exports=j},{16:16,17:17,22:22,23:23,24:24}],21:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(a){return!0}}},{}],22:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],23:[function(a,b,c){var d={}.hasOwnProperty;b.exports=function(a,b){return d.call(a,b)}},{}],24:[function(a,b,c){var d=a(27),e=a(28);b.exports=a(18)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{18:18,27:27,28:28}],25:[function(a,b,c){b.exports=!a(18)&&!a(21)(function(){return 7!=Object.defineProperty(a(19)("div"),"a",{get:function(){return 7}}).a})},{18:18,19:19,21:21}],26:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],27:[function(a,b,c){var d=a(15),e=a(25),f=a(29),g=Object.defineProperty;c.f=a(18)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{15:15,18:18,25:25,29:29}],28:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],29:[function(a,b,c){var d=a(26);b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{26:26}],30:[function(a,b,c){var d=a(20);d(d.G,{global:a(22)})},{20:20,22:22}],31:[function(a,b,c){arguments[4][14][0].apply(c,arguments)},{14:14}],32:[function(a,b,c){var d=a(46);b.exports=function(a,b){if("number"!=typeof a&&"Number"!=d(a))throw TypeError(b);return+a}},{46:46}],33:[function(a,b,c){var d=a(150)("unscopables"),e=Array.prototype;void 0==e[d]&&a(70)(e,d,{}),b.exports=function(a){e[d][a]=!0}},{150:150,70:70}],34:[function(a,b,c){"use strict";var d=a(127)(!0);b.exports=function(a,b,c){return b+(c?d(a,b).length:1)}},{127:127}],35:[function(a,b,c){b.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},{}],36:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{15:15,79:79}],37:[function(a,b,c){"use strict";var d=a(140),e=a(135),f=a(139);b.exports=[].copyWithin||function(a,b){var c=d(this),g=f(c.length),h=e(a,g),i=e(b,g),j=arguments.length>2?arguments[2]:void 0,k=Math.min((void 0===j?g:e(j,g))-i,g-h),l=1;for(i<h&&h<i+k&&(l=-1,i+=k-1,h+=k-1);k-- >0;)i in c?c[h]=c[i]:delete c[h],h+=l,i+=l;return c}},{135:135,139:139,140:140}],38:[function(a,b,c){"use strict";var d=a(140),e=a(135),f=a(139);b.exports=function(a){for(var b=d(this),c=f(b.length),g=arguments.length,h=e(g>1?arguments[1]:void 0,c),i=g>2?arguments[2]:void 0,j=void 0===i?c:e(i,c);j>h;)b[h++]=a;return b}},{135:135,139:139,140:140}],39:[function(a,b,c){var d=a(138),e=a(139),f=a(135);b.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},{135:135,138:138,139:139}],40:[function(a,b,c){var d=a(52),e=a(75),f=a(140),g=a(139),h=a(43);b.exports=function(a,b){var c=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=b||h;return function(b,h,o){for(var p,q,r=f(b),s=e(r),t=d(h,o,3),u=g(s.length),v=0,w=c?n(b,u):i?n(b,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(c)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}},{139:139,140:140,43:43,52:52,75:75}],41:[function(a,b,c){var d=a(31),e=a(140),f=a(75),g=a(139);b.exports=function(a,b,c,h,i){d(b);var j=e(a),k=f(j),l=g(j.length),m=i?l-1:0,n=i?-1:1;if(c<2)for(;;){if(m in k){h=k[m],m+=n;break}if(m+=n,i?m<0:l<=m)throw TypeError("Reduce of empty array with no initial value")}for(;i?m>=0:l>m;m+=n)m in k&&(h=b(h,k[m],m,j));return h}},{139:139,140:140,31:31,75:75}],42:[function(a,b,c){var d=a(79),e=a(77),f=a(150)("species");b.exports=function(a){var b;return e(a)&&(b=a.constructor,"function"!=typeof b||b!==Array&&!e(b.prototype)||(b=void 0),d(b)&&(b=b[f],null===b&&(b=void 0))),void 0===b?Array:b}},{150:150,77:77,79:79}],43:[function(a,b,c){var d=a(42);b.exports=function(a,b){return new(d(a))(b)}},{42:42}],44:[function(a,b,c){"use strict";var d=a(31),e=a(79),f=a(74),g=[].slice,h={},i=function(a,b,c){if(!(b in h)){for(var d=[],e=0;e<b;e++)d[e]="a["+e+"]";h[b]=Function("F,a","return new F("+d.join(",")+")")}return h[b](a,c)};b.exports=Function.bind||function(a){var b=d(this),c=g.call(arguments,1),h=function(){var d=c.concat(g.call(arguments));return this instanceof h?i(b,d.length,d):f(b,d,a)};return e(b.prototype)&&(h.prototype=b.prototype),h}},{31:31,74:74,79:79}],45:[function(a,b,c){var d=a(46),e=a(150)("toStringTag"),f="Arguments"==d(function(){return arguments}()),g=function(a,b){try{return a[b]}catch(a){}};b.exports=function(a){var b,c,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=g(b=Object(a),e))?c:f?d(b):"Object"==(h=d(b))&&"function"==typeof b.callee?"Arguments":h}},{150:150,46:46}],46:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],47:[function(a,b,c){"use strict";var d=a(97).f,e=a(96),f=a(115),g=a(52),h=a(35),i=a(66),j=a(83),k=a(85),l=a(121),m=a(56),n=a(92).fastKey,o=a(147),p=m?"_s":"size",q=function(a,b){var c,d=n(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};b.exports={getConstructor:function(a,b,c,j){var k=a(function(a,d){h(a,k,b,"_i"),a._t=b,a._i=e(null),a._f=void 0,a._l=void 0,a[p]=0,void 0!=d&&i(d,c,a[j],a)});return f(k.prototype,{clear:function(){for(var a=o(this,b),c=a._i,d=a._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];a._f=a._l=void 0,a[p]=0},delete:function(a){var c=o(this,b),d=q(c,a);if(d){var e=d.n,f=d.p;delete c._i[d.i],d.r=!0,f&&(f.n=e),e&&(e.p=f),c._f==d&&(c._f=e),c._l==d&&(c._l=f),c[p]--}return!!d},forEach:function(a){o(this,b);for(var c,d=g(a,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;)for(d(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!q(o(this,b),a)}}),m&&d(k.prototype,"size",{get:function(){return o(this,b)[p]}}),k},def:function(a,b,c){var d,e,f=q(a,b);return f?f.v=c:(a._l=f={i:e=n(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[p]++,"F"!==e&&(a._i[e]=f)),a},getEntry:q,setStrong:function(a,b,c){j(a,b,function(a,c){this._t=o(a,b),this._k=c,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a._t=void 0,k(1))},c?"entries":"values",!c,!0),l(b)}}},{115:115,121:121,147:147,35:35,52:52,56:56,66:66,83:83,85:85,92:92,96:96,97:97}],48:[function(a,b,c){"use strict";var d=a(115),e=a(92).getWeak,f=a(36),g=a(79),h=a(35),i=a(66),j=a(40),k=a(69),l=a(147),m=j(5),n=j(6),o=0,p=function(a){return a._l||(a._l=new q)},q=function(){this.a=[]},r=function(a,b){return m(a.a,function(a){return a[0]===b})};q.prototype={get:function(a){var b=r(this,a);if(b)return b[1]},has:function(a){return!!r(this,a)},set:function(a,b){var c=r(this,a);c?c[1]=b:this.a.push([a,b])},delete:function(a){var b=n(this.a,function(b){return b[0]===a});return~b&&this.a.splice(b,1),!!~b}},b.exports={getConstructor:function(a,b,c,f){var j=a(function(a,d){h(a,j,b,"_i"),a._t=b,a._i=o++,a._l=void 0,void 0!=d&&i(d,c,a[f],a)});return d(j.prototype,{delete:function(a){if(!g(a))return!1;var c=e(a);return c===!0?p(l(this,b)).delete(a):c&&k(c,this._i)&&delete c[this._i]},has:function(a){if(!g(a))return!1;var c=e(a);return c===!0?p(l(this,b)).has(a):c&&k(c,this._i)}}),j},def:function(a,b,c){var d=e(f(b),!0);return d===!0?p(a).set(b,c):d[a._i]=c,a},ufstore:p}},{115:115,147:147,35:35,36:36,40:40,66:66,69:69,79:79,92:92}],49:[function(a,b,c){"use strict";var d=a(68),e=a(60),f=a(116),g=a(115),h=a(92),i=a(66),j=a(35),k=a(79),l=a(62),m=a(84),n=a(122),o=a(73);b.exports=function(a,b,c,p,q,r){var s=d[a],t=s,u=q?"set":"add",v=t&&t.prototype,w={},x=function(a){var b=v[a];f(v,a,"delete"==a?function(a){return!(r&&!k(a))&&b.call(this,0===a?0:a)}:"has"==a?function(a){return!(r&&!k(a))&&b.call(this,0===a?0:a)}:"get"==a?function(a){return r&&!k(a)?void 0:b.call(this,0===a?0:a)}:"add"==a?function(a){return b.call(this,0===a?0:a),this}:function(a,c){return b.call(this,0===a?0:a,c),this})};if("function"==typeof t&&(r||v.forEach&&!l(function(){(new t).entries().next()}))){var y=new t,z=y[u](r?{}:-0,1)!=y,A=l(function(){y.has(1)}),B=m(function(a){new t(a)}),C=!r&&l(function(){for(var a=new t,b=5;b--;)a[u](b,b);return!a.has(-0)});B||(t=b(function(b,c){j(b,t,a);var d=o(new s,b,t);return void 0!=c&&i(c,q,d[u],d),d}),t.prototype=v,v.constructor=t),(A||C)&&(x("delete"),x("has"),q&&x("get")),(C||z)&&x(u),r&&v.clear&&delete v.clear}else t=p.getConstructor(b,a,q,u),g(t.prototype,c),h.NEED=!0;return n(t,a),w[a]=t,e(e.G+e.W+e.F*(t!=s),w),r||p.setStrong(t,a,q),t}},{115:115,116:116,122:122,35:35,60:60,62:62,66:66,68:68,73:73,79:79,84:84,92:92}],50:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{16:16}],51:[function(a,b,c){"use strict";var d=a(97),e=a(114);b.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},{114:114,97:97}],52:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{17:17,31:31}],53:[function(a,b,c){"use strict";var d=a(62),e=Date.prototype.getTime,f=Date.prototype.toISOString,g=function(a){return a>9?a:"0"+a};b.exports=d(function(){return"0385-07-25T07:06:39.999Z"!=f.call(new Date(-5e13-1))})||!d(function(){f.call(new Date(NaN))})?function(){if(!isFinite(e.call(this)))throw RangeError("Invalid time value");var a=this,b=a.getUTCFullYear(),c=a.getUTCMilliseconds(),d=b<0?"-":b>9999?"+":"";return d+("00000"+Math.abs(b)).slice(d?-6:-4)+"-"+g(a.getUTCMonth()+1)+"-"+g(a.getUTCDate())+"T"+g(a.getUTCHours())+":"+g(a.getUTCMinutes())+":"+g(a.getUTCSeconds())+"."+(c>99?c:"0"+g(c))+"Z"}:f},{62:62}],54:[function(a,b,c){"use strict";var d=a(36),e=a(141),f="number";b.exports=function(a){if("string"!==a&&a!==f&&"default"!==a)throw TypeError("Incorrect hint");return e(d(this),a!=f)}},{141:141,36:36}],55:[function(a,b,c){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],56:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{18:18,62:62}],57:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{19:19,68:68,79:79}],58:[function(a,b,c){b.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],59:[function(a,b,c){var d=a(105),e=a(102),f=a(106);b.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},{102:102,105:105,106:106}],60:[function(a,b,c){var d=a(68),e=a(50),f=a(70),g=a(116),h=a(52),i="prototype",j=function(a,b,c){var k,l,m,n,o=a&j.F,p=a&j.G,q=a&j.S,r=a&j.P,s=a&j.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[i],u=p?e:e[b]||(e[b]={}),v=u[i]||(u[i]={});p&&(c=b);for(k in c)l=!o&&t&&void 0!==t[k],m=(l?t:c)[k],n=s&&l?h(m,d):r&&"function"==typeof m?h(Function.call,m):m,t&&g(t,k,m,a&j.U),u[k]!=m&&f(u,k,n),r&&v[k]!=m&&(v[k]=m)};d.core=e,j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,b.exports=j},{116:116,50:50,52:52,68:68,70:70}],61:[function(a,b,c){var d=a(150)("match");b.exports=function(a){var b=/./;try{"/./"[a](b)}catch(c){try{return b[d]=!1,!"/./"[a](b)}catch(a){}}return!0}},{150:150}],62:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{21:21}],63:[function(a,b,c){"use strict";a(246);var d=a(116),e=a(70),f=a(62),g=a(55),h=a(150),i=a(118),j=h("species"),k=!f(function(){var a=/./;return a.exec=function(){var a=[];return a.groups={a:"7"},a},"7"!=="".replace(a,"$<a>")}),l=function(){var a=/(?:)/,b=a.exec;a.exec=function(){return b.apply(this,arguments)};var c="ab".split(a);return 2===c.length&&"a"===c[0]&&"b"===c[1]}();b.exports=function(a,b,c){var m=h(a),n=!f(function(){var b={};return b[m]=function(){return 7},7!=""[a](b)}),o=n?!f(function(){var b=!1,c=/a/;return c.exec=function(){return b=!0,null},"split"===a&&(c.constructor={},c.constructor[j]=function(){return c}),c[m](""),!b}):void 0;if(!n||!o||"replace"===a&&!k||"split"===a&&!l){var p=/./[m],q=c(g,m,""[a],function(a,b,c,d,e){return b.exec===i?n&&!e?{done:!0,value:p.call(b,c,d)}:{done:!0,value:a.call(c,b,d)}:{done:!1}}),r=q[0],s=q[1];d(String.prototype,a,r),e(RegExp.prototype,m,2==b?function(a,b){return s.call(a,this,b)}:function(a){return s.call(a,this)})}}},{116:116,118:118,150:150,246:246,55:55,62:62,70:70}],64:[function(a,b,c){"use strict";var d=a(36);b.exports=function(){var a=d(this),b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),a.unicode&&(b+="u"),a.sticky&&(b+="y"),b}},{36:36}],65:[function(a,b,c){"use strict";function d(a,b,c,j,k,l,m,n){for(var o,p,q=k,r=0,s=!!m&&h(m,n,3);r<j;){if(r in c){if(o=s?s(c[r],r,b):c[r],p=!1,f(o)&&(p=o[i],p=void 0!==p?!!p:e(o)),p&&l>0)q=d(a,b,o,g(o.length),q,l-1)-1;else{if(q>=9007199254740991)throw TypeError();a[q]=o}q++}r++}return q}var e=a(77),f=a(79),g=a(139),h=a(52),i=a(150)("isConcatSpreadable");b.exports=d},{139:139,150:150,52:52,77:77,79:79}],66:[function(a,b,c){var d=a(52),e=a(81),f=a(76),g=a(36),h=a(139),i=a(151),j={},k={},c=b.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if(q=b?s(g(o=a[t])[0],o[1]):s(a[t]),q===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if(q=e(p,s,o.value,b),q===j||q===k)return q};c.BREAK=j,c.RETURN=k},{139:139,151:151,36:36,52:52,76:76,81:81}],67:[function(a,b,c){b.exports=a(124)("native-function-to-string",Function.toString)},{124:124}],68:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{22:22}],69:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{23:23}],70:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{114:114,24:24,56:56,97:97}],71:[function(a,b,c){var d=a(68).document;b.exports=d&&d.documentElement},{68:68}],72:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{25:25,56:56,57:57,62:62}],73:[function(a,b,c){var d=a(79),e=a(120).set;b.exports=function(a,b,c){var f,g=b.constructor;return g!==c&&"function"==typeof g&&(f=g.prototype)!==c.prototype&&d(f)&&e&&e(a,f),a}},{120:120,79:79}],74:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],75:[function(a,b,c){var d=a(46);b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},{46:46}],76:[function(a,b,c){var d=a(86),e=a(150)("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},{150:150,86:86}],77:[function(a,b,c){var d=a(46);b.exports=Array.isArray||function(a){return"Array"==d(a)}},{46:46}],78:[function(a,b,c){var d=a(79),e=Math.floor;b.exports=function(a){return!d(a)&&isFinite(a)&&e(a)===a}},{79:79}],79:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{26:26}],80:[function(a,b,c){var d=a(79),e=a(46),f=a(150)("match");b.exports=function(a){var b;return d(a)&&(void 0!==(b=a[f])?!!b:"RegExp"==e(a))}},{150:150,46:46,79:79}],81:[function(a,b,c){var d=a(36);b.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}},{36:36}],82:[function(a,b,c){"use strict";var d=a(96),e=a(114),f=a(122),g={};a(70)(g,a(150)("iterator"),function(){return this}),b.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},{114:114,122:122,150:150,70:70,96:96}],83:[function(a,b,c){"use strict";var d=a(87),e=a(60),f=a(116),g=a(70),h=a(86),i=a(82),j=a(122),k=a(103),l=a(150)("iterator"),m=!([].keys&&"next"in[].keys()),n="@@iterator",o="keys",p="values",q=function(){return this};b.exports=function(a,b,c,r,s,t,u){i(c,b,r);var v,w,x,y=function(a){if(!m&&a in C)return C[a];switch(a){case o:return function(){return new c(this,a)};case p:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=s==p,B=!1,C=a.prototype,D=C[l]||C[n]||s&&C[s],E=D||y(s),F=s?A?y("entries"):E:void 0,G="Array"==b?C.entries||D:D;if(G&&(x=k(G.call(new a)),x!==Object.prototype&&x.next&&(j(x,z,!0),d||"function"==typeof x[l]||g(x,l,q))),A&&D&&D.name!==p&&(B=!0,E=function(){return D.call(this)}),d&&!u||!m&&!B&&C[l]||g(C,l,E),h[b]=E,h[z]=q,s)if(v={values:A?E:y(p),keys:t?E:y(o),entries:F},u)for(w in v)w in C||f(C,w,v[w]);else e(e.P+e.F*(m||B),b,v);return v}},{103:103,116:116,122:122,150:150,60:60,70:70,82:82,86:86,87:87}],84:[function(a,b,c){var d=a(150)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},{150:150}],85:[function(a,b,c){b.exports=function(a,b){return{value:b,done:!!a}}},{}],86:[function(a,b,c){b.exports={}},{}],87:[function(a,b,c){b.exports=!1},{}],88:[function(a,b,c){var d=Math.expm1;b.exports=!d||d(10)>22025.465794806718||d(10)<22025.465794806718||d(-2e-17)!=-2e-17?function(a){return 0==(a=+a)?a:a>-1e-6&&a<1e-6?a+a*a/2:Math.exp(a)-1}:d},{}],89:[function(a,b,c){var d=a(91),e=Math.pow,f=e(2,-52),g=e(2,-23),h=e(2,127)*(2-g),i=e(2,-126),j=function(a){return a+1/f-1/f};b.exports=Math.fround||function(a){var b,c,e=Math.abs(a),k=d(a);return e<i?k*j(e/i/g)*i*g:(b=(1+g/f)*e,c=b-(b-e),c>h||c!=c?k*(1/0):k*c)}},{91:91}],90:[function(a,b,c){b.exports=Math.log1p||function(a){return(a=+a)>-1e-8&&a<1e-8?a-a*a/2:Math.log(1+a)}},{}],91:[function(a,b,c){b.exports=Math.sign||function(a){return 0==(a=+a)||a!=a?a:a<0?-1:1}},{}],92:[function(a,b,c){var d=a(145)("meta"),e=a(79),f=a(69),g=a(97).f,h=0,i=Object.isExtensible||function(){return!0},j=!a(62)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},m=function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},n=function(a){return j&&o.NEED&&i(a)&&!f(a,d)&&k(a),a},o=b.exports={KEY:d,NEED:!1,fastKey:l,getWeak:m,onFreeze:n}},{145:145,62:62,69:69,79:79,97:97}],93:[function(a,b,c){var d=a(68),e=a(134).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==a(46)(g);b.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(d){throw a?c():b=void 0,
d}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(!f||d.navigator&&d.navigator.standalone)if(h&&h.resolve){var k=h.resolve(void 0);c=function(){k.then(j)}}else c=function(){e.call(d,j)};else{var l=!0,m=document.createTextNode("");new f(j).observe(m,{characterData:!0}),c=function(){m.data=l=!l}}return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},{134:134,46:46,68:68}],94:[function(a,b,c){"use strict";function d(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=e(b),this.reject=e(c)}var e=a(31);b.exports.f=function(a){return new d(a)}},{31:31}],95:[function(a,b,c){"use strict";var d=a(56),e=a(105),f=a(102),g=a(106),h=a(140),i=a(75),j=Object.assign;b.exports=!j||a(62)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=j({},a)[c]||Object.keys(j({},b)).join("")!=d})?function(a,b){for(var c=h(a),j=arguments.length,k=1,l=f.f,m=g.f;j>k;)for(var n,o=i(arguments[k++]),p=l?e(o).concat(l(o)):e(o),q=p.length,r=0;q>r;)n=p[r++],d&&!m.call(o,n)||(c[n]=o[n]);return c}:j},{102:102,105:105,106:106,140:140,56:56,62:62,75:75}],96:[function(a,b,c){var d=a(36),e=a(98),f=a(58),g=a(123)("IE_PROTO"),h=function(){},i="prototype",j=function(){var b,c=a(57)("iframe"),d=f.length,e="<",g=">";for(c.style.display="none",a(71).appendChild(c),c.src="javascript:",b=c.contentWindow.document,b.open(),b.write(e+"script"+g+"document.F=Object"+e+"/script"+g),b.close(),j=b.F;d--;)delete j[i][f[d]];return j()};b.exports=Object.create||function(a,b){var c;return null!==a?(h[i]=d(a),c=new h,h[i]=null,c[g]=a):c=j(),void 0===b?c:e(c,b)}},{123:123,36:36,57:57,58:58,71:71,98:98}],97:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{141:141,27:27,36:36,56:56,72:72}],98:[function(a,b,c){var d=a(97),e=a(36),f=a(105);b.exports=a(56)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},{105:105,36:36,56:56,97:97}],99:[function(a,b,c){var d=a(106),e=a(114),f=a(138),g=a(141),h=a(69),i=a(72),j=Object.getOwnPropertyDescriptor;c.f=a(56)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}if(h(a,b))return e(!d.f.call(a,b),a[b])}},{106:106,114:114,138:138,141:141,56:56,69:69,72:72}],100:[function(a,b,c){var d=a(138),e=a(101).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(a){return g.slice()}};b.exports.f=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}},{101:101,138:138}],101:[function(a,b,c){var d=a(104),e=a(58).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},{104:104,58:58}],102:[function(a,b,c){c.f=Object.getOwnPropertySymbols},{}],103:[function(a,b,c){var d=a(69),e=a(140),f=a(123)("IE_PROTO"),g=Object.prototype;b.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},{123:123,140:140,69:69}],104:[function(a,b,c){var d=a(69),e=a(138),f=a(39)(!1),g=a(123)("IE_PROTO");b.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},{123:123,138:138,39:39,69:69}],105:[function(a,b,c){var d=a(104),e=a(58);b.exports=Object.keys||function(a){return d(a,e)}},{104:104,58:58}],106:[function(a,b,c){c.f={}.propertyIsEnumerable},{}],107:[function(a,b,c){var d=a(60),e=a(50),f=a(62);b.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},{50:50,60:60,62:62}],108:[function(a,b,c){var d=a(56),e=a(105),f=a(138),g=a(106).f;b.exports=function(a){return function(b){for(var c,h=f(b),i=e(h),j=i.length,k=0,l=[];j>k;)c=i[k++],d&&!g.call(h,c)||l.push(a?[c,h[c]]:h[c]);return l}}},{105:105,106:106,138:138,56:56}],109:[function(a,b,c){var d=a(101),e=a(102),f=a(36),g=a(68).Reflect;b.exports=g&&g.ownKeys||function(a){var b=d.f(f(a)),c=e.f;return c?b.concat(c(a)):b}},{101:101,102:102,36:36,68:68}],110:[function(a,b,c){var d=a(68).parseFloat,e=a(132).trim;b.exports=1/d(a(133)+"-0")!==-(1/0)?function(a){var b=e(String(a),3),c=d(b);return 0===c&&"-"==b.charAt(0)?-0:c}:d},{132:132,133:133,68:68}],111:[function(a,b,c){var d=a(68).parseInt,e=a(132).trim,f=a(133),g=/^[-+]?0[xX]/;b.exports=8!==d(f+"08")||22!==d(f+"0x16")?function(a,b){var c=e(String(a),3);return d(c,b>>>0||(g.test(c)?16:10))}:d},{132:132,133:133,68:68}],112:[function(a,b,c){b.exports=function(a){try{return{e:!1,v:a()}}catch(a){return{e:!0,v:a}}}},{}],113:[function(a,b,c){var d=a(36),e=a(79),f=a(94);b.exports=function(a,b){if(d(a),e(b)&&b.constructor===a)return b;var c=f.f(a),g=c.resolve;return g(b),c.promise}},{36:36,79:79,94:94}],114:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{28:28}],115:[function(a,b,c){var d=a(116);b.exports=function(a,b,c){for(var e in b)d(a,e,b[e],c);return a}},{116:116}],116:[function(a,b,c){var d=a(68),e=a(70),f=a(69),g=a(145)("src"),h=a(67),i="toString",j=(""+h).split(i);a(50).inspectSource=function(a){return h.call(a)},(b.exports=function(a,b,c,h){var i="function"==typeof c;i&&(f(c,"name")||e(c,"name",b)),a[b]!==c&&(i&&(f(c,g)||e(c,g,a[b]?""+a[b]:j.join(String(b)))),a===d?a[b]=c:h?a[b]?a[b]=c:e(a,b,c):(delete a[b],e(a,b,c)))})(Function.prototype,i,function(){return"function"==typeof this&&this[g]||h.call(this)})},{145:145,50:50,67:67,68:68,69:69,70:70}],117:[function(a,b,c){"use strict";var d=a(45),e=RegExp.prototype.exec;b.exports=function(a,b){var c=a.exec;if("function"==typeof c){var f=c.call(a,b);if("object"!=typeof f)throw new TypeError("RegExp exec method returned something other than an Object or null");return f}if("RegExp"!==d(a))throw new TypeError("RegExp#exec called on incompatible receiver");return e.call(a,b)}},{45:45}],118:[function(a,b,c){"use strict";var d=a(64),e=RegExp.prototype.exec,f=String.prototype.replace,g=e,h="lastIndex",i=function(){var a=/a/,b=/b*/g;return e.call(a,"a"),e.call(b,"a"),0!==a[h]||0!==b[h]}(),j=void 0!==/()??/.exec("")[1],k=i||j;k&&(g=function(a){var b,c,g,k,l=this;return j&&(c=new RegExp("^"+l.source+"$(?!\\s)",d.call(l))),i&&(b=l[h]),g=e.call(l,a),i&&g&&(l[h]=l.global?g.index+g[0].length:b),j&&g&&g.length>1&&f.call(g[0],c,function(){for(k=1;k<arguments.length-2;k++)void 0===arguments[k]&&(g[k]=void 0)}),g}),b.exports=g},{64:64}],119:[function(a,b,c){b.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}},{}],120:[function(a,b,c){var d=a(79),e=a(36),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,d){try{d=a(52)(Function.call,a(99).f(Object.prototype,"__proto__").set,2),d(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return f(a,b),c?a.__proto__=b:d(a,b),a}}({},!1):void 0),check:f}},{36:36,52:52,79:79,99:99}],121:[function(a,b,c){"use strict";var d=a(68),e=a(97),f=a(56),g=a(150)("species");b.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.f(b,g,{configurable:!0,get:function(){return this}})}},{150:150,56:56,68:68,97:97}],122:[function(a,b,c){var d=a(97).f,e=a(69),f=a(150)("toStringTag");b.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},{150:150,69:69,97:97}],123:[function(a,b,c){var d=a(124)("keys"),e=a(145);b.exports=function(a){return d[a]||(d[a]=e(a))}},{124:124,145:145}],124:[function(a,b,c){var d=a(50),e=a(68),f="__core-js_shared__",g=e[f]||(e[f]={});(b.exports=function(a,b){return g[a]||(g[a]=void 0!==b?b:{})})("versions",[]).push({version:d.version,mode:a(87)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{50:50,68:68,87:87}],125:[function(a,b,c){var d=a(36),e=a(31),f=a(150)("species");b.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},{150:150,31:31,36:36}],126:[function(a,b,c){"use strict";var d=a(62);b.exports=function(a,b){return!!a&&d(function(){b?a.call(null,function(){},1):a.call(null)})}},{62:62}],127:[function(a,b,c){var d=a(137),e=a(55);b.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},{137:137,55:55}],128:[function(a,b,c){var d=a(80),e=a(55);b.exports=function(a,b,c){if(d(b))throw TypeError("String#"+c+" doesn't accept regex!");return String(e(a))}},{55:55,80:80}],129:[function(a,b,c){var d=a(60),e=a(62),f=a(55),g=/"/g,h=function(a,b,c,d){var e=String(f(a)),h="<"+b;return""!==c&&(h+=" "+c+'="'+String(d).replace(g,"&quot;")+'"'),h+">"+e+"</"+b+">"};b.exports=function(a,b){var c={};c[a]=b(h),d(d.P+d.F*e(function(){var b=""[a]('"');return b!==b.toLowerCase()||b.split('"').length>3}),"String",c)}},{55:55,60:60,62:62}],130:[function(a,b,c){var d=a(139),e=a(131),f=a(55);b.exports=function(a,b,c,g){var h=String(f(a)),i=h.length,j=void 0===c?" ":String(c),k=d(b);if(k<=i||""==j)return h;var l=k-i,m=e.call(j,Math.ceil(l/j.length));return m.length>l&&(m=m.slice(0,l)),g?m+h:h+m}},{131:131,139:139,55:55}],131:[function(a,b,c){"use strict";var d=a(137),e=a(55);b.exports=function(a){var b=String(e(this)),c="",f=d(a);if(f<0||f==1/0)throw RangeError("Count can't be negative");for(;f>0;(f>>>=1)&&(b+=b))1&f&&(c+=b);return c}},{137:137,55:55}],132:[function(a,b,c){var d=a(60),e=a(55),f=a(62),g=a(133),h="["+g+"]",i="​",j=RegExp("^"+h+h+"*"),k=RegExp(h+h+"*$"),l=function(a,b,c){var e={},h=f(function(){return!!g[a]()||i[a]()!=i}),j=e[a]=h?b(m):g[a];c&&(e[c]=j),d(d.P+d.F*h,"String",e)},m=l.trim=function(a,b){return a=String(e(a)),1&b&&(a=a.replace(j,"")),2&b&&(a=a.replace(k,"")),a};b.exports=l},{133:133,55:55,60:60,62:62}],133:[function(a,b,c){b.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],134:[function(a,b,c){var d,e,f,g=a(52),h=a(74),i=a(71),j=a(57),k=a(68),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=k.Dispatch,q=0,r={},s="onreadystatechange",t=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a],b()}},u=function(a){t.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return r[++q]=function(){h("function"==typeof a?a:Function(a),b)},d(q),q},n=function(a){delete r[a]},"process"==a(46)(l)?d=function(a){l.nextTick(g(t,a,1))}:p&&p.now?d=function(a){p.now(g(t,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=u,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",u,!1)):d=s in j("script")?function(a){i.appendChild(j("script"))[s]=function(){i.removeChild(this),t.call(a)}}:function(a){setTimeout(g(t,a,1),0)}),b.exports={set:m,clear:n}},{46:46,52:52,57:57,68:68,71:71,74:74}],135:[function(a,b,c){var d=a(137),e=Math.max,f=Math.min;b.exports=function(a,b){return a=d(a),a<0?e(a+b,0):f(a,b)}},{137:137}],136:[function(a,b,c){var d=a(137),e=a(139);b.exports=function(a){if(void 0===a)return 0;var b=d(a),c=e(b);if(b!==c)throw RangeError("Wrong length!");return c}},{137:137,139:139}],137:[function(a,b,c){var d=Math.ceil,e=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}},{}],138:[function(a,b,c){var d=a(75),e=a(55);b.exports=function(a){return d(e(a))}},{55:55,75:75}],139:[function(a,b,c){var d=a(137),e=Math.min;b.exports=function(a){return a>0?e(d(a),9007199254740991):0}},{137:137}],140:[function(a,b,c){var d=a(55);b.exports=function(a){return Object(d(a))}},{55:55}],141:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{29:29,79:79}],142:[function(a,b,c){"use strict";if(a(56)){var d=a(87),e=a(68),f=a(62),g=a(60),h=a(144),i=a(143),j=a(52),k=a(35),l=a(114),m=a(70),n=a(115),o=a(137),p=a(139),q=a(136),r=a(135),s=a(141),t=a(69),u=a(45),v=a(79),w=a(140),x=a(76),y=a(96),z=a(103),A=a(101).f,B=a(151),C=a(145),D=a(150),E=a(40),F=a(39),G=a(125),H=a(162),I=a(86),J=a(84),K=a(121),L=a(38),M=a(37),N=a(97),O=a(99),P=N.f,Q=O.f,R=e.RangeError,S=e.TypeError,T=e.Uint8Array,U="ArrayBuffer",V="Shared"+U,W="BYTES_PER_ELEMENT",X="prototype",Y=Array[X],Z=i.ArrayBuffer,$=i.DataView,_=E(0),aa=E(2),ba=E(3),ca=E(4),da=E(5),ea=E(6),fa=F(!0),ga=F(!1),ha=H.values,ia=H.keys,ja=H.entries,ka=Y.lastIndexOf,la=Y.reduce,ma=Y.reduceRight,na=Y.join,oa=Y.sort,pa=Y.slice,qa=Y.toString,ra=Y.toLocaleString,sa=D("iterator"),ta=D("toStringTag"),ua=C("typed_constructor"),va=C("def_constructor"),wa=h.CONSTR,xa=h.TYPED,ya=h.VIEW,za="Wrong length!",Aa=E(1,function(a,b){return Fa(G(a,a[va]),b)}),Ba=f(function(){return 1===new T(new Uint16Array([1]).buffer)[0]}),Ca=!!T&&!!T[X].set&&f(function(){new T(1).set({})}),Da=function(a,b){var c=o(a);if(c<0||c%b)throw R("Wrong offset!");return c},Ea=function(a){if(v(a)&&xa in a)return a;throw S(a+" is not a typed array!")},Fa=function(a,b){if(!(v(a)&&ua in a))throw S("It is not a typed array constructor!");return new a(b)},Ga=function(a,b){return Ha(G(a,a[va]),b)},Ha=function(a,b){for(var c=0,d=b.length,e=Fa(a,d);d>c;)e[c]=b[c++];return e},Ia=function(a,b,c){P(a,b,{get:function(){return this._d[c]}})},Ja=function(a){var b,c,d,e,f,g,h=w(a),i=arguments.length,k=i>1?arguments[1]:void 0,l=void 0!==k,m=B(h);if(void 0!=m&&!x(m)){for(g=m.call(h),d=[],b=0;!(f=g.next()).done;b++)d.push(f.value);h=d}for(l&&i>2&&(k=j(k,arguments[2],2)),b=0,c=p(h.length),e=Fa(this,c);c>b;b++)e[b]=l?k(h[b],b):h[b];return e},Ka=function(){for(var a=0,b=arguments.length,c=Fa(this,b);b>a;)c[a]=arguments[a++];return c},La=!!T&&f(function(){ra.call(new T(1))}),Ma=function(){return ra.apply(La?pa.call(Ea(this)):Ea(this),arguments)},Na={copyWithin:function(a,b){return M.call(Ea(this),a,b,arguments.length>2?arguments[2]:void 0)},every:function(a){return ca(Ea(this),a,arguments.length>1?arguments[1]:void 0)},fill:function(a){return L.apply(Ea(this),arguments)},filter:function(a){return Ga(this,aa(Ea(this),a,arguments.length>1?arguments[1]:void 0))},find:function(a){return da(Ea(this),a,arguments.length>1?arguments[1]:void 0)},findIndex:function(a){return ea(Ea(this),a,arguments.length>1?arguments[1]:void 0)},forEach:function(a){_(Ea(this),a,arguments.length>1?arguments[1]:void 0)},indexOf:function(a){return ga(Ea(this),a,arguments.length>1?arguments[1]:void 0)},includes:function(a){return fa(Ea(this),a,arguments.length>1?arguments[1]:void 0)},join:function(a){return na.apply(Ea(this),arguments)},lastIndexOf:function(a){return ka.apply(Ea(this),arguments)},map:function(a){return Aa(Ea(this),a,arguments.length>1?arguments[1]:void 0)},reduce:function(a){return la.apply(Ea(this),arguments)},reduceRight:function(a){return ma.apply(Ea(this),arguments)},reverse:function(){for(var a,b=this,c=Ea(b).length,d=Math.floor(c/2),e=0;e<d;)a=b[e],b[e++]=b[--c],b[c]=a;return b},some:function(a){return ba(Ea(this),a,arguments.length>1?arguments[1]:void 0)},sort:function(a){return oa.call(Ea(this),a)},subarray:function(a,b){var c=Ea(this),d=c.length,e=r(a,d);return new(G(c,c[va]))(c.buffer,c.byteOffset+e*c.BYTES_PER_ELEMENT,p((void 0===b?d:r(b,d))-e))}},Oa=function(a,b){return Ga(this,pa.call(Ea(this),a,b))},Pa=function(a){Ea(this);var b=Da(arguments[1],1),c=this.length,d=w(a),e=p(d.length),f=0;if(e+b>c)throw R(za);for(;f<e;)this[b+f]=d[f++]},Qa={entries:function(){return ja.call(Ea(this))},keys:function(){return ia.call(Ea(this))},values:function(){return ha.call(Ea(this))}},Ra=function(a,b){return v(a)&&a[xa]&&"symbol"!=typeof b&&b in a&&String(+b)==String(b)},Sa=function(a,b){return Ra(a,b=s(b,!0))?l(2,a[b]):Q(a,b)},Ta=function(a,b,c){return!(Ra(a,b=s(b,!0))&&v(c)&&t(c,"value"))||t(c,"get")||t(c,"set")||c.configurable||t(c,"writable")&&!c.writable||t(c,"enumerable")&&!c.enumerable?P(a,b,c):(a[b]=c.value,a)};wa||(O.f=Sa,N.f=Ta),g(g.S+g.F*!wa,"Object",{getOwnPropertyDescriptor:Sa,defineProperty:Ta}),f(function(){qa.call({})})&&(qa=ra=function(){return na.call(this)});var Ua=n({},Na);n(Ua,Qa),m(Ua,sa,Qa.values),n(Ua,{slice:Oa,set:Pa,constructor:function(){},toString:qa,toLocaleString:Ma}),Ia(Ua,"buffer","b"),Ia(Ua,"byteOffset","o"),Ia(Ua,"byteLength","l"),Ia(Ua,"length","e"),P(Ua,ta,{get:function(){return this[xa]}}),b.exports=function(a,b,c,i){i=!!i;var j=a+(i?"Clamped":"")+"Array",l="get"+a,n="set"+a,o=e[j],r=o||{},s=o&&z(o),t=!o||!h.ABV,w={},x=o&&o[X],B=function(a,c){var d=a._d;return d.v[l](c*b+d.o,Ba)},C=function(a,c,d){var e=a._d;i&&(d=(d=Math.round(d))<0?0:d>255?255:255&d),e.v[n](c*b+e.o,d,Ba)},D=function(a,b){P(a,b,{get:function(){return B(this,b)},set:function(a){return C(this,b,a)},enumerable:!0})};t?(o=c(function(a,c,d,e){k(a,o,j,"_d");var f,g,h,i,l=0,n=0;if(v(c)){if(!(c instanceof Z||(i=u(c))==U||i==V))return xa in c?Ha(o,c):Ja.call(o,c);f=c,n=Da(d,b);var r=c.byteLength;if(void 0===e){if(r%b)throw R(za);if(g=r-n,g<0)throw R(za)}else if(g=p(e)*b,g+n>r)throw R(za);h=g/b}else h=q(c),g=h*b,f=new Z(g);for(m(a,"_d",{b:f,o:n,l:g,e:h,v:new $(f)});l<h;)D(a,l++)}),x=o[X]=y(Ua),m(x,"constructor",o)):f(function(){o(1)})&&f(function(){new o(-1)})&&J(function(a){new o,new o(null),new o(1.5),new o(a)},!0)||(o=c(function(a,c,d,e){k(a,o,j);var f;return v(c)?c instanceof Z||(f=u(c))==U||f==V?void 0!==e?new r(c,Da(d,b),e):void 0!==d?new r(c,Da(d,b)):new r(c):xa in c?Ha(o,c):Ja.call(o,c):new r(q(c))}),_(s!==Function.prototype?A(r).concat(A(s)):A(r),function(a){a in o||m(o,a,r[a])}),o[X]=x,d||(x.constructor=o));var E=x[sa],F=!!E&&("values"==E.name||void 0==E.name),G=Qa.values;m(o,ua,!0),m(x,xa,j),m(x,ya,!0),m(x,va,o),(i?new o(1)[ta]==j:ta in x)||P(x,ta,{get:function(){return j}}),w[j]=o,g(g.G+g.W+g.F*(o!=r),w),g(g.S,j,{BYTES_PER_ELEMENT:b}),g(g.S+g.F*f(function(){r.of.call(o,1)}),j,{from:Ja,of:Ka}),W in x||m(x,W,b),g(g.P,j,Na),K(j),g(g.P+g.F*Ca,j,{set:Pa}),g(g.P+g.F*!F,j,Qa),d||x.toString==qa||(x.toString=qa),g(g.P+g.F*f(function(){new o(1).slice()}),j,{slice:Oa}),g(g.P+g.F*(f(function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()})||!f(function(){x.toLocaleString.call([1,2])})),j,{toLocaleString:Ma}),I[j]=F?E:G,d||F||m(x,sa,G)}}else b.exports=function(){}},{101:101,103:103,114:114,115:115,121:121,125:125,135:135,136:136,137:137,139:139,140:140,141:141,143:143,144:144,145:145,150:150,151:151,162:162,35:35,37:37,38:38,39:39,40:40,45:45,52:52,56:56,60:60,62:62,68:68,69:69,70:70,76:76,79:79,84:84,86:86,87:87,96:96,97:97,99:99}],143:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=new Array(c),h=8*c-b-1,i=(1<<h)-1,j=i>>1,k=23===b?P(2,-24)-P(2,-77):0,l=0,m=a<0||0===a&&1/a<0?1:0;for(a=O(a),a!=a||a===M?(e=a!=a?1:0,d=i):(d=Q(R(a)/S),a*(f=P(2,-d))<1&&(d--,f*=2),a+=d+j>=1?k/f:k*P(2,1-j),a*f>=2&&(d++,f/=2),d+j>=i?(e=0,d=i):d+j>=1?(e=(a*f-1)*P(2,b),d+=j):(e=a*P(2,j-1)*P(2,b),d=0));b>=8;g[l++]=255&e,e/=256,b-=8);for(d=d<<b|e,h+=b;h>0;g[l++]=255&d,d/=256,h-=8);return g[--l]|=128*m,g}function e(a,b,c){var d,e=8*c-b-1,f=(1<<e)-1,g=f>>1,h=e-7,i=c-1,j=a[i--],k=127&j;for(j>>=7;h>0;k=256*k+a[i],i--,h-=8);for(d=k&(1<<-h)-1,k>>=-h,h+=b;h>0;d=256*d+a[i],i--,h-=8);if(0===k)k=1-g;else{if(k===f)return d?NaN:j?-M:M;d+=P(2,b),k-=g}return(j?-1:1)*d*P(2,k-b)}function f(a){return a[3]<<24|a[2]<<16|a[1]<<8|a[0]}function g(a){return[255&a]}function h(a){return[255&a,a>>8&255]}function i(a){return[255&a,a>>8&255,a>>16&255,a>>24&255]}function j(a){return d(a,52,8)}function k(a){return d(a,23,4)}function l(a,b,c){A(a[F],b,{get:function(){return this[c]}})}function m(a,b,c,d){var e=+c,f=y(e);if(f+b>a[X])throw L(H);var g=a[W]._b,h=f+a[Y],i=g.slice(h,h+b);return d?i:i.reverse()}function n(a,b,c,d,e,f){var g=+c,h=y(g);if(h+b>a[X])throw L(H);for(var i=a[W]._b,j=h+a[Y],k=d(+e),l=0;l<b;l++)i[j+l]=k[f?l:b-l-1]}var o=a(68),p=a(56),q=a(87),r=a(144),s=a(70),t=a(115),u=a(62),v=a(35),w=a(137),x=a(139),y=a(136),z=a(101).f,A=a(97).f,B=a(38),C=a(122),D="ArrayBuffer",E="DataView",F="prototype",G="Wrong length!",H="Wrong index!",I=o[D],J=o[E],K=o.Math,L=o.RangeError,M=o.Infinity,N=I,O=K.abs,P=K.pow,Q=K.floor,R=K.log,S=K.LN2,T="buffer",U="byteLength",V="byteOffset",W=p?"_b":T,X=p?"_l":U,Y=p?"_o":V;if(r.ABV){if(!u(function(){I(1)})||!u(function(){new I(-1)})||u(function(){return new I,new I(1.5),new I(NaN),I.name!=D})){I=function(a){return v(this,I),new N(y(a))};for(var Z,$=I[F]=N[F],_=z(N),aa=0;_.length>aa;)(Z=_[aa++])in I||s(I,Z,N[Z]);q||($.constructor=I)}var ba=new J(new I(2)),ca=J[F].setInt8;ba.setInt8(0,2147483648),ba.setInt8(1,2147483649),!ba.getInt8(0)&&ba.getInt8(1)||t(J[F],{setInt8:function(a,b){ca.call(this,a,b<<24>>24)},setUint8:function(a,b){ca.call(this,a,b<<24>>24)}},!0)}else I=function(a){v(this,I,D);var b=y(a);this._b=B.call(new Array(b),0),this[X]=b},J=function(a,b,c){v(this,J,E),v(a,I,E);var d=a[X],e=w(b);if(e<0||e>d)throw L("Wrong offset!");if(c=void 0===c?d-e:x(c),e+c>d)throw L(G);this[W]=a,this[Y]=e,this[X]=c},p&&(l(I,U,"_l"),l(J,T,"_b"),l(J,U,"_l"),l(J,V,"_o")),t(J[F],{getInt8:function(a){return m(this,1,a)[0]<<24>>24},getUint8:function(a){return m(this,1,a)[0]},getInt16:function(a){var b=m(this,2,a,arguments[1]);return(b[1]<<8|b[0])<<16>>16},getUint16:function(a){var b=m(this,2,a,arguments[1]);return b[1]<<8|b[0]},getInt32:function(a){return f(m(this,4,a,arguments[1]))},getUint32:function(a){return f(m(this,4,a,arguments[1]))>>>0},getFloat32:function(a){return e(m(this,4,a,arguments[1]),23,4)},getFloat64:function(a){return e(m(this,8,a,arguments[1]),52,8)},setInt8:function(a,b){n(this,1,a,g,b)},setUint8:function(a,b){n(this,1,a,g,b)},setInt16:function(a,b){n(this,2,a,h,b,arguments[2])},setUint16:function(a,b){n(this,2,a,h,b,arguments[2])},setInt32:function(a,b){n(this,4,a,i,b,arguments[2])},setUint32:function(a,b){n(this,4,a,i,b,arguments[2])},setFloat32:function(a,b){n(this,4,a,k,b,arguments[2])},setFloat64:function(a,b){n(this,8,a,j,b,arguments[2])}});C(I,D),C(J,E),s(J[F],r.VIEW,!0),c[D]=I,c[E]=J},{101:101,115:115,122:122,136:136,137:137,139:139,144:144,35:35,38:38,56:56,62:62,68:68,70:70,87:87,97:97}],144:[function(a,b,c){for(var d,e=a(68),f=a(70),g=a(145),h=g("typed_array"),i=g("view"),j=!(!e.ArrayBuffer||!e.DataView),k=j,l=0,m=9,n="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<m;)(d=e[n[l++]])?(f(d.prototype,h,!0),f(d.prototype,i,!0)):k=!1;b.exports={ABV:j,CONSTR:k,TYPED:h,VIEW:i}},{145:145,68:68,70:70}],145:[function(a,b,c){var d=0,e=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}},{}],146:[function(a,b,c){var d=a(68),e=d.navigator;b.exports=e&&e.userAgent||""},{68:68}],147:[function(a,b,c){var d=a(79);b.exports=function(a,b){if(!d(a)||a._t!==b)throw TypeError("Incompatible receiver, "+b+" required!");return a}},{79:79}],148:[function(a,b,c){var d=a(68),e=a(50),f=a(87),g=a(149),h=a(97).f;b.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},{149:149,50:50,68:68,87:87,97:97}],149:[function(a,b,c){c.f=a(150)},{150:150}],150:[function(a,b,c){var d=a(124)("wks"),e=a(145),f=a(68).Symbol,g="function"==typeof f,h=b.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))};h.store=d},{124:124,145:145,68:68}],151:[function(a,b,c){var d=a(45),e=a(150)("iterator"),f=a(86);b.exports=a(50).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},{150:150,45:45,50:50,86:86}],152:[function(a,b,c){var d=a(60);d(d.P,"Array",{copyWithin:a(37)}),a(33)("copyWithin")},{33:33,37:37,60:60}],153:[function(a,b,c){"use strict";var d=a(60),e=a(40)(4);d(d.P+d.F*!a(126)([].every,!0),"Array",{every:function(a){return e(this,a,arguments[1])}})},{126:126,40:40,60:60}],154:[function(a,b,c){var d=a(60);d(d.P,"Array",{fill:a(38)}),a(33)("fill")},{33:33,38:38,60:60}],155:[function(a,b,c){"use strict";var d=a(60),e=a(40)(2);d(d.P+d.F*!a(126)([].filter,!0),"Array",{filter:function(a){return e(this,a,arguments[1])}})},{126:126,40:40,60:60}],156:[function(a,b,c){"use strict";var d=a(60),e=a(40)(6),f="findIndex",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{findIndex:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(33)(f)},{33:33,40:40,60:60}],157:[function(a,b,c){"use strict";var d=a(60),e=a(40)(5),f="find",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(33)(f)},{33:33,40:40,60:60}],158:[function(a,b,c){"use strict";var d=a(60),e=a(40)(0),f=a(126)([].forEach,!0);d(d.P+d.F*!f,"Array",{forEach:function(a){return e(this,a,arguments[1])}})},{126:126,40:40,60:60}],159:[function(a,b,c){"use strict";var d=a(52),e=a(60),f=a(140),g=a(81),h=a(76),i=a(139),j=a(51),k=a(151);e(e.S+e.F*!a(84)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(b=i(m.length),c=new n(b);b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},{139:139,140:140,151:151,51:51,52:52,60:60,76:76,81:81,84:84}],160:[function(a,b,c){"use strict";var d=a(60),e=a(39)(!1),f=[].indexOf,g=!!f&&1/[1].indexOf(1,-0)<0;d(d.P+d.F*(g||!a(126)(f)),"Array",{indexOf:function(a){return g?f.apply(this,arguments)||0:e(this,a,arguments[1])}})},{126:126,39:39,60:60}],161:[function(a,b,c){var d=a(60);d(d.S,"Array",{isArray:a(77)})},{60:60,77:77}],162:[function(a,b,c){"use strict";var d=a(33),e=a(85),f=a(86),g=a(138);b.exports=a(83)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},{138:138,33:33,83:83,85:85,86:86}],163:[function(a,b,c){"use strict";var d=a(60),e=a(138),f=[].join;d(d.P+d.F*(a(75)!=Object||!a(126)(f)),"Array",{join:function(a){return f.call(e(this),void 0===a?",":a)}})},{126:126,138:138,60:60,75:75}],164:[function(a,b,c){"use strict";var d=a(60),e=a(138),f=a(137),g=a(139),h=[].lastIndexOf,i=!!h&&1/[1].lastIndexOf(1,-0)<0;d(d.P+d.F*(i||!a(126)(h)),"Array",{lastIndexOf:function(a){if(i)return h.apply(this,arguments)||0;var b=e(this),c=g(b.length),d=c-1;for(arguments.length>1&&(d=Math.min(d,f(arguments[1]))),d<0&&(d=c+d);d>=0;d--)if(d in b&&b[d]===a)return d||0;return-1}})},{126:126,137:137,138:138,139:139,60:60}],165:[function(a,b,c){"use strict";var d=a(60),e=a(40)(1);d(d.P+d.F*!a(126)([].map,!0),"Array",{map:function(a){return e(this,a,arguments[1])}})},{126:126,40:40,60:60}],166:[function(a,b,c){"use strict";var d=a(60),e=a(51);d(d.S+d.F*a(62)(function(){function a(){}return!(Array.of.call(a)instanceof a)}),"Array",{of:function(){for(var a=0,b=arguments.length,c=new("function"==typeof this?this:Array)(b);b>a;)e(c,a,arguments[a++]);return c.length=b,c}})},{51:51,60:60,62:62}],167:[function(a,b,c){"use strict";var d=a(60),e=a(41);d(d.P+d.F*!a(126)([].reduceRight,!0),"Array",{reduceRight:function(a){return e(this,a,arguments.length,arguments[1],!0)}})},{126:126,41:41,60:60}],168:[function(a,b,c){"use strict";var d=a(60),e=a(41);d(d.P+d.F*!a(126)([].reduce,!0),"Array",{reduce:function(a){return e(this,a,arguments.length,arguments[1],!1)}})},{126:126,41:41,60:60}],169:[function(a,b,c){"use strict";var d=a(60),e=a(71),f=a(46),g=a(135),h=a(139),i=[].slice;d(d.P+d.F*a(62)(function(){e&&i.call(e)}),"Array",{slice:function(a,b){var c=h(this.length),d=f(this);if(b=void 0===b?c:b,"Array"==d)return i.call(this,a,b);for(var e=g(a,c),j=g(b,c),k=h(j-e),l=new Array(k),m=0;m<k;m++)l[m]="String"==d?this.charAt(e+m):this[e+m];return l}})},{135:135,139:139,46:46,60:60,62:62,71:71}],170:[function(a,b,c){"use strict";var d=a(60),e=a(40)(3);d(d.P+d.F*!a(126)([].some,!0),"Array",{some:function(a){return e(this,a,arguments[1])}})},{126:126,40:40,60:60}],171:[function(a,b,c){"use strict";var d=a(60),e=a(31),f=a(140),g=a(62),h=[].sort,i=[1,2,3];d(d.P+d.F*(g(function(){i.sort(void 0)})||!g(function(){i.sort(null)})||!a(126)(h)),"Array",{sort:function(a){return void 0===a?h.call(f(this)):h.call(f(this),e(a))}})},{126:126,140:140,31:31,60:60,62:62}],172:[function(a,b,c){a(121)("Array")},{121:121}],173:[function(a,b,c){var d=a(60);d(d.S,"Date",{now:function(){return(new Date).getTime()}})},{60:60}],174:[function(a,b,c){var d=a(60),e=a(53);d(d.P+d.F*(Date.prototype.toISOString!==e),"Date",{toISOString:e})},{53:53,60:60}],175:[function(a,b,c){"use strict";var d=a(60),e=a(140),f=a(141);d(d.P+d.F*a(62)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(a){var b=e(this),c=f(b);return"number"!=typeof c||isFinite(c)?b.toISOString():null}})},{140:140,141:141,60:60,62:62}],176:[function(a,b,c){var d=a(150)("toPrimitive"),e=Date.prototype;d in e||a(70)(e,d,a(54))},{150:150,54:54,70:70}],177:[function(a,b,c){var d=Date.prototype,e="Invalid Date",f="toString",g=d[f],h=d.getTime;new Date(NaN)+""!=e&&a(116)(d,f,function(){var a=h.call(this);return a===a?g.call(this):e})},{116:116}],178:[function(a,b,c){var d=a(60);d(d.P,"Function",{bind:a(44)})},{44:44,60:60}],179:[function(a,b,c){"use strict";var d=a(79),e=a(103),f=a(150)("hasInstance"),g=Function.prototype;f in g||a(97).f(g,f,{value:function(a){if("function"!=typeof this||!d(a))return!1;if(!d(this.prototype))return a instanceof this;for(;a=e(a);)if(this.prototype===a)return!0;return!1}})},{103:103,150:150,79:79,97:97}],180:[function(a,b,c){var d=a(97).f,e=Function.prototype,f=/^\s*function ([^ (]*)/,g="name";g in e||a(56)&&d(e,g,{configurable:!0,get:function(){try{return(""+this).match(f)[1]}catch(a){return""}}})},{56:56,97:97}],181:[function(a,b,c){"use strict";var d=a(47),e=a(147),f="Map";b.exports=a(49)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(e(this,f),a);return b&&b.v},set:function(a,b){return d.def(e(this,f),0===a?0:a,b)}},d,!0)},{147:147,47:47,49:49}],182:[function(a,b,c){var d=a(60),e=a(90),f=Math.sqrt,g=Math.acosh;d(d.S+d.F*!(g&&710==Math.floor(g(Number.MAX_VALUE))&&g(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:e(a-1+f(a-1)*f(a+1))}})},{60:60,90:90}],183:[function(a,b,c){function d(a){return isFinite(a=+a)&&0!=a?a<0?-d(-a):Math.log(a+Math.sqrt(a*a+1)):a}var e=a(60),f=Math.asinh;e(e.S+e.F*!(f&&1/f(0)>0),"Math",{asinh:d})},{60:60}],184:[function(a,b,c){var d=a(60),e=Math.atanh;d(d.S+d.F*!(e&&1/e(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}})},{60:60}],185:[function(a,b,c){var d=a(60),e=a(91);d(d.S,"Math",{cbrt:function(a){return e(a=+a)*Math.pow(Math.abs(a),1/3)}})},{60:60,91:91}],186:[function(a,b,c){var d=a(60);d(d.S,"Math",{clz32:function(a){return(a>>>=0)?31-Math.floor(Math.log(a+.5)*Math.LOG2E):32}})},{60:60}],187:[function(a,b,c){var d=a(60),e=Math.exp;d(d.S,"Math",{cosh:function(a){return(e(a=+a)+e(-a))/2}})},{60:60}],188:[function(a,b,c){var d=a(60),e=a(88);d(d.S+d.F*(e!=Math.expm1),"Math",{expm1:e})},{60:60,88:88}],189:[function(a,b,c){var d=a(60);d(d.S,"Math",{fround:a(89)})},{60:60,89:89}],190:[function(a,b,c){var d=a(60),e=Math.abs;d(d.S,"Math",{hypot:function(a,b){for(var c,d,f=0,g=0,h=arguments.length,i=0;g<h;)c=e(arguments[g++]),i<c?(d=i/c,f=f*d*d+1,i=c):c>0?(d=c/i,f+=d*d):f+=c;return i===1/0?1/0:i*Math.sqrt(f)}})},{60:60}],191:[function(a,b,c){var d=a(60),e=Math.imul;d(d.S+d.F*a(62)(function(){return e(4294967295,5)!=-5||2!=e.length}),"Math",{imul:function(a,b){var c=65535,d=+a,e=+b,f=c&d,g=c&e;return 0|f*g+((c&d>>>16)*g+f*(c&e>>>16)<<16>>>0)}})},{60:60,62:62}],192:[function(a,b,c){var d=a(60);d(d.S,"Math",{log10:function(a){return Math.log(a)*Math.LOG10E}})},{60:60}],193:[function(a,b,c){var d=a(60);d(d.S,"Math",{log1p:a(90)})},{60:60,90:90}],194:[function(a,b,c){var d=a(60);d(d.S,"Math",{
log2:function(a){return Math.log(a)/Math.LN2}})},{60:60}],195:[function(a,b,c){var d=a(60);d(d.S,"Math",{sign:a(91)})},{60:60,91:91}],196:[function(a,b,c){var d=a(60),e=a(88),f=Math.exp;d(d.S+d.F*a(62)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(a){return Math.abs(a=+a)<1?(e(a)-e(-a))/2:(f(a-1)-f(-a-1))*(Math.E/2)}})},{60:60,62:62,88:88}],197:[function(a,b,c){var d=a(60),e=a(88),f=Math.exp;d(d.S,"Math",{tanh:function(a){var b=e(a=+a),c=e(-a);return b==1/0?1:c==1/0?-1:(b-c)/(f(a)+f(-a))}})},{60:60,88:88}],198:[function(a,b,c){var d=a(60);d(d.S,"Math",{trunc:function(a){return(a>0?Math.floor:Math.ceil)(a)}})},{60:60}],199:[function(a,b,c){"use strict";var d=a(68),e=a(69),f=a(46),g=a(73),h=a(141),i=a(62),j=a(101).f,k=a(99).f,l=a(97).f,m=a(132).trim,n="Number",o=d[n],p=o,q=o.prototype,r=f(a(96)(q))==n,s="trim"in String.prototype,t=function(a){var b=h(a,!1);if("string"==typeof b&&b.length>2){b=s?b.trim():m(b,3);var c,d,e,f=b.charCodeAt(0);if(43===f||45===f){if(c=b.charCodeAt(2),88===c||120===c)return NaN}else if(48===f){switch(b.charCodeAt(1)){case 66:case 98:d=2,e=49;break;case 79:case 111:d=8,e=55;break;default:return+b}for(var g,i=b.slice(2),j=0,k=i.length;j<k;j++)if(g=i.charCodeAt(j),g<48||g>e)return NaN;return parseInt(i,d)}}return+b};if(!o(" 0o1")||!o("0b1")||o("+0x1")){o=function(a){var b=arguments.length<1?0:a,c=this;return c instanceof o&&(r?i(function(){q.valueOf.call(c)}):f(c)!=n)?g(new p(t(b)),c,o):t(b)};for(var u,v=a(56)?j(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;v.length>w;w++)e(p,u=v[w])&&!e(o,u)&&l(o,u,k(p,u));o.prototype=q,q.constructor=o,a(116)(d,n,o)}},{101:101,116:116,132:132,141:141,46:46,56:56,62:62,68:68,69:69,73:73,96:96,97:97,99:99}],200:[function(a,b,c){var d=a(60);d(d.S,"Number",{EPSILON:Math.pow(2,-52)})},{60:60}],201:[function(a,b,c){var d=a(60),e=a(68).isFinite;d(d.S,"Number",{isFinite:function(a){return"number"==typeof a&&e(a)}})},{60:60,68:68}],202:[function(a,b,c){var d=a(60);d(d.S,"Number",{isInteger:a(78)})},{60:60,78:78}],203:[function(a,b,c){var d=a(60);d(d.S,"Number",{isNaN:function(a){return a!=a}})},{60:60}],204:[function(a,b,c){var d=a(60),e=a(78),f=Math.abs;d(d.S,"Number",{isSafeInteger:function(a){return e(a)&&f(a)<=9007199254740991}})},{60:60,78:78}],205:[function(a,b,c){var d=a(60);d(d.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{60:60}],206:[function(a,b,c){var d=a(60);d(d.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{60:60}],207:[function(a,b,c){var d=a(60),e=a(110);d(d.S+d.F*(Number.parseFloat!=e),"Number",{parseFloat:e})},{110:110,60:60}],208:[function(a,b,c){var d=a(60),e=a(111);d(d.S+d.F*(Number.parseInt!=e),"Number",{parseInt:e})},{111:111,60:60}],209:[function(a,b,c){"use strict";var d=a(60),e=a(137),f=a(32),g=a(131),h=1..toFixed,i=Math.floor,j=[0,0,0,0,0,0],k="Number.toFixed: incorrect invocation!",l="0",m=function(a,b){for(var c=-1,d=b;++c<6;)d+=a*j[c],j[c]=d%1e7,d=i(d/1e7)},n=function(a){for(var b=6,c=0;--b>=0;)c+=j[b],j[b]=i(c/a),c=c%a*1e7},o=function(){for(var a=6,b="";--a>=0;)if(""!==b||0===a||0!==j[a]){var c=String(j[a]);b=""===b?c:b+g.call(l,7-c.length)+c}return b},p=function(a,b,c){return 0===b?c:b%2===1?p(a,b-1,c*a):p(a*a,b/2,c)},q=function(a){for(var b=0,c=a;c>=4096;)b+=12,c/=4096;for(;c>=2;)b+=1,c/=2;return b};d(d.P+d.F*(!!h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a(62)(function(){h.call({})})),"Number",{toFixed:function(a){var b,c,d,h,i=f(this,k),j=e(a),r="",s=l;if(j<0||j>20)throw RangeError(k);if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(r="-",i=-i),i>1e-21)if(b=q(i*p(2,69,1))-69,c=b<0?i*p(2,-b,1):i/p(2,b,1),c*=4503599627370496,b=52-b,b>0){for(m(0,c),d=j;d>=7;)m(1e7,0),d-=7;for(m(p(10,d,1),0),d=b-1;d>=23;)n(1<<23),d-=23;n(1<<d),m(1,1),n(2),s=o()}else m(0,c),m(1<<-b,0),s=o()+g.call(l,j);return j>0?(h=s.length,s=r+(h<=j?"0."+g.call(l,j-h)+s:s.slice(0,h-j)+"."+s.slice(h-j))):s=r+s,s}})},{131:131,137:137,32:32,60:60,62:62}],210:[function(a,b,c){"use strict";var d=a(60),e=a(62),f=a(32),g=1..toPrecision;d(d.P+d.F*(e(function(){return"1"!==g.call(1,void 0)})||!e(function(){g.call({})})),"Number",{toPrecision:function(a){var b=f(this,"Number#toPrecision: incorrect invocation!");return void 0===a?g.call(b):g.call(b,a)}})},{32:32,60:60,62:62}],211:[function(a,b,c){var d=a(60);d(d.S+d.F,"Object",{assign:a(95)})},{60:60,95:95}],212:[function(a,b,c){var d=a(60);d(d.S,"Object",{create:a(96)})},{60:60,96:96}],213:[function(a,b,c){var d=a(60);d(d.S+d.F*!a(56),"Object",{defineProperties:a(98)})},{56:56,60:60,98:98}],214:[function(a,b,c){var d=a(60);d(d.S+d.F*!a(56),"Object",{defineProperty:a(97).f})},{56:56,60:60,97:97}],215:[function(a,b,c){var d=a(79),e=a(92).onFreeze;a(107)("freeze",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{107:107,79:79,92:92}],216:[function(a,b,c){var d=a(138),e=a(99).f;a(107)("getOwnPropertyDescriptor",function(){return function(a,b){return e(d(a),b)}})},{107:107,138:138,99:99}],217:[function(a,b,c){a(107)("getOwnPropertyNames",function(){return a(100).f})},{100:100,107:107}],218:[function(a,b,c){var d=a(140),e=a(103);a(107)("getPrototypeOf",function(){return function(a){return e(d(a))}})},{103:103,107:107,140:140}],219:[function(a,b,c){var d=a(79);a(107)("isExtensible",function(a){return function(b){return!!d(b)&&(!a||a(b))}})},{107:107,79:79}],220:[function(a,b,c){var d=a(79);a(107)("isFrozen",function(a){return function(b){return!d(b)||!!a&&a(b)}})},{107:107,79:79}],221:[function(a,b,c){var d=a(79);a(107)("isSealed",function(a){return function(b){return!d(b)||!!a&&a(b)}})},{107:107,79:79}],222:[function(a,b,c){var d=a(60);d(d.S,"Object",{is:a(119)})},{119:119,60:60}],223:[function(a,b,c){var d=a(140),e=a(105);a(107)("keys",function(){return function(a){return e(d(a))}})},{105:105,107:107,140:140}],224:[function(a,b,c){var d=a(79),e=a(92).onFreeze;a(107)("preventExtensions",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{107:107,79:79,92:92}],225:[function(a,b,c){var d=a(79),e=a(92).onFreeze;a(107)("seal",function(a){return function(b){return a&&d(b)?a(e(b)):b}})},{107:107,79:79,92:92}],226:[function(a,b,c){var d=a(60);d(d.S,"Object",{setPrototypeOf:a(120).set})},{120:120,60:60}],227:[function(a,b,c){"use strict";var d=a(45),e={};e[a(150)("toStringTag")]="z",e+""!="[object z]"&&a(116)(Object.prototype,"toString",function(){return"[object "+d(this)+"]"},!0)},{116:116,150:150,45:45}],228:[function(a,b,c){var d=a(60),e=a(110);d(d.G+d.F*(parseFloat!=e),{parseFloat:e})},{110:110,60:60}],229:[function(a,b,c){var d=a(60),e=a(111);d(d.G+d.F*(parseInt!=e),{parseInt:e})},{111:111,60:60}],230:[function(a,b,c){"use strict";var d,e,f,g,h=a(87),i=a(68),j=a(52),k=a(45),l=a(60),m=a(79),n=a(31),o=a(35),p=a(66),q=a(125),r=a(134).set,s=a(93)(),t=a(94),u=a(112),v=a(146),w=a(113),x="Promise",y=i.TypeError,z=i.process,A=z&&z.versions,B=A&&A.v8||"",C=i[x],D="process"==k(z),E=function(){},F=e=t.f,G=!!function(){try{var b=C.resolve(1),c=(b.constructor={})[a(150)("species")]=function(a){a(E,E)};return(D||"function"==typeof PromiseRejectionEvent)&&b.then(E)instanceof c&&0!==B.indexOf("6.6")&&v.indexOf("Chrome/66")===-1}catch(a){}}(),H=function(a){var b;return!(!m(a)||"function"!=typeof(b=a.then))&&b},I=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g,h=e?b.ok:b.fail,i=b.resolve,j=b.reject,k=b.domain;try{h?(e||(2==a._h&&L(a),a._h=1),h===!0?c=d:(k&&k.enter(),c=h(d),k&&(k.exit(),g=!0)),c===b.promise?j(y("Promise-chain cycle")):(f=H(c))?f.call(c,i,j):i(c)):j(d)}catch(a){k&&!g&&k.exit(),j(a)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&J(a)})}},J=function(a){r.call(i,function(){var b,c,d,e=a._v,f=K(a);if(f&&(b=u(function(){D?z.emit("unhandledRejection",e,a):(c=i.onunhandledrejection)?c({promise:a,reason:e}):(d=i.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=D||K(a)?2:1),a._a=void 0,f&&b.e)throw b.v})},K=function(a){return 1!==a._h&&0===(a._a||a._c).length},L=function(a){r.call(i,function(){var b;D?z.emit("rejectionHandled",a):(b=i.onrejectionhandled)&&b({promise:a,reason:a._v})})},M=function(a){var b=this;b._d||(b._d=!0,b=b._w||b,b._v=a,b._s=2,b._a||(b._a=b._c.slice()),I(b,!0))},N=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw y("Promise can't be resolved itself");(b=H(a))?s(function(){var d={_w:c,_d:!1};try{b.call(a,j(N,d,1),j(M,d,1))}catch(a){M.call(d,a)}}):(c._v=a,c._s=1,I(c,!1))}catch(a){M.call({_w:c,_d:!1},a)}}};G||(C=function(a){o(this,C,x,"_h"),n(a),d.call(this);try{a(j(N,this,1),j(M,this,1))}catch(a){M.call(this,a)}},d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},d.prototype=a(115)(C.prototype,{then:function(a,b){var c=F(q(this,C));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=D?z.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&I(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=a,this.resolve=j(N,a,1),this.reject=j(M,a,1)},t.f=F=function(a){return a===C||a===g?new f(a):e(a)}),l(l.G+l.W+l.F*!G,{Promise:C}),a(122)(C,x),a(121)(x),g=a(50)[x],l(l.S+l.F*!G,x,{reject:function(a){var b=F(this),c=b.reject;return c(a),b.promise}}),l(l.S+l.F*(h||!G),x,{resolve:function(a){return w(h&&this===g?C:this,a)}}),l(l.S+l.F*!(G&&a(84)(function(a){C.all(a).catch(E)})),x,{all:function(a){var b=this,c=F(b),d=c.resolve,e=c.reject,f=u(function(){var c=[],f=0,g=1;p(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=F(b),d=c.reject,e=u(function(){p(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},{112:112,113:113,115:115,121:121,122:122,125:125,134:134,146:146,150:150,31:31,35:35,45:45,50:50,52:52,60:60,66:66,68:68,79:79,84:84,87:87,93:93,94:94}],231:[function(a,b,c){var d=a(60),e=a(31),f=a(36),g=(a(68).Reflect||{}).apply,h=Function.apply;d(d.S+d.F*!a(62)(function(){g(function(){})}),"Reflect",{apply:function(a,b,c){var d=e(a),i=f(c);return g?g(d,b,i):h.call(d,b,i)}})},{31:31,36:36,60:60,62:62,68:68}],232:[function(a,b,c){var d=a(60),e=a(96),f=a(31),g=a(36),h=a(79),i=a(62),j=a(44),k=(a(68).Reflect||{}).construct,l=i(function(){function a(){}return!(k(function(){},[],a)instanceof a)}),m=!i(function(){k(function(){})});d(d.S+d.F*(l||m),"Reflect",{construct:function(a,b){f(a),g(b);var c=arguments.length<3?a:f(arguments[2]);if(m&&!l)return k(a,b,c);if(a==c){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3])}var d=[null];return d.push.apply(d,b),new(j.apply(a,d))}var i=c.prototype,n=e(h(i)?i:Object.prototype),o=Function.apply.call(a,n,b);return h(o)?o:n}})},{31:31,36:36,44:44,60:60,62:62,68:68,79:79,96:96}],233:[function(a,b,c){var d=a(97),e=a(60),f=a(36),g=a(141);e(e.S+e.F*a(62)(function(){Reflect.defineProperty(d.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(a,b,c){f(a),b=g(b,!0),f(c);try{return d.f(a,b,c),!0}catch(a){return!1}}})},{141:141,36:36,60:60,62:62,97:97}],234:[function(a,b,c){var d=a(60),e=a(99).f,f=a(36);d(d.S,"Reflect",{deleteProperty:function(a,b){var c=e(f(a),b);return!(c&&!c.configurable)&&delete a[b]}})},{36:36,60:60,99:99}],235:[function(a,b,c){"use strict";var d=a(60),e=a(36),f=function(a){this._t=e(a),this._i=0;var b,c=this._k=[];for(b in a)c.push(b)};a(82)(f,"Object",function(){var a,b=this,c=b._k;do if(b._i>=c.length)return{value:void 0,done:!0};while(!((a=c[b._i++])in b._t));return{value:a,done:!1}}),d(d.S,"Reflect",{enumerate:function(a){return new f(a)}})},{36:36,60:60,82:82}],236:[function(a,b,c){var d=a(99),e=a(60),f=a(36);e(e.S,"Reflect",{getOwnPropertyDescriptor:function(a,b){return d.f(f(a),b)}})},{36:36,60:60,99:99}],237:[function(a,b,c){var d=a(60),e=a(103),f=a(36);d(d.S,"Reflect",{getPrototypeOf:function(a){return e(f(a))}})},{103:103,36:36,60:60}],238:[function(a,b,c){function d(a,b){var c,h,k=arguments.length<3?a:arguments[2];return j(a)===k?a[b]:(c=e.f(a,b))?g(c,"value")?c.value:void 0!==c.get?c.get.call(k):void 0:i(h=f(a))?d(h,b,k):void 0}var e=a(99),f=a(103),g=a(69),h=a(60),i=a(79),j=a(36);h(h.S,"Reflect",{get:d})},{103:103,36:36,60:60,69:69,79:79,99:99}],239:[function(a,b,c){var d=a(60);d(d.S,"Reflect",{has:function(a,b){return b in a}})},{60:60}],240:[function(a,b,c){var d=a(60),e=a(36),f=Object.isExtensible;d(d.S,"Reflect",{isExtensible:function(a){return e(a),!f||f(a)}})},{36:36,60:60}],241:[function(a,b,c){var d=a(60);d(d.S,"Reflect",{ownKeys:a(109)})},{109:109,60:60}],242:[function(a,b,c){var d=a(60),e=a(36),f=Object.preventExtensions;d(d.S,"Reflect",{preventExtensions:function(a){e(a);try{return f&&f(a),!0}catch(a){return!1}}})},{36:36,60:60}],243:[function(a,b,c){var d=a(60),e=a(120);e&&d(d.S,"Reflect",{setPrototypeOf:function(a,b){e.check(a,b);try{return e.set(a,b),!0}catch(a){return!1}}})},{120:120,60:60}],244:[function(a,b,c){function d(a,b,c){var i,m,n=arguments.length<4?a:arguments[3],o=f.f(k(a),b);if(!o){if(l(m=g(a)))return d(m,b,c,n);o=j(0)}if(h(o,"value")){if(o.writable===!1||!l(n))return!1;if(i=f.f(n,b)){if(i.get||i.set||i.writable===!1)return!1;i.value=c,e.f(n,b,i)}else e.f(n,b,j(0,c));return!0}return void 0!==o.set&&(o.set.call(n,c),!0)}var e=a(97),f=a(99),g=a(103),h=a(69),i=a(60),j=a(114),k=a(36),l=a(79);i(i.S,"Reflect",{set:d})},{103:103,114:114,36:36,60:60,69:69,79:79,97:97,99:99}],245:[function(a,b,c){var d=a(68),e=a(73),f=a(97).f,g=a(101).f,h=a(80),i=a(64),j=d.RegExp,k=j,l=j.prototype,m=/a/g,n=/a/g,o=new j(m)!==m;if(a(56)&&(!o||a(62)(function(){return n[a(150)("match")]=!1,j(m)!=m||j(n)==n||"/a/i"!=j(m,"i")}))){j=function(a,b){var c=this instanceof j,d=h(a),f=void 0===b;return!c&&d&&a.constructor===j&&f?a:e(o?new k(d&&!f?a.source:a,b):k((d=a instanceof j)?a.source:a,d&&f?i.call(a):b),c?this:l,j)};for(var p=(function(a){a in j||f(j,a,{configurable:!0,get:function(){return k[a]},set:function(b){k[a]=b}})}),q=g(k),r=0;q.length>r;)p(q[r++]);l.constructor=j,j.prototype=l,a(116)(d,"RegExp",j)}a(121)("RegExp")},{101:101,116:116,121:121,150:150,56:56,62:62,64:64,68:68,73:73,80:80,97:97}],246:[function(a,b,c){"use strict";var d=a(118);a(60)({target:"RegExp",proto:!0,forced:d!==/./.exec},{exec:d})},{118:118,60:60}],247:[function(a,b,c){a(56)&&"g"!=/./g.flags&&a(97).f(RegExp.prototype,"flags",{configurable:!0,get:a(64)})},{56:56,64:64,97:97}],248:[function(a,b,c){"use strict";var d=a(36),e=a(139),f=a(34),g=a(117);a(63)("match",1,function(a,b,c,h){return[function(c){var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))},function(a){var b=h(c,a,this);if(b.done)return b.value;var i=d(a),j=String(this);if(!i.global)return g(i,j);var k=i.unicode;i.lastIndex=0;for(var l,m=[],n=0;null!==(l=g(i,j));){var o=String(l[0]);m[n]=o,""===o&&(i.lastIndex=f(j,e(i.lastIndex),k)),n++}return 0===n?null:m}]})},{117:117,139:139,34:34,36:36,63:63}],249:[function(a,b,c){"use strict";var d=a(36),e=a(140),f=a(139),g=a(137),h=a(34),i=a(117),j=Math.max,k=Math.min,l=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,n=/\$([$&`']|\d\d?)/g,o=function(a){return void 0===a?a:String(a)};a(63)("replace",2,function(a,b,c,p){function q(a,b,d,f,g,h){var i=d+a.length,j=f.length,k=n;return void 0!==g&&(g=e(g),k=m),c.call(h,k,function(c,e){var h;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return b.slice(0,d);case"'":return b.slice(i);case"<":h=g[e.slice(1,-1)];break;default:var k=+e;if(0===k)return c;if(k>j){var m=l(k/10);return 0===m?c:m<=j?void 0===f[m-1]?e.charAt(1):f[m-1]+e.charAt(1):c}h=f[k-1]}return void 0===h?"":h})}return[function(d,e){var f=a(this),g=void 0==d?void 0:d[b];return void 0!==g?g.call(d,f,e):c.call(String(f),d,e)},function(a,b){var e=p(c,a,this,b);if(e.done)return e.value;var l=d(a),m=String(this),n="function"==typeof b;n||(b=String(b));var r=l.global;if(r){var s=l.unicode;l.lastIndex=0}for(var t=[];;){var u=i(l,m);if(null===u)break;if(t.push(u),!r)break;var v=String(u[0]);""===v&&(l.lastIndex=h(m,f(l.lastIndex),s))}for(var w="",x=0,y=0;y<t.length;y++){u=t[y];for(var z=String(u[0]),A=j(k(g(u.index),m.length),0),B=[],C=1;C<u.length;C++)B.push(o(u[C]));var D=u.groups;if(n){var E=[z].concat(B,A,m);void 0!==D&&E.push(D);var F=String(b.apply(void 0,E))}else F=q(z,m,A,B,D,b);A>=x&&(w+=m.slice(x,A)+F,x=A+z.length)}return w+m.slice(x)}]})},{117:117,137:137,139:139,140:140,34:34,36:36,63:63}],250:[function(a,b,c){"use strict";var d=a(36),e=a(119),f=a(117);a(63)("search",1,function(a,b,c,g){return[function(c){var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))},function(a){var b=g(c,a,this);if(b.done)return b.value;var h=d(a),i=String(this),j=h.lastIndex;e(j,0)||(h.lastIndex=0);var k=f(h,i);return e(h.lastIndex,j)||(h.lastIndex=j),null===k?-1:k.index}]})},{117:117,119:119,36:36,63:63}],251:[function(a,b,c){"use strict";var d=a(80),e=a(36),f=a(125),g=a(34),h=a(139),i=a(117),j=a(118),k=a(62),l=Math.min,m=[].push,n="split",o="length",p="lastIndex",q=4294967295,r=!k(function(){RegExp(q,"y")});a(63)("split",2,function(a,b,c,k){var s;return s="c"=="abbc"[n](/(b)*/)[1]||4!="test"[n](/(?:)/,-1)[o]||2!="ab"[n](/(?:ab)*/)[o]||4!="."[n](/(.?)(.?)/)[o]||"."[n](/()()/)[o]>1||""[n](/.?/)[o]?function(a,b){var e=String(this);if(void 0===a&&0===b)return[];if(!d(a))return c.call(e,a,b);for(var f,g,h,i=[],k=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(a.sticky?"y":""),l=0,n=void 0===b?q:b>>>0,r=new RegExp(a.source,k+"g");(f=j.call(r,e))&&(g=r[p],!(g>l&&(i.push(e.slice(l,f.index)),f[o]>1&&f.index<e[o]&&m.apply(i,f.slice(1)),h=f[0][o],l=g,i[o]>=n)));)r[p]===f.index&&r[p]++;return l===e[o]?!h&&r.test("")||i.push(""):i.push(e.slice(l)),i[o]>n?i.slice(0,n):i}:"0"[n](void 0,0)[o]?function(a,b){return void 0===a&&0===b?[]:c.call(this,a,b)}:c,[function(c,d){var e=a(this),f=void 0==c?void 0:c[b];return void 0!==f?f.call(c,e,d):s.call(String(e),c,d)},function(a,b){var d=k(s,a,this,b,s!==c);if(d.done)return d.value;var j=e(a),m=String(this),n=f(j,RegExp),o=j.unicode,p=(j.ignoreCase?"i":"")+(j.multiline?"m":"")+(j.unicode?"u":"")+(r?"y":"g"),t=new n(r?j:"^(?:"+j.source+")",p),u=void 0===b?q:b>>>0;if(0===u)return[];if(0===m.length)return null===i(t,m)?[m]:[];for(var v=0,w=0,x=[];w<m.length;){t.lastIndex=r?w:0;var y,z=i(t,r?m:m.slice(w));if(null===z||(y=l(h(t.lastIndex+(r?0:w)),m.length))===v)w=g(m,w,o);else{if(x.push(m.slice(v,w)),x.length===u)return x;for(var A=1;A<=z.length-1;A++)if(x.push(z[A]),x.length===u)return x;w=v=y}}return x.push(m.slice(v)),x}]})},{117:117,118:118,125:125,139:139,34:34,36:36,62:62,63:63,80:80}],252:[function(a,b,c){"use strict";a(247);var d=a(36),e=a(64),f=a(56),g="toString",h=/./[g],i=function(b){a(116)(RegExp.prototype,g,b,!0)};a(62)(function(){return"/a/b"!=h.call({source:"a",flags:"b"})})?i(function(){var a=d(this);return"/".concat(a.source,"/","flags"in a?a.flags:!f&&a instanceof RegExp?e.call(a):void 0)}):h.name!=g&&i(function(){return h.call(this)})},{116:116,247:247,36:36,56:56,62:62,64:64}],253:[function(a,b,c){"use strict";var d=a(47),e=a(147),f="Set";b.exports=a(49)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(e(this,f),a=0===a?0:a,a)}},d)},{147:147,47:47,49:49}],254:[function(a,b,c){"use strict";a(129)("anchor",function(a){return function(b){return a(this,"a","name",b)}})},{129:129}],255:[function(a,b,c){"use strict";a(129)("big",function(a){return function(){return a(this,"big","","")}})},{129:129}],256:[function(a,b,c){"use strict";a(129)("blink",function(a){return function(){return a(this,"blink","","")}})},{129:129}],257:[function(a,b,c){"use strict";a(129)("bold",function(a){return function(){return a(this,"b","","")}})},{129:129}],258:[function(a,b,c){"use strict";var d=a(60),e=a(127)(!1);d(d.P,"String",{codePointAt:function(a){return e(this,a)}})},{127:127,60:60}],259:[function(a,b,c){"use strict";var d=a(60),e=a(139),f=a(128),g="endsWith",h=""[g];d(d.P+d.F*a(61)(g),"String",{endsWith:function(a){var b=f(this,a,g),c=arguments.length>1?arguments[1]:void 0,d=e(b.length),i=void 0===c?d:Math.min(e(c),d),j=String(a);return h?h.call(b,j,i):b.slice(i-j.length,i)===j}})},{128:128,139:139,60:60,61:61}],260:[function(a,b,c){"use strict";a(129)("fixed",function(a){return function(){return a(this,"tt","","")}})},{129:129}],261:[function(a,b,c){"use strict";a(129)("fontcolor",function(a){return function(b){return a(this,"font","color",b)}})},{129:129}],262:[function(a,b,c){"use strict";a(129)("fontsize",function(a){return function(b){return a(this,"font","size",b)}})},{129:129}],263:[function(a,b,c){var d=a(60),e=a(135),f=String.fromCharCode,g=String.fromCodePoint;d(d.S+d.F*(!!g&&1!=g.length),"String",{fromCodePoint:function(a){for(var b,c=[],d=arguments.length,g=0;d>g;){if(b=+arguments[g++],e(b,1114111)!==b)throw RangeError(b+" is not a valid code point");c.push(b<65536?f(b):f(((b-=65536)>>10)+55296,b%1024+56320))}return c.join("")}})},{135:135,60:60}],264:[function(a,b,c){"use strict";var d=a(60),e=a(128),f="includes";d(d.P+d.F*a(61)(f),"String",{includes:function(a){return!!~e(this,a,f).indexOf(a,arguments.length>1?arguments[1]:void 0)}})},{128:128,60:60,61:61}],265:[function(a,b,c){"use strict";a(129)("italics",function(a){return function(){return a(this,"i","","")}})},{129:129}],266:[function(a,b,c){"use strict";var d=a(127)(!0);a(83)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},{127:127,83:83}],267:[function(a,b,c){"use strict";a(129)("link",function(a){return function(b){return a(this,"a","href",b)}})},{129:129}],268:[function(a,b,c){var d=a(60),e=a(138),f=a(139);d(d.S,"String",{raw:function(a){for(var b=e(a.raw),c=f(b.length),d=arguments.length,g=[],h=0;c>h;)g.push(String(b[h++])),h<d&&g.push(String(arguments[h]));return g.join("")}})},{138:138,139:139,60:60}],269:[function(a,b,c){var d=a(60);d(d.P,"String",{repeat:a(131)})},{131:131,60:60}],270:[function(a,b,c){"use strict";a(129)("small",function(a){return function(){return a(this,"small","","")}})},{129:129}],271:[function(a,b,c){"use strict";var d=a(60),e=a(139),f=a(128),g="startsWith",h=""[g];d(d.P+d.F*a(61)(g),"String",{startsWith:function(a){var b=f(this,a,g),c=e(Math.min(arguments.length>1?arguments[1]:void 0,b.length)),d=String(a);return h?h.call(b,d,c):b.slice(c,c+d.length)===d}})},{128:128,139:139,60:60,61:61}],272:[function(a,b,c){"use strict";a(129)("strike",function(a){return function(){return a(this,"strike","","")}})},{129:129}],273:[function(a,b,c){"use strict";a(129)("sub",function(a){return function(){return a(this,"sub","","")}})},{129:129}],274:[function(a,b,c){"use strict";a(129)("sup",function(a){return function(){return a(this,"sup","","")}})},{129:129}],275:[function(a,b,c){"use strict";a(132)("trim",function(a){return function(){return a(this,3)}})},{132:132}],276:[function(a,b,c){"use strict";var d=a(68),e=a(69),f=a(56),g=a(60),h=a(116),i=a(92).KEY,j=a(62),k=a(124),l=a(122),m=a(145),n=a(150),o=a(149),p=a(148),q=a(59),r=a(77),s=a(36),t=a(79),u=a(140),v=a(138),w=a(141),x=a(114),y=a(96),z=a(100),A=a(99),B=a(102),C=a(97),D=a(105),E=A.f,F=C.f,G=z.f,H=d.Symbol,I=d.JSON,J=I&&I.stringify,K="prototype",L=n("_hidden"),M=n("toPrimitive"),N={}.propertyIsEnumerable,O=k("symbol-registry"),P=k("symbols"),Q=k("op-symbols"),R=Object[K],S="function"==typeof H&&!!B.f,T=d.QObject,U=!T||!T[K]||!T[K].findChild,V=f&&j(function(){return 7!=y(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=E(R,b);d&&delete R[b],F(a,b,c),d&&a!==R&&F(R,b,d)}:F,W=function(a){var b=P[a]=y(H[K]);return b._k=a,b},X=S&&"symbol"==typeof H.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof H},Y=function(a,b,c){return a===R&&Y(Q,b,c),s(a),b=w(b,!0),s(c),e(P,b)?(c.enumerable?(e(a,L)&&a[L][b]&&(a[L][b]=!1),c=y(c,{enumerable:x(0,!1)})):(e(a,L)||F(a,L,x(1,{})),a[L][b]=!0),V(a,b,c)):F(a,b,c)},Z=function(a,b){s(a);for(var c,d=q(b=v(b)),e=0,f=d.length;f>e;)Y(a,c=d[e++],b[c]);return a},$=function(a,b){return void 0===b?y(a):Z(y(a),b)},_=function(a){var b=N.call(this,a=w(a,!0));return!(this===R&&e(P,a)&&!e(Q,a))&&(!(b||!e(this,a)||!e(P,a)||e(this,L)&&this[L][a])||b)},aa=function(a,b){if(a=v(a),b=w(b,!0),a!==R||!e(P,b)||e(Q,b)){var c=E(a,b);return!c||!e(P,b)||e(a,L)&&a[L][b]||(c.enumerable=!0),c}},ba=function(a){for(var b,c=G(v(a)),d=[],f=0;c.length>f;)e(P,b=c[f++])||b==L||b==i||d.push(b);return d},ca=function(a){for(var b,c=a===R,d=G(c?Q:v(a)),f=[],g=0;d.length>g;)!e(P,b=d[g++])||c&&!e(R,b)||f.push(P[b]);return f};S||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===R&&b.call(Q,c),e(this,L)&&e(this[L],a)&&(this[L][a]=!1),V(this,a,x(1,c))};return f&&U&&V(R,a,{configurable:!0,set:b}),W(a)},h(H[K],"toString",function(){return this._k}),A.f=aa,C.f=Y,a(101).f=z.f=ba,a(106).f=_,B.f=ca,f&&!a(87)&&h(R,"propertyIsEnumerable",_,!0),o.f=function(a){return W(n(a))}),g(g.G+g.W+g.F*!S,{Symbol:H});for(var da="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ea=0;da.length>ea;)n(da[ea++]);for(var fa=D(n.store),ga=0;fa.length>ga;)p(fa[ga++]);g(g.S+g.F*!S,"Symbol",{for:function(a){return e(O,a+="")?O[a]:O[a]=H(a)},keyFor:function(a){if(!X(a))throw TypeError(a+" is not a symbol!");for(var b in O)if(O[b]===a)return b},useSetter:function(){U=!0},useSimple:function(){U=!1}}),g(g.S+g.F*!S,"Object",{create:$,defineProperty:Y,defineProperties:Z,getOwnPropertyDescriptor:aa,getOwnPropertyNames:ba,getOwnPropertySymbols:ca});var ha=j(function(){B.f(1)});g(g.S+g.F*ha,"Object",{getOwnPropertySymbols:function(a){return B.f(u(a))}}),I&&g(g.S+g.F*(!S||j(function(){var a=H();return"[null]"!=J([a])||"{}"!=J({a:a})||"{}"!=J(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);if(c=b=d[1],(t(b)||void 0!==a)&&!X(a))return r(b)||(b=function(a,b){if("function"==typeof c&&(b=c.call(this,a,b)),!X(b))return b}),d[1]=b,J.apply(I,d)}}),H[K][M]||a(70)(H[K],M,H[K].valueOf),l(H,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},{100:100,101:101,102:102,105:105,106:106,114:114,116:116,122:122,124:124,138:138,140:140,141:141,145:145,148:148,149:149,150:150,36:36,56:56,59:59,60:60,62:62,68:68,69:69,70:70,77:77,79:79,87:87,92:92,96:96,97:97,99:99}],277:[function(a,b,c){"use strict";var d=a(60),e=a(144),f=a(143),g=a(36),h=a(135),i=a(139),j=a(79),k=a(68).ArrayBuffer,l=a(125),m=f.ArrayBuffer,n=f.DataView,o=e.ABV&&k.isView,p=m.prototype.slice,q=e.VIEW,r="ArrayBuffer";d(d.G+d.W+d.F*(k!==m),{ArrayBuffer:m}),d(d.S+d.F*!e.CONSTR,r,{isView:function(a){return o&&o(a)||j(a)&&q in a}}),d(d.P+d.U+d.F*a(62)(function(){return!new m(2).slice(1,void 0).byteLength}),r,{slice:function(a,b){if(void 0!==p&&void 0===b)return p.call(g(this),a);for(var c=g(this).byteLength,d=h(a,c),e=h(void 0===b?c:b,c),f=new(l(this,m))(i(e-d)),j=new n(this),k=new n(f),o=0;d<e;)k.setUint8(o++,j.getUint8(d++));return f}}),a(121)(r)},{121:121,125:125,135:135,139:139,143:143,144:144,36:36,60:60,62:62,68:68,79:79}],278:[function(a,b,c){var d=a(60);d(d.G+d.W+d.F*!a(144).ABV,{DataView:a(143).DataView})},{143:143,144:144,60:60}],279:[function(a,b,c){a(142)("Float32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],280:[function(a,b,c){a(142)("Float64",8,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],281:[function(a,b,c){a(142)("Int16",2,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],282:[function(a,b,c){a(142)("Int32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],283:[function(a,b,c){a(142)("Int8",1,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],284:[function(a,b,c){a(142)("Uint16",2,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],285:[function(a,b,c){a(142)("Uint32",4,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],286:[function(a,b,c){a(142)("Uint8",1,function(a){return function(b,c,d){return a(this,b,c,d)}})},{142:142}],287:[function(a,b,c){a(142)("Uint8",1,function(a){return function(b,c,d){return a(this,b,c,d)}},!0)},{142:142}],288:[function(a,b,c){"use strict";var d,e=a(68),f=a(40)(0),g=a(116),h=a(92),i=a(95),j=a(48),k=a(79),l=a(147),m=a(147),n=!e.ActiveXObject&&"ActiveXObject"in e,o="WeakMap",p=h.getWeak,q=Object.isExtensible,r=j.ufstore,s=function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},t={get:function(a){if(k(a)){var b=p(a);return b===!0?r(l(this,o)).get(a):b?b[this._i]:void 0}},set:function(a,b){return j.def(l(this,o),a,b)}},u=b.exports=a(49)(o,s,t,j,!0,!0);m&&n&&(d=j.getConstructor(s,o),i(d.prototype,t),h.NEED=!0,f(["delete","has","get","set"],function(a){var b=u.prototype,c=b[a];g(b,a,function(b,e){if(k(b)&&!q(b)){this._f||(this._f=new d);var f=this._f[a](b,e);return"set"==a?this:f}return c.call(this,b,e)})}))},{116:116,147:147,40:40,48:48,49:49,68:68,79:79,92:92,95:95}],289:[function(a,b,c){"use strict";var d=a(48),e=a(147),f="WeakSet";a(49)(f,function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(e(this,f),a,!0)}},d,!1,!0)},{147:147,48:48,49:49}],290:[function(a,b,c){"use strict";var d=a(60),e=a(65),f=a(140),g=a(139),h=a(31),i=a(43);d(d.P,"Array",{flatMap:function(a){var b,c,d=f(this);return h(a),b=g(d.length),c=i(d,0),e(c,d,d,b,0,1,a,arguments[1]),c}}),a(33)("flatMap")},{139:139,140:140,31:31,33:33,43:43,60:60,65:65}],291:[function(a,b,c){"use strict";var d=a(60),e=a(39)(!0);d(d.P,"Array",{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),a(33)("includes")},{33:33,39:39,60:60}],292:[function(a,b,c){var d=a(60),e=a(108)(!0);d(d.S,"Object",{entries:function(a){return e(a)}})},{108:108,60:60}],293:[function(a,b,c){var d=a(60),e=a(109),f=a(138),g=a(99),h=a(51);d(d.S,"Object",{getOwnPropertyDescriptors:function(a){for(var b,c,d=f(a),i=g.f,j=e(d),k={},l=0;j.length>l;)c=i(d,b=j[l++]),void 0!==c&&h(k,b,c);return k}})},{109:109,138:138,51:51,60:60,99:99}],294:[function(a,b,c){var d=a(60),e=a(108)(!1);d(d.S,"Object",{values:function(a){return e(a)}})},{108:108,60:60}],295:[function(a,b,c){"use strict";var d=a(60),e=a(50),f=a(68),g=a(125),h=a(113);d(d.P+d.R,"Promise",{finally:function(a){var b=g(this,e.Promise||f.Promise),c="function"==typeof a;return this.then(c?function(c){return h(b,a()).then(function(){return c})}:a,c?function(c){return h(b,a()).then(function(){throw c})}:a)}})},{113:113,125:125,50:50,60:60,68:68}],296:[function(a,b,c){"use strict";var d=a(60),e=a(130),f=a(146),g=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(f);d(d.P+d.F*g,"String",{padEnd:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!1)}})},{130:130,146:146,60:60}],297:[function(a,b,c){"use strict";var d=a(60),e=a(130),f=a(146),g=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(f);d(d.P+d.F*g,"String",{padStart:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!0)}})},{130:130,146:146,60:60}],298:[function(a,b,c){"use strict";a(132)("trimLeft",function(a){return function(){return a(this,1)}},"trimStart")},{132:132}],299:[function(a,b,c){"use strict";a(132)("trimRight",function(a){return function(){return a(this,2)}},"trimEnd")},{132:132}],300:[function(a,b,c){a(148)("asyncIterator")},{148:148}],301:[function(a,b,c){for(var d=a(162),e=a(105),f=a(116),g=a(68),h=a(70),i=a(86),j=a(150),k=j("iterator"),l=j("toStringTag"),m=i.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,
DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},o=e(n),p=0;p<o.length;p++){var q,r=o[p],s=n[r],t=g[r],u=t&&t.prototype;if(u&&(u[k]||h(u,k,m),u[l]||h(u,l,r),i[r]=m,s))for(q in d)u[q]||f(u,q,d[q],!0)}},{105:105,116:116,150:150,162:162,68:68,70:70,86:86}],302:[function(a,b,c){var d=a(60),e=a(134);d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{134:134,60:60}],303:[function(a,b,c){var d=a(68),e=a(60),f=a(146),g=[].slice,h=/MSIE .\./.test(f),i=function(a){return function(b,c){var d=arguments.length>2,e=!!d&&g.call(arguments,2);return a(d?function(){("function"==typeof b?b:Function(b)).apply(this,e)}:b,c)}};e(e.G+e.B+e.F*h,{setTimeout:i(d.setTimeout),setInterval:i(d.setInterval)})},{146:146,60:60,68:68}],304:[function(a,b,c){a(303),a(302),a(301),b.exports=a(50)},{301:301,302:302,303:303,50:50}],305:[function(a,b,c){var d=function(a){"use strict";function b(a,b,c,e){var f=b&&b.prototype instanceof d?b:d,g=Object.create(f.prototype),h=new m(e||[]);return g._invoke=i(a,c,h),g}function c(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function d(){}function e(){}function f(){}function g(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function h(a,b){function d(e,f,g,h){var i=c(a[e],a,f);if("throw"!==i.type){var j=i.arg,k=j.value;return k&&"object"==typeof k&&r.call(k,"__await")?b.resolve(k.__await).then(function(a){d("next",a,g,h)},function(a){d("throw",a,g,h)}):b.resolve(k).then(function(a){j.value=a,g(j)},function(a){return d("throw",a,g,h)})}h(i.arg)}function e(a,c){function e(){return new b(function(b,e){d(a,c,b,e)})}return f=f?f.then(e,e):e()}var f;this._invoke=e}function i(a,b,d){var e=w;return function(f,g){if(e===y)throw new Error("Generator is already running");if(e===z){if("throw"===f)throw g;return o()}for(d.method=f,d.arg=g;;){var h=d.delegate;if(h){var i=j(h,d);if(i){if(i===A)continue;return i}}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if(e===w)throw e=z,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);e=y;var k=c(a,b,d);if("normal"===k.type){if(e=d.done?z:x,k.arg===A)continue;return{value:k.arg,done:d.done}}"throw"===k.type&&(e=z,d.method="throw",d.arg=k.arg)}}}function j(a,b){var d=a.iterator[b.method];if(d===p){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=p,j(a,b),"throw"===b.method))return A;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=c(d,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,A;var f=e.arg;return f?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=null,A):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,A)}function k(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function l(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function m(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(k,this),this.reset(!0)}function n(a){if(a){var b=a[t];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(r.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=p,b.done=!0,b};return d.next=d}}return{next:o}}function o(){return{value:p,done:!0}}var p,q=Object.prototype,r=q.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},t=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",v=s.toStringTag||"@@toStringTag";a.wrap=b;var w="suspendedStart",x="suspendedYield",y="executing",z="completed",A={},B={};B[t]=function(){return this};var C=Object.getPrototypeOf,D=C&&C(C(n([])));D&&D!==q&&r.call(D,t)&&(B=D);var E=f.prototype=d.prototype=Object.create(B);return e.prototype=E.constructor=f,f.constructor=e,f[v]=e.displayName="GeneratorFunction",a.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===e||"GeneratorFunction"===(b.displayName||b.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,f):(a.__proto__=f,v in a||(a[v]="GeneratorFunction")),a.prototype=Object.create(E),a},a.awrap=function(a){return{__await:a}},g(h.prototype),h.prototype[u]=function(){return this},a.AsyncIterator=h,a.async=function(c,d,e,f,g){void 0===g&&(g=Promise);var i=new h(b(c,d,e,f),g);return a.isGeneratorFunction(d)?i:i.next().then(function(a){return a.done?a.value:i.next()})},g(E),E[v]="Generator",E[t]=function(){return this},E.toString=function(){return"[object Generator]"},a.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},a.values=n,m.prototype={constructor:m,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(l),!a)for(var b in this)"t"===b.charAt(0)&&r.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=p),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=r.call(e,"catchLoc"),h=r.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&r.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,A):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),A},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),l(c),A}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;l(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:n(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),A}},a}("object"==typeof b?b.exports:{});try{regeneratorRuntime=d}catch(a){Function("r","regeneratorRuntime = r")(d)}},{}],306:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}a(307);var e=d(a(13));e.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e.default._babelPolyfill=!0},{13:13,307:307}],307:[function(a,b,c){"use strict";a(1),a(3),a(2),a(9),a(8),a(11),a(10),a(12),a(5),a(6),a(4),a(7),a(304),a(305)},{1:1,10:10,11:11,12:12,2:2,3:3,304:304,305:305,4:4,5:5,6:6,7:7,8:8,9:9}]},{},[306])}(a("6"))}),a.registerDynamic("7",["6"],!0,function(a,b,c){var d=this||self;!function(a){!function(a,b){"use strict";var d={},e=a.document,f=a.GreenSockGlobals=a.GreenSockGlobals||a;if(f.TweenLite)return f.TweenLite;var g,h,i,j,k,l=function(a){var b,c=a.split("."),d=f;for(b=0;b<c.length;b++)d[c[b]]=d=d[c[b]]||{};return d},m=l("com.greensock"),n=1e-10,o=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},p=function(){},q=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),r={},s=function(a,e,g,h){this.sc=r[a]?r[a].sc:[],r[a]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(j){for(var k,m,n,o,p=e.length,q=p;--p>-1;)(k=r[e[p]]||new s(e[p],[])).gsClass?(i[p]=k.gsClass,q--):j&&k.sc.push(this);if(0===q&&g){if(m=("com.greensock."+a).split("."),n=m.pop(),o=l(m.join("."))[n]=this.gsClass=g.apply(g,i),h&&(f[n]=d[n]=o,"undefined"!=typeof c&&c.exports))if(a===b){c.exports=d[b]=o;for(p in d)o[p]=d[p]}else d[b]&&(d[b][n]=o);for(p=0;p<this.sc.length;p++)this.sc[p].check()}},this.check(!0)},t=a._gsDefine=function(a,b,c,d){return new s(a,b,c,d)},u=m._class=function(a,b,c){return b=b||function(){},t(a,[],function(){return b},c),b};t.globals=f;var v=[0,0,1,1],w=u("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?v.concat(b):v},!0),x=w.map={},y=w.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,k=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?u("easing."+f,null,!0):m.easing[f]||{},g=k.length;--g>-1;)h=k[g],x[f+"."+h]=x[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(i=w.prototype,i._calcEnd=!1,i.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:a<.5?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:a<.5?d/2:1-d/2},g=["Linear","Quad","Cubic","Quart","Quint,Strong"],h=g.length;--h>-1;)i=g[h]+",Power"+h,y(new w(null,null,1,h),i,"easeOut",!0),y(new w(null,null,2,h),i,"easeIn"+(0===h?",easeNone":"")),y(new w(null,null,3,h),i,"easeInOut");x.linear=m.easing.Linear.easeIn,x.swing=m.easing.Quad.easeInOut;var z=u("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});i=z.prototype,i.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,h=this._listeners[a],i=0;for(this!==j||k||j.wake(),null==h&&(this._listeners[a]=h=[]),g=h.length;--g>-1;)f=h[g],f.c===b&&f.s===c?h.splice(g,1):0===i&&f.pr<e&&(i=g+1);h.splice(i,0,{c:b,s:c,up:d,pr:e})},i.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},i.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,b>1&&(e=e.slice(0)),c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var A=a.requestAnimationFrame,B=a.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},D=C();for(g=["ms","moz","webkit","o"],h=g.length;--h>-1&&!A;)A=a[g[h]+"RequestAnimationFrame"],B=a[g[h]+"CancelAnimationFrame"]||a[g[h]+"CancelRequestAnimationFrame"];u("Ticker",function(a,b){var c,d,f,g,h,i=this,l=C(),m=!(b===!1||!A)&&"auto",o=500,q=33,r="tick",s=function(a){var b,e,j=C()-D;j>o&&(l+=j-q),D+=j,i.time=(D-l)/1e3,b=i.time-h,(!c||b>0||a===!0)&&(i.frame++,h+=b+(b>=g?.004:g-b),e=!0),a!==!0&&(f=d(s)),e&&i.dispatchEvent(r)};z.call(i),i.time=i.frame=0,i.tick=function(){s(!0)},i.lagSmoothing=function(a,b){return arguments.length?(o=a||1/n,void(q=Math.min(b,o,0))):o<1/n},i.sleep=function(){null!=f&&(m&&B?B(f):clearTimeout(f),d=p,f=null,i===j&&(k=!1))},i.wake=function(a){null!==f?i.sleep():a?l+=-D+(D=C()):i.frame>10&&(D=C()-o+5),d=0===c?p:m&&A?A:function(a){return setTimeout(a,1e3*(h-i.time)+1|0)},i===j&&(k=!0),s(2)},i.fps=function(a){return arguments.length?(c=a,g=1/(c||60),h=this.time+g,void i.wake()):c},i.useRAF=function(a){return arguments.length?(i.sleep(),m=a,void i.fps(c)):m},i.fps(a),setTimeout(function(){"auto"===m&&i.frame<5&&"hidden"!==(e||{}).visibilityState&&i.useRAF(!1)},1500)}),i=m.Ticker.prototype=new m.events.EventDispatcher,i.constructor=m.Ticker;var E=u("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,Y){k||j.wake();var c=this.vars.useFrames?X:Y;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});j=E.ticker=new m.Ticker,i=E.prototype,i._dirty=i._gc=i._initted=i._paused=!1,i._totalTime=i._time=0,i._rawPrevTime=-1,i._next=i._last=i._onUpdate=i._timeline=i.timeline=null,i._paused=!1;var F=function(){k&&C()-D>2e3&&("hidden"!==(e||{}).visibilityState||!j.lagSmoothing())&&j.wake();var a=setTimeout(F,2e3);a.unref&&a.unref()};F(),i.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},i.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},i.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},i.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},i.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},i.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},i.render=function(a,b,c){},i.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},i.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime(!0))>=c&&a<c+this.totalDuration()/this._timeScale-1e-7},i._enabled=function(a,b){return k||j.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},i._kill=function(a,b){return this._enabled(!1,!1)},i.kill=function(a,b){return this._kill(a,b),this},i._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},i._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},i._callback=function(a){var b=this.vars,c=b[a],d=b[a+"Params"],e=b[a+"Scope"]||b.callbackScope||this,f=d?d.length:0;switch(f){case 0:c.call(e);break;case 1:c.call(e,d[0]);break;case 2:c.call(e,d[0],d[1]);break;default:c.apply(e,d)}},i.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=q(c)&&c.join("").indexOf("{self}")!==-1?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},i.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},i.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},i.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},i.totalTime=function(a,b,c){if(k||j.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(a<0&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===a&&0!==this._duration||(K.length&&$(),this.render(a,b,!1),K.length&&$())}return this},i.progress=i.totalProgress=function(a,b){var c=this.duration();return arguments.length?this.totalTime(c*a,b):c?this._time/c:this.ratio},i.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},i.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},i.timeScale=function(a){if(!arguments.length)return this._timeScale;var b,c;for(a=a||n,this._timeline&&this._timeline.smoothChildTiming&&(b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime(),this._startTime=c-(c-this._startTime)*this._timeScale/a),this._timeScale=a,c=this.timeline;c&&c.timeline;)c._dirty=!0,c.totalDuration(),c=c.timeline;return this},i.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},i.paused=function(a){if(!arguments.length)return this._paused;var b,c,d=this._timeline;return a!=this._paused&&d&&(k||a||j.wake(),b=d.rawTime(),c=b-this._pauseTime,!a&&d.smoothChildTiming&&(this._startTime+=c,this._uncache(!1)),this._pauseTime=a?b:null,this._paused=a,this._active=this.isActive(),!a&&0!==c&&this._initted&&this.duration()&&(b=d.smoothChildTiming?this._totalTime:(b-this._startTime)/this._timeScale,this.render(b,b===this._totalTime,!0))),this._gc&&!a&&this._enabled(!0,!1),this};var G=u("core.SimpleTimeline",function(a){E.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});i=G.prototype=new E,i.constructor=G,i.kill()._gc=!1,i._first=i._last=i._recent=null,i._sortChildren=!1,i.add=i.insert=function(a,b,c,d){var e,f;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=this.rawTime()-(a._timeline.rawTime()-a._pauseTime)),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(f=a._startTime;e&&e._startTime>f;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._recent=a,this._timeline&&this._uncache(!0),this},i._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},i.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},i.rawTime=function(){return k||j.wake(),this._totalTime};var H=u("TweenLite",function(b,c,d){if(E.call(this,c,d),this.render=H.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:H.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?W[H.defaultOverwrite]:"number"==typeof i?i>>0:W[i],(h||b instanceof Array||b.push&&q(b))&&"number"!=typeof b[0])for(this._targets=g=o(b),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(o(f))):(this._siblings[e]=_(f,this,!1),1===i&&this._siblings[e].length>1&&ba(f,this,null,1,this._siblings[e])):(f=g[e--]=H.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=_(b,this,!1),1===i&&this._siblings.length>1&&ba(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-n,this.render(Math.min(0,-this._delay)))},!0),I=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},J=function(a,b){var c,d={};for(c in a)V[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!S[c]||S[c]&&S[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};i=H.prototype=new E,i.constructor=H,i.kill()._gc=!1,i.ratio=0,i._firstPT=i._targets=i._overwrittenProps=i._startAt=null,i._notifyPluginsOfEnabled=i._lazy=!1,H.version="1.20.5",H.defaultEase=i._ease=new w(null,null,1,1),H.defaultOverwrite="auto",H.ticker=j,H.autoSleep=120,H.lagSmoothing=function(a,b){j.lagSmoothing(a,b)},H.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(H.selector=c,c(b)):(e||(e=a.document),e?e.querySelectorAll?e.querySelectorAll(b):e.getElementById("#"===b.charAt(0)?b.substr(1):b):b)};var K=[],L={},M=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,N=/[\+-]=-?[\.\d]/,O=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.blob?1===a&&null!=this.end?this.end:a?this.join(""):this.start:c.c*a+c.s,c.m?b=c.m.call(this._tween,b,this._target||c.t,this._tween):b<d&&b>-d&&!c.blob&&(b=0),c.f?c.fp?c.t[c.p](c.fp,b):c.t[c.p](b):c.t[c.p]=b,c=c._next},P=function(a,b,c,d){var e,f,g,h,i,j,k,l=[],m=0,n="",o=0;for(l.start=a,l.end=b,a=l[0]=a+"",b=l[1]=b+"",c&&(c(l),a=l[0],b=l[1]),l.length=0,e=a.match(M)||[],f=b.match(M)||[],d&&(d._next=null,d.blob=1,l._firstPT=l._applyPT=d),i=f.length,h=0;h<i;h++)k=f[h],j=b.substr(m,b.indexOf(k,m)-m),n+=j||!h?j:",",m+=j.length,o?o=(o+1)%5:"rgba("===j.substr(-5)&&(o=1),k===e[h]||e.length<=h?n+=k:(n&&(l.push(n),n=""),g=parseFloat(e[h]),l.push(g),l._firstPT={_next:l._firstPT,t:l,p:l.length-1,s:g,c:("="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*parseFloat(k.substr(2)):parseFloat(k)-g)||0,f:0,m:o&&o<4?Math.round:0}),m+=k.length;return n+=b.substr(m),n&&l.push(n),l.setRatio=O,N.test(b)&&(l.end=null),l},Q=function(a,b,c,d,e,f,g,h,i){"function"==typeof d&&(d=d(i||0,a));var j,k=typeof a[b],l="function"!==k?"":b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3),m="get"!==c?c:l?g?a[l](g):a[l]():a[b],n="string"==typeof d&&"="===d.charAt(1),o={t:a,p:b,s:m,f:"function"===k,pg:0,n:e||b,m:f?"function"==typeof f?f:Math.round:0,pr:0,c:n?parseInt(d.charAt(0)+"1",10)*parseFloat(d.substr(2)):parseFloat(d)-m||0};if(("number"!=typeof m||"number"!=typeof d&&!n)&&(g||isNaN(m)||!n&&isNaN(d)||"boolean"==typeof m||"boolean"==typeof d?(o.fp=g,j=P(m,n?parseFloat(o.s)+o.c+(o.s+"").replace(/[0-9\-\.]/g,""):d,h||H.defaultStringFilter,o),o={t:j,p:"setRatio",s:0,c:1,f:2,pg:0,n:e||b,pr:0,m:0}):(o.s=parseFloat(m),n||(o.c=parseFloat(d)-o.s||0))),o.c)return(o._next=this._firstPT)&&(o._next._prev=o),this._firstPT=o,o},R=H._internals={isArray:q,isSelector:I,lazyTweens:K,blobDif:P},S=H._plugins={},T=R.tweenLookup={},U=0,V=R.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},X=E._rootFramesTimeline=new G,Y=E._rootTimeline=new G,Z=30,$=R.lazyRender=function(){var a,b=K.length;for(L={};--b>-1;)a=K[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);K.length=0};Y._startTime=j.time,X._startTime=j.frame,Y._active=X._active=!0,setTimeout($,1),E._updateRoot=H.render=function(){var a,b,c;if(K.length&&$(),Y.render((j.time-Y._startTime)*Y._timeScale,!1,!1),X.render((j.frame-X._startTime)*X._timeScale,!1,!1),K.length&&$(),j.frame>=Z){Z=j.frame+(parseInt(H.autoSleep,10)||120);for(c in T){for(b=T[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete T[c]}if(c=Y._first,(!c||c._paused)&&H.autoSleep&&!X._first&&1===j._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||j.sleep()}}},j.addEventListener("tick",E._updateRoot);var _=function(a,b,c){var d,e,f=a._gsTweenID;if(T[f||(a._gsTweenID=f="t"+U++)]||(T[f]={target:a,tweens:[]}),b&&(d=T[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return T[f].tweens},aa=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=H.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},ba=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;f<i;f++)if((h=e[f])!==b)h._gc||h._kill(null,a,b)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+n,l=[],m=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||ca(b,0,o),0===ca(h,j,o)&&(l[m++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(l[m++]=h)));for(f=m;--f>-1;)if(h=l[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!aa(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},ca=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&f-b<2*n?n:(f+=a.totalDuration()/a._timeScale/e)>b+n?0:f-b-n};i._init=function(){var a,b,c,d,e,f,g=this.vars,h=this._overwrittenProps,i=this._duration,j=!!g.immediateRender,k=g.ease;if(g.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in g.startAt)e[d]=g.startAt[d];if(e.data="isStart",e.overwrite=!1,e.immediateRender=!0,e.lazy=j&&g.lazy!==!1,e.startAt=e.delay=null,e.onUpdate=g.onUpdate,e.onUpdateParams=g.onUpdateParams,e.onUpdateScope=g.onUpdateScope||g.callbackScope||this,this._startAt=H.to(this.target||{},0,e),j)if(this._time>0)this._startAt=null;else if(0!==i)return}else if(g.runBackwards&&0!==i)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(j=!1),c={};for(d in g)V[d]&&"autoCSS"!==d||(c[d]=g[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=j&&g.lazy!==!1,c.immediateRender=j,this._startAt=H.to(this.target,0,c),j){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=k=k?k instanceof w?k:"function"==typeof k?new w(k,g.easeParams):x[k]||H.defaultEase:H.defaultEase,g.easeParams instanceof Array&&k.config&&(this._ease=k.config.apply(k,g.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(f=this._targets.length,a=0;a<f;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],h?h[a]:null,a)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,h,0);if(b&&H._onPluginEvent("_onInitAllProps",this),h&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),g.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=g.onUpdate,this._initted=!0},i._initProps=function(b,c,d,e,f){var g,h,i,j,k,l;if(null==b)return!1;L[b._gsTweenID]&&$(),this.vars.css||b.style&&b!==a&&b.nodeType&&S.css&&this.vars.autoCSS!==!1&&J(this.vars,b);for(g in this.vars)if(l=this.vars[g],V[g])l&&(l instanceof Array||l.push&&q(l))&&l.join("").indexOf("{self}")!==-1&&(this.vars[g]=l=this._swapSelfInParams(l,this));else if(S[g]&&(j=new S[g])._onInitTween(b,this.vars[g],this,f)){for(this._firstPT=k={_next:this._firstPT,t:j,p:"setRatio",s:0,c:1,f:1,n:g,pg:1,pr:j._priority,m:0},h=j._overwriteProps.length;--h>-1;)c[j._overwriteProps[h]]=this._firstPT;(j._priority||j._onInitAllProps)&&(i=!0),(j._onDisable||j._onEnable)&&(this._notifyPluginsOfEnabled=!0),k._next&&(k._next._prev=k)}else c[g]=Q.call(this,b,g,"get",l,g,0,null,this.vars.stringFilter,f);return e&&this._kill(e,b)?this._initProps(b,c,d,e,f):this._overwrite>1&&this._firstPT&&d.length>1&&ba(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e,f)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(L[b._gsTweenID]=!0),i)},i.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i-1e-7&&a>=0)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete",c=c||this._timeline.autoRemoveChildren),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(j<0||a<=0&&a>=-1e-7||j===n&&"isPause"!==this.data)&&j!==a&&(c=!0,j>n&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:n);else if(a<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0)&&(e="onReverseComplete",d=this._reversed),a<0&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(j!==n||"isPause"!==this.data)&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:n)),(!this._initted||this._startAt&&this._startAt.progress())&&(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),1===l?this.ratio=1-k:2===l?this.ratio=k:a/i<.5?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,K.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,!0,c):e||(e="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==i||b||this._callback("onStart"))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(a<0&&this._startAt&&a!==-1e-4&&this._startAt.render(a,!0,c),b||(this._time!==h||d||c)&&this._callback("onUpdate")),e&&(this._gc&&!c||(a<0&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,!0,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this._callback(e),0===i&&this._rawPrevTime===n&&g!==n&&(this._rawPrevTime=0)))}},i._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:H.selector(b)||b;var d,e,f,g,h,i,j,k,l,m=c&&this._time&&c._startTime===this._startTime&&this._timeline===c._timeline;if((q(b)||I(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d],c)&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(H.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if((l||!a)&&!aa(this,c,b,l))return!1}for(f in j)(g=h[f])&&(m&&(g.f?g.t[g.p](g.s):g.t[g.p]=g.s,i=!0),g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),
g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},i.invalidate=function(){return this._notifyPluginsOfEnabled&&H._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],E.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-n,this.render(Math.min(0,-this._delay))),this},i._enabled=function(a,b){if(k||j.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=_(d[c],this,!0);else this._siblings=_(this.target,this,!0)}return E.prototype._enabled.call(this,a,b),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&H._onPluginEvent(a?"_onEnable":"_onDisable",this)},H.to=function(a,b,c){return new H(a,b,c)},H.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new H(a,b,c)},H.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new H(a,b,d)},H.delayedCall=function(a,b,c,d,e){return new H(b,0,{delay:a,onComplete:b,onCompleteParams:c,callbackScope:d,onReverseComplete:b,onReverseCompleteParams:c,immediateRender:!1,lazy:!1,useFrames:e,overwrite:0})},H.set=function(a,b){return new H(a,0,b)},H.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:H.selector(a)||a;var c,d,e,f;if((q(a)||I(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(H.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else if(a._gsTweenID)for(d=_(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d||[]},H.killTweensOf=H.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=H.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var da=u("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=da.prototype},!0);if(i=da.prototype,da.version="1.19.0",da.API=2,i._firstPT=null,i._addTween=Q,i.setRatio=O,i._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},i._mod=i._roundProps=function(a){for(var b,c=this._firstPT;c;)b=a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")],b&&"function"==typeof b&&(2===c.f?c.t._applyPT.m=b:c.m=b),c=c._next},H._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},da.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===da.API&&(S[(new a[b])._propName]=a[b]);return!0},t.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},g=u("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){da.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new da(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,da.activate([g]),g},g=a._gsQueue){for(h=0;h<g.length;h++)g[h]();for(i in r)r[i].func||a.console.log("GSAP encountered missing dependency: "+i)}k=!1}("undefined"!=typeof c&&c.exports&&"undefined"!=typeof d?d:this||window,"TweenLite")}(a("6"))}),a.registerDynamic("8",["9","6"],!0,function(a,b,c){"format cjs";var d=this||self;!function(b){var e="undefined"!=typeof c&&c.exports&&"undefined"!=typeof d?d:this||window;(e._gsQueue||(e._gsQueue=[])).push(function(){"use strict";e._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,f,g,h=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=h.prototype.setRatio},i=e._gsDefine.globals,j={},k=h.prototype=new a("css");k.constructor=h,h.version="1.20.5",h.API=2,h.defaultTransformPerspective=0,h.defaultSkewType="compensated",h.defaultSmoothOrigin=!0,k="px",h.suffixMap={top:k,right:k,bottom:k,left:k,width:k,height:k,fontSize:k,padding:k,margin:k,perspective:k,lineHeight:""};var l,m,n,o,p,q,r,s,t=/(?:\-|\.|\b)(\d|\.|e\-)+/g,u=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,y=/opacity *= *([^)]*)/i,z=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,B=/^(rgb|hsl)/,C=/([A-Z])/g,D=/-([a-z])/gi,E=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,F=function(a,b){return b.toUpperCase()},G=/(?:Left|Right|Width)/i,H=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,J=/,(?=[^\)]*(?:\(|$))/gi,K=/[\s,\(]/i,L=Math.PI/180,M=180/Math.PI,N={},O={style:{}},P=e.document||{createElement:function(){return O}},Q=function(a,b){return P.createElementNS?P.createElementNS(b||"http://www.w3.org/1999/xhtml",a):P.createElement(a)},R=Q("div"),S=Q("img"),T=h._internals={_specialProps:j},U=(e.navigator||{}).userAgent||"",V=function(){var a=U.indexOf("Android"),b=Q("a");return n=U.indexOf("Safari")!==-1&&U.indexOf("Chrome")===-1&&(a===-1||parseFloat(U.substr(a+8,2))>3),p=n&&parseFloat(U.substr(U.indexOf("Version/")+8,2))<6,o=U.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(U)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(U))&&(q=parseFloat(RegExp.$1)),!!b&&(b.style.cssText="top:1px;opacity:.55;",/^0.55/.test(b.style.opacity))}(),W=function(a){return y.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},X=function(a){e.console&&console.log(a)},Y="",Z="",$=function(a,b){b=b||R;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(Z=3===d?"ms":c[d],Y="-"+Z.toLowerCase()+"-",Z+a):null},_=("undefined"!=typeof window?window:P.defaultView||{getComputedStyle:function(){}}).getComputedStyle,aa=h.getStyle=function(a,b,c,d,e){var f;return V||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||_(a))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(C,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):W(a)},ba=T.convertToPixels=function(a,c,d,e,f){if("px"===e||!e&&"lineHeight"!==c)return d;if("auto"===e||!d)return 0;var g,i,j,k=G.test(c),l=a,m=R.style,n=d<0,o=1===d;if(n&&(d=-d),o&&(d*=100),"lineHeight"!==c||e)if("%"===e&&c.indexOf("border")!==-1)g=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+aa(a,"position")+";line-height:0;","%"!==e&&l.appendChild&&"v"!==e.charAt(0)&&"rem"!==e)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||P.body,aa(l,"display").indexOf("flex")!==-1&&(m.position="absolute"),i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(R),g=parseFloat(R[k?"offsetWidth":"offsetHeight"]),l.removeChild(R),k&&"%"===e&&h.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=g/d*100),0!==g||f||(g=ba(a,c,d,e,!0))}else i=_(a).lineHeight,a.style.lineHeight=d,g=parseFloat(_(a).lineHeight),a.style.lineHeight=i;return o&&(g/=100),n?-g:g},ca=T.calculateOffset=function(a,b,c){if("absolute"!==aa(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=aa(a,"margin"+d,c);return a["offset"+d]-(ba(a,b,parseFloat(e),e.replace(x,""))||0)},da=function(a,b){var c,d,e,f={};if(b=b||_(a,null))if(c=b.length)for(;--c>-1;)e=b[c],e.indexOf("-transform")!==-1&&Ea!==e||(f[e.replace(D,F)]=b.getPropertyValue(e));else for(c in b)c.indexOf("Transform")!==-1&&Da!==c||(f[c]=b[c]);else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===f[c]&&(f[c.replace(D,F)]=b[c]);return V||(f.opacity=W(a)),d=Sa(a,b,!1),f.rotation=d.rotation,f.skewX=d.skewX,f.scaleX=d.scaleX,f.scaleY=d.scaleY,f.x=d.x,f.y=d.y,Ga&&(f.z=d.z,f.rotationX=d.rotationX,f.rotationY=d.rotationY,f.scaleZ=d.scaleZ),f.filters&&delete f.filters,f},ea=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&g.indexOf("Origin")===-1&&("number"!=typeof f&&"string"!=typeof f||(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(w,"")?f:0:ca(a,g),void 0!==j[g]&&(h=new ta(j,g,j[g],h))));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},fa={width:["Left","Right"],height:["Top","Bottom"]},ga=["marginLeft","marginRight","marginTop","marginBottom"],ha=function(a,b,c){if("svg"===(a.nodeName+"").toLowerCase())return(c||_(a))[b]||0;if(a.getCTM&&Pa(a))return a.getBBox()[b]||0;var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=fa[b],f=e.length;for(c=c||_(a,null);--f>-1;)d-=parseFloat(aa(a,"padding"+e[f],c,!0))||0,d-=parseFloat(aa(a,"border"+e[f]+"Width",c,!0))||0;return d},ia=function(a,b){if("contain"===a||"auto"===a||"auto auto"===a)return a+" ";null!=a&&""!==a||(a="0 0");var c,d=a.split(" "),e=a.indexOf("left")!==-1?"0%":a.indexOf("right")!==-1?"100%":d[0],f=a.indexOf("top")!==-1?"0%":a.indexOf("bottom")!==-1?"100%":d[1];if(d.length>3&&!b){for(d=a.split(", ").join(",").split(","),a=[],c=0;c<d.length;c++)a.push(ia(d[c]));return a.join(",")}return null==f?f="center"===e?"50%":"0":"center"===f&&(f="50%"),("center"===e||isNaN(parseFloat(e))&&(e+"").indexOf("=")===-1)&&(e="50%"),a=e+" "+f+(d.length>2?" "+d[2]:""),b&&(b.oxp=e.indexOf("%")!==-1,b.oyp=f.indexOf("%")!==-1,b.oxr="="===e.charAt(1),b.oyr="="===f.charAt(1),b.ox=parseFloat(e.replace(w,"")),b.oy=parseFloat(f.replace(w,"")),b.v=a),b||a},ja=function(a,b){return"function"==typeof a&&(a=a(s,r)),"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)||0},ka=function(a,b){return"function"==typeof a&&(a=a(s,r)),null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)||0},la=function(a,b,c,d){var e,f,g,h,i,j=1e-6;return"function"==typeof a&&(a=a(s,r)),null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),i="="===a.charAt(1),g=(i?parseInt(a.charAt(0)+"1",10)*parseFloat(f[0].substr(2)):parseFloat(f[0]))*(a.indexOf("rad")===-1?1:M)-(i?0:b),f.length&&(d&&(d[c]=b+g),a.indexOf("short")!==-1&&(g%=e,g!==g%(e/2)&&(g=g<0?g+e:g-e)),a.indexOf("_cw")!==-1&&g<0?g=(g+9999999999*e)%e-(g/e|0)*e:a.indexOf("ccw")!==-1&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),h<j&&h>-j&&(h=0),h},ma={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},na=function(a,b,c){return a=a<0?a+1:a>1?a-1:a,255*(6*a<1?b+(c-b)*a*6:a<.5?c:3*a<2?b+(c-b)*(2/3-a)*6:b)+.5|0},oa=h.parseColor=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(a)if("number"==typeof a)c=[a>>16,a>>8&255,255&a];else{if(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),ma[a])c=ma[a];else if("#"===a.charAt(0))4===a.length&&(d=a.charAt(1),e=a.charAt(2),f=a.charAt(3),a="#"+d+d+e+e+f+f),a=parseInt(a.substr(1),16),c=[a>>16,a>>8&255,255&a];else if("hsl"===a.substr(0,3))if(c=m=a.match(t),b){if(a.indexOf("=")!==-1)return a.match(u)}else g=Number(c[0])%360/360,h=Number(c[1])/100,i=Number(c[2])/100,e=i<=.5?i*(h+1):i+h-i*h,d=2*i-e,c.length>3&&(c[3]=Number(c[3])),c[0]=na(g+1/3,d,e),c[1]=na(g,d,e),c[2]=na(g-1/3,d,e);else c=a.match(t)||ma.transparent;c[0]=Number(c[0]),c[1]=Number(c[1]),c[2]=Number(c[2]),c.length>3&&(c[3]=Number(c[3]))}else c=ma.black;return b&&!m&&(d=c[0]/255,e=c[1]/255,f=c[2]/255,j=Math.max(d,e,f),k=Math.min(d,e,f),i=(j+k)/2,j===k?g=h=0:(l=j-k,h=i>.5?l/(2-j-k):l/(j+k),g=j===d?(e-f)/l+(e<f?6:0):j===e?(f-d)/l+2:(d-e)/l+4,g*=60),c[0]=g+.5|0,c[1]=100*h+.5|0,c[2]=100*i+.5|0),c},pa=function(a,b){var c,d,e,f=a.match(qa)||[],g=0,h="";if(!f.length)return a;for(c=0;c<f.length;c++)d=f[c],e=a.substr(g,a.indexOf(d,g)-g),g+=e.length+d.length,d=oa(d,b),3===d.length&&d.push(1),h+=e+(b?"hsla("+d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:"rgba("+d.join(","))+")";return h+a.substr(g)},qa="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(k in ma)qa+="|"+k+"\\b";qa=new RegExp(qa+")","gi"),h.colorStringFilter=function(a){var b,c=a[0]+" "+a[1];qa.test(c)&&(b=c.indexOf("hsl(")!==-1||c.indexOf("hsla(")!==-1,a[0]=pa(a[0],b),a[1]=pa(a[1],b)),qa.lastIndex=0},b.defaultStringFilter||(b.defaultStringFilter=h.colorStringFilter);var ra=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(qa)||[""])[0]:"",g=a.split(f).join("").match(v)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=a.indexOf(" ")!==-1?" ":",",k=g.length,l=k>0?g[0].replace(t,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&J.test(a)){for(o=a.replace(J,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(qa)||[f])[0],m=a.split(b).join("").match(v)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(a.indexOf("inset")!==-1?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&J.test(a)){for(f=a.replace(J,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(v)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},sa=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;i<4;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},ta=(T._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f,g=this.data,h=g.proxy,i=g.firstMPT,j=1e-6;i;)b=h[i.v],i.r?b=i.r(b):b<j&&b>-j&&(b=0),i.t[i.p]=b,i=i._next;if(g.autoRotate&&(g.autoRotate.rotation=g.mod?g.mod.call(this._tween,h.rotation,this.t,this._tween):h.rotation),1===a||0===a)for(i=g.firstMPT,f=1===a?"e":"b";i;){if(c=i.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c[f]=e}}else c[f]=c.s+c.xs0;i=i._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),ua=(T._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=N;for(c._transform=null,N=b,d=k=c.parse(a,b,d,e),N=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new ta(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new ta(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},T.CSSPropTween=function(a,b,d,e,f,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof ua||g.push(this.n),this.r=j?"function"==typeof j?j:Math.round:j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,f&&(this._next=f,f._prev=this)}),va=function(a,b,c,d,e,f){var g=new ua(a,b,c,d-c,e,-1,f);return g.b=c,g.e=g.xs0=d,g},wa=h.parseComplex=function(a,b,c,d,e,f,g,i,j,k){c=c||f||"","function"==typeof d&&(d=d(s,r)),g=new ua(a,b,0,0,g,k?2:1,null,!1,i,c,d),d+="",e&&qa.test(d+c)&&(d=[c,d],h.colorStringFilter(d),c=d[0],d=d[1]);var m,n,o,p,q,v,w,x,y,z,A,B,C,D=c.split(", ").join(",").split(" "),E=d.split(", ").join(",").split(" "),F=D.length,G=l!==!1;for(d.indexOf(",")===-1&&c.indexOf(",")===-1||((d+c).indexOf("rgb")!==-1||(d+c).indexOf("hsl")!==-1?(D=D.join(" ").replace(J,", ").split(" "),E=E.join(" ").replace(J,", ").split(" ")):(D=D.join(" ").split(",").join(", ").split(" "),E=E.join(" ").split(",").join(", ").split(" ")),F=D.length),F!==E.length&&(D=(f||"").split(" "),F=D.length),g.plugin=j,g.setRatio=k,qa.lastIndex=0,m=0;m<F;m++)if(p=D[m],q=E[m]+"",x=parseFloat(p),x||0===x)g.appendXtra("",x,ja(q,x),q.replace(u,""),!(!G||q.indexOf("px")===-1)&&Math.round,!0);else if(e&&qa.test(p))B=q.indexOf(")")+1,B=")"+(B?q.substr(B):""),C=q.indexOf("hsl")!==-1&&V,z=q,p=oa(p,C),q=oa(q,C),y=p.length+q.length>6,y&&!V&&0===q[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(E[m]).join("transparent")):(V||(y=!1),C?g.appendXtra(z.substr(0,z.indexOf("hsl"))+(y?"hsla(":"hsl("),p[0],ja(q[0],p[0]),",",!1,!0).appendXtra("",p[1],ja(q[1],p[1]),"%,",!1).appendXtra("",p[2],ja(q[2],p[2]),y?"%,":"%"+B,!1):g.appendXtra(z.substr(0,z.indexOf("rgb"))+(y?"rgba(":"rgb("),p[0],q[0]-p[0],",",Math.round,!0).appendXtra("",p[1],q[1]-p[1],",",Math.round).appendXtra("",p[2],q[2]-p[2],y?",":B,Math.round),y&&(p=p.length<4?1:p[3],g.appendXtra("",p,(q.length<4?1:q[3])-p,B,!1))),qa.lastIndex=0;else if(v=p.match(t)){if(w=q.match(u),!w||w.length!==v.length)return g;for(o=0,n=0;n<v.length;n++)A=v[n],z=p.indexOf(A,o),g.appendXtra(p.substr(o,z-o),Number(A),ja(w[n],A),"",!(!G||"px"!==p.substr(z+A.length,2))&&Math.round,0===n),o=z+A.length;g["xs"+g.l]+=p.substr(o)}else g["xs"+g.l]+=g.l||g["xs"+g.l]?" "+q:q;if(d.indexOf("=")!==-1&&g.data){for(B=g.xs0+g.data.s,m=1;m<g.l;m++)B+=g["xs"+m]+g.data["xn"+m];g.e=B+g["xs"+m]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},xa=9;for(k=ua.prototype,k.l=k.pr=0;--xa>0;)k["xn"+xa]=0,k["xs"+xa]="";k.xs0="",k._next=k._prev=k.xfirst=k.data=k.plugin=k.setRatio=k.rxp=null,k.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&(h||g["xs"+h])?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new ua(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var ya=function(a,b){b=b||{},this.p=b.prefix?$(a)||a:a,j[a]=j[this.p]=this,this.format=b.formatter||ra(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},za=T._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new ya(f[d],b)},Aa=T._registerPluginProp=function(a){if(!j[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";za(a,{parser:function(a,c,d,e,f,g,h){var k=i.com.greensock.plugins[b];return k?(k._cssRegister(),j[d].parse(a,c,d,e,f,g,h)):(X("Error: "+b+" js file not loaded."),f)}})}};k=ya.prototype,k.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(J.test(c)||J.test(b)?(h=b.replace(J,"|").split("|"),i=c.replace(J,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;g<j;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(l===-1?h[g]=h[g].split(m).join(""):k===-1&&(h[g]+=" "+m)));b=h.join(", "),c=i.join(", ")}return wa(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},k.parse=function(a,b,c,d,e,g,h){return this.parseComplex(a.style,this.format(aa(a,this.p,f,!1,this.dflt)),this.format(b),e,g)},h.registerSpecialProp=function(a,b,c){za(a,{parser:function(a,d,e,f,g,h,i){var j=new ua(a,e,0,0,g,2,e,!1,c);return j.plugin=h,j.setRatio=b(a,d,f._tween,e),j},priority:c})},h.useSVGTransformAttr=!0;var Ba,Ca="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Da=$("transform"),Ea=Y+"transform",Fa=$("transformOrigin"),Ga=null!==$("perspective"),Ha=T.Transform=function(){this.perspective=parseFloat(h.defaultTransformPerspective)||0,this.force3D=!(h.defaultForce3D===!1||!Ga)&&(h.defaultForce3D||"auto")},Ia=e.SVGElement,Ja=function(a,b,c){var d,e=P.createElementNS("http://www.w3.org/2000/svg",a),f=/([a-z])([A-Z])/g;for(d in c)e.setAttributeNS(null,d.replace(f,"$1-$2").toLowerCase(),c[d]);return b.appendChild(e),e},Ka=P.documentElement||{},La=function(){var a,b,c,d=q||/Android/i.test(U)&&!e.chrome;return P.createElementNS&&!d&&(a=Ja("svg",Ka),b=Ja("rect",a,{width:100,height:50,x:100}),c=b.getBoundingClientRect().width,b.style[Fa]="50% 50%",b.style[Da]="scaleX(0.5)",d=c===b.getBoundingClientRect().width&&!(o&&Ga),Ka.removeChild(a)),d}(),Ma=function(a,b,c,d,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a._gsTransform,w=Ra(a,!0);v&&(t=v.xOrigin,u=v.yOrigin),(!d||(g=d.split(" ")).length<2)&&(n=a.getBBox(),0===n.x&&0===n.y&&n.width+n.height===0&&(n={x:parseFloat(a.hasAttribute("x")?a.getAttribute("x"):a.hasAttribute("cx")?a.getAttribute("cx"):0)||0,y:parseFloat(a.hasAttribute("y")?a.getAttribute("y"):a.hasAttribute("cy")?a.getAttribute("cy"):0)||0,width:0,height:0}),b=ia(b).split(" "),g=[(b[0].indexOf("%")!==-1?parseFloat(b[0])/100*n.width:parseFloat(b[0]))+n.x,(b[1].indexOf("%")!==-1?parseFloat(b[1])/100*n.height:parseFloat(b[1]))+n.y]),c.xOrigin=k=parseFloat(g[0]),c.yOrigin=l=parseFloat(g[1]),d&&w!==Qa&&(m=w[0],n=w[1],o=w[2],p=w[3],q=w[4],r=w[5],s=m*p-n*o,s&&(i=k*(p/s)+l*(-o/s)+(o*r-p*q)/s,j=k*(-n/s)+l*(m/s)-(m*r-n*q)/s,k=c.xOrigin=g[0]=i,l=c.yOrigin=g[1]=j)),v&&(f&&(c.xOffset=v.xOffset,c.yOffset=v.yOffset,v=c),e||e!==!1&&h.defaultSmoothOrigin!==!1?(i=k-t,j=l-u,v.xOffset+=i*w[0]+j*w[2]-i,v.yOffset+=i*w[1]+j*w[3]-j):v.xOffset=v.yOffset=0),f||a.setAttribute("data-svg-origin",g.join(" "))},Na=function(a){var b,c=Q("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),d=this.parentNode,e=this.nextSibling,f=this.style.cssText;if(Ka.appendChild(c),c.appendChild(this),this.style.display="block",a)try{b=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Na}catch(a){}else this._originalGetBBox&&(b=this._originalGetBBox());return e?d.insertBefore(this,e):d.appendChild(this),Ka.removeChild(c),this.style.cssText=f,b},Oa=function(a){try{return a.getBBox()}catch(b){return Na.call(a,!0)}},Pa=function(a){return!(!Ia||!a.getCTM||a.parentNode&&!a.ownerSVGElement||!Oa(a))},Qa=[1,0,0,1,0,0],Ra=function(a,b){var c,d,e,f,g,h,i=a._gsTransform||new Ha,j=1e5,k=a.style;if(Da?d=aa(a,Ea,null,!0):a.currentStyle&&(d=a.currentStyle.filter.match(H),d=d&&4===d.length?[d[0].substr(4),Number(d[2].substr(4)),Number(d[1].substr(4)),d[3].substr(4),i.x||0,i.y||0].join(","):""),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,!Da||!(h=!_(a)||"none"===_(a).display)&&a.parentNode||(h&&(f=k.display,k.display="block"),a.parentNode||(g=1,Ka.appendChild(a)),d=aa(a,Ea,null,!0),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,f?k.display=f:h&&Wa(k,"display"),g&&Ka.removeChild(a)),(i.svg||a.getCTM&&Pa(a))&&(c&&(k[Da]+"").indexOf("matrix")!==-1&&(d=k[Da],c=0),e=a.getAttribute("transform"),c&&e&&(e=a.transform.baseVal.consolidate().matrix,d="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")",c=0)),c)return Qa;for(e=(d||"").match(t)||[],xa=e.length;--xa>-1;)f=Number(e[xa]),e[xa]=(g=f-(f|=0))?(g*j+(g<0?-.5:.5)|0)/j+f:f;return b&&e.length>6?[e[0],e[1],e[4],e[5],e[12],e[13]]:e},Sa=T.getTransform=function(a,c,d,e){if(a._gsTransform&&d&&!e)return a._gsTransform;var f,g,i,j,k,l,m=d?a._gsTransform||new Ha:new Ha,n=m.scaleX<0,o=2e-5,p=1e5,q=Ga?parseFloat(aa(a,Fa,c,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,r=parseFloat(h.defaultTransformPerspective)||0;if(m.svg=!(!a.getCTM||!Pa(a)),m.svg&&(Ma(a,aa(a,Fa,c,!1,"50% 50%")+"",m,a.getAttribute("data-svg-origin")),Ba=h.useSVGTransformAttr||La),f=Ra(a),f!==Qa){if(16===f.length){var s,t,u,v,w,x=f[0],y=f[1],z=f[2],A=f[3],B=f[4],C=f[5],D=f[6],E=f[7],F=f[8],G=f[9],H=f[10],I=f[12],J=f[13],K=f[14],L=f[11],N=Math.atan2(D,H);m.zOrigin&&(K=-m.zOrigin,I=F*K-f[12],J=G*K-f[13],K=H*K+m.zOrigin-f[14]),m.rotationX=N*M,N&&(v=Math.cos(-N),w=Math.sin(-N),s=B*v+F*w,t=C*v+G*w,u=D*v+H*w,F=B*-w+F*v,G=C*-w+G*v,H=D*-w+H*v,L=E*-w+L*v,B=s,C=t,D=u),N=Math.atan2(-z,H),m.rotationY=N*M,N&&(v=Math.cos(-N),w=Math.sin(-N),s=x*v-F*w,t=y*v-G*w,u=z*v-H*w,G=y*w+G*v,H=z*w+H*v,L=A*w+L*v,x=s,y=t,z=u),N=Math.atan2(y,x),m.rotation=N*M,N&&(v=Math.cos(N),w=Math.sin(N),s=x*v+y*w,t=B*v+C*w,u=F*v+G*w,y=y*v-x*w,C=C*v-B*w,G=G*v-F*w,x=s,B=t,F=u),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY=180-m.rotationY),N=Math.atan2(B,C),m.scaleX=(Math.sqrt(x*x+y*y+z*z)*p+.5|0)/p,m.scaleY=(Math.sqrt(C*C+D*D)*p+.5|0)/p,m.scaleZ=(Math.sqrt(F*F+G*G+H*H)*p+.5|0)/p,x/=m.scaleX,B/=m.scaleY,y/=m.scaleX,C/=m.scaleY,Math.abs(N)>o?(m.skewX=N*M,B=0,"simple"!==m.skewType&&(m.scaleY*=1/Math.cos(N))):m.skewX=0,m.perspective=L?1/(L<0?-L:L):0,m.x=I,m.y=J,m.z=K,m.svg&&(m.x-=m.xOrigin-(m.xOrigin*x-m.yOrigin*B),m.y-=m.yOrigin-(m.yOrigin*y-m.xOrigin*C))}else if(!Ga||e||!f.length||m.x!==f[4]||m.y!==f[5]||!m.rotationX&&!m.rotationY){var O=f.length>=6,P=O?f[0]:1,Q=f[1]||0,R=f[2]||0,S=O?f[3]:1;m.x=f[4]||0,m.y=f[5]||0,i=Math.sqrt(P*P+Q*Q),j=Math.sqrt(S*S+R*R),k=P||Q?Math.atan2(Q,P)*M:m.rotation||0,l=R||S?Math.atan2(R,S)*M+k:m.skewX||0,m.scaleX=i,m.scaleY=j,m.rotation=k,m.skewX=l,Ga&&(m.rotationX=m.rotationY=m.z=0,m.perspective=r,m.scaleZ=1),m.svg&&(m.x-=m.xOrigin-(m.xOrigin*P+m.yOrigin*R),m.y-=m.yOrigin-(m.xOrigin*Q+m.yOrigin*S))}Math.abs(m.skewX)>90&&Math.abs(m.skewX)<270&&(n?(m.scaleX*=-1,m.skewX+=m.rotation<=0?180:-180,m.rotation+=m.rotation<=0?180:-180):(m.scaleY*=-1,m.skewX+=m.skewX<=0?180:-180)),m.zOrigin=q;for(g in m)m[g]<o&&m[g]>-o&&(m[g]=0)}return d&&(a._gsTransform=m,m.svg&&(Ba&&a.style[Da]?b.delayedCall(.001,function(){Wa(a.style,Da)}):!Ba&&a.getAttribute("transform")&&b.delayedCall(.001,function(){a.removeAttribute("transform")}))),m},Ta=function(a){var b,c,d=this.data,e=-d.rotation*L,f=e+d.skewX*L,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,o,p=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,t="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,u=d.x+p*d.xPercent/100,v=d.y+r*d.yPercent/100;if(null!=d.ox&&(n=(d.oxp?p*d.ox*.01:d.ox)-p/2,o=(d.oyp?r*d.oy*.01:d.oy)-r/2,u+=n-(n*h+o*i),v+=o-(n*j+o*k)),s?(n=p/2,o=r/2,t+=", Dx="+(n-(n*h+o*i)+u)+", Dy="+(o-(n*j+o*k)+v)+")"):t+=", sizingMethod='auto expand')",b.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?l.filter=b.replace(I,t):l.filter=t+" "+b,0!==a&&1!==a||1===h&&0===i&&0===j&&1===k&&(s&&t.indexOf("Dx=0, Dy=0")===-1||y.test(b)&&100!==parseFloat(RegExp.$1)||b.indexOf(b.indexOf("Alpha"))===-1&&l.removeAttribute("filter")),!s){var w,z,A,B=q<8?1:-1;for(n=d.ieOffsetX||0,o=d.ieOffsetY||0,d.ieOffsetX=Math.round((p-((h<0?-h:h)*p+(i<0?-i:i)*r))/2+u),d.ieOffsetY=Math.round((r-((k<0?-k:k)*r+(j<0?-j:j)*p))/2+v),xa=0;xa<4;xa++)z=ga[xa],w=m[z],c=w.indexOf("px")!==-1?parseFloat(w):ba(this.t,z,parseFloat(w),w.replace(x,""))||0,A=c!==d[z]?xa<2?-d.ieOffsetX:-d.ieOffsetY:xa<2?n-d.ieOffsetX:o-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===xa||2===xa?1:B)))+"px"}}},Ua=T.set3DTransformRatio=T.setTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z=this.data,A=this.t.style,B=z.rotation,C=z.rotationX,D=z.rotationY,E=z.scaleX,F=z.scaleY,G=z.scaleZ,H=z.x,I=z.y,J=z.z,K=z.svg,M=z.perspective,N=z.force3D,O=z.skewY,P=z.skewX;if(O&&(P+=O,B+=O),((1===a||0===a)&&"auto"===N&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!N)&&!J&&!M&&!D&&!C&&1===G||Ba&&K||!Ga)return void(B||P||K?(B*=L,x=P*L,y=1e5,c=Math.cos(B)*E,f=Math.sin(B)*E,d=Math.sin(B-x)*-F,g=Math.cos(B-x)*F,x&&"simple"===z.skewType&&(b=Math.tan(x-O*L),b=Math.sqrt(1+b*b),d*=b,g*=b,O&&(b=Math.tan(O*L),b=Math.sqrt(1+b*b),c*=b,f*=b)),K&&(H+=z.xOrigin-(z.xOrigin*c+z.yOrigin*d)+z.xOffset,I+=z.yOrigin-(z.xOrigin*f+z.yOrigin*g)+z.yOffset,Ba&&(z.xPercent||z.yPercent)&&(q=this.t.getBBox(),H+=.01*z.xPercent*q.width,I+=.01*z.yPercent*q.height),q=1e-6,H<q&&H>-q&&(H=0),I<q&&I>-q&&(I=0)),u=(c*y|0)/y+","+(f*y|0)/y+","+(d*y|0)/y+","+(g*y|0)/y+","+H+","+I+")",K&&Ba?this.t.setAttribute("transform","matrix("+u):A[Da]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+u):A[Da]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+E+",0,0,"+F+","+H+","+I+")");if(o&&(q=1e-4,E<q&&E>-q&&(E=G=2e-5),F<q&&F>-q&&(F=G=2e-5),!M||z.z||z.rotationX||z.rotationY||(M=0)),B||P)B*=L,r=c=Math.cos(B),s=f=Math.sin(B),P&&(B-=P*L,r=Math.cos(B),s=Math.sin(B),"simple"===z.skewType&&(b=Math.tan((P-O)*L),b=Math.sqrt(1+b*b),r*=b,s*=b,z.skewY&&(b=Math.tan(O*L),b=Math.sqrt(1+b*b),c*=b,f*=b))),d=-s,g=r;else{if(!(D||C||1!==G||M||K))return void(A[Da]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) translate3d(":"translate3d(")+H+"px,"+I+"px,"+J+"px)"+(1!==E||1!==F?" scale("+E+","+F+")":""));c=g=1,d=f=0}k=1,e=h=i=j=l=m=0,n=M?-1/M:0,p=z.zOrigin,q=1e-6,v=",",w="0",B=D*L,B&&(r=Math.cos(B),s=Math.sin(B),i=-s,l=n*-s,e=c*s,h=f*s,k=r,n*=r,c*=r,f*=r),B=C*L,B&&(r=Math.cos(B),s=Math.sin(B),b=d*r+e*s,t=g*r+h*s,j=k*s,m=n*s,e=d*-s+e*r,h=g*-s+h*r,k*=r,n*=r,d=b,g=t),1!==G&&(e*=G,h*=G,k*=G,n*=G),1!==F&&(d*=F,g*=F,j*=F,m*=F),1!==E&&(c*=E,f*=E,i*=E,l*=E),(p||K)&&(p&&(H+=e*-p,I+=h*-p,J+=k*-p+p),K&&(H+=z.xOrigin-(z.xOrigin*c+z.yOrigin*d)+z.xOffset,I+=z.yOrigin-(z.xOrigin*f+z.yOrigin*g)+z.yOffset),H<q&&H>-q&&(H=w),I<q&&I>-q&&(I=w),J<q&&J>-q&&(J=0)),u=z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix3d(":"matrix3d(",u+=(c<q&&c>-q?w:c)+v+(f<q&&f>-q?w:f)+v+(i<q&&i>-q?w:i),u+=v+(l<q&&l>-q?w:l)+v+(d<q&&d>-q?w:d)+v+(g<q&&g>-q?w:g),C||D||1!==G?(u+=v+(j<q&&j>-q?w:j)+v+(m<q&&m>-q?w:m)+v+(e<q&&e>-q?w:e),u+=v+(h<q&&h>-q?w:h)+v+(k<q&&k>-q?w:k)+v+(n<q&&n>-q?w:n)+v):u+=",0,0,0,0,1,0,",u+=H+v+I+v+J+v+(M?1+-J/M:1)+")",A[Da]=u};k=Ha.prototype,k.x=k.y=k.z=k.skewX=k.skewY=k.rotation=k.rotationX=k.rotationY=k.zOrigin=k.xPercent=k.yPercent=k.xOffset=k.yOffset=0,k.scaleX=k.scaleY=k.scaleZ=1,za("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(a,b,c,d,e,g,i){if(d._lastParsedTransform===i)return e;d._lastParsedTransform=i;var j,k=i.scale&&"function"==typeof i.scale?i.scale:0;"function"==typeof i[c]&&(j=i[c],i[c]=b),k&&(i.scale=k(s,a));var l,m,n,o,p,q,t,u,v,w=a._gsTransform,x=a.style,y=1e-6,z=Ca.length,A=i,B={},C="transformOrigin",D=Sa(a,f,!0,A.parseTransform),E=A.transform&&("function"==typeof A.transform?A.transform(s,r):A.transform);if(D.skewType=A.skewType||D.skewType||h.defaultSkewType,d._transform=D,E&&"string"==typeof E&&Da)m=R.style,m[Da]=E,m.display="block",m.position="absolute",E.indexOf("%")!==-1&&(m.width=aa(a,"width"),m.height=aa(a,"height")),P.body.appendChild(R),l=Sa(R,null,!1),"simple"===D.skewType&&(l.scaleY*=Math.cos(l.skewX*L)),D.svg&&(q=D.xOrigin,t=D.yOrigin,l.x-=D.xOffset,l.y-=D.yOffset,(A.transformOrigin||A.svgOrigin)&&(E={},Ma(a,ia(A.transformOrigin),E,A.svgOrigin,A.smoothOrigin,!0),q=E.xOrigin,t=E.yOrigin,l.x-=E.xOffset-D.xOffset,l.y-=E.yOffset-D.yOffset),(q||t)&&(u=Ra(R,!0),l.x-=q-(q*u[0]+t*u[2]),l.y-=t-(q*u[1]+t*u[3]))),P.body.removeChild(R),l.perspective||(l.perspective=D.perspective),null!=A.xPercent&&(l.xPercent=ka(A.xPercent,D.xPercent)),null!=A.yPercent&&(l.yPercent=ka(A.yPercent,D.yPercent));else if("object"==typeof A){if(l={scaleX:ka(null!=A.scaleX?A.scaleX:A.scale,D.scaleX),scaleY:ka(null!=A.scaleY?A.scaleY:A.scale,D.scaleY),scaleZ:ka(A.scaleZ,D.scaleZ),x:ka(A.x,D.x),y:ka(A.y,D.y),z:ka(A.z,D.z),xPercent:ka(A.xPercent,D.xPercent),yPercent:ka(A.yPercent,D.yPercent),perspective:ka(A.transformPerspective,D.perspective)},p=A.directionalRotation,null!=p)if("object"==typeof p)for(m in p)A[m]=p[m];else A.rotation=p;
"string"==typeof A.x&&A.x.indexOf("%")!==-1&&(l.x=0,l.xPercent=ka(A.x,D.xPercent)),"string"==typeof A.y&&A.y.indexOf("%")!==-1&&(l.y=0,l.yPercent=ka(A.y,D.yPercent)),l.rotation=la("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":"rotationZ"in A?A.rotationZ:D.rotation,D.rotation,"rotation",B),Ga&&(l.rotationX=la("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":D.rotationX||0,D.rotationX,"rotationX",B),l.rotationY=la("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":D.rotationY||0,D.rotationY,"rotationY",B)),l.skewX=la(A.skewX,D.skewX),l.skewY=la(A.skewY,D.skewY)}for(Ga&&null!=A.force3D&&(D.force3D=A.force3D,o=!0),n=D.force3D||D.z||D.rotationX||D.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,n||null==A.scale||(l.scaleZ=1);--z>-1;)v=Ca[z],E=l[v]-D[v],(E>y||E<-y||null!=A[v]||null!=N[v])&&(o=!0,e=new ua(D,v,D[v],E,e),v in B&&(e.e=B[v]),e.xs0=0,e.plugin=g,d._overwriteProps.push(e.n));return E=A.transformOrigin,D.svg&&(E||A.svgOrigin)&&(q=D.xOffset,t=D.yOffset,Ma(a,ia(E),l,A.svgOrigin,A.smoothOrigin),e=va(D,"xOrigin",(w?D:l).xOrigin,l.xOrigin,e,C),e=va(D,"yOrigin",(w?D:l).yOrigin,l.yOrigin,e,C),q===D.xOffset&&t===D.yOffset||(e=va(D,"xOffset",w?q:D.xOffset,D.xOffset,e,C),e=va(D,"yOffset",w?t:D.yOffset,D.yOffset,e,C)),E="0px 0px"),(E||Ga&&n&&D.zOrigin)&&(Da?(o=!0,v=Fa,E=(E||aa(a,v,f,!1,"50% 50%"))+"",e=new ua(x,v,0,0,e,-1,C),e.b=x[v],e.plugin=g,Ga?(m=D.zOrigin,E=E.split(" "),D.zOrigin=(E.length>2&&(0===m||"0px"!==E[2])?parseFloat(E[2]):m)||0,e.xs0=e.e=E[0]+" "+(E[1]||"50%")+" 0px",e=new ua(D,"zOrigin",0,0,e,-1,e.n),e.b=m,e.xs0=e.e=D.zOrigin):e.xs0=e.e=E):ia(E+"",D)),o&&(d._transformType=D.svg&&Ba||!n&&3!==this._transformType?2:3),j&&(i[c]=j),k&&(i.scale=k),e},prefix:!0}),za("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),za("borderRadius",{defaultValue:"0px",parser:function(a,b,c,e,g,h){b=this.format(b);var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],z=a.style;for(q=parseFloat(a.offsetWidth),r=parseFloat(a.offsetHeight),i=b.split(" "),j=0;j<y.length;j++)this.p.indexOf("border")&&(y[j]=$(y[j])),m=l=aa(a,y[j],f,!1,"0px"),m.indexOf(" ")!==-1&&(l=m.split(" "),m=l[0],l=l[1]),n=k=i[j],o=parseFloat(m),t=m.substr((o+"").length),u="="===n.charAt(1),u?(p=parseInt(n.charAt(0)+"1",10),n=n.substr(2),p*=parseFloat(n),s=n.substr((p+"").length-(p<0?1:0))||""):(p=parseFloat(n),s=n.substr((p+"").length)),""===s&&(s=d[c]||t),s!==t&&(v=ba(a,"borderLeft",o,t),w=ba(a,"borderTop",o,t),"%"===s?(m=v/q*100+"%",l=w/r*100+"%"):"em"===s?(x=ba(a,"borderLeft",1,"em"),m=v/x+"em",l=w/x+"em"):(m=v+"px",l=w+"px"),u&&(n=parseFloat(m)+p+s,k=parseFloat(l)+p+s)),g=wa(z,y[j],m+" "+l,n+" "+k,!1,"0px",g);return g},prefix:!0,formatter:ra("0px 0px 0px 0px",!1,!0)}),za("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(a,b,c,d,e,g){return wa(a.style,c,this.format(aa(a,c,f,!1,"0px 0px")),this.format(b),!1,"0px",e)},prefix:!0,formatter:ra("0px 0px",!1,!0)}),za("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,e,g){var h,i,j,k,l,m,n="background-position",o=f||_(a,null),p=this.format((o?q?o.getPropertyValue(n+"-x")+" "+o.getPropertyValue(n+"-y"):o.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(p.indexOf("%")!==-1!=(r.indexOf("%")!==-1)&&r.split(",").length<2&&(m=aa(a,"backgroundImage").replace(E,""),m&&"none"!==m)){for(h=p.split(" "),i=r.split(" "),S.setAttribute("src",m),j=2;--j>-1;)p=h[j],k=p.indexOf("%")!==-1,k!==(i[j].indexOf("%")!==-1)&&(l=0===j?a.offsetWidth-S.width:a.offsetHeight-S.height,h[j]=k?parseFloat(p)/100*l+"px":parseFloat(p)/l*100+"%");p=h.join(" ")}return this.parseComplex(a.style,p,r,e,g)},formatter:ia}),za("backgroundSize",{defaultValue:"0 0",formatter:function(a){return a+="","co"===a.substr(0,2)?a:ia(a.indexOf(" ")===-1?a+" "+a:a)}}),za("perspective",{defaultValue:"0px",prefix:!0}),za("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),za("transformStyle",{prefix:!0}),za("backfaceVisibility",{prefix:!0}),za("userSelect",{prefix:!0}),za("margin",{parser:sa("marginTop,marginRight,marginBottom,marginLeft")}),za("padding",{parser:sa("paddingTop,paddingRight,paddingBottom,paddingLeft")}),za("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,e,g){var h,i,j;return q<9?(i=a.currentStyle,j=q<8?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(aa(a,this.p,f,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,e,g)}}),za("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),za("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),za("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,e,g){var h=aa(a,"borderTopWidth",f,!1,"0px"),i=this.format(b).split(" "),j=i[0].replace(x,"");return"px"!==j&&(h=parseFloat(h)/ba(a,"borderTopWidth",1,j)+j),this.parseComplex(a.style,this.format(h+" "+aa(a,"borderTopStyle",f,!1,"solid")+" "+aa(a,"borderTopColor",f,!1,"#000")),i.join(" "),e,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(qa)||["#000"])[0]}}),za("borderWidth",{parser:sa("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),za("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e,f){var g=a.style,h="cssFloat"in g?"cssFloat":"styleFloat";return new ua(g,h,0,0,e,-1,c,!1,0,g[h],b)}});var Va=function(a){var b,c=this.t,d=c.filter||aa(this.data,"filter")||"",e=this.s+this.c*a|0;100===e&&(d.indexOf("atrix(")===-1&&d.indexOf("radient(")===-1&&d.indexOf("oader(")===-1?(c.removeAttribute("filter"),b=!aa(this.data,"filter")):(c.filter=d.replace(A,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),d.indexOf("pacity")===-1?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(y,"opacity="+e))};za("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,e,g){var h=parseFloat(aa(a,"opacity",f,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===aa(a,"visibility",f)&&0!==b&&(h=0),V?e=new ua(i,"opacity",h,b-h,e):(e=new ua(i,"opacity",100*h,100*(b-h),e),e.xn1=j?1:0,i.zoom=1,e.type=2,e.b="alpha(opacity="+e.s+")",e.e="alpha(opacity="+(e.s+e.c)+")",e.data=a,e.plugin=g,e.setRatio=Va),j&&(e=new ua(i,"visibility",0,0,e,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),e.xs0="inherit",d._overwriteProps.push(e.n),d._overwriteProps.push(c)),e}});var Wa=function(a,b){b&&(a.removeProperty?("ms"!==b.substr(0,2)&&"webkit"!==b.substr(0,6)||(b="-"+b),a.removeProperty(b.replace(C,"-$1").toLowerCase())):a.removeAttribute(b))},Xa=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Wa(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};za("className",{parser:function(a,b,d,e,g,h,i){var j,k,l,m,n,o=a.getAttribute("class")||"",p=a.style.cssText;if(g=e._classNamePT=new ua(a,d,0,0,g,2),g.setRatio=Xa,g.pr=-11,c=!0,g.b=o,k=da(a,f),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("(?:\\s|^)"+b.substr(2)+"(?![\\w-])"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),a.setAttribute("class",g.e),j=ea(a,k,da(a),i,m),a.setAttribute("class",o),g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=e.parse(a,j.difs,g,h)}});var Ya=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f,g=this.t.style,h=j.transform.parse;if("all"===this.e)g.cssText="",e=!0;else for(b=this.e.split(" ").join("").split(","),d=b.length;--d>-1;)c=b[d],j[c]&&(j[c].parse===h?e=!0:c="transformOrigin"===c?Fa:j[c].p),Wa(g,c);e&&(Wa(g,Da),f=this.t._gsTransform,f&&(f.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(za("clearProps",{parser:function(a,b,d,e,f){return f=new ua(a,d,0,0,f,2),f.setRatio=Ya,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),k="bezier,throwProps,physicsProps,physics2D".split(","),xa=k.length;xa--;)Aa(k[xa]);k=h.prototype,k._firstPT=k._lastParsedTransform=k._transform=null,k._onInitTween=function(a,b,e,i){if(!a.nodeType)return!1;this._target=r=a,this._tween=e,this._vars=b,s=i,l=b.autoRound,c=!1,d=b.suffixMap||h.suffixMap,f=_(a,""),g=this._overwriteProps;var k,o,q,t,u,v,w,x,y,A=a.style;if(m&&""===A.zIndex&&(k=aa(a,"zIndex",f),"auto"!==k&&""!==k||this._addLazySet(A,"zIndex",0)),"string"==typeof b&&(t=A.cssText,k=da(a,f),A.cssText=t+";"+b,k=ea(a,k,da(a)).difs,!V&&z.test(b)&&(k.opacity=parseFloat(RegExp.$1)),b=k,A.cssText=t),b.className?this._firstPT=o=j.className.parse(a,b.className,"className",this,null,null,b):this._firstPT=o=this.parse(a,b,null),this._transformType){for(y=3===this._transformType,Da?n&&(m=!0,""===A.zIndex&&(w=aa(a,"zIndex",f),"auto"!==w&&""!==w||this._addLazySet(A,"zIndex",0)),p&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(y?"visible":"hidden"))):A.zoom=1,q=o;q&&q._next;)q=q._next;x=new ua(a,"transform",0,0,null,2),this._linkCSSP(x,null,q),x.setRatio=Da?Ua:Ta,x.data=this._transform||Sa(a,f,!0),x.tween=e,x.pr=-1,g.pop()}if(c){for(;o;){for(v=o._next,q=t;q&&q.pr>o.pr;)q=q._next;(o._prev=q?q._prev:u)?o._prev._next=o:t=o,(o._next=q)?q._prev=o:u=o,o=v}this._firstPT=t}return!0},k.parse=function(a,b,c,e){var g,h,i,k,m,n,o,p,q,t,u=a.style;for(g in b){if(n=b[g],"function"==typeof n&&(n=n(s,r)),h=j[g])c=h.parse(a,n,g,this,c,e,b);else{if("--"===g.substr(0,2)){this._tween._propLookup[g]=this._addTween.call(this._tween,a.style,"setProperty",_(a).getPropertyValue(g)+"",n+"",g,!1,g);continue}m=aa(a,g,f)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||g.indexOf("Color")!==-1||q&&B.test(n)?(q||(n=oa(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=wa(u,g,m,n,!0,"transparent",c,0,e)):q&&K.test(n)?c=wa(u,g,m,n,!0,null,c,0,e):(i=parseFloat(m),o=i||0===i?m.substr((i+"").length):"",""!==m&&"auto"!==m||("width"===g||"height"===g?(i=ha(a,g,f),o="px"):"left"===g||"top"===g?(i=ca(a,g,f),o="px"):(i="opacity"!==g?0:1,o="")),t=q&&"="===n.charAt(1),t?(k=parseInt(n.charAt(0)+"1",10),n=n.substr(2),k*=parseFloat(n),p=n.replace(x,"")):(k=parseFloat(n),p=q?n.replace(x,""):""),""===p&&(p=g in d?d[g]:o),n=k||0===k?(t?k+i:k)+p:b[g],o!==p&&(""===p&&"lineHeight"!==g||(k||0===k)&&i&&(i=ba(a,g,i,o),"%"===p?(i/=ba(a,g,100,"%")/100,b.strictUnits!==!0&&(m=i+"%")):"em"===p||"rem"===p||"vw"===p||"vh"===p?i/=ba(a,g,1,p):"px"!==p&&(k=ba(a,g,k,p),p="px"),t&&(k||0===k)&&(n=k+i+p))),t&&(k+=i),!i&&0!==i||!k&&0!==k?void 0!==u[g]&&(n||n+""!="NaN"&&null!=n)?(c=new ua(u,g,k||i||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&g.indexOf("Style")===-1?n:m):X("invalid "+g+" tween value: "+b[g]):(c=new ua(u,g,i,k-i,c,0,g,l!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p))}e&&c&&!c.plugin&&(c.plugin=e)}return c},k.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=e.r(b):b<f&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else e.type===-1?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;){if(2!==e.type)if(e.r&&e.type!==-1)if(b=e.r(e.s+e.c),e.type){if(1===e.type){for(d=e.l,c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}}else e.t[e.p]=b+e.xs0;else e.t[e.p]=e.e;else e.setRatio(a);e=e._next}},k._enableTransforms=function(a){this._transform=this._transform||Sa(this._target,f,!0),this._transformType=this._transform.svg&&Ba||!a&&3!==this._transformType?2:3};var Za=function(a){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};k._addLazySet=function(a,b,c){var d=this._firstPT=new ua(a,b,0,0,this._firstPT,2);d.e=c,d.setRatio=Za,d.data=this},k._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},k._mod=function(a){for(var b=this._firstPT;b;)"function"==typeof a[b.p]&&(b.r=a[b.p]),b=b._next},k._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}for(b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),c=this._firstPT;c;)c.plugin&&c.plugin!==d&&c.plugin._kill&&(c.plugin._kill(b),d=c.plugin),c=c._next;return a.prototype._kill.call(this,f)};var $a=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)$a(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(da(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||$a(f,b,c)};return h.cascadeTo=function(a,c,d){var e,f,g,h,i=b.to(a,c,d),j=[i],k=[],l=[],m=[],n=b._internals.reservedProps;for(a=i._targets||i.target,$a(a,k,m),i.render(c,!0,!0),$a(a,l),i.render(0,!0,!0),i._enabled(!0),e=m.length;--e>-1;)if(f=ea(m[e],k[e],l[e]),f.firstMPT){f=f.difs;for(g in d)n[g]&&(f[g]=d[g]);h={};for(g in f)h[g]=k[e][g];j.push(b.fromTo(m[e],c,h,f))}return j},a.activate([h]),h},!0)}),e._gsDefine&&e._gsQueue.pop()(),function(b){"use strict";var d=function(){return(e.GreenSockGlobals||e)[b]};"undefined"!=typeof c&&c.exports&&(a("9"),c.exports=d())}("CSSPlugin")}(a("6"))}),a.registerDynamic("a",["9","8","6"],!0,function(a,b,c){"format cjs";var d=this||self;!function(b){var e="undefined"!=typeof c&&c.exports&&"undefined"!=typeof d?d:this||window;(e._gsQueue||(e._gsQueue=[])).push(function(){"use strict";e._gsDefine("utils.Draggable",["events.EventDispatcher","TweenLite","plugins.CSSPlugin"],function(a,b,c){var d,f,g,h,i,j,k,l,m={css:{},data:"_draggable"},n={css:{},data:"_draggable"},o={css:{},data:"_draggable"},p={css:{}},q=e._gsDefine.globals,r={},s={style:{}},t=e.document||{createElement:function(){return s}},u=t.documentElement||{},v=function(a){return t.createElementNS?t.createElementNS("http://www.w3.org/1999/xhtml",a):t.createElement(a)},w=v("div"),x=[],y=function(){return!1},z=180/Math.PI,A=999999999999999,B=Date.now||function(){return(new Date).getTime()},C=!(t.addEventListener||!t.all),D=t.createElement("div"),E=[],F={},G=0,H=/^(?:a|input|textarea|button|select)$/i,I=0,J=e.navigator&&e.navigator.userAgent.toLowerCase().indexOf("android")!==-1,K=0,L={},M={},N=function(a){if("string"==typeof a&&(a=b.selector(a)),!a||a.nodeType)return[a];var c,d=[],e=a.length;for(c=0;c!==e;d.push(a[c++]));return d},O=function(a,b){var c,d={};if(b)for(c in a)d[c]=a[c]*b;else for(c in a)d[c]=a[c];return d},P=function(){for(var a=E.length;--a>-1;)E[a]()},Q=function(a){E.push(a),1===E.length&&b.ticker.addEventListener("tick",P,this,!1,1)},R=function(a){for(var c=E.length;--c>-1;)E[c]===a&&E.splice(c,1);b.to(S,0,{overwrite:"all",delay:15,onComplete:S,data:"_draggable"})},S=function(){E.length||b.ticker.removeEventListener("tick",P)},T=function(a,b){var c;for(c in b)void 0===a[c]&&(a[c]=b[c]);return a},U=function(){return null!=window.pageYOffset?window.pageYOffset:null!=t.scrollTop?t.scrollTop:u.scrollTop||t.body.scrollTop||0},V=function(){return null!=window.pageXOffset?window.pageXOffset:null!=t.scrollLeft?t.scrollLeft:u.scrollLeft||t.body.scrollLeft||0},W=function(a,b){Ja(a,"scroll",b),Y(a.parentNode)||W(a.parentNode,b)},X=function(a,b){Ka(a,"scroll",b),Y(a.parentNode)||X(a.parentNode,b)},Y=function(a){return!(a&&a!==u&&a!==t&&a!==t.body&&a!==window&&a.nodeType&&a.parentNode)},Z=function(a,b){var c="x"===b?"Width":"Height",d="scroll"+c,e="client"+c,f=t.body;return Math.max(0,Y(a)?Math.max(u[d],f[d])-(window["inner"+c]||u[e]||f[e]):a[d]-a[e])},$=function(a){var b=Y(a),c=Z(a,"x"),d=Z(a,"y");b?a=M:$(a.parentNode),a._gsMaxScrollX=c,a._gsMaxScrollY=d,a._gsScrollX=a.scrollLeft||0,a._gsScrollY=a.scrollTop||0},_=function(a,b){return a=a||window.event,r.pageX=a.clientX+t.body.scrollLeft+u.scrollLeft,r.pageY=a.clientY+t.body.scrollTop+u.scrollTop,b&&(a.returnValue=!1),r},aa=function(a){return a?("string"==typeof a&&(a=b.selector(a)),a.length&&a!==window&&a[0]&&a[0].style&&!a.nodeType&&(a=a[0]),a===window||a.nodeType&&a.style?a:null):a},ba=function(a,b){var c,e,f,g=a.style;if(void 0===g[b]){for(f=["O","Moz","ms","Ms","Webkit"],e=5,c=b.charAt(0).toUpperCase()+b.substr(1);--e>-1&&void 0===g[f[e]+c];);if(e<0)return"";d=3===e?"ms":f[e],b=d+c}return b},ca=function(a,b,c){var d=a.style;d&&(void 0===d[b]&&(b=ba(a,b)),null==c?d.removeProperty?d.removeProperty(b.replace(/([A-Z])/g,"-$1").toLowerCase()):d.removeAttribute(b):void 0!==d[b]&&(d[b]=c))},da=t.defaultView?t.defaultView.getComputedStyle:y,ea=/(?:Left|Right|Width)/i,fa=/(?:\d|\-|\+|=|#|\.)*/g,ga=function(a,b,c,d,e){if("px"===d||!d)return c;if("auto"===d||!c)return 0;var f,g=ea.test(b),h=a,i=w.style,j=c<0;return j&&(c=-c),"%"===d&&b.indexOf("border")!==-1?f=c/100*(g?a.clientWidth:a.clientHeight):(i.cssText="border:0 solid red;position:"+ia(a,"position",!0)+";line-height:0;","%"!==d&&h.appendChild?i[g?"borderLeftWidth":"borderTopWidth"]=c+d:(h=a.parentNode||t.body,i[g?"width":"height"]=c+d),h.appendChild(w),f=parseFloat(w[g?"offsetWidth":"offsetHeight"]),h.removeChild(w),0!==f||e||(f=ga(a,b,c,d,!0))),j?-f:f},ha=function(a,b){if("absolute"!==ia(a,"position",!0))return 0;var c="left"===b?"Left":"Top",d=ia(a,"margin"+c,!0);return a["offset"+c]-(ga(a,b,parseFloat(d),(d+"").replace(fa,""))||0)},ia=function(a,b,c){var d,e=(a._gsTransform||{})[b];return e||0===e?e:(a.style[b]?e=a.style[b]:(d=da(a))?(e=d.getPropertyValue(b.replace(/([A-Z])/g,"-$1").toLowerCase()),e=e||d.length?e:d[b]):a.currentStyle&&(e=a.currentStyle[b]),"auto"!==e||"top"!==b&&"left"!==b||(e=ha(a,b)),c?e:parseFloat(e)||0)},ja=function(a,b,c){var d=a.vars,e=d[c],f=a._listeners[b];"function"==typeof e&&e.apply(d[c+"Scope"]||d.callbackScope||a,d[c+"Params"]||[a.pointerEvent]),f&&a.dispatchEvent(b)},ka=function(a,b){var c,d,e,f=aa(a);return f?Ea(f,b):void 0!==a.left?(e=ya(b),{left:a.left-e.x,top:a.top-e.y,width:a.width,height:a.height}):(d=a.min||a.minX||a.minRotation||0,c=a.min||a.minY||0,{left:d,top:c,width:(a.max||a.maxX||a.maxRotation||0)-d,height:(a.max||a.maxY||0)-c})},la=function(){if(!t.createElementNS)return h=0,void(i=!1);var a,b,c,d,e=v("div"),f=t.createElementNS("http://www.w3.org/2000/svg","svg"),g=v("div"),m=e.style,n=t.body||u,o="flex"===ia(n,"display",!0);t.body&&oa&&(m.position="absolute",n.appendChild(g),g.appendChild(e),d=e.offsetParent,g.style[oa]="rotate(1deg)",l=e.offsetParent===d,g.style.position="absolute",m.height="10px",d=e.offsetTop,g.style.border="5px solid red",k=d!==e.offsetTop,n.removeChild(g)),m=f.style,f.setAttributeNS(null,"width","400px"),f.setAttributeNS(null,"height","400px"),f.setAttributeNS(null,"viewBox","0 0 400 400"),m.display="block",m.boxSizing="border-box",m.border="0px solid red",m.transform="none",e.style.cssText="width:100px;height:100px;overflow:scroll;-ms-overflow-style:none;",n.appendChild(e),e.appendChild(f),c=f.createSVGPoint().matrixTransform(f.getScreenCTM()),b=c.y,e.scrollTop=100,c.x=c.y=0,c=c.matrixTransform(f.getScreenCTM()),j=b-c.y<100.1?0:b-c.y-150,e.removeChild(f),n.removeChild(e),n.appendChild(f),o&&(n.style.display="block"),a=f.getScreenCTM(),b=a.e,m.border="50px solid red",a=f.getScreenCTM(),0===b&&0===a.e&&0===a.f&&1===a.a?(h=1,i=!0):(h=b!==a.e?1:0,i=1!==a.a),o&&(n.style.display="flex"),n.removeChild(f)},ma=""!==ba(w,"perspective"),na=ba(w,"transformOrigin").replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),oa=ba(w,"transform"),pa=oa.replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),qa={},ra={},sa=e.SVGElement,ta=function(a){return!!(sa&&"function"==typeof a.getBBox&&a.getCTM&&(!a.parentNode||a.parentNode.getBBox&&a.parentNode.getCTM))},ua=(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent))&&parseFloat(RegExp.$1)<11,va=[],wa=[],xa=function(a){if(!a.getBoundingClientRect||!a.parentNode||!oa)return{offsetTop:0,offsetLeft:0,scaleX:1,scaleY:1,offsetParent:u};if(Ta.cacheSVGData!==!1&&a._dCache&&a._dCache.lastUpdate===b.ticker.frame)return a._dCache;var c,d,e,f,g,k,l,m,n,o,p,q,r=a,s=za(a);if(s.lastUpdate=b.ticker.frame,a.getBBox&&!s.isSVGRoot){for(r=a.parentNode,c=a.getBBox();r&&"svg"!==(r.nodeName+"").toLowerCase();)r=r.parentNode;return f=xa(r),s.offsetTop=c.y*f.scaleY,s.offsetLeft=c.x*f.scaleX,s.scaleX=f.scaleX,s.scaleY=f.scaleY,s.offsetParent=r||u,s}for(e=s.offsetParent,e===t.body&&(e=u),wa.length=va.length=0;r&&(g=ia(r,oa,!0),"matrix(1, 0, 0, 1, 0, 0)"!==g&&"none"!==g&&"translate3d(0px, 0px, 0px)"!==g&&(wa.push(r),va.push(r.style[oa]),r.style[oa]="none"),r!==e);)r=r.parentNode;for(d=e.getBoundingClientRect(),g=a.getScreenCTM(),m=a.createSVGPoint(),l=m.matrixTransform(g),s.scaleX=Math.sqrt(g.a*g.a+g.b*g.b),s.scaleY=Math.sqrt(g.d*g.d+g.c*g.c),void 0===h&&la(),s.borderBox&&!i&&a.getAttribute("width")&&(f=da(a)||{},n=parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)||0,o=parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)||0,p=parseFloat(f.width)||0,q=parseFloat(f.height)||0,s.scaleX*=(p-n)/p,s.scaleY*=(q-o)/q),j?(c=a.getBoundingClientRect(),s.offsetLeft=c.left-d.left,s.offsetTop=c.top-d.top):(s.offsetLeft=l.x-d.left,s.offsetTop=l.y-d.top),s.offsetParent=e,k=wa.length;--k>-1;)wa[k].style[oa]=va[k];return s},ya=function(a,c){if(c=c||{},!a||a===u||!a.parentNode||a===window)return{x:0,y:0};var d=da(a),e=na&&d?d.getPropertyValue(na):"50% 50%",f=e.split(" "),g=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":f[0],h=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":f[1];return"center"!==h&&null!=h||(h="50%"),("center"===g||isNaN(parseFloat(g)))&&(g="50%"),a.getBBox&&ta(a)?(a._gsTransform||(b.set(a,{x:"+=0",overwrite:!1}),void 0===a._gsTransform.xOrigin&&console.log("Draggable requires at least GSAP 1.17.0")),e=a.getBBox(),c.x=a._gsTransform.xOrigin-e.x,c.y=a._gsTransform.yOrigin-e.y):(a.getBBox&&(g+h).indexOf("%")!==-1&&(a=a.getBBox(),a={offsetWidth:a.width,offsetHeight:a.height}),c.x=g.indexOf("%")!==-1?a.offsetWidth*parseFloat(g)/100:parseFloat(g),c.y=h.indexOf("%")!==-1?a.offsetHeight*parseFloat(h)/100:parseFloat(h)),c},za=function(a){if(Ta.cacheSVGData!==!1&&a._dCache&&a._dCache.lastUpdate===b.ticker.frame)return a._dCache;var c,d=a._dCache=a._dCache||{},e=da(a),f=a.getBBox&&ta(a),g="svg"===(a.nodeName+"").toLowerCase();if(d.isSVG=f,d.isSVGRoot=g,d.borderBox="border-box"===e.boxSizing,d.computedStyle=e,g)c=a.parentNode||u,c.insertBefore(w,a),d.offsetParent=w.offsetParent||u,c.removeChild(w);else if(f){for(c=a.parentNode;c&&"svg"!==(c.nodeName+"").toLowerCase();)c=c.parentNode;d.offsetParent=c}else d.offsetParent=a.offsetParent;return d},Aa=function(a,b,c,d,e){if(a===window||!a||!a.style||!a.parentNode)return[1,0,0,1,0,0];var f,g,i,j,m,n,o,p,q,r,s,v,w,x,y=a._dCache||za(a),z=a.parentNode,A=z._dCache||za(z),B=y.computedStyle,C=y.isSVG?A.offsetParent:z.offsetParent;return f=y.isSVG&&(a.style[oa]+"").indexOf("matrix")!==-1?a.style[oa]:B?B.getPropertyValue(pa):a.currentStyle?a.currentStyle[oa]:"1,0,0,1,0,0",a.getBBox&&(a.getAttribute("transform")+"").indexOf("matrix")!==-1&&(f=a.getAttribute("transform")),f=(f+"").match(/(?:\-|\.|\b)(\d|\.|e\-)+/g)||[1,0,0,1,0,0],f.length>6&&(f=[f[0],f[1],f[4],f[5],f[12],f[13]]),d?f[4]=f[5]=0:y.isSVG&&(m=a._gsTransform)&&(m.xOrigin||m.yOrigin)&&(f[0]=parseFloat(f[0]),f[1]=parseFloat(f[1]),f[2]=parseFloat(f[2]),f[3]=parseFloat(f[3]),f[4]=parseFloat(f[4])-(m.xOrigin-(m.xOrigin*f[0]+m.yOrigin*f[2])),f[5]=parseFloat(f[5])-(m.yOrigin-(m.xOrigin*f[1]+m.yOrigin*f[3]))),b&&(void 0===h&&la(),i=y.isSVG||y.isSVGRoot?xa(a):a,y.isSVG?(j=a.getBBox(),r=A.isSVGRoot?{x:0,y:0}:z.getBBox(),i={offsetLeft:j.x-r.x,offsetTop:j.y-r.y,offsetParent:y.offsetParent}):y.isSVGRoot?(s=parseInt(B.borderTopWidth,10)||0,v=parseInt(B.borderLeftWidth,10)||0,w=(f[0]-h)*v+f[2]*s,x=f[1]*v+(f[3]-h)*s,n=b.x,o=b.y,p=n-(n*f[0]+o*f[2]),q=o-(n*f[1]+o*f[3]),f[4]=parseFloat(f[4])+p,f[5]=parseFloat(f[5])+q,b.x-=p,b.y-=q,n=i.scaleX,o=i.scaleY,e||(b.x*=n,b.y*=o),f[0]*=n,f[1]*=o,f[2]*=n,f[3]*=o,ua||(b.x+=w,b.y+=x),C===t.body&&i.offsetParent===u&&(C=u)):!k&&a.offsetParent&&(b.x+=parseInt(ia(a.offsetParent,"borderLeftWidth"),10)||0,b.y+=parseInt(ia(a.offsetParent,"borderTopWidth"),10)||0),g=z===u||z===t.body,f[4]=Number(f[4])+b.x+(i.offsetLeft||0)-c.x-(g?0:z.scrollLeft||0),f[5]=Number(f[5])+b.y+(i.offsetTop||0)-c.y-(g?0:z.scrollTop||0),z&&"fixed"===ia(a,"position",B)&&(f[4]+=V(),f[5]+=U()),!z||z===u||C!==i.offsetParent||A.isSVG||l&&"100100"!==Aa(z).join("")||(i=A.isSVGRoot?xa(z):z,f[4]-=i.offsetLeft||0,f[5]-=i.offsetTop||0,k||!A.offsetParent||y.isSVG||y.isSVGRoot||(f[4]-=parseInt(ia(A.offsetParent,"borderLeftWidth"),10)||0,f[5]-=parseInt(ia(A.offsetParent,"borderTopWidth"),10)||0))),f},Ba=function(a,b){if(!a||a===window||!a.parentNode)return[1,0,0,1,0,0];for(var c,d,e,f,g,h,i,j,k=ya(a,qa),l=ya(a.parentNode,ra),m=Aa(a,k,l,!1,!b);(a=a.parentNode)&&a.parentNode&&a!==u;)k=l,l=ya(a.parentNode,k===qa?ra:qa),i=Aa(a,k,l),c=m[0],d=m[1],e=m[2],f=m[3],g=m[4],h=m[5],m[0]=c*i[0]+d*i[2],m[1]=c*i[1]+d*i[3],m[2]=e*i[0]+f*i[2],m[3]=e*i[1]+f*i[3],m[4]=g*i[0]+h*i[2]+i[4],m[5]=g*i[1]+h*i[3]+i[5];return b&&(c=m[0],d=m[1],e=m[2],f=m[3],g=m[4],h=m[5],j=c*f-d*e,m[0]=f/j,m[1]=-d/j,m[2]=-e/j,m[3]=c/j,m[4]=(e*h-f*g)/j,m[5]=-(c*h-d*g)/j),m},Ca=function(a,b,c,d,e){a=aa(a);var f=Ba(a,!1,e),g=b.x,h=b.y;return c&&(ya(a,b),g-=b.x,h-=b.y),d=d===!0?b:d||{},d.x=g*f[0]+h*f[2]+f[4],d.y=g*f[1]+h*f[3]+f[5],d},Da=function(a,b,c){var d=a.x*b[0]+a.y*b[2]+b[4],e=a.x*b[1]+a.y*b[3]+b[5];return a.x=d*c[0]+e*c[2]+c[4],a.y=d*c[1]+e*c[3]+c[5],a},Ea=function(a,b,c){if(!(a=aa(a)))return null;b=aa(b);var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,v,w,x,y,z,A,B=a.getBBox&&ta(a);if(a===window)g=U(),e=V(),f=e+(u.clientWidth||a.innerWidth||t.body.clientWidth||0),h=g+((a.innerHeight||0)-20<u.clientHeight?u.clientHeight:a.innerHeight||t.body.clientHeight||0);else{if(void 0===b||b===window)return a.getBoundingClientRect();d=ya(a),e=-d.x,g=-d.y,B?(o=a.getBBox(),p=o.width,q=o.height):"svg"!==(a.nodeName+"").toLowerCase()&&a.offsetWidth?(p=a.offsetWidth,q=a.offsetHeight):(z=da(a),p=parseFloat(z.width),q=parseFloat(z.height)),f=e+p,h=g+q,"svg"!==a.nodeName.toLowerCase()||C||(r=xa(a),A=r.computedStyle||{},w=(a.getAttribute("viewBox")||"0 0").split(" "),x=parseFloat(w[0]),y=parseFloat(w[1]),s=parseFloat(A.borderLeftWidth)||0,v=parseFloat(A.borderTopWidth)||0,f-=p-(p-s)/r.scaleX-x,h-=q-(q-v)/r.scaleY-y,e-=s/r.scaleX-x,g-=v/r.scaleY-y,z&&(f+=(parseFloat(A.borderRightWidth)+s)/r.scaleX,h+=(v+parseFloat(A.borderBottomWidth))/r.scaleY))}return a===b?{left:e,top:g,width:f-e,height:h-g}:(i=Ba(a),j=Ba(b,!0),k=Da({x:e,y:g},i,j),l=Da({x:f,y:g},i,j),m=Da({x:f,y:h},i,j),n=Da({x:e,y:h},i,j),e=Math.min(k.x,l.x,m.x,n.x),g=Math.min(k.y,l.y,m.y,n.y),L.x=L.y=0,c&&ya(b,L),{left:e+L.x,top:g+L.y,width:Math.max(k.x,l.x,m.x,n.x)-e,height:Math.max(k.y,l.y,m.y,n.y)-g})},Fa=function(a){return!!(a&&a.length&&a[0]&&(a[0].nodeType&&a[0].style&&!a.nodeType||a[0].length&&a[0][0]))},Ga=function(a){var b,c,d,e=[],f=a.length;for(b=0;b<f;b++)if(c=a[b],Fa(c))for(d=c.length,d=0;d<c.length;d++)e.push(c[d]);else c&&0!==c.length&&e.push(c);return e},Ha="ontouchstart"in u&&"orientation"in window,Ia=function(a){for(var b=a.split(","),c=(void 0!==w.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==w.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":a).split(","),d={},e=4;--e>-1;)d[b[e]]=c[e],d[c[e]]=b[e];return d}("touchstart,touchmove,touchend,touchcancel"),Ja=function(a,b,c,d){if(a.addEventListener){var e=Ia[b];d=d||{passive:!1},a.addEventListener(e||b,c,d),e&&b!==e&&a.addEventListener(b,c,d)}else a.attachEvent&&a.attachEvent("on"+b,c)},Ka=function(a,b,c){if(a.removeEventListener){var d=Ia[b];a.removeEventListener(d||b,c),d&&b!==d&&a.removeEventListener(b,c)}else a.detachEvent&&a.detachEvent("on"+b,c)},La=function(a,b){for(var c=a.length;--c>-1;)if(a[c].identifier===b)return!0;return!1},Ma=function(a){f=a.touches&&I<a.touches.length,Ka(a.target,"touchend",Ma)},Na=function(a){f=a.touches&&I<a.touches.length,Ja(a.target,"touchend",Ma)},Oa=function(a,b,c,d,e,f){var g,h,i,j={};if(b)if(1!==e&&b instanceof Array){if(j.end=g=[],i=b.length,"object"==typeof b[0])for(h=0;h<i;h++)g[h]=O(b[h],e);else for(h=0;h<i;h++)g[h]=b[h]*e;c+=1.1,d-=1.1}else"function"==typeof b?j.end=function(c){var d,f,g=b.call(a,c);if(1!==e)if("object"==typeof g){d={};for(f in g)d[f]=g[f]*e;g=d}else g*=e;return g}:j.end=b;return(c||0===c)&&(j.max=c),(d||0===d)&&(j.min=d),f&&(j.velocity=0),j},Pa=function(a){var b;return!(!a||!a.getAttribute||"BODY"===a.nodeName)&&(!("true"!==(b=a.getAttribute("data-clickable"))&&("false"===b||!a.onclick&&!H.test(a.nodeName+"")&&"true"!==a.getAttribute("contentEditable")))||Pa(a.parentNode))},Qa=function(a,b){for(var c,d=a.length;--d>-1;)c=a[d],c.ondragstart=c.onselectstart=b?null:y,ca(c,"userSelect",b?"text":"none")},Ra=function(){var a,b=t.createElement("div"),c=t.createElement("div"),d=c.style,e=t.body||w;return d.display="inline-block",d.position="relative",b.style.cssText=c.innerHTML="width:90px; height:40px; padding:10px; overflow:auto; visibility: hidden",b.appendChild(c),e.appendChild(b),a=c.offsetHeight+18>b.scrollHeight,e.removeChild(b),a}(),Sa=function(a,c){a=aa(a),c=c||{};var d,e,f,g,h,i,j=t.createElement("div"),k=j.style,l=a.firstChild,m=0,n=0,o=a.scrollTop,p=a.scrollLeft,q=a.scrollWidth,r=a.scrollHeight,s=0,u=0,v=0;ma&&c.force3D!==!1?(h="translate3d(",i="px,0px)"):oa&&(h="translate(",i="px)"),this.scrollTop=function(a,b){return arguments.length?void this.top(-a,b):-this.top()},this.scrollLeft=function(a,b){return arguments.length?void this.left(-a,b):-this.left()},this.left=function(d,e){if(!arguments.length)return-(a.scrollLeft+n);var f=a.scrollLeft-p,g=n;return(f>2||f<-2)&&!e?(p=a.scrollLeft,b.killTweensOf(this,!0,{left:1,scrollLeft:1}),this.left(-p),void(c.onKill&&c.onKill())):(d=-d,d<0?(n=d-.5|0,d=0):d>u?(n=d-u|0,d=u):n=0,(n||g)&&(h?this._suspendTransforms||(k[oa]=h+-n+"px,"+-m+i):k.left=-n+"px",n+s>=0&&(k.paddingRight=n+s+"px")),a.scrollLeft=0|d,void(p=a.scrollLeft))},this.top=function(d,e){if(!arguments.length)return-(a.scrollTop+m);var f=a.scrollTop-o,g=m;return(f>2||f<-2)&&!e?(o=a.scrollTop,b.killTweensOf(this,!0,{top:1,scrollTop:1}),this.top(-o),void(c.onKill&&c.onKill())):(d=-d,d<0?(m=d-.5|0,d=0):d>v?(m=d-v|0,d=v):m=0,(m||g)&&(h?this._suspendTransforms||(k[oa]=h+-n+"px,"+-m+i):k.top=-m+"px"),a.scrollTop=0|d,void(o=a.scrollTop))},this.maxScrollTop=function(){return v},this.maxScrollLeft=function(){return u},this.disable=function(){for(l=j.firstChild;l;)g=l.nextSibling,a.appendChild(l),l=g;a===j.parentNode&&a.removeChild(j)},this.enable=function(){if(l=a.firstChild,l!==j){for(;l;)g=l.nextSibling,j.appendChild(l),l=g;a.appendChild(j),this.calibrate()}},this.calibrate=function(b){var c,g,h=a.clientWidth===d;o=a.scrollTop,p=a.scrollLeft,h&&a.clientHeight===e&&j.offsetHeight===f&&q===a.scrollWidth&&r===a.scrollHeight&&!b||((m||n)&&(c=this.left(),g=this.top(),this.left(-a.scrollLeft),this.top(-a.scrollTop)),
h&&!b||(k.display="block",k.width="auto",k.paddingRight="0px",s=Math.max(0,a.scrollWidth-a.clientWidth),s&&(s+=ia(a,"paddingLeft")+(Ra?ia(a,"paddingRight"):0))),k.display="inline-block",k.position="relative",k.overflow="visible",k.verticalAlign="top",k.width="100%",k.paddingRight=s+"px",Ra&&(k.paddingBottom=ia(a,"paddingBottom",!0)),C&&(k.zoom="1"),d=a.clientWidth,e=a.clientHeight,q=a.scrollWidth,r=a.scrollHeight,u=a.scrollWidth-d,v=a.scrollHeight-e,f=j.offsetHeight,k.display="block",(c||g)&&(this.left(c),this.top(g)))},this.content=j,this.element=a,this._suspendTransforms=!1,this.enable()},Ta=function(d,e){a.call(this,d),d=aa(d),g||(g=q.com.greensock.plugins.ThrowPropsPlugin),this.vars=e=O(e||{}),this.target=d,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(e.dragResistance)||0,this.edgeResistance=isNaN(e.edgeResistance)?1:parseFloat(e.edgeResistance)||0,this.lockAxis=e.lockAxis,this.autoScroll=e.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!e.allowEventDefault;var h,i,j,k,l,r,s,v,w,y,E,H,P,S,U,V,Z,ba,da,ea,fa,ga,ha,la,ma,na,oa,pa,qa,ra,sa,ua,va,wa,xa=(e.type||(C?"top,left":"x,y")).toLowerCase(),ya=xa.indexOf("x")!==-1||xa.indexOf("y")!==-1,za=xa.indexOf("rotation")!==-1,Aa=za?"rotation":ya?"x":"left",Da=ya?"y":"top",Ea=xa.indexOf("x")!==-1||xa.indexOf("left")!==-1||"scroll"===xa,Fa=xa.indexOf("y")!==-1||xa.indexOf("top")!==-1||"scroll"===xa,Ga=e.minimumMovement||2,Ma=this,Ra=N(e.trigger||e.handle||d),Ua={},Va=0,Wa=!1,Ya=e.autoScrollMarginTop||40,Za=e.autoScrollMarginRight||40,$a=e.autoScrollMarginBottom||40,_a=e.autoScrollMarginLeft||40,ab=e.clickableTest||Pa,bb=0,cb=function(a){return Ma.isPressed&&a.which<2?void Ma.endDrag():(a.preventDefault(),a.stopPropagation(),!1)},db=function(a){if(Ma.autoScroll&&Ma.isDragging&&(Wa||ba)){var b,c,e,f,g,h,j,k,l=d,m=15*Ma.autoScroll;for(Wa=!1,M.scrollTop=null!=window.pageYOffset?window.pageYOffset:null!=u.scrollTop?u.scrollTop:t.body.scrollTop,M.scrollLeft=null!=window.pageXOffset?window.pageXOffset:null!=u.scrollLeft?u.scrollLeft:t.body.scrollLeft,f=Ma.pointerX-M.scrollLeft,g=Ma.pointerY-M.scrollTop;l&&!c;)c=Y(l.parentNode),b=c?M:l.parentNode,e=c?{bottom:Math.max(u.clientHeight,window.innerHeight||0),right:Math.max(u.clientWidth,window.innerWidth||0),left:0,top:0}:b.getBoundingClientRect(),h=j=0,Fa&&(k=b._gsMaxScrollY-b.scrollTop,k<0?j=k:g>e.bottom-$a&&k?(Wa=!0,j=Math.min(k,m*(1-Math.max(0,e.bottom-g)/$a)|0)):g<e.top+Ya&&b.scrollTop&&(Wa=!0,j=-Math.min(b.scrollTop,m*(1-Math.max(0,g-e.top)/Ya)|0)),j&&(b.scrollTop+=j)),Ea&&(k=b._gsMaxScrollX-b.scrollLeft,k<0?h=k:f>e.right-Za&&k?(Wa=!0,h=Math.min(k,m*(1-Math.max(0,e.right-f)/Za)|0)):f<e.left+_a&&b.scrollLeft&&(Wa=!0,h=-Math.min(b.scrollLeft,m*(1-Math.max(0,f-e.left)/_a)|0)),h&&(b.scrollLeft+=h)),c&&(h||j)&&(window.scrollTo(b.scrollLeft,b.scrollTop),rb(Ma.pointerX+h,Ma.pointerY+j)),l=b}if(ba){var n=Ma.x,o=Ma.y,p=1e-6;n<p&&n>-p&&(n=0),o<p&&o>-p&&(o=0),za?(Ma.deltaX=n-qa.data.rotation,qa.data.rotation=Ma.rotation=n,qa.setRatio(1)):i?(Fa&&(Ma.deltaY=o-i.top(),i.top(o)),Ea&&(Ma.deltaX=n-i.left(),i.left(n))):ya?(Fa&&(Ma.deltaY=o-qa.data.y,qa.data.y=o),Ea&&(Ma.deltaX=n-qa.data.x,qa.data.x=n),qa.setRatio(1)):(Fa&&(Ma.deltaY=o-parseFloat(d.style.top||0),d.style.top=o+"px"),Ea&&(Ma.deltaY=n-parseFloat(d.style.left||0),d.style.left=n+"px")),!v||a||ua||(ua=!0,ja(Ma,"drag","onDrag"),ua=!1)}ba=!1},eb=function(a,c){var e,f=Ma.x,g=Ma.y;d._gsTransform||!ya&&!za||b.set(d,{x:"+=0",overwrite:!1,data:"_draggable"}),ya?(Ma.y=d._gsTransform.y,Ma.x=d._gsTransform.x):za?Ma.x=Ma.rotation=d._gsTransform.rotation:i?(Ma.y=i.top(),Ma.x=i.left()):(Ma.y=parseInt(d.style.top,10)||0,Ma.x=parseInt(d.style.left,10)||0),(ea||fa||ga)&&!c&&(Ma.isDragging||Ma.isThrowing)&&(ga&&(L.x=Ma.x,L.y=Ma.y,e=ga(L),e.x!==Ma.x&&(Ma.x=e.x,ba=!0),e.y!==Ma.y&&(Ma.y=e.y,ba=!0)),ea&&(e=ea(Ma.x),e!==Ma.x&&(Ma.x=e,za&&(Ma.rotation=e),ba=!0)),fa&&(e=fa(Ma.y),e!==Ma.y&&(Ma.y=e),ba=!0)),ba&&db(!0),a||(Ma.deltaX=Ma.x-f,Ma.deltaY=Ma.y-g,ja(Ma,"throwupdate","onThrowUpdate"))},fb=function(){var a,b,c,f;s=!1,i?(i.calibrate(),Ma.minX=y=-i.maxScrollLeft(),Ma.minY=H=-i.maxScrollTop(),Ma.maxX=w=Ma.maxY=E=0,s=!0):e.bounds&&(a=ka(e.bounds,d.parentNode),za?(Ma.minX=y=a.left,Ma.maxX=w=a.left+a.width,Ma.minY=H=Ma.maxY=E=0):void 0!==e.bounds.maxX||void 0!==e.bounds.maxY?(a=e.bounds,Ma.minX=y=a.minX,Ma.minY=H=a.minY,Ma.maxX=w=a.maxX,Ma.maxY=E=a.maxY):(b=ka(d,d.parentNode),Ma.minX=y=ia(d,Aa)+a.left-b.left,Ma.minY=H=ia(d,Da)+a.top-b.top,Ma.maxX=w=y+(a.width-b.width),Ma.maxY=E=H+(a.height-b.height)),y>w&&(Ma.minX=w,Ma.maxX=w=y,y=Ma.minX),H>E&&(Ma.minY=E,Ma.maxY=E=H,H=Ma.minY),za&&(Ma.minRotation=y,Ma.maxRotation=w),s=!0),e.liveSnap&&(c=e.liveSnap===!0?e.snap||{}:e.liveSnap,f=c instanceof Array||"function"==typeof c,za?(ea=nb(f?c:c.rotation,y,w,1),fa=null):c.points?ga=ob(f?c:c.points,y,w,H,E,c.radius,i?-1:1):(Ea&&(ea=nb(f?c:c.x||c.left||c.scrollLeft,y,w,i?-1:1)),Fa&&(fa=nb(f?c:c.y||c.top||c.scrollTop,H,E,i?-1:1))))},gb=function(){Ma.isThrowing=!1,ja(Ma,"throwcomplete","onThrowComplete")},hb=function(){Ma.isThrowing=!1},ib=function(a,b){var c,f,h,j;a&&g?(a===!0&&(c=e.snap||e.liveSnap||{},f=c instanceof Array||"function"==typeof c,a={resistance:(e.throwResistance||e.resistance||1e3)/(za?10:1)},za?a.rotation=Oa(Ma,f?c:c.rotation,w,y,1,b):(Ea&&(a[Aa]=Oa(Ma,f?c:c.points||c.x||c.left||c.scrollLeft,w,y,i?-1:1,b||"x"===Ma.lockedAxis)),Fa&&(a[Da]=Oa(Ma,f?c:c.points||c.y||c.top||c.scrollTop,E,H,i?-1:1,b||"y"===Ma.lockedAxis)),(c.points||c instanceof Array&&"object"==typeof c[0])&&(a.linkedProps=Aa+","+Da,a.radius=c.radius))),Ma.isThrowing=!0,j=isNaN(e.overshootTolerance)?1===e.edgeResistance?0:1-Ma.edgeResistance+.2:e.overshootTolerance,Ma.tween=h=g.to(i||d,{throwProps:a,data:"_draggable",ease:e.ease||q.Power3.easeOut,onComplete:gb,onOverwrite:hb,onUpdate:e.fastMode?ja:eb,onUpdateParams:e.fastMode?[Ma,"onthrowupdate","onThrowUpdate"]:c&&c.radius?[!1,!0]:x},isNaN(e.maxDuration)?2:e.maxDuration,isNaN(e.minDuration)?0===j||"object"==typeof a&&a.resistance>1e3?0:.5:e.minDuration,j),e.fastMode||(i&&(i._suspendTransforms=!0),h.render(h.duration(),!0,!0),eb(!0,!0),Ma.endX=Ma.x,Ma.endY=Ma.y,za&&(Ma.endRotation=Ma.x),h.play(0),eb(!0,!0),i&&(i._suspendTransforms=!1))):s&&Ma.applyBounds()},jb=function(a){var b,c,e,f,g,h,i,l,m,n=ma||[1,0,0,1,0,0];ma=Ba(d.parentNode,!0),a&&Ma.isPressed&&n.join(",")!==ma.join(",")&&(b=n[0],c=n[1],e=n[2],f=n[3],g=n[4],h=n[5],i=b*f-c*e,l=j*(f/i)+k*(-e/i)+(e*h-f*g)/i,m=j*(-c/i)+k*(b/i)+-(b*h-c*g)/i,k=l*ma[1]+m*ma[3]+ma[5],j=l*ma[0]+m*ma[2]+ma[4]),ma[1]||ma[2]||1!=ma[0]||1!=ma[3]||0!=ma[4]||0!=ma[5]||(ma=null)},kb=function(){var a=1-Ma.edgeResistance;jb(!1),ma&&(j=Ma.pointerX*ma[0]+Ma.pointerY*ma[2]+ma[4],k=Ma.pointerX*ma[1]+Ma.pointerY*ma[3]+ma[5]),ba&&(rb(Ma.pointerX,Ma.pointerY),db(!0)),i?(fb(),r=i.top(),l=i.left()):(lb()?(eb(!0,!0),fb()):Ma.applyBounds(),za?(Z=Ma.rotationOrigin=Ca(d,{x:0,y:0}),eb(!0,!0),l=Ma.x,r=Ma.y=Math.atan2(Z.y-Ma.pointerY,Ma.pointerX-Z.x)*z):(oa=d.parentNode?d.parentNode.scrollTop||0:0,pa=d.parentNode?d.parentNode.scrollLeft||0:0,r=ia(d,Da),l=ia(d,Aa))),s&&a&&(l>w?l=w+(l-w)/a:l<y&&(l=y-(y-l)/a),za||(r>E?r=E+(r-E)/a:r<H&&(r=H-(H-r)/a))),Ma.startX=l,Ma.startY=r},lb=function(){return Ma.tween&&Ma.tween.isActive()},mb=function(){!D.parentNode||lb()||Ma.isDragging||D.parentNode.removeChild(D)},nb=function(a,b,c,d){return"function"==typeof a?function(e){var f=Ma.isPressed?1-Ma.edgeResistance:1;return a.call(Ma,e>c?c+(e-c)*f:e<b?b+(e-b)*f:e)*d}:a instanceof Array?function(d){for(var e,f,g=a.length,h=0,i=A;--g>-1;)e=a[g],f=e-d,f<0&&(f=-f),f<i&&e>=b&&e<=c&&(h=g,i=f);return a[h]}:isNaN(a)?function(a){return a}:function(){return a*d}},ob=function(a,b,c,d,e,f,g){return f=f&&f<A?f*f:A,"function"==typeof a?function(h){var i,j,k,l=Ma.isPressed?1-Ma.edgeResistance:1,m=h.x,n=h.y;return h.x=m=m>c?c+(m-c)*l:m<b?b+(m-b)*l:m,h.y=n=n>e?e+(n-e)*l:n<d?d+(n-d)*l:n,i=a.call(Ma,h),i!==h&&(h.x=i.x,h.y=i.y),1!==g&&(h.x*=g,h.y*=g),f<A&&(j=h.x-m,k=h.y-n,j*j+k*k>f&&(h.x=m,h.y=n)),h}:a instanceof Array?function(b){for(var c,d,e,g,h=a.length,i=0,j=A;--h>-1;)e=a[h],c=e.x-b.x,d=e.y-b.y,g=c*c+d*d,g<j&&(i=h,j=g);return j<=f?a[i]:b}:function(a){return a}},pb=function(a,c){var f;if(h&&!Ma.isPressed&&a&&("mousedown"!==a.type&&"pointerdown"!==a.type||c||!(B()-bb<30)||!Ia[Ma.pointerEvent.type])){if(na=lb(),Ma.pointerEvent=a,Ia[a.type]?(la=a.type.indexOf("touch")!==-1?a.currentTarget||a.target:t,Ja(la,"touchend",sb),Ja(la,"touchmove",qb),Ja(la,"touchcancel",sb),Ja(t,"touchstart",Na)):(la=null,Ja(t,"mousemove",qb)),sa=null,Ja(t,"mouseup",sb),a&&a.target&&Ja(a.target,"mouseup",sb),ha=ab.call(Ma,a.target)&&!e.dragClickables&&!c)return Ja(a.target,"change",sb),ja(Ma,"press","onPress"),void Qa(Ra,!0);if(ra=!(!la||Ea===Fa||Ma.vars.allowNativeTouchScrolling===!1||Ma.vars.allowContextMenu&&a&&(a.ctrlKey||a.which>2))&&(Ea?"y":"x"),C?a=_(a,!0):ra||Ma.allowEventDefault||(a.preventDefault(),a.preventManipulation&&a.preventManipulation()),a.changedTouches?(a=U=a.changedTouches[0],V=a.identifier):a.pointerId?V=a.pointerId:U=V=null,I++,Q(db),k=Ma.pointerY=a.pageY,j=Ma.pointerX=a.pageX,(ra||Ma.autoScroll)&&$(d.parentNode),!d.parentNode||!Ma.autoScroll||i||za||!d.parentNode._gsMaxScrollX||D.parentNode||d.getBBox||(D.style.width=d.parentNode.scrollWidth+"px",d.parentNode.appendChild(D)),kb(),Ma.tween&&Ma.tween.kill(),Ma.isThrowing=!1,b.killTweensOf(i||d,!0,Ua),i&&b.killTweensOf(d,!0,{scrollTo:1}),Ma.tween=Ma.lockedAxis=null,(e.zIndexBoost||!za&&!i&&e.zIndexBoost!==!1)&&(d.style.zIndex=Ta.zIndex++),Ma.isPressed=!0,v=!(!e.onDrag&&!Ma._listeners.drag),!za)for(f=Ra.length;--f>-1;)ca(Ra[f],"cursor",e.cursor||"move");ja(Ma,"press","onPress")}},qb=function(a){var b,c,d,e,g,i,l=a;if(h&&!f&&Ma.isPressed&&a){if(Ma.pointerEvent=a,b=a.changedTouches){if(a=b[0],a!==U&&a.identifier!==V){for(e=b.length;--e>-1&&(a=b[e]).identifier!==V;);if(e<0)return}}else if(a.pointerId&&V&&a.pointerId!==V)return;if(C)a=_(a,!0);else{if(la&&ra&&!sa&&(c=a.pageX,d=a.pageY,ma&&(e=c*ma[0]+d*ma[2]+ma[4],d=c*ma[1]+d*ma[3]+ma[5],c=e),g=Math.abs(c-j),i=Math.abs(d-k),(g!==i&&(g>Ga||i>Ga)||J&&ra===sa)&&(sa=g>i&&Ea?"x":"y",Ma.vars.lockAxisOnTouchScroll!==!1&&(Ma.lockedAxis="x"===sa?"y":"x","function"==typeof Ma.vars.onLockAxis&&Ma.vars.onLockAxis.call(Ma,l)),J&&ra===sa)))return void sb(l);Ma.allowEventDefault||ra&&(!sa||ra===sa)||l.cancelable===!1||(l.preventDefault(),l.preventManipulation&&l.preventManipulation())}Ma.autoScroll&&(Wa=!0),rb(a.pageX,a.pageY)}},rb=function(a,b){var c,d,e,f,g,h,i=1-Ma.dragResistance,m=1-Ma.edgeResistance;Ma.pointerX=a,Ma.pointerY=b,za?(f=Math.atan2(Z.y-b,a-Z.x)*z,g=Ma.y-f,g>180?(r-=360,Ma.y=f):g<-180&&(r+=360,Ma.y=f),Ma.x!==l||Math.abs(r-f)>Ga?(Ma.y=f,e=l+(r-f)*i):e=l):(ma&&(h=a*ma[0]+b*ma[2]+ma[4],b=a*ma[1]+b*ma[3]+ma[5],a=h),d=b-k,c=a-j,d<Ga&&d>-Ga&&(d=0),c<Ga&&c>-Ga&&(c=0),(Ma.lockAxis||Ma.lockedAxis)&&(c||d)&&(h=Ma.lockedAxis,h||(Ma.lockedAxis=h=Ea&&Math.abs(c)>Math.abs(d)?"y":Fa?"x":null,h&&"function"==typeof Ma.vars.onLockAxis&&Ma.vars.onLockAxis.call(Ma,Ma.pointerEvent)),"y"===h?d=0:"x"===h&&(c=0)),e=l+c*i,f=r+d*i),(ea||fa||ga)&&(Ma.x!==e||Ma.y!==f&&!za)?(ga&&(L.x=e,L.y=f,h=ga(L),e=h.x,f=h.y),ea&&(e=ea(e)),fa&&(f=fa(f))):s&&(e>w?e=w+(e-w)*m:e<y&&(e=y+(e-y)*m),za||(f>E?f=E+(f-E)*m:f<H&&(f=H+(f-H)*m))),za||ma||(e=Math.round(e),f=Math.round(f)),(Ma.x!==e||Ma.y!==f&&!za)&&(za?(Ma.endRotation=Ma.x=Ma.endX=e,ba=!0):(Fa&&(Ma.y=Ma.endY=f,ba=!0),Ea&&(Ma.x=Ma.endX=e,ba=!0)),!Ma.isDragging&&Ma.isPressed&&(Ma.isDragging=!0,ja(Ma,"dragstart","onDragStart")))},sb=function(a,c){if(h&&Ma.isPressed&&(!a||null==V||c||!(a.pointerId&&a.pointerId!==V||a.changedTouches&&!La(a.changedTouches,V)))){Ma.isPressed=!1;var f,g,i,j,k,l=a,m=Ma.isDragging,n=Ma.vars.allowContextMenu&&a&&(a.ctrlKey||a.which>2),o=b.delayedCall(.001,mb);if(la?(Ka(la,"touchend",sb),Ka(la,"touchmove",qb),Ka(la,"touchcancel",sb),Ka(t,"touchstart",Na)):Ka(t,"mousemove",qb),Ka(t,"mouseup",sb),a&&a.target&&Ka(a.target,"mouseup",sb),ba=!1,ha&&!n)return a&&(Ka(a.target,"change",sb),Ma.pointerEvent=l),Qa(Ra,!1),ja(Ma,"release","onRelease"),ja(Ma,"click","onClick"),void(ha=!1);if(R(db),!za)for(g=Ra.length;--g>-1;)ca(Ra[g],"cursor",e.cursor||"move");if(m&&(Va=K=B(),Ma.isDragging=!1),I--,a){if(C&&(a=_(a,!1)),f=a.changedTouches,f&&(a=f[0],a!==U&&a.identifier!==V)){for(g=f.length;--g>-1&&(a=f[g]).identifier!==V;);if(g<0)return}Ma.pointerEvent=l,Ma.pointerX=a.pageX,Ma.pointerY=a.pageY}return n&&l?(l.preventDefault(),l.preventManipulation&&l.preventManipulation(),ja(Ma,"release","onRelease")):l&&!m?(na&&(e.snap||e.bounds)&&ib(e.throwProps),ja(Ma,"release","onRelease"),J&&"touchmove"===l.type||l.type.indexOf("cancel")!==-1||(ja(Ma,"click","onClick"),B()-bb<300&&ja(Ma,"doubleclick","onDoubleClick"),j=l.target||l.srcElement||d,bb=B(),k=function(){bb!==va&&Ma.enabled()&&!Ma.isPressed&&(j.click?j.click():t.createEvent&&(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,Ma.pointerEvent.screenX,Ma.pointerEvent.screenY,Ma.pointerX,Ma.pointerY,!1,!1,!1,!1,0,null),j.dispatchEvent(i)))},J||l.defaultPrevented||b.delayedCall(1e-5,k))):(ib(e.throwProps),C||Ma.allowEventDefault||!l||!e.dragClickables&&ab.call(Ma,l.target)||!m||ra&&(!sa||ra!==sa)||l.cancelable===!1||(l.preventDefault(),l.preventManipulation&&l.preventManipulation()),ja(Ma,"release","onRelease")),lb()&&o.duration(Ma.tween.duration()),m&&ja(Ma,"dragend","onDragEnd"),!0}},tb=function(a){if(a&&Ma.isDragging&&!i){var b=a.target||a.srcElement||d.parentNode,c=b.scrollLeft-b._gsScrollX,e=b.scrollTop-b._gsScrollY;(c||e)&&(ma?(j-=c*ma[0]+e*ma[2],k-=e*ma[3]+c*ma[1]):(j-=c,k-=e),b._gsScrollX+=c,b._gsScrollY+=e,rb(Ma.pointerX,Ma.pointerY))}},ub=function(a){var b=B(),c=b-bb<40,d=b-Va<40,e=c&&va===bb,f=!!a.preventDefault,g=Ma.pointerEvent&&Ma.pointerEvent.defaultPrevented,h=c&&wa===bb,i=a.isTrusted||null==a.isTrusted&&c&&e;return f&&(e||d&&Ma.vars.suppressClickOnDrag!==!1)&&a.stopImmediatePropagation(),!c||Ma.pointerEvent&&Ma.pointerEvent.defaultPrevented||e&&i===h?void((Ma.isPressed||d||c)&&(f?i&&a.detail&&c&&!g||(a.preventDefault(),a.preventManipulation&&a.preventManipulation()):a.returnValue=!1)):(i&&e&&(wa=bb),void(va=bb))},vb=function(a){return ma?{x:a.x*ma[0]+a.y*ma[2]+ma[4],y:a.x*ma[1]+a.y*ma[3]+ma[5]}:{x:a.x,y:a.y}};da=Ta.get(this.target),da&&da.kill(),this.startDrag=function(a,b){var c,e,f,g;pb(a||Ma.pointerEvent,!0),b&&!Ma.hitTest(a||Ma.pointerEvent)&&(c=Xa(a||Ma.pointerEvent),e=Xa(d),f=vb({x:c.left+c.width/2,y:c.top+c.height/2}),g=vb({x:e.left+e.width/2,y:e.top+e.height/2}),j-=f.x-g.x,k-=f.y-g.y),Ma.isDragging||(Ma.isDragging=!0,ja(Ma,"dragstart","onDragStart"))},this.drag=qb,this.endDrag=function(a){sb(a||Ma.pointerEvent,!0)},this.timeSinceDrag=function(){return Ma.isDragging?0:(B()-Va)/1e3},this.timeSinceClick=function(){return(B()-bb)/1e3},this.hitTest=function(a,b){return Ta.hitTest(Ma.target,a,b)},this.getDirection=function(a,b){var c,d,e,f,h,i,j="velocity"===a&&g?a:"object"!=typeof a||za?"start":"element";return"element"===j&&(h=Xa(Ma.target),i=Xa(a)),c="start"===j?Ma.x-l:"velocity"===j?g.getVelocity(this.target,Aa):h.left+h.width/2-(i.left+i.width/2),za?c<0?"counter-clockwise":"clockwise":(b=b||2,d="start"===j?Ma.y-r:"velocity"===j?g.getVelocity(this.target,Da):h.top+h.height/2-(i.top+i.height/2),e=Math.abs(c/d),f=e<1/b?"":c<0?"left":"right",e<b&&(""!==f&&(f+="-"),f+=d<0?"up":"down"),f)},this.applyBounds=function(a){var b,c,f,g,h,i;if(a&&e.bounds!==a)return e.bounds=a,Ma.update(!0);if(eb(!0),fb(),s){if(b=Ma.x,c=Ma.y,b>w?b=w:b<y&&(b=y),c>E?c=E:c<H&&(c=H),(Ma.x!==b||Ma.y!==c)&&(f=!0,Ma.x=Ma.endX=b,za?Ma.endRotation=b:Ma.y=Ma.endY=c,ba=!0,db(!0),Ma.autoScroll&&!Ma.isDragging))for($(d.parentNode),g=d,M.scrollTop=null!=window.pageYOffset?window.pageYOffset:null!=u.scrollTop?u.scrollTop:t.body.scrollTop,M.scrollLeft=null!=window.pageXOffset?window.pageXOffset:null!=u.scrollLeft?u.scrollLeft:t.body.scrollLeft;g&&!i;)i=Y(g.parentNode),h=i?M:g.parentNode,Fa&&h.scrollTop>h._gsMaxScrollY&&(h.scrollTop=h._gsMaxScrollY),Ea&&h.scrollLeft>h._gsMaxScrollX&&(h.scrollLeft=h._gsMaxScrollX),g=h;Ma.isThrowing&&(f||Ma.endX>w||Ma.endX<y||Ma.endY>E||Ma.endY<H)&&ib(e.throwProps,f)}return Ma},this.update=function(a,b,c){var e=Ma.x,f=Ma.y;return jb(!b),a?Ma.applyBounds():(ba&&c&&db(!0),eb(!0)),b&&(rb(Ma.pointerX,Ma.pointerY),ba&&db(!0)),Ma.isPressed&&!b&&(Ea&&Math.abs(e-Ma.x)>.01||Fa&&Math.abs(f-Ma.y)>.01&&!za)&&kb(),Ma.autoScroll&&($(d.parentNode),Wa=Ma.isDragging,db(!0)),Ma.autoScroll&&(X(d,tb),W(d,tb)),Ma},this.enable=function(a){var f,j,k;if("soft"!==a){for(j=Ra.length;--j>-1;)k=Ra[j],Ja(k,"mousedown",pb),Ja(k,"touchstart",pb),Ja(k,"click",ub,!0),za||ca(k,"cursor",e.cursor||"move"),ca(k,"touchCallout","none"),ca(k,"touchAction",Ea===Fa?"none":Ea?"pan-y":"pan-x"),ta(k)&&ca(k.ownerSVGElement||k,"touchAction",Ea===Fa?"none":Ea?"pan-y":"pan-x"),this.vars.allowContextMenu||Ja(k,"contextmenu",cb);Qa(Ra,!1)}return W(d,tb),h=!0,g&&"soft"!==a&&g.track(i||d,ya?"x,y":za?"rotation":"top,left"),i&&i.enable(),d._gsDragID=f="d"+G++,F[f]=this,i&&(i.element._gsDragID=f),b.set(d,{x:"+=0",overwrite:!1,data:"_draggable"}),qa={t:d,data:C?S:d._gsTransform,tween:{},setRatio:C?function(){b.set(d,P)}:c._internals.setTransformRatio||c._internals.set3DTransformRatio},kb(),Ma.update(!0),Ma},this.disable=function(a){var b,c,e=Ma.isDragging;if(!za)for(b=Ra.length;--b>-1;)ca(Ra[b],"cursor",null);if("soft"!==a){for(b=Ra.length;--b>-1;)c=Ra[b],ca(c,"touchCallout",null),ca(c,"touchAction",null),Ka(c,"mousedown",pb),Ka(c,"touchstart",pb),Ka(c,"click",ub),Ka(c,"contextmenu",cb);Qa(Ra,!0),la&&(Ka(la,"touchcancel",sb),Ka(la,"touchend",sb),Ka(la,"touchmove",qb)),Ka(t,"mouseup",sb),Ka(t,"mousemove",qb)}return X(d,tb),h=!1,g&&"soft"!==a&&g.untrack(i||d,ya?"x,y":za?"rotation":"top,left"),i&&i.disable(),R(db),Ma.isDragging=Ma.isPressed=ha=!1,e&&ja(Ma,"dragend","onDragEnd"),Ma},this.enabled=function(a,b){return arguments.length?a?Ma.enable(b):Ma.disable(b):h},this.kill=function(){return Ma.isThrowing=!1,b.killTweensOf(i||d,!0,Ua),Ma.disable(),delete F[d._gsDragID],Ma},xa.indexOf("scroll")!==-1&&(i=this.scrollProxy=new Sa(d,T({onKill:function(){Ma.isPressed&&sb(null)}},e)),d.style.overflowY=Fa&&!Ha?"auto":"hidden",d.style.overflowX=Ea&&!Ha?"auto":"hidden",d=i.content),e.force3D!==!1&&b.set(d,{force3D:!0}),za?Ua.rotation=1:(Ea&&(Ua[Aa]=1),Fa&&(Ua[Da]=1)),za?(P=p,S=P.css,P.overwrite=!1):ya&&(P=Ea&&Fa?m:Ea?n:o,S=P.css,P.overwrite=!1),this.enable()},Ua=Ta.prototype=new a;Ua.constructor=Ta,Ua.pointerX=Ua.pointerY=Ua.startX=Ua.startY=Ua.deltaX=Ua.deltaY=0,Ua.isDragging=Ua.isPressed=!1,Ta.version="0.16.3",Ta.zIndex=1e3,Ja(t,"touchcancel",function(){}),Ja(t,"contextmenu",function(a){var b;for(b in F)F[b].isPressed&&F[b].endDrag()}),Ta.create=function(a,c){"string"==typeof a&&(a=b.selector(a));for(var d=a&&0!==a.length?Fa(a)?Ga(a):[a]:[],e=d.length;--e>-1;)d[e]=new Ta(d[e],c);return d},Ta.get=function(a){return F[(aa(a)||{})._gsDragID]},Ta.timeSinceDrag=function(){return(B()-K)/1e3};var Va={},Wa=function(a){var b,c,d=0,e=0;for(a=aa(a),b=a.offsetWidth,c=a.offsetHeight;a;)d+=a.offsetTop,e+=a.offsetLeft,a=a.offsetParent;return{top:d,left:e,width:b,height:c}},Xa=function(a,b){if(a===window)return Va.left=Va.top=0,Va.width=Va.right=u.clientWidth||a.innerWidth||t.body.clientWidth||0,Va.height=Va.bottom=(a.innerHeight||0)-20<u.clientHeight?u.clientHeight:a.innerHeight||t.body.clientHeight||0,Va;var c=a.pageX!==b?{left:a.pageX-V(),top:a.pageY-U(),right:a.pageX-V()+1,bottom:a.pageY-U()+1}:a.nodeType||a.left===b||a.top===b?C?Wa(a):aa(a).getBoundingClientRect():a;return c.right===b&&c.width!==b?(c.right=c.left+c.width,c.bottom=c.top+c.height):c.width===b&&(c={width:c.right-c.left,height:c.bottom-c.top,right:c.right,left:c.left,bottom:c.bottom,top:c.top}),c};return Ta.hitTest=function(a,b,c){if(a===b)return!1;var d,e,f,g=Xa(a),h=Xa(b),i=h.left>g.right||h.right<g.left||h.top>g.bottom||h.bottom<g.top;return i||!c?!i:(f=(c+"").indexOf("%")!==-1,c=parseFloat(c)||0,d={left:Math.max(g.left,h.left),top:Math.max(g.top,h.top)},d.width=Math.min(g.right,h.right)-d.left,d.height=Math.min(g.bottom,h.bottom)-d.top,!(d.width<0||d.height<0)&&(f?(c*=.01,e=d.width*d.height,e>=g.width*g.height*c||e>=h.width*h.height*c):d.width>c&&d.height>c))},D.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;",Ta},!0)}),e._gsDefine&&e._gsQueue.pop()(),function(b){"use strict";var d=function(){return(e.GreenSockGlobals||e)[b]};"undefined"!=typeof c&&c.exports&&(a("9"),a("8"),c.exports=d())}("Draggable")}(a("6"))}),a.registerDynamic("9",["6"],!0,function(a,b,c){var d=this||self;!function(a){!function(a,b){"use strict";var d={},e=a.document,f=a.GreenSockGlobals=a.GreenSockGlobals||a;if(f.TweenLite)return f.TweenLite;var g,h,i,j,k,l=function(a){var b,c=a.split("."),d=f;for(b=0;b<c.length;b++)d[c[b]]=d=d[c[b]]||{};return d},m=l("com.greensock"),n=1e-10,o=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},p=function(){},q=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),r={},s=function(a,e,g,h){this.sc=r[a]?r[a].sc:[],r[a]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(j){for(var k,m,n,o,p=e.length,q=p;--p>-1;)(k=r[e[p]]||new s(e[p],[])).gsClass?(i[p]=k.gsClass,q--):j&&k.sc.push(this);if(0===q&&g){if(m=("com.greensock."+a).split("."),n=m.pop(),o=l(m.join("."))[n]=this.gsClass=g.apply(g,i),h&&(f[n]=d[n]=o,"undefined"!=typeof c&&c.exports))if(a===b){c.exports=d[b]=o;for(p in d)o[p]=d[p]}else d[b]&&(d[b][n]=o);for(p=0;p<this.sc.length;p++)this.sc[p].check()}},this.check(!0)},t=a._gsDefine=function(a,b,c,d){return new s(a,b,c,d)},u=m._class=function(a,b,c){return b=b||function(){},t(a,[],function(){return b},c),b};t.globals=f;var v=[0,0,1,1],w=u("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?v.concat(b):v},!0),x=w.map={},y=w.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,k=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?u("easing."+f,null,!0):m.easing[f]||{},g=k.length;--g>-1;)h=k[g],x[f+"."+h]=x[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(i=w.prototype,i._calcEnd=!1,i.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:a<.5?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:a<.5?d/2:1-d/2},g=["Linear","Quad","Cubic","Quart","Quint,Strong"],h=g.length;--h>-1;)i=g[h]+",Power"+h,y(new w(null,null,1,h),i,"easeOut",!0),y(new w(null,null,2,h),i,"easeIn"+(0===h?",easeNone":"")),y(new w(null,null,3,h),i,"easeInOut");x.linear=m.easing.Linear.easeIn,x.swing=m.easing.Quad.easeInOut;var z=u("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});i=z.prototype,i.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,h=this._listeners[a],i=0;for(this!==j||k||j.wake(),null==h&&(this._listeners[a]=h=[]),g=h.length;--g>-1;)f=h[g],f.c===b&&f.s===c?h.splice(g,1):0===i&&f.pr<e&&(i=g+1);h.splice(i,0,{c:b,s:c,up:d,pr:e})},i.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},i.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,b>1&&(e=e.slice(0)),c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var A=a.requestAnimationFrame,B=a.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},D=C();for(g=["ms","moz","webkit","o"],h=g.length;--h>-1&&!A;)A=a[g[h]+"RequestAnimationFrame"],B=a[g[h]+"CancelAnimationFrame"]||a[g[h]+"CancelRequestAnimationFrame"];u("Ticker",function(a,b){var c,d,f,g,h,i=this,l=C(),m=!(b===!1||!A)&&"auto",o=500,q=33,r="tick",s=function(a){var b,e,j=C()-D;j>o&&(l+=j-q),D+=j,i.time=(D-l)/1e3,b=i.time-h,(!c||b>0||a===!0)&&(i.frame++,h+=b+(b>=g?.004:g-b),e=!0),a!==!0&&(f=d(s)),e&&i.dispatchEvent(r)};z.call(i),i.time=i.frame=0,i.tick=function(){s(!0)},i.lagSmoothing=function(a,b){return arguments.length?(o=a||1/n,void(q=Math.min(b,o,0))):o<1/n},i.sleep=function(){null!=f&&(m&&B?B(f):clearTimeout(f),d=p,f=null,i===j&&(k=!1))},i.wake=function(a){null!==f?i.sleep():a?l+=-D+(D=C()):i.frame>10&&(D=C()-o+5),d=0===c?p:m&&A?A:function(a){return setTimeout(a,1e3*(h-i.time)+1|0)},i===j&&(k=!0),s(2)},i.fps=function(a){return arguments.length?(c=a,g=1/(c||60),h=this.time+g,void i.wake()):c},i.useRAF=function(a){return arguments.length?(i.sleep(),m=a,void i.fps(c)):m},i.fps(a),setTimeout(function(){"auto"===m&&i.frame<5&&"hidden"!==(e||{}).visibilityState&&i.useRAF(!1)},1500)}),i=m.Ticker.prototype=new m.events.EventDispatcher,i.constructor=m.Ticker;var E=u("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,Y){k||j.wake();var c=this.vars.useFrames?X:Y;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});j=E.ticker=new m.Ticker,i=E.prototype,i._dirty=i._gc=i._initted=i._paused=!1,i._totalTime=i._time=0,i._rawPrevTime=-1,i._next=i._last=i._onUpdate=i._timeline=i.timeline=null,i._paused=!1;var F=function(){k&&C()-D>2e3&&("hidden"!==(e||{}).visibilityState||!j.lagSmoothing())&&j.wake();var a=setTimeout(F,2e3);a.unref&&a.unref()};F(),i.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},i.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},i.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},i.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},i.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},i.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},i.render=function(a,b,c){},i.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},i.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime(!0))>=c&&a<c+this.totalDuration()/this._timeScale-1e-7},i._enabled=function(a,b){return k||j.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},i._kill=function(a,b){return this._enabled(!1,!1)},i.kill=function(a,b){return this._kill(a,b),this},i._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},i._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},i._callback=function(a){var b=this.vars,c=b[a],d=b[a+"Params"],e=b[a+"Scope"]||b.callbackScope||this,f=d?d.length:0;switch(f){case 0:c.call(e);break;case 1:c.call(e,d[0]);break;case 2:c.call(e,d[0],d[1]);break;default:c.apply(e,d)}},i.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=q(c)&&c.join("").indexOf("{self}")!==-1?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},i.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},i.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},i.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},i.totalTime=function(a,b,c){if(k||j.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(a<0&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===a&&0!==this._duration||(K.length&&$(),this.render(a,b,!1),K.length&&$())}return this},i.progress=i.totalProgress=function(a,b){var c=this.duration();return arguments.length?this.totalTime(c*a,b):c?this._time/c:this.ratio},i.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},i.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},i.timeScale=function(a){if(!arguments.length)return this._timeScale;var b,c;for(a=a||n,this._timeline&&this._timeline.smoothChildTiming&&(b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime(),this._startTime=c-(c-this._startTime)*this._timeScale/a),this._timeScale=a,c=this.timeline;c&&c.timeline;)c._dirty=!0,c.totalDuration(),c=c.timeline;return this},i.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},i.paused=function(a){if(!arguments.length)return this._paused;var b,c,d=this._timeline;return a!=this._paused&&d&&(k||a||j.wake(),b=d.rawTime(),c=b-this._pauseTime,!a&&d.smoothChildTiming&&(this._startTime+=c,this._uncache(!1)),this._pauseTime=a?b:null,this._paused=a,this._active=this.isActive(),!a&&0!==c&&this._initted&&this.duration()&&(b=d.smoothChildTiming?this._totalTime:(b-this._startTime)/this._timeScale,this.render(b,b===this._totalTime,!0))),this._gc&&!a&&this._enabled(!0,!1),this};var G=u("core.SimpleTimeline",function(a){E.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});i=G.prototype=new E,i.constructor=G,i.kill()._gc=!1,i._first=i._last=i._recent=null,i._sortChildren=!1,i.add=i.insert=function(a,b,c,d){var e,f;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=this.rawTime()-(a._timeline.rawTime()-a._pauseTime)),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(f=a._startTime;e&&e._startTime>f;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._recent=a,this._timeline&&this._uncache(!0),this},i._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},i.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},i.rawTime=function(){return k||j.wake(),this._totalTime};var H=u("TweenLite",function(b,c,d){if(E.call(this,c,d),this.render=H.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:H.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?W[H.defaultOverwrite]:"number"==typeof i?i>>0:W[i],(h||b instanceof Array||b.push&&q(b))&&"number"!=typeof b[0])for(this._targets=g=o(b),
this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(o(f))):(this._siblings[e]=_(f,this,!1),1===i&&this._siblings[e].length>1&&ba(f,this,null,1,this._siblings[e])):(f=g[e--]=H.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=_(b,this,!1),1===i&&this._siblings.length>1&&ba(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-n,this.render(Math.min(0,-this._delay)))},!0),I=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},J=function(a,b){var c,d={};for(c in a)V[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!S[c]||S[c]&&S[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};i=H.prototype=new E,i.constructor=H,i.kill()._gc=!1,i.ratio=0,i._firstPT=i._targets=i._overwrittenProps=i._startAt=null,i._notifyPluginsOfEnabled=i._lazy=!1,H.version="1.20.5",H.defaultEase=i._ease=new w(null,null,1,1),H.defaultOverwrite="auto",H.ticker=j,H.autoSleep=120,H.lagSmoothing=function(a,b){j.lagSmoothing(a,b)},H.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(H.selector=c,c(b)):(e||(e=a.document),e?e.querySelectorAll?e.querySelectorAll(b):e.getElementById("#"===b.charAt(0)?b.substr(1):b):b)};var K=[],L={},M=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,N=/[\+-]=-?[\.\d]/,O=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.blob?1===a&&null!=this.end?this.end:a?this.join(""):this.start:c.c*a+c.s,c.m?b=c.m.call(this._tween,b,this._target||c.t,this._tween):b<d&&b>-d&&!c.blob&&(b=0),c.f?c.fp?c.t[c.p](c.fp,b):c.t[c.p](b):c.t[c.p]=b,c=c._next},P=function(a,b,c,d){var e,f,g,h,i,j,k,l=[],m=0,n="",o=0;for(l.start=a,l.end=b,a=l[0]=a+"",b=l[1]=b+"",c&&(c(l),a=l[0],b=l[1]),l.length=0,e=a.match(M)||[],f=b.match(M)||[],d&&(d._next=null,d.blob=1,l._firstPT=l._applyPT=d),i=f.length,h=0;h<i;h++)k=f[h],j=b.substr(m,b.indexOf(k,m)-m),n+=j||!h?j:",",m+=j.length,o?o=(o+1)%5:"rgba("===j.substr(-5)&&(o=1),k===e[h]||e.length<=h?n+=k:(n&&(l.push(n),n=""),g=parseFloat(e[h]),l.push(g),l._firstPT={_next:l._firstPT,t:l,p:l.length-1,s:g,c:("="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*parseFloat(k.substr(2)):parseFloat(k)-g)||0,f:0,m:o&&o<4?Math.round:0}),m+=k.length;return n+=b.substr(m),n&&l.push(n),l.setRatio=O,N.test(b)&&(l.end=null),l},Q=function(a,b,c,d,e,f,g,h,i){"function"==typeof d&&(d=d(i||0,a));var j,k=typeof a[b],l="function"!==k?"":b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3),m="get"!==c?c:l?g?a[l](g):a[l]():a[b],n="string"==typeof d&&"="===d.charAt(1),o={t:a,p:b,s:m,f:"function"===k,pg:0,n:e||b,m:f?"function"==typeof f?f:Math.round:0,pr:0,c:n?parseInt(d.charAt(0)+"1",10)*parseFloat(d.substr(2)):parseFloat(d)-m||0};if(("number"!=typeof m||"number"!=typeof d&&!n)&&(g||isNaN(m)||!n&&isNaN(d)||"boolean"==typeof m||"boolean"==typeof d?(o.fp=g,j=P(m,n?parseFloat(o.s)+o.c+(o.s+"").replace(/[0-9\-\.]/g,""):d,h||H.defaultStringFilter,o),o={t:j,p:"setRatio",s:0,c:1,f:2,pg:0,n:e||b,pr:0,m:0}):(o.s=parseFloat(m),n||(o.c=parseFloat(d)-o.s||0))),o.c)return(o._next=this._firstPT)&&(o._next._prev=o),this._firstPT=o,o},R=H._internals={isArray:q,isSelector:I,lazyTweens:K,blobDif:P},S=H._plugins={},T=R.tweenLookup={},U=0,V=R.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},X=E._rootFramesTimeline=new G,Y=E._rootTimeline=new G,Z=30,$=R.lazyRender=function(){var a,b=K.length;for(L={};--b>-1;)a=K[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);K.length=0};Y._startTime=j.time,X._startTime=j.frame,Y._active=X._active=!0,setTimeout($,1),E._updateRoot=H.render=function(){var a,b,c;if(K.length&&$(),Y.render((j.time-Y._startTime)*Y._timeScale,!1,!1),X.render((j.frame-X._startTime)*X._timeScale,!1,!1),K.length&&$(),j.frame>=Z){Z=j.frame+(parseInt(H.autoSleep,10)||120);for(c in T){for(b=T[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete T[c]}if(c=Y._first,(!c||c._paused)&&H.autoSleep&&!X._first&&1===j._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||j.sleep()}}},j.addEventListener("tick",E._updateRoot);var _=function(a,b,c){var d,e,f=a._gsTweenID;if(T[f||(a._gsTweenID=f="t"+U++)]||(T[f]={target:a,tweens:[]}),b&&(d=T[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return T[f].tweens},aa=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=H.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},ba=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;f<i;f++)if((h=e[f])!==b)h._gc||h._kill(null,a,b)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+n,l=[],m=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||ca(b,0,o),0===ca(h,j,o)&&(l[m++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(l[m++]=h)));for(f=m;--f>-1;)if(h=l[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!aa(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},ca=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&f-b<2*n?n:(f+=a.totalDuration()/a._timeScale/e)>b+n?0:f-b-n};i._init=function(){var a,b,c,d,e,f,g=this.vars,h=this._overwrittenProps,i=this._duration,j=!!g.immediateRender,k=g.ease;if(g.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in g.startAt)e[d]=g.startAt[d];if(e.data="isStart",e.overwrite=!1,e.immediateRender=!0,e.lazy=j&&g.lazy!==!1,e.startAt=e.delay=null,e.onUpdate=g.onUpdate,e.onUpdateParams=g.onUpdateParams,e.onUpdateScope=g.onUpdateScope||g.callbackScope||this,this._startAt=H.to(this.target||{},0,e),j)if(this._time>0)this._startAt=null;else if(0!==i)return}else if(g.runBackwards&&0!==i)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(j=!1),c={};for(d in g)V[d]&&"autoCSS"!==d||(c[d]=g[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=j&&g.lazy!==!1,c.immediateRender=j,this._startAt=H.to(this.target,0,c),j){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=k=k?k instanceof w?k:"function"==typeof k?new w(k,g.easeParams):x[k]||H.defaultEase:H.defaultEase,g.easeParams instanceof Array&&k.config&&(this._ease=k.config.apply(k,g.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(f=this._targets.length,a=0;a<f;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],h?h[a]:null,a)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,h,0);if(b&&H._onPluginEvent("_onInitAllProps",this),h&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),g.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=g.onUpdate,this._initted=!0},i._initProps=function(b,c,d,e,f){var g,h,i,j,k,l;if(null==b)return!1;L[b._gsTweenID]&&$(),this.vars.css||b.style&&b!==a&&b.nodeType&&S.css&&this.vars.autoCSS!==!1&&J(this.vars,b);for(g in this.vars)if(l=this.vars[g],V[g])l&&(l instanceof Array||l.push&&q(l))&&l.join("").indexOf("{self}")!==-1&&(this.vars[g]=l=this._swapSelfInParams(l,this));else if(S[g]&&(j=new S[g])._onInitTween(b,this.vars[g],this,f)){for(this._firstPT=k={_next:this._firstPT,t:j,p:"setRatio",s:0,c:1,f:1,n:g,pg:1,pr:j._priority,m:0},h=j._overwriteProps.length;--h>-1;)c[j._overwriteProps[h]]=this._firstPT;(j._priority||j._onInitAllProps)&&(i=!0),(j._onDisable||j._onEnable)&&(this._notifyPluginsOfEnabled=!0),k._next&&(k._next._prev=k)}else c[g]=Q.call(this,b,g,"get",l,g,0,null,this.vars.stringFilter,f);return e&&this._kill(e,b)?this._initProps(b,c,d,e,f):this._overwrite>1&&this._firstPT&&d.length>1&&ba(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e,f)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(L[b._gsTweenID]=!0),i)},i.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i-1e-7&&a>=0)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete",c=c||this._timeline.autoRemoveChildren),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(j<0||a<=0&&a>=-1e-7||j===n&&"isPause"!==this.data)&&j!==a&&(c=!0,j>n&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:n);else if(a<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0)&&(e="onReverseComplete",d=this._reversed),a<0&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(j!==n||"isPause"!==this.data)&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:n)),(!this._initted||this._startAt&&this._startAt.progress())&&(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),1===l?this.ratio=1-k:2===l?this.ratio=k:a/i<.5?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,K.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,!0,c):e||(e="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==i||b||this._callback("onStart"))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(a<0&&this._startAt&&a!==-1e-4&&this._startAt.render(a,!0,c),b||(this._time!==h||d||c)&&this._callback("onUpdate")),e&&(this._gc&&!c||(a<0&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,!0,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this._callback(e),0===i&&this._rawPrevTime===n&&g!==n&&(this._rawPrevTime=0)))}},i._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:H.selector(b)||b;var d,e,f,g,h,i,j,k,l,m=c&&this._time&&c._startTime===this._startTime&&this._timeline===c._timeline;if((q(b)||I(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d],c)&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(H.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if((l||!a)&&!aa(this,c,b,l))return!1}for(f in j)(g=h[f])&&(m&&(g.f?g.t[g.p](g.s):g.t[g.p]=g.s,i=!0),g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},i.invalidate=function(){return this._notifyPluginsOfEnabled&&H._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],E.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-n,this.render(Math.min(0,-this._delay))),this},i._enabled=function(a,b){if(k||j.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=_(d[c],this,!0);else this._siblings=_(this.target,this,!0)}return E.prototype._enabled.call(this,a,b),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&H._onPluginEvent(a?"_onEnable":"_onDisable",this)},H.to=function(a,b,c){return new H(a,b,c)},H.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new H(a,b,c)},H.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new H(a,b,d)},H.delayedCall=function(a,b,c,d,e){return new H(b,0,{delay:a,onComplete:b,onCompleteParams:c,callbackScope:d,onReverseComplete:b,onReverseCompleteParams:c,immediateRender:!1,lazy:!1,useFrames:e,overwrite:0})},H.set=function(a,b){return new H(a,0,b)},H.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:H.selector(a)||a;var c,d,e,f;if((q(a)||I(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(H.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else if(a._gsTweenID)for(d=_(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d||[]},H.killTweensOf=H.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=H.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var da=u("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=da.prototype},!0);if(i=da.prototype,da.version="1.19.0",da.API=2,i._firstPT=null,i._addTween=Q,i.setRatio=O,i._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},i._mod=i._roundProps=function(a){for(var b,c=this._firstPT;c;)b=a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")],b&&"function"==typeof b&&(2===c.f?c.t._applyPT.m=b:c.m=b),c=c._next},H._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},da.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===da.API&&(S[(new a[b])._propName]=a[b]);return!0},t.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},g=u("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){da.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new da(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,da.activate([g]),g},g=a._gsQueue){for(h=0;h<g.length;h++)g[h]();for(i in r)r[i].func||a.console.log("GSAP encountered missing dependency: "+i)}k=!1}("undefined"!=typeof c&&c.exports&&"undefined"!=typeof d?d:this||window,"TweenLite")}(a("6"))}),a.registerDynamic("b",["9"],!0,function(a,b,c){"format cjs";var d=this||self,e="undefined"!=typeof c&&c.exports&&"undefined"!=typeof d?d:this||window;(e._gsQueue||(e._gsQueue=[])).push(function(){"use strict";var a=(e.document||{}).documentElement,b=e,c=function(c,d){var e="x"===d?"Width":"Height",f="scroll"+e,g="client"+e,h=document.body;return c===b||c===a||c===h?Math.max(a[f],h[f])-(b["inner"+e]||a[g]||h[g]):c[f]-c["offset"+e]},d=function(a){return"string"==typeof a&&(a=TweenLite.selector(a)),a.length&&a!==b&&a[0]&&a[0].style&&!a.nodeType&&(a=a[0]),a===b||a.nodeType&&a.style?a:null},f=function(c,d){var e="scroll"+("x"===d?"Left":"Top");return c===b&&(null!=c.pageXOffset?e="page"+d.toUpperCase()+"Offset":c=null!=a[e]?a:document.body),function(){return c[e]}},g=function(c,e){var g=d(c).getBoundingClientRect(),h=document.body,i=!e||e===b||e===h,j=i?{top:a.clientTop-(window.pageYOffset||a.scrollTop||h.scrollTop||0),left:a.clientLeft-(window.pageXOffset||a.scrollLeft||h.scrollLeft||0)}:e.getBoundingClientRect(),k={x:g.left-j.left,y:g.top-j.top};return!i&&e&&(k.x+=f(e,"x")(),k.y+=f(e,"y")()),k},h=function(a,b,d){var e=typeof a;return isNaN(a)?"number"===e||"string"===e&&"="===a.charAt(1)?a:"max"===a?c(b,d):Math.min(c(b,d),g(a,b)[d]):parseFloat(a)},i=e._gsDefine.plugin({propName:"scrollTo",API:2,global:!0,version:"1.9.1",init:function(a,c,d){return this._wdw=a===b,this._target=a,this._tween=d,"object"!=typeof c?(c={y:c},"string"==typeof c.y&&"max"!==c.y&&"="!==c.y.charAt(1)&&(c.x=c.y)):c.nodeType&&(c={y:c,x:c}),this.vars=c,this._autoKill=c.autoKill!==!1,this.getX=f(a,"x"),this.getY=f(a,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=c.x?(this._addTween(this,"x",this.x,h(c.x,a,"x")-(c.offsetX||0),"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=c.y?(this._addTween(this,"y",this.y,h(c.y,a,"y")-(c.offsetY||0),"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(a){this._super.setRatio.call(this,a);var d=this._wdw||!this.skipX?this.getX():this.xPrev,e=this._wdw||!this.skipY?this.getY():this.yPrev,f=e-this.yPrev,g=d-this.xPrev,h=i.autoKillThreshold;this.x<0&&(this.x=0),this.y<0&&(this.y=0),this._autoKill&&(!this.skipX&&(g>h||g<-h)&&d<c(this._target,"x")&&(this.skipX=!0),!this.skipY&&(f>h||f<-h)&&e<c(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?b.scrollTo(this.skipX?d:this.x,this.skipY?e:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),j=i.prototype;i.max=c,i.getOffset=g,i.buildGetter=f,i.autoKillThreshold=7,j._kill=function(a){return a.scrollTo_x&&(this.skipX=!0),a.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,a)}}),e._gsDefine&&e._gsQueue.pop()(),function(b){"use strict";var d=function(){return(e.GreenSockGlobals||e)[b]};"undefined"!=typeof c&&c.exports&&(a("9"),c.exports=d())}("ScrollToPlugin")}),a.registerDynamic("c",[],!0,function(a,b,c){"format cjs";this||self;!function(a){a.fn.serializeObject=function(){"use strict";var b={},c=function(c,d){var e=b[d.name];"undefined"!=typeof e&&null!==e?a.isArray(e)?e.push(d.value):b[d.name]=[e,d.value]:b[d.name]=d.value};return a.each(this.serializeArray(),c),b}}(jQuery)}),a.registerDynamic("d",["c"],!0,function(a,b,c){this||self;c.exports=a("c")}),a.registerDynamic("e",[],!0,function(a,b,c){"format cjs";this||self;(function(){var a,b;a=this.jQuery||window.jQuery,b=a(window),a.fn.stick_in_parent=function(c){var d,e,f,g,h,i,j,k,l,m,n,o;for(null==c&&(c={}),l=c.sticky_class,f=c.inner_scrolling,k=c.recalc_every,j=c.parent,h=c.offset_top,g=c.spacer,e=c.bottoming,null==h&&(h=0),null==j&&(j=void 0),null==f&&(f=!0),null==l&&(l="is_stuck"),d=a(document),null==e&&(e=!0),i=function(a){var b;return window.getComputedStyle?(a=window.getComputedStyle(a[0]),b=parseFloat(a.getPropertyValue("width"))+parseFloat(a.getPropertyValue("margin-left"))+parseFloat(a.getPropertyValue("margin-right")),"border-box"!==a.getPropertyValue("box-sizing")&&(b+=parseFloat(a.getPropertyValue("border-left-width"))+parseFloat(a.getPropertyValue("border-right-width"))+parseFloat(a.getPropertyValue("padding-left"))+parseFloat(a.getPropertyValue("padding-right"))),b):a.outerWidth(!0)},m=function(c,m,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C,D,E;if(!c.data("sticky_kit")){if(c.data("sticky_kit",!0),x=d.height(),z=c.parent(),null!=j&&(z=z.closest(j)),!z.length)throw"failed to find stick parent";if(t=v=!1,(D=null!=g?g&&c.closest(g):a("<div />"))&&D.css("position",c.css("position")),A=function(){var a,b,e;if(!s&&(x=d.height(),a=parseInt(z.css("border-top-width"),10),b=parseInt(z.css("padding-top"),10),m=parseInt(z.css("padding-bottom"),10),n=z.offset().top+a+b,o=z.height(),v&&(t=v=!1,null==g&&(c.insertAfter(D),D.detach()),c.css({position:"",top:"",width:"",bottom:""}).removeClass(l),e=!0),p=c.offset().top-(parseInt(c.css("margin-top"),10)||0)-h,q=c.outerHeight(!0),r=c.css("float"),D&&D.css({width:i(c),height:q,display:c.css("display"),"vertical-align":c.css("vertical-align"),float:r}),e))return E()},A(),q!==o)return w=void 0,y=h,C=k,E=function(){var a,i,j,u;if(!s&&(j=!1,null!=C&&(--C,0>=C&&(C=k,A(),j=!0)),j||d.height()===x||A(),j=b.scrollTop(),null!=w&&(i=j-w),w=j,v?(e&&(u=j+q+y>o+n,t&&!u&&(t=!1,c.css({position:"fixed",bottom:"",top:y}).trigger("sticky_kit:unbottom"))),j<p&&(v=!1,y=h,null==g&&("left"!==r&&"right"!==r||c.insertAfter(D),D.detach()),a={position:"",width:"",top:""},c.css(a).removeClass(l).trigger("sticky_kit:unstick")),f&&(a=b.height(),q+h>a&&!t&&(y-=i,y=Math.max(a-q,y),y=Math.min(h,y),v&&c.css({top:y+"px"})))):j>p&&(v=!0,a={position:"fixed",top:y},a.width="border-box"===c.css("box-sizing")?c.outerWidth()+"px":c.width()+"px",c.css(a).addClass(l),null==g&&(c.after(D),"left"!==r&&"right"!==r||D.append(c)),c.trigger("sticky_kit:stick")),v&&e&&(null==u&&(u=j+q+y>o+n),!t&&u)))return t=!0,"static"===z.css("position")&&z.css({position:"relative"}),c.css({position:"absolute",bottom:m,top:"auto"}).trigger("sticky_kit:bottom")},B=function(){return A(),E()},u=function(){if(s=!0,b.off("touchmove",E),b.off("scroll",E),b.off("resize",B),a(document.body).off("sticky_kit:recalc",B),c.off("sticky_kit:detach",u),c.removeData("sticky_kit"),c.css({position:"",bottom:"",top:"",width:""}),z.position("position",""),v)return null==g&&("left"!==r&&"right"!==r||c.insertAfter(D),D.remove()),c.removeClass(l)},b.on("touchmove",E),b.on("scroll",E),b.on("resize",B),a(document.body).on("sticky_kit:recalc",B),c.on("sticky_kit:detach",u),setTimeout(E,0)}},n=0,o=this.length;n<o;n++)c=this[n],m(a(c));return this}}).call(this)}),a.registerDynamic("f",[],!0,function(a,b,c){"format cjs";this||self;!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,d){"use strict";function e(a){return" "===a||"\t"===a||"\n"===a||"\f"===a||"\r"===a}function f(b,c){var d=new a.Image;return d.onerror=function(){B[b]=!1,ca()},d.onload=function(){B[b]=1===d.width,ca()},d.src=c,"pending"}function g(){N=!1,Q=a.devicePixelRatio,O={},P={},t.DPR=Q||1,R.width=Math.max(a.innerWidth||0,A.clientWidth),R.height=Math.max(a.innerHeight||0,A.clientHeight),R.vw=R.width/100,R.vh=R.height/100,s=[R.height,R.width,Q].join("-"),R.em=t.getEmValue(),R.rem=R.em}function h(a,b,c,d){var e,f,g,h;return"saveData"===C.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function i(a){var b,c=t.getSet(a),d=!1;"pending"!==c&&(d=s,c&&(b=t.setRes(c),t.applySetCandidate(b,a))),a[t.ns].evaled=d}function j(a,b){return a.res-b.res}function k(a,b,c){var d;return!c&&b&&(c=a[t.ns].sets,c=c&&c[c.length-1]),d=l(b,c),d&&(b=t.makeUrl(b),a[t.ns].curSrc=b,a[t.ns].curCan=d,d.res||ba(d,d.set.sizes)),d}function l(a,b){var c,d,e;if(a&&b)for(e=t.parseSet(b),a=t.makeUrl(a),c=0;c<e.length;c++)if(a===t.makeUrl(e[c].url)){d=e[c];break}return d}function m(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;c<d;c++)e=g[c],e[t.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function n(a,b){function c(b){var c,d=b.exec(a.substring(m));if(d)return c=d[0],m+=c.length,c}function d(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),Y.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Z.test(j)&&"x"===i?((a||c||d)&&(m=!0),l<0?m=!0:c=l):Y.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(U),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(e(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void d();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void d();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void d();i+=k}else if("after descriptor"===j)if(e(k));else{if(""===k)return void d();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(V),m>=l)return n;g=c(W),h=[],","===g.slice(-1)?(g=g.replace(X,""),d()):f()}}function o(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var d,f="",g=[],h=[],i=0,j=0,k=!1;;){if(d=a.charAt(j),""===d)return b(),c(),h;if(k){if("*"===d&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(e(d)){if(a.charAt(j-1)&&e(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}d=" "}else if("("===d)i+=1;else if(")"===d)i-=1;else{if(","===d){b(),c(),j+=1;continue}if("/"===d&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=d,j+=1}}}function c(a){return!!(k.test(a)&&parseFloat(a)>=0)||(!!l.test(a)||("0"===a||"-0"===a||"+0"===a))}var d,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,d=0;d<g;d++)if(h=f[d],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),t.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var p,q,r,s,t={},u=!1,v=function(){},w=b.createElement("img"),x=w.getAttribute,y=w.setAttribute,z=w.removeAttribute,A=b.documentElement,B={},C={algorithm:""},D="data-pfsrc",E=D+"set",F=navigator.userAgent,G=/rident/.test(F)||/ecko/.test(F)&&F.match(/rv\:(\d+)/)&&RegExp.$1>35,H="currentSrc",I=/\s+\+?\d+(e\d+)?w/,J=/(\([^)]+\))?\s*(.+)/,K=a.picturefillCFG,L="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",M="font-size:100%!important;",N=!0,O={},P={},Q=a.devicePixelRatio,R={px:1,in:96},S=b.createElement("a"),T=!1,U=/^[ \t\n\r\u000c]+/,V=/^[, \t\n\r\u000c]+/,W=/^[^ \t\n\r\u000c]+/,X=/[,]+$/,Y=/^\d+$/,Z=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,$=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},_=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},aa=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=_(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in O))if(O[b]=!1,d&&(e=b.match(a)))O[b]=e[1]*R[e[2]];else try{O[b]=new Function("e",c(b))(R)}catch(a){}return O[b]}}(),ba=function(a,b){return a.w?(a.cWidth=t.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ca=function(a){if(u){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||t.qsa(f.context||b,f.reevaluate||f.reselect?t.sel:t.selShort),e=c.length){for(t.setupRun(f),T=!0,d=0;d<e;d++)t.fillImg(c[d],f);t.teardownRun(f)}}};p=a.console&&console.warn?function(a){console.warn(a)}:v,H in w||(H="src"),B["image/jpeg"]=!0,B["image/gif"]=!0,B["image/png"]=!0,B["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),t.ns=("pf"+(new Date).getTime()).substr(0,9),t.supSrcset="srcset"in w,t.supSizes="sizes"in w,t.supPicture=!!a.HTMLPictureElement,t.supSrcset&&t.supPicture&&!t.supSizes&&!function(a){w.srcset="data:,a",a.src="data:,a",t.supSrcset=w.complete===a.complete,t.supPicture=t.supSrcset&&t.supPicture}(b.createElement("img")),t.supSrcset&&!t.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(t.supSizes=!0),r=t.supSrcset&&!t.supSizes,u=!0,setTimeout(ca)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():u=!0,t.selShort="picture>img,img[srcset]",t.sel=t.selShort,t.cfg=C,t.DPR=Q||1,t.u=R,t.types=B,t.setSize=v,t.makeUrl=_(function(a){return S.href=a,S.href}),t.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},t.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?t.matchesMedia=function(a){return!a||matchMedia(a).matches}:t.matchesMedia=t.mMQ,t.matchesMedia.apply(this,arguments)},t.mMQ=function(a){return!a||aa(a)},t.calcLength=function(a){var b=aa(a,!0)||!1;return b<0&&(b=!1),b},t.supportsType=function(a){return!a||B[a]},t.parseSize=_(function(a){var b=(a||"").match(J);return{media:b&&b[1],length:b&&b[2]}}),t.parseSet=function(a){return a.cands||(a.cands=n(a.srcset,a)),a.cands},t.getEmValue=function(){var a;if(!q&&(a=b.body)){var c=b.createElement("div"),d=A.style.cssText,e=a.style.cssText;c.style.cssText=L,A.style.cssText=M,a.style.cssText=M,a.appendChild(c),q=c.offsetWidth,a.removeChild(c),q=parseFloat(q,10),A.style.cssText=d,a.style.cssText=e}return q||16},t.calcListLength=function(a){if(!(a in P)||C.uT){var b=t.calcLength(o(a));P[a]=b?b:R.width}return P[a]},t.setRes=function(a){var b;if(a){b=t.parseSet(a);for(var c=0,d=b.length;c<d;c++)ba(b[c],a.sizes)}return b},t.setRes.res=ba,t.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,g,i,l,m,n,o=b[t.ns],p=t.DPR;if(i=o.curSrc||b[H],l=o.curCan||k(b,i,a[0].set),l&&l.set===a[0].set&&(n=G&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(g=l))),!g)for(a.sort(j),f=a.length,g=a[f-1],d=0;d<f;d++)if(c=a[d],c.res>=p){e=d-1,g=a[e]&&(n||i!==t.makeUrl(c.url))&&h(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}g&&(m=t.makeUrl(g.url),o.curSrc=m,o.curCan=g,m!==i&&t.setSrc(b,g),t.setSize(b))}},t.setSrc=function(a,b){var c;a.src=b.url,
"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},t.getSet=function(a){var b,c,d,e=!1,f=a[t.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&t.matchesMedia(c.media)&&(d=t.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},t.parseSets=function(a,b,c){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[t.ns];(j.src===d||c.src)&&(j.src=x.call(a,"src"),j.src?y.call(a,D,j.src):z.call(a,D)),(j.srcset===d||c.srcset||!t.supSrcset||a.srcset)&&(e=x.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,m(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:x.call(a,"sizes")},j.sets.push(f),g=(r||j.src)&&I.test(j.srcset||""),g||!j.src||l(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=d,j.supported=!(i||f&&!t.supSrcset||g&&!t.supSizes),h&&t.supSrcset&&!j.supported&&(e?(y.call(a,E,e),a.srcset=""):z.call(a,E)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==t.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},t.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[t.ns]||(a[t.ns]={}),c=a[t.ns],(d||c.evaled!==s)&&(c.parsed&&!b.reevaluate||t.parseSets(a,a.parentNode,b),c.supported?c.evaled=s:i(a))},t.setupRun=function(){T&&!N&&Q===a.devicePixelRatio||g()},t.supPicture?(ca=v,t.fillImg=v):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(t.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;f<b?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=A.clientHeight,i=function(){N=Math.max(a.innerWidth||0,A.clientWidth)!==R.width||A.clientHeight!==h,h=A.clientHeight,N&&t.fillImgs()};$(a,"resize",g(i,99)),$(b,"readystatechange",e)}(),t.picturefill=ca,t.fillImgs=ca,t.teardownRun=v,ca._=t,a.picturefillCFG={pf:t,push:function(a){var b=a.shift();"function"==typeof t[b]?t[b].apply(t,a):(C[b]=a[0],T&&t.fillImgs({reselect:!0}))}};for(;K&&K.length;)a.picturefillCFG.push(K.shift());a.picturefill=ca,"object"==typeof c&&"object"==typeof c.exports?c.exports=ca:"function"==typeof d&&define.amd&&define("picturefill",function(){return ca}),t.supPicture||(B["image/webp"]=f("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document)}),a.registerDynamic("10",["f"],!0,function(a,b,c){this||self;c.exports=a("f")}),a.registerDynamic("11",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){const b=jQuery(document),c=jQuery("body");b.mousemove(function(){c.removeClass("keyboard-nav")}),b.keydown(function(){c.addClass("keyboard-nav")})}(this),e()}),a.registerDynamic("12",[],!0,function(a,b,c){function d(a,b,c){function d(){function d(){c||(f=a.apply(h,g)),e=null}var g=arguments,h=this;return e?clearTimeout(e):c&&(f=a.apply(h,g)),e=setTimeout(d,b),f}var e,f;return d.cancel=function(){clearTimeout(e)},d}this||self;c.exports=d}),a.register("13",["12"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default}],execute:function(){c=function(a,c){if(!c)throw new Error("no namespace provided to broadcast events");return this.els={},this.$page=jQuery(a),this.data={delta:0,direction:"down",directionChanged:!1,pos:null},this.bind=function(){this.binded||(this.binded=!0,this.$page.on("scroll",this.scroll.bind(this)),window===a&&jQuery(window).on("resize",b(this.resize.bind(this),150)))},this.dom=function(){this.data.width=window===a?window.innerWidth:a.clientWidth,this.data.height=window===a?window.innerHeight:a.clientHeight},this.init=function(){this.dom(),this.bind()},this.getPos=function(){return{direction:this.data.direction,pos:this.data.pos}},this.getSize=function(){return{height:this.data.height,width:this.data.width}},this.resize=function(){var b=window===a?window.innerWidth:a.clientWidth,c=window===a?window.innerHeight:a.clientHeight,d={height:!1,width:!1};b!==this.data.width&&(d.width=b),c!==this.data.height&&(d.height=c),APP.pubsub.publish("resize",d),this.data.height=c,this.data.width=b},this.scroll=function(){var a=this,b="down",d=document.documentElement.scrollTop||document.body.scrollTop;this.data.pos!==d&&(clearTimeout(this.scrollStopTimeout),this.scrollStopTimeout=setTimeout(function(){APP.pubsub.publish("scrollStop",a.data)},200),this.data.pos>d&&(b="up"),b===this.data.direction?(this.data.delta+=Math.abs(this.data.pos-d),this.data.directionChanged=!1):(this.data.delta=0,this.data.directionChanged=!0),this.data.direction=b,this.data.pos=d,APP.pubsub.publishSync(["scroll",c].join("."),{direction:this.data.direction,directionChanged:this.data.directionChanged,pos:this.data.pos,delta:this.data.delta}))},this.unbind=function(){this.binded=!1,this.$page.off("scroll",this.scroll.bind(this))},this.init(),{getPos:this.getPos.bind(this),getSize:this.getSize.bind(this),start:this.bind.bind(this),stop:this.unbind.bind(this),data:this.data,sizeChanged:this.resize.bind(this)}},a("default",c)}}}),a.register("14",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,[{key:"bind",value:function(){var a=this;APP.pubsub.subscribe("newsletter.submit.error",this.trackNewsletterError.bind(this)),APP.pubsub.subscribe("newsletter.submit.success",this.trackNewsletterWithStore.bind(this)),APP.pubsub.subscribe("newsletter.show.tray.overlay",this.trackNewsletterWithStore.bind(this)),APP.pubsub.subscribe("newsletter.exit.policy",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("newsletter.show.tray.footer",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("newsletter.submit.form",this.trackNewsletterGeneric.bind(this)),APP.pubsub.subscribe("analytics-open-tray-subscribe",function(){a.trackNewsletterWithStore.bind(a)})}},{key:"trackNewsletterError",value:function(a,b){var c=this;b.forEach(function(a){c.pushNewsletterEvent({eventaction:"subscriptionKO",eventlabel:"Email-"+a})})}},{key:"trackNewsletterWithStore",value:function(a,b){if(void 0!==b){var c=b.get("currentCountry"),d=b.get("currentLanguage"),e={pagetype:"newsletter",virtualpageuri:"/"+c+"/"+d+"/newsletter/"};switch(a){case"newsletter.submit.success":e.eventaction="subscriptionOK",e.virtualpageuri+="subscription_confirmation";break;case"newsletter.show.tray.overlay":e.eventaction="newsletter_overlay",e.virtualpageuri+="subscribe";break;default:return}this.pushNewsletterEvent(e)}}},{key:"trackNewsletterGeneric",value:function(a){var b={};switch(a){case"newsletter.show.tray.footer":b={eventaction:"subscription",eventlabel:"subscribe_button"};break;case"newsletter.submit.form":b={eventaction:"newsletter_overlay",eventlabel:"subscribe_button"};break;case"newsletter.exit.policy":b={eventaction:"newsletter_overlay",eventlabel:"privacy_policy"};break;default:return}this.pushNewsletterEvent(b)}},{key:"pushNewsletterEvent",value:function(a){a.event="uaevent",a.eventcategory="newsletter",dataLayer.push(a)}}]),a}(),a("default",d)}}}),a.register("15",["3","4","14","16","17","18","19","1a","1b","1c","1d","1e","1f"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a}],execute:function(){"use strict";o="#hermes-account-subscribe-form-captcha",p=function(){function a(){c(this,a),this.SUBSCRIBE_URL="/newsletter",this.FORM_ID="#hermes-account-subscribe-form",this.$notification=jQuery(".notification"),this.$newsletterFormProfile=jQuery(".newsletter-block"),this.form=jQuery(this.FORM_ID),this.formHelpers=new h,this.init()}return b(a,[{key:"init",value:function(){this.$el=jQuery("#tray-subscribe"),this.newsletterTrayForm=jQuery("#hermes-account-subscribe-form");var a=new k;a.init({form:this.$el.find("form").get(0)}),this.tray=new e({$el:this.$el,name:"tray-subscribe",showOverlay:!0}),this.newsletterBlockValidator=new j({inputs:this.$newsletterFormProfile.find("input")}),this.validator=new j({inputs:this.newsletterTrayForm[0].querySelectorAll("[name]")}),this.analyticsNewsletter=new d,this.analyticsNewsletter.bind(),this.currentUser=g.get("user"),this.userAccountEmailValue=null,this.currentUser&&(this.userAccountEmailValue=this.currentUser.email),this.bind()}},{key:"bind",value:function(){this.$notification.on("click",".subscribe-again",this.notificationSubscribeAgain.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.form.on("submit",this.submitNewsLetterTrayForm.bind(this)),APP.pubsub.subscribe("newsletter.hide",this.hideBlock.bind(this)),APP.pubsub.subscribe("newsletter.init",this.initProfileNewsletterForm.bind(this)),APP.pubsub.subscribe("newsletter.profile.load.email",this.prefillEmail.bind(this)),APP.pubsub.subscribe("imNotARobotNewsletter",this.validator.removeErrorMessageInPageTitle.bind(this.validator,o)),APP.pubsub.subscribe("imNotARobotNewsletterExpired",l.throwErrorReCaptcha.bind(this,jQuery(o))),APP.pubsub.subscribe("imNotARobotNewsletterExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,o)),this.analyticsBind()}},{key:"analyticsBind",value:function(){jQuery("#page-footer").find("[data-track-newsletter-footer]").on("click",function(){APP.pubsub.publish("newsletter.show.tray.footer")}),this.$el.find("[data-track-newsletter-privacy-policy]").on("click",function(){APP.pubsub.publish("newsletter.exit.policy")})}},{key:"_onTrayOpen",value:function(){APP.pubsub.publish("newsletter.show.tray.overlay",g),f.hideLoaderButton("loader-newsletter-tray"),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-subscribe-form"]&&window.grecaptcha.reset(),this.form.find("input[type=radio][name=subject_list]").removeAttr("checked");var a={formId:this.FORM_ID};i(m.ACTIVATE_CAPTCHA_URL,a,"GET").done(function(b){return b.error?void f.technicalError():(l.generateReCaptcha(b,a.formId),void f.hideOverlay())}).fail(function(){return f.technicalError()}),this.catchRecaptchaPopup()}},{key:"catchRecaptchaPopup",value:function(){var a=new MutationObserver(function(a,b){var c=jQuery(".g-recaptcha-bubble-arrow").length;if(c)return jQuery(".g-recaptcha-bubble-arrow").parent().addClass("captcha-popup"),void b.disconnect()});a.observe(document.body,{childList:!0})}},{key:"initProfileNewsletterForm",value:function(){var a=this;this.mainBlockWrapper=jQuery(".block-profile"),this.newsletterBlock=jQuery(".newsletter-block"),this.newsletterForm=this.newsletterBlock.find("form"),this.emailField=this.newsletterForm.find("input.newsletter-email"),this.prefillEmail(),0!==this.newsletterBlock.length&&(this.newsletterForm.on("submit",this.submitNewsletterRequestLoggedin.bind(this)),this.newsletterBlock.on("blur","input",function(b){a.testNewsletterField(a.newsletterBlockValidator,b)}))}},{key:"testNewsletterField",value:function(a,b){a.updateRequired({elements:[b.currentTarget],required:!0}),a.changeHandler(b)}},{key:"submitNewsLetterTrayForm",value:function(a){return a.preventDefault(),f.showLoaderButton("loader-newsletter-tray"),APP.pubsub.publish("newsletter.submit.form"),this.honeypot=this.newsletterTrayForm.find("input#passwordNewsletter"),this.honeypot&&this.honeypot.val()?(f.showMessage({message:Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError,messageVariables:Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError.variables}),void f.hideLoaderButton("loader-newsletter-tray")):(l.validateRecaptcha(this.form.attr("id"))||(jQuery("#"+this.form.attr("id")+"-captcha").addClass("validation-error"),this.validator.showErrorMessageInPageTitle(jQuery("#"+this.form.attr("id")+"-captcha"))),void(this.newsletterTrayForm[0].checkValidity()&&l.validateRecaptcha(this.form.attr("id"))?(this.postData=this.newsletterTrayForm.serializeObject(),this.postData.country_id=g.get("currentCountry"),i(this.SUBSCRIBE_URL,this.postData).done(this.handleSuccessResponse.bind(this,"tray")).fail(this.handleErrorResponse.bind(this))):(this.validator.runTests(a),f.hideLoaderButton("loader-newsletter-tray"),APP.pubsub.publish("newsletter.submit.error",this.validator.messageBag))))}},{key:"submitNewsletterRequestLoggedin",value:function(a){a.preventDefault(),f.showLoaderButton("loader-newsletter-tray"),this.newsletterBlockValidator.updateRequired({elements:this.newsletterBlock.find("input"),required:!0}),this.newsletterBlockValidator.runTests(),this.newsletterBlock.find(".error-newsletter").length||(this.emailField.val()!==this.userAccountEmailValue?this.postData={country_id:this.currentUser.country_id,email:this.emailField.val()}:this.postData={country_id:this.currentUser.country_id,email:this.currentUser.email,firstname:this.currentUser.firstname,lastname:this.currentUser.lastname,postcode:this.currentUser.postcode,prefix:this.currentUser.prefix},i(this.SUBSCRIBE_URL,this.postData).done(this.handleSuccessResponse.bind(this,"profile")).fail(this.handleErrorResponse.bind(this)))}},{key:"handleSuccessResponse",value:function(a,b){var c=g.get("user");b.error?this.handleErrorResponse(b):(APP.pubsub.publish("newsletter.submit.success",g),n.showNotification("tray-subscribe","newsletter","success")),this.userAccountEmailValue===this.postData.email?(this.$newsletterFormProfile.find(".form-email").val(""),jQuery("[id*=edit-newsletter]").prop("checked",!0),"profile"===a&&document.querySelector(".block-profile").classList.remove("not-subscribed"),c.newsletter_subscription=g.get("currentStore"),g.set("user",c),g.set("newsletterStatus","subscribed"),APP.pubsub.publish("profile.update.message.newsletter")):this.$newsletterFormProfile.find(".form-email").val("")}},{key:"handleErrorResponse",value:function(a){var b=a.error?a.error.internal_code:void 0,c=Drupal.settings.hermes_translations.notification.account.createAccountCodes;if(b===m.ERRORCODE.emailNewsletterInvalid){var d={message:c[m.ERRORCODE.emailInvalid],messageVariables:{email:this.postData.email},type:"critical"};jQuery.extend(d.messageVariables,c[m.ERRORCODE.emailInvalid].variables)}n.showNotification("tray-subscribe","newsletter")}},{key:"toggleTray",value:function(){this.tray.isOpen?this.tray.close():this.tray.open()}},{key:"hideBlock",value:function(){this.mainBlockWrapper&&this.mainBlockWrapper.removeClass("not-subscribed")}},{key:"prefillEmail",value:function(){(this.userAccountEmailValue||this.emailField&&!this.userAccountEmailValue)&&this.emailField.val(this.userAccountEmailValue)}},{key:"notificationSubscribeAgain",value:function(a){a.preventDefault(),f.hideOverlay(),this.emailField.focus()}}]),a}(),a("default",p)}}}),a.register("20",["17","18","19","21","1b","1d"],function(a){"use strict";function b(a,b){var i=void 0;this.init=function(){i=jQuery("#hermes-account-login-form"),this.$emailField=b.find("#login-email"),this.$phoneCodeField=b.find("input[name=phonecode]"),this.$phoneNumberField=b.find("input[name=loginphone]"),this.$passwordField=b.find("#login-password"),this.$signInLink=b.find(".sign-in-cta"),this.$wechatSocialLogin=b.find(".wechat-social-login"),this.$createAccountCta=jQuery(".js-create-account"),this.formHelpers=new e,h.isWechatInApp()?(jQuery('[data-track="data-track-account-create-button"]').on("click",function(){d.deleteItem("user_sms_bp")}),this.wechatSocialHelpers=new f,this.wechatSocialHelpers.init("#tray-account")):this.$wechatSocialLogin.hide(),this.validator=new g({inputs:i[0].querySelectorAll("[name]")}),this.bind()},this.bind=function(){i.length>0&&(h.needPhoneLogin()?(b.find("input[type=tel]").on("keypress",this.checkInputNumberBeforeSubmitYunpian.bind(this)),i.on("submit",this.submitLoginFormYunpian.bind(this))):i.on("submit",this.submitLoginForm.bind(this))),this.$signInLink.on("click",this.focusEmailInput.bind(this)),i.find(".show-password").on("click",this.formHelpers.showPasswordMask.bind(this)),jQuery(document).on("click.tray-account.data-api",function(){APP.pubsub.publish("account.passwordField.hide")}).on("click.tray-account.data-api","#hermes-account-login-form",function(a){a.stopPropagation(),APP.pubsub.publish("account.passwordField.show")}).on("focus",".login-tray-email",function(a){a.stopPropagation(),APP.pubsub.publish("account.passwordField.show")}),this.$emailField.on("blur",this.formHelpers.checkEmailInput.bind(this)).on("keypress",this.formHelpers.reCheckErrorEmailInput.bind(this)),this.$createAccountCta.on("click",this.setRegistrationContent.bind(this))},this.focusEmailInput=function(a){void 0!==a&&"click"===a.type&&a.preventDefault(),this.$emailField.focus()},this.setRegistrationContent=function(a){jQuery(a.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&d.set("registerContext","checkout")},this.submitLoginForm=function(a){var b=void 0;if(a.preventDefault(),i[0].checkValidity())if(this.$emailField.val())if(this.$passwordField.val()){APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),c.showLoaderButton("loader-sign-in-tray");var e={locale:d.get("currentStore"),email:this.$emailField.val(),pass:this.$passwordField.val()};jQuery(a.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&(b="checkout"),APP.pubsub.publish("account.login.call",{serverReqData:e,$loginForm:i,$emailField:this.$emailField,$passwordField:this.$passwordField,source:b})}else this.$passwordField.addClass("error");else this.$emailField.addClass("error"),this.focusEmailInput();else this.validator.runTests(a)},this.checkInputNumberBeforeSubmitYunpian=function(a){return a.metaKey||a.which<=0||8===a.which||/[0-9]/.test(String.fromCharCode(a.which))},this.submitLoginFormYunpian=function(a){var b=void 0;if(a.preventDefault(),i[0].checkValidity())if(this.$phoneCodeField.val())if(this.$phoneNumberField.val())if(this.$passwordField.val()){APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),c.showLoaderButton("loader-sign-in-tray");var e={locale:d.get("currentStore"),phonecode:this.$phoneCodeField.val(),phonenumber:this.$phoneNumberField.val(),pass:this.$passwordField.val()};jQuery(a.currentTarget).parents(".tray-content").hasClass("loggedout-checkout")&&(b="checkout"),APP.pubsub.publish("account.login.call",{serverReqData:e,$loginForm:i,$phoneCodeField:this.$phoneCodeField,$phoneNumberField:this.$phoneNumberField,$passwordField:this.$passwordField,source:b})}else this.$passwordField.addClass("error");else this.$phoneNumberField.addClass("error");else this.$phoneCodeField.addClass("error");else this.validator.runTests(a)},this.init()}var c,d,e,f,g,h;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",b)}}}),a.register("22",["16","18","19","20","23","24","1d"],function(a){"use strict";function b(){var a=document.querySelector(".tray-account-content-wrapper");this.init=function(){this.$el=jQuery("#tray-account"),this.login=new f(jQuery,this.$el),this.formHelper=new e,i.needSmsProvider()&&(this.smsHelpers=new g,this.smsHelpers.init("#tray-account")),this.toggleTrayState(),this.tray=new c({$el:this.$el,name:"tray-account",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.account.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.account.refresh",this.refreshTray.bind(this)),this.tray.addEventListener("openOne",this.toggleTrayState.bind(this)),this.tray.addEventListener("open",this.toggleTrayState.bind(this)),jQuery(".notification").on("click",".js-notification-signin-hash",function(){APP.pubsub.publish("account.notification.signInReload")}),jQuery(".account-signed-out").on("click",".js-forgot-password",this.initForgotPassword.bind(this)),jQuery(".notification").on("click",".js-forgot-password",this.initForgotPassword.bind(this)),this.$el.on("click",".logout-user",function(a){a.preventDefault(),APP.pubsub.publish("account.logout")})},this.initForgotPassword=function(a){a.preventDefault();var b={name:"tray-forgotpassword"};i.needPhoneLogin()?(b.phoneCode=jQuery("#edit-phonecode--2").val(),b.loginPhone=jQuery("#edit-loginphone--3").val()):b.email=jQuery("#login-email").val(),APP.trayController.triggerTray(b)},jQuery(".alert-link").on("click",function(){h.hideScrollbar();var a=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-help",trayData:void 0}});window.parent.dispatchEvent(a)}),this.toggleTrayState=function(){this.$el.hasClass("loggedout-checkout")&&this.$el.removeClass("loggedout-checkout"),d.get("checkUserSessionToken")?(a.classList.add("account-signed-in"),a.classList.remove("account-signed-out")):(a.classList.remove("account-signed-in"),a.classList.add("account-signed-out"),d.get("returningUser")?a.classList.add("returning-user"):a.classList.remove("returning-user"),this.formHelper.clearForm(jQuery("#hermes-account-login-form")))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.refreshTray=function(){this.openTray()},this.openTray=function(){this.toggleTrayState(),this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.init()}var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.TrayUtils},function(a){i=a.default}],execute:function(){a("default",b)}}}),a.register("25",["16","17","18","26","27","1e","1a"],function(a){"use strict";function b(){var a="/basket";this.init=function(){this.$el=jQuery("#tray-cart"),this.$cartItemsWrap=this.$el.find("#cart-content"),this.remove=!1,this.tray=new c({$el:this.$el,name:"tray-cart",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.cart.open",this.openTray.bind(this)),APP.pubsub.subscribe("tray.cart.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("cart.update",this.updateCart.bind(this)),APP.pubsub.subscribe("account.loggedout.DOM",this.clearCart.bind(this)),APP.pubsub.subscribe("tray.cart.reset.variable",this.resetRemoveVariable.bind(this)),this.$el.on("click","#open-checkout",this._onProceedToCheckoutClick.bind(this)),this.$el.on("click",".save-for-later",this.saveForLater.bind(this)),this.$el.on("click",".product-quantity-update",this.changeCartQuantity.bind(this)),this.$el.on("click",".delete",this.removeProduct.bind(this)),this.$el.on("click",".cart-continue-shopping",this.continueShopping)},this.openTray=function(){this.tray.isOpen||(this.tray.open(),"tray-cart"===this.tray.name&&APP.pubsub.publish("analytics.cart-event",e.get("user")))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.continueShopping=function(a){a.preventDefault(),this.toggleTray()},this.resetRemoveVariable=function(){this.remove=!1},this.updateCart=function(a,b){var c=!!b.cartChange&&b.cartChange;if(b.basket){var d=b.error&&b.error.internal_code;if(d===h.ERRORCODE.outOfStock||d===h.ERRORCODE.notInStock)return this.errorData=b.error,document.body.classList.remove("in-stock"),this.cartData=b.basket,void this.render(c);this.errorData=d===h.ERRORCODE.notInStock?d:null,this.previousCartData=this.cartData,this.cartData=b.basket,this.cartData.locale=Drupal.settings.hermes_url_locale,this.cartData!==this.previousCartData&&(this.render(c),this.toggleContents(),this.previousCartData=this.cartData)}},this.items=function(){return this.previousCartData&&this.cartData.total_items<this.previousCartData.total_items&&this.previousCartData.items.length>this.cartData.items.length?f.items(this.previousCartData,this.errorData,this.alreadyProcessed):f.items(this.cartData,this.errorData,this.remove)},this.notification=function(){this.cartData.total_items>this.previousCartData.total_items&&(jQuery(".cart-tray").hasClass("invisible")||d.showCartNotification(Drupal.settings.hermes_translations.notification.cart.addSuccess)),this.cartData.total_items<this.previousCartData.total_items&&d.showCartNotification(Drupal.settings.hermes_translations.notification.cart.removeSuccess)},this.productAnimation=function(){this.previousCartData.items&&this.cartData.items.length>this.previousCartData.items.length&&this.handleProductAnimation(this.cartData,this.previousCartData,!0),this.previousCartData.items.length>this.cartData.items.length&&this.handleProductAnimation(this.previousCartData,this.cartData,!1)},this.handleProductAnimation=function(a,b,c){var d=a.items.filter(function(a){return 0===b.items.filter(function(b){return b.sku===a.sku}).length}),e=d[0].sku_trim;e.indexOf("/")>=0&&(e=e.replace("/","\\/"));var f=jQuery("#"+e);return c?void f.addClass("product-cart-visible"):(f.addClass("product-cart-hidden"),void setTimeout(function(){return f.remove()},3e3))},this.render=function(a){var b=void 0,c=void 0,d=void 0,g=e.get("user")||{};switch(g.basket?(d=f.summary(g.basket),c=g.basket.total_items||0):(d=f.summary(this.cartData),c=this.cartData&&this.cartData.total_items||0),c){case 0:b=Drupal.settings.hermes_translations.ui.cart.accessibility.cartEmpty;break;case 1:b=" "+Drupal.settings.hermes_translations.ui.cart.accessibility.cartSingle;break;default:b=" "+Drupal.settings.hermes_translations.ui.cart.accessibility.cartPlural}this.$cartItemsWrap.html([this.items(),d]),jQuery("#open-cart .header-count").text(c||""),jQuery("#accessibility-header-cart-count").text(b),e.set("total_items",c),this.previousCartData?(this.notification(),this.productAnimation()):1===c&&a&&(this.previousCartData={total_items:0,items:{}},this.notification(),this.productAnimation()),this.focusOnOriginButton(),this.toggleContents()},this.focusOnOriginButton=function(){if(j.attr("data-position-focus")&&"0"!==j.attr("data-quantity-focus")){var a=j.attr("data-position-focus"),b=j.attr("data-element-focus");return void jQuery("#cart-content li:nth-child("+a+")").find('button[data-modifier = "'+b+'"]').focus()}jQuery("#tray-cart .button-tray").focus()},this.toggleContents=function(){var a=this.$el.find("#cart-status"),b=!!jQuery(".page-order, .page-commander").length;switch(this.cartData.total_items){case 0:this.$el.removeClass("has-content"),a.html(Drupal.settings.hermes_translations.ui.cart.count_empty);break;case 1:this.$el.addClass("has-content"),a.text(Drupal.settings.hermes_translations.ui.cart.count_single);break;default:this.$el.addClass("has-content");var c=g.render(Drupal.settings.hermes_translations.ui.cart.count_plural,{number:this.cartData.total_items});a.text(c)}b&&this.$el.removeClass("has-content"),f.excludedMaterialMessage(this.cartData)},this.clearCart=function(a,b){b&&"loginFail"===b.reason||(this.cartData={total_items:0,items:0},this.render(!1),this.toggleContents())},this.saveForLater=function(a){var b=a.currentTarget.dataset.sku;b.length&&APP.pubsub.publish("saveForLater",{sku:b})},this.changeCartQuantity=function(a){var b=a.currentTarget,c=b.parentNode.querySelector("#product-quantity"),d=+b.dataset.modifier,e=c.dataset.sku,f=c.dataset.step*d,g=+c.textContent+f,h=0,i=c.dataset.max,k=jQuery(b).closest("li").index()+1,l=jQuery(b).attr("data-modifier"),m={sku:e,qty:g,image:c.dataset.image};g>i||!e||(d===-1&&g>=h?0===g?(m.qty=+c.textContent,this.alreadyProcessed=!this.remove,this.remove=!0,APP.pubsub.publish("removeProduct",m)):(this.remove=!1,document.body.classList.add("in-stock"),APP.pubsub.publish("updateCart",m)):1===d&&(this.remove=!1,APP.pubsub.publish("updateCart",m)),j.attr("data-position-focus",k).attr("data-element-focus",l),j.attr("data-quantity-focus",g))},this.removeProduct=function(a){a.preventDefault(),document.body.classList.add("in-stock"),this.alreadyProcessed=!this.remove,this.remove=!0;var b=a.currentTarget,c=b.parentNode.querySelector("#product-quantity"),d={qty:+c.textContent,sku:c.dataset.sku,image:c.dataset.image};APP.pubsub.publish("removeProduct",d),j.attr("data-quantity-focus","0")},this.checkout=function(){d.showLoaderButton("loader-button-continue-checkout"),i(a,{},"GET").done(this.testAvailability.bind(this)).fail(this.fail)},this._onProceedToCheckoutClick=function(a){a.preventDefault(),a.stopPropagation(),window.location.pathname.split("checkout").length>1?this.toggleTray():(APP.pubsub.publish("tray.checkout",a),jQuery(".validation-error").removeClass("validation-error"),jQuery(".error-message").removeClass("error-message"),jQuery(".error").removeClass("error"),this.checkout())},this.testAvailability=function(a){var b=void 0,c={},f=a.basket&&a.basket.items.length;if(d.hideLoaderButton("loader-button-continue-checkout"),f<1){if(e.get("user")&&e.get("user").basket.items.length>1){var g=e.get("user");g.basket=a.basket,e.set("user",g),APP.pubsub.publish("cart.update",{basket:e.get("user").basket}),APP.pubsub.publish("gtm.basket",{basket:e.get("user").basket});var h={message:Drupal.settings.hermes_translations.notification.checkout.emptyCart,type:"critical"};d.showMessage(h)}}else if(b=jQuery.grep(a.basket.items,function(a){return a.has_error}),b.length||jQuery(".cart-product-infos .cart-stock-error").length){var i=Drupal.settings.hermes_translations.notification.cart,j=void 0;a.basket.items[0].stock&&(j=jQuery.grep(a.basket.items,function(a){return a.stock&&a.stock.is_empty})),c.message=j.length?i.incrementProblems:i.stockProblems,d.showMessage(c),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:c.message.description}),document.querySelector("#tray").scrollTop=0,this.cartData=a.basket,this.render(!1)}else this.handleUserStatus()},this.handleUserStatus=function(){e.get("isConnected")?window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/":(d.hideOverlay(),APP.trayController.triggerTray({name:"tray-create-profile"}),APP.pubsub.publish("tray.create-account.prepare"))},this.fail=function(){d.technicalError()},this.init()}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){j=jQuery("#cart-content"),a("default",b)}}}),a.register("28",["17","18","29","2d","1b","1c","1a","1e","1d","2a","2b","2c"],function(a){function b(a){"use strict";var b="/customer",l=jQuery("select#edit-district-bis-id--2").children("option:selected").text(),m="#hermes-account-edit-profile-form",o="#hermes-account-create-form",s={},t=!1;this.init=function(){if(this.page=a.page,this.form=document.querySelector(a.form),this.$form=jQuery(this.form),this.$form.trigger("reset"),r="register"===Drupal.settings.hermes_global.pageType?"#hermes-account-create-form-captcha":"#hermes-account-edit-form-captcha",a.secondaryForm&&(this.$secondaryForm=jQuery(a.secondaryForm),this.validatorSecondForm=new g({inputs:this.$secondaryForm.find("[name]")})),this.$notification=jQuery(".notification"),this._namePrefix=a.namePrefix,this._idPrefix=a.idPrefix||"edit",!this.form)throw new Error("Profile update form cant be found");this.validator=new g({inputs:this.form.querySelectorAll("[name]")});var b=new h;if(b.init({form:this.form}),this.bind(),("mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country)&&""===jQuery(o).find('input[name="city"]').val()){var c={mo:"Macau",hk:"Hong Kong"};jQuery(o).find('input[name="city"]').val(c[Drupal.settings.hermes_current_country])}},this.bind=function(){this.$form.find('[name*="country_id"]').on("change",this.validator.resetErrors.bind(this.validator),function(){k.isChina()&&p.checkChineseForm(this.form),k.needStateDistrictFields(this.value)&&q.checkForm(this.form)}),this.$form.on("submit",this.submitForm.bind(this)),this.$notification.on("click",".notification-signin",this.notificationSignIn.bind(this)),
this.$notification.on("click",".notification-createaccount",this.notificationCreateAccount.bind(this)),this.$notification.on("click",".notification-createaccount-form",this.notificationCreateAccountForm.bind(this)),this.$notification.on("click",".link-create-account-profile",this.notificationViewProfile),APP.pubsub.subscribe("account.sms.banned",this.disabledSmsButton),APP.pubsub.subscribe("imNotARobotProfile",this.validator.removeErrorMessageInPageTitle.bind(this.validator,r)),APP.pubsub.subscribe("imNotARobotProfileExpired",k.throwErrorReCaptcha.bind(this,jQuery(r))),APP.pubsub.subscribe("imNotARobotProfileExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,r))},this.submitForm=function(a){var d=this;a.preventDefault();var h=new g({inputs:this.form.querySelectorAll("input, select, textarea")}),p=jQuery(".form-email"),q=jQuery(".form-item-loginphone-input");p[0]&&h.removeError(p[0]),q[0]&&h.removeError(q[0]),s={};var t=["#"+this._idPrefix+"-newsletter","#"+this._idPrefix+"newsletter","#edit-newsletter--2","#edit-newsletter--3"],u=!!t.find(function(a){return d.$form.find(a).prop("checked")}),v=u?Drupal.settings.hermes_locale:null;if(!k.validateRecaptcha(this.$form.attr("id"))){var w=jQuery(r);w.addClass("validation-error"),this.validator.showErrorMessageInPageTitle(w)}var x=this.$form.find(".validation-error").length>0;this.$secondaryForm&&(this.$secondaryForm.find(".error-message").remove(),this.validatorSecondForm.runTests(a),x=x||this.$secondaryForm.find(".validation-error:visible").length>0);var y=this.$form.get(0).querySelector("input[name=street1]"),z=this.validator.testField(y);if(z.length&&(x=!0),this.form.checkValidity()&&k.validateRecaptcha(this.$form.attr("id"))&&!x){var A=function(){var g=d.$form.serializeObject(),p=g.confirm_password;if(p&&""!==p)return c.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.honeyPotError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.honeyPotError.variables}),{v:void 0};var q=g.year&&g.month&&g.day?{year:g.year,month:g.month,day:g.day}:null;if(q){d.validator.checkDate(a);var r=jQuery(".tray-edit-profile-visible"),t=jQuery(".dob-wrapper"),u=new Date(q.year,q.month,q.day),w=new Date;if(r.length>0&&"1900"===q.year&&h.throwError({input:t[0],error:Drupal.settings.hermes_translations.validation.dob_format}),u>w||u.getFullYear()<w.getFullYear()-j.LIMIT_AGE_USER)return d.validator.runTests(a),{v:void 0}}if(d.$secondaryForm){var x=d.$secondaryForm.serializeObject();jQuery.extend(g,x)}k.needSmsProvider()&&g.phonecode&&g.loginphone&&(g.phonecode=g.phonecode.split(" ").join(""),g.loginphone=g.loginphone.split(" ").join("")),f(g).filter(function(a){return a.includes(d._namePrefix)}).forEach(function(a){g[a.replace(d._namePrefix,"")]=g[a],delete g[a]}),jQuery.extend(s,g,{dob:q,newsletter_subscription:v,action:"create"===d.page?"create":"edit"}),c.showLoaderButton("loader-button-create-address"),s.postcode=e(g.country_id,s.postcode),s.formId="#"+jQuery(a.currentTarget).attr("id"),jQuery(m).length>0&&(l=jQuery(m).find('select[name="district_bis_id"]').find(":selected").text()),jQuery(o).length>0&&(l=jQuery(o).find('select[name="district_bis_id"]').find(":selected").text()),k.assignValues(s,l),i(b,s).done(d.success.bind(d)).fail(d.handleErrorResponse.bind(d)),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-create-form"]&&window.grecaptcha.reset(),d.$secondaryForm&&"hermes-account-checkout-email-form"===d.$secondaryForm.attr("id")?n.formSuccess("error message","2_AccountCreatedOK",window.location.pathname,Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].title,"customer",Boolean(s.newsletter_subscription)):n.formSuccess("error message","2_AccountCreatedOK",window.location.pathname,Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].title,"customer",Boolean(g.newsletter))}();if("object"==typeof A)return A.v}else this.$secondaryForm&&"hermes-account-checkout-email-form"===this.$secondaryForm.attr("id")?(n.formFail("Checkout_CreateAccount","2_AccountCreatedKO",null,null),this.$secondaryForm.each(function(a){"create-profile-create-password"===jQuery(a).attr("id")&&(d.validator.fields[d.validator.fields.length]=a)})):n.formFail("Account","2_AccountCreatedKO",null,null),this.validator.runTests(a)},this.success=function(b){var e=d.get("registerContext"),f=d.get("registerContextUrl");if(APP.pubsub.publish("profile.update.profile"),b.error)this.handleErrorResponse(b);else{c.hideLoaderButton("loader-button-create-address");var g=b.user,h=d.get("user");if(g.basket=b.basket,g.shipping_addresses=h&&h.shipping_addresses?h.shipping_addresses:void 0,d.set("user",g),d.set("isConnected",!0),d.set("checkUserSessionToken",!0),"create"===this.page)this.handleSuccessCreation(b,e,f),jQuery("#edit-submit-button").prop("disabled",!0).addClass("disabled-button");else if("profile"===this.page){a={message:Drupal.settings.hermes_translations.notification.editProfileSuccess,messageVariables:{firstname:s.firstname,lastname:s.lastname}},APP.pubsub.publish("profile.update.success",b);var i=jQuery(".block-profile"),j=jQuery(".newsletter-block").parent();null!==b.user.newsletter_subscription?(d.set("newsletterStatus","subscribed"),i.removeClass("not-subscribed"),j.removeClass("colored-background")):(d.deleteItem("newsletterStatus"),i.addClass("not-subscribed"),j.addClass("colored-background")),c.showMessage(a)}}},this.handleErrorResponse=function(b){var d=b.error?b.error.internal_code:void 0,e=Drupal.settings.hermes_translations.notification.account.createAccountCodes,f=Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].description,h=Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].descriptionPhone,i=Drupal.settings.hermes_translations.notification.account.createAccountCodes[2400001].descriptionJapan;if(APP.pubsub.publish("profile.update.profile"),c.hideLoaderButton("loader-button-create-address"),b.error&&b.error.smsErrorNumber)return c.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[b.error.smsErrorNumber]}),void(b.error.smsErrorNumber.toString()===j.ERRORCODE.smsBanned&&APP.pubsub.publish("account.sms.banned"));var k=new g({inputs:this.form.querySelectorAll("input, select, textarea")}),l=jQuery(".form-email"),m=jQuery(".form-item-loginphone-input"),n=b.responseJSON.error.internal_code;switch(n){case j.ERRORCODE.emailExist:"kr"===Drupal.settings.hermes_current_country||"tw"===Drupal.settings.hermes_current_country||"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country||"cn"===Drupal.settings.hermes_current_country?(k.throwError({input:m[0],error:h}),m[0].focus(),k.scrollToError(),jQuery("#hermes-account-create-form-error-loginphone").attr("role","alert"),jQuery("#hermes-account-create-form-error-loginphone").attr("aria-live","polite"),jQuery(".form-item-loginphone").attr("aria-hidden","true")):(k.throwError({input:l[0],error:"jp"===Drupal.settings.hermes_current_country?i:f}),l[0].focus(),k.scrollToError(),jQuery("#hermes-account-create-form-error-email").attr("role","alert"),jQuery("#hermes-account-create-form-error-email").attr("aria-live","polite"));break;case j.ERRORCODE.emailInvalid:a={message:e[d],messageVariables:{email:s.email},type:"critical"},jQuery.extend(a.messageVariables,e[d].variables),c.showMessage(a);break;case j.ERRORCODE.accountExist:a={message:e[d],type:"critical"},c.showMessage(a);break;case j.ERRORCODE.inactivity:APP.pubsub.publish("account.httpsession.expired");break;default:var o=["mo","hk"];o.indexOf(Drupal.settings.hermes_current_country)!==-1?c.technicalErrorSpecific():c.technicalError()}},this.handleSuccessCreation=function(b,c,e){var f=this;if("checkout"===c)return b.user.social&&b.user.device&&"WeChat"===b.user.device.device&&b.user.social.authorize_url?(d.set("social_login_from_checkout",!0),d.set("registerSocialContextUrl",window.location.href),void(window.location.href=b.user.social.authorize_url)):(d.deleteItem("registerContext"),void(window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/"));a={message:d.get("user_sms_bp")===!0?Drupal.settings.hermes_translations.notification.createProfileSuccessWechat:Drupal.settings.hermes_translations.notification.createProfileSuccess,messageVariables:{firstname:s.firstname,lastname:s.lastname,prefix:s.prefix}},jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.createProfileSuccess.variables);var g=k.findGetParameter("code",e)?"wechat":"create";"wechat"===g&&(d.deleteItem("user_sms_bp"),delete b.user.social,d.set("accountCreatedByWechat",!0)),b.user&&(b.user.new_account=1),APP.pubsub.publish("account.login.done",{jqXHR:b,source:g}),window.location.pathname.includes("/"+Drupal.settings.hermes_translations.url.account_create)&&setTimeout(function(){e&&!t&&(d.set("show-info-banner",!0),d.set("accountCreated",!0),window.location.href=f.removeParam("code",e)),d.deleteItem("registerContextUrl")},2e3)},this.removeParam=function(a,b){var c=b.split("?")[0],d=[],e=b.indexOf("?")!==-1?b.split("?")[1]:"";if(""!==e){d=e.split("&");for(var f=d.length-1;f>=0;f-=1){var g=d[f].split("=")[0];g===a&&d.splice(f,1)}c=c+"?"+d.join("&")}return c},this.notificationSignIn=function(a){a.preventDefault(),c.hideOverlay(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.notificationCreateAccount=function(a){a.preventDefault(),c.hideOverlay(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.notificationCreateAccountForm=function(a){a.preventDefault(),c.hideOverlay()},this.createRedirect=function(){window.location.href="/"+Drupal.settings.hermes_url_locale},this.notificationViewProfile=function(){t=!0,c.showLoader()},this.updateChineseAreas=function(a){a&&d.set(p.getChineseAreasStorageNameVariable(),a.district)},this.updateAreas=function(a){a&&d.set(q.getAreasStorageNameVariable(),a.districts)},this.disabledSmsButton=function(){var a=jQuery("#edit-send-sms-button-creation");a.addClass("disabled-input").attr("disabled","disabled"),setTimeout(function(){a.removeAttr("disabled").removeClass("disabled-input")},36e5)},this.init()}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.unformatPostcodeValue},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default}],execute:function(){"use strict";o=4e3,p=new l,q=new m,r=void 0,a("default",b)}}}),a.register("2e",[],function(a){"use strict";function b(a,b){this.initForm=function(){this.$formSubmitButton.prop("disabled",!0).addClass("disabled-input")},this.changePipaCheckbox=function(c){var d=c.data.submitButton,e=!0;b.find(".pipa-checkbox").each(function(){a(this).prop("checked")||(e=!1)}),e?d.prop("disabled",!1).removeClass("disabled-input"):d.prop("disabled",!0).addClass("disabled-input"),b.find(".pipa-all-checkbox").prop("checked",e)},this.init=function(){this.$formSubmitButton=b.find('button.button.form-submit[type="submit"]'),this.changeAllPipaCheckbox=function(c){var d=c.target;b.find(".pipa-checkbox").prop("checked",a(d).prop("checked")).trigger("change")},this.initForm(),b.find(".pipa-checkbox").on("change",{submitButton:this.$formSubmitButton},this.changePipaCheckbox),b.find(".pipa-all-checkbox").on("change",this.changeAllPipaCheckbox)}}return{setters:[],execute:function(){a("default",b)}}}),a.register("2f",["3","4","16","17","18","19","21","23","28","30","31","1b","1a","1e","1d","2a","2b","2c","2e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default}],execute:function(){"use strict";t="/available-countries",u="/login",v="#hermes-account-create-profile-form-captcha",w=function(){function a(){c(this,a),this.formID="#hermes-account-create-profile-form";var b="#hermes-account-checkout-email-form";if(this._isInitialised=!1,this.$el=jQuery("#tray-create-profile"),this.$trayTitle=jQuery("#tray-create-profile .button-tray"),this.form=this.$el.find("form"),this._emailCheckInput=jQuery("#account-checkout-email"),this._loginPasswordField=jQuery("#account-checkout-password"),this._emailCheckCreate=jQuery("#create-profile-email"),this._passwordCreateProfileField=jQuery("#create-profile-create-password"),this._phoneCodeCheckInput=this.$el.find("input[name=registredphonecode]"),this._phoneNumberCheckInput=this.$el.find("input[name=registredloginphone]"),this._createButton=jQuery("#create-profile-continue"),this._emailHolderNodes=jQuery('[data-bind="accountEmail"]'),this._wechatSocialLogin=this.$el.find(".wechat-social-login"),this._phoneHolderNodes=jQuery('[data-bind="accountPhone"]'),this.returnToEmailInput=jQuery('[data-bind="returnToEmailInput"]'),this._accountCreationForm=jQuery(this.formID),this._loginTitle=this.$el.find(".title-login"),this._requiredInformationTray=this.$el.find(".title-tray-hidden-account"),this._createAccountTitle=this.$el.find(".title-create"),this._secondaryForm=jQuery(b),this._showPassword=this._secondaryForm.find(".show-password"),this._emailCollectionFieldset=this.$el.find(".email_collection"),this._emailRegisteredFieldset=this.$el.find(".email_registered"),this._emailNotRegisteredFieldset=this.$el.find(".email_not_registered"),this.$countrySelect=this.$el.find('[name="country_id"]'),this.$formHelpers=new g,jQuery(".pipa-checkbox").length>0){var e=new s(jQuery,this._accountCreationForm);e.init()}o.needSmsProvider()&&(this.smsHelpers=new i,this.smsHelpers.init("#tray-create-profile"),this.smsHelpers.init(b)),o.isWechatInApp()?(this.wechatSocialHelpers=new h,this.wechatSocialHelpers.init(b)):this._wechatSocialLogin.hide(),this.chineseAreas=new p,this.stateDistrictFields=new q,new j({form:this.formID,secondaryForm:b,page:"create",idPrefix:"edit-create-profile-",namePrefix:"create_profile_"}),this.validator=new l({inputs:this._secondaryForm.find("[name]")}),this.tray=new d({$el:this.$el,name:"tray-create-profile",showOverlay:!0});var f=new k(this.formID);if(f.init(),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var m=jQuery("#tray-create-profile");o.setLatinCharOnly(m)}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var m=jQuery("#tray-create-profile");o.setLatinCharOnlyForUaeSa(m)}jQuery('select[musthide="yes"]').parents(".form-item").hide(),this.bind();var n=document.getElementById("strength-level-tray-create-profile"),r=document.getElementById("strength-level-tray-create-profile-span"),t={attributes:!0},u=document.getElementById("create-profile-create-password"),v=o.pwdStrengthScreenReader(n,r,u);v.observe(n,t)}return b(a,[{key:"bind",value:function(){var a=this;this._accountCreationForm.on("submit",this._onSubmitAccountCreationForm.bind(this)),this._secondaryForm.on("submit",this._onSubmitAccountLoginForm.bind(this)),this._showPassword.on("click",this.$formHelpers.showPasswordMask.bind(this)),this._createButton.on("keypress click",this._onCreateButtonClick.bind(this)),this.returnToEmailInput.on("click",this.prepareTray.bind(this)),this._emailCheckCreate.on("blur",this.$formHelpers.checkEmailInput.bind(this)).on("blur",this.propagateEmailValue.bind(this)).on("keypress",this.$formHelpers.reCheckErrorEmailInput.bind(this)),jQuery(this._loginPasswordField,this._emailCheckCreate).on("keyup change",function(){a._loginPasswordField.removeClass("error"),a._emailCheckCreate.removeClass("error")}),this._emailCheckInput.on("blur",this.$formHelpers.checkEmailInput.bind(this)).on("blur",this.propagateEmailValue.bind(this)).on("keypress",this.$formHelpers.reCheckErrorEmailInput.bind(this)),jQuery(this._loginPasswordField,this._emailCheckInput).on("keyup change",function(){a._loginPasswordField.removeClass("error"),a._emailCheckInput.removeClass("error")}),o.needSmsProvider()&&(this._phoneNumberCheckInput.on("blur",this.$formHelpers.checkPhoneInput.bind(this)).on("blur",this.propagatePhoneValue.bind(this)),this._phoneCodeCheckInput.on("blur",this.$formHelpers.checkPhoneInput.bind(this)),this._secondaryForm.find(".edit-send-sms-button").on("click",this.smsHelpers.sendSmsCode).bind(this)),this.$countrySelect.on("change",this.manageDistricts.bind(this)),APP.pubsub.subscribe("tray.create-account.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.create-account.prepare",this.prepareTray.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTray",this.validator.removeErrorMessageInPageTitle.bind(this.validator,v)),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",o.throwErrorReCaptcha.bind(this,jQuery(v))),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,v))}},{key:"manageDistricts",value:function(a){a.preventDefault(),this.stateDistrictFields.getDistricts(this.$countrySelect.val()),o.isChina()&&this.chineseAreas.checkChineseForm(this._accountCreationForm),o.needStateDistrictFields(this.$countrySelect.val())&&this.stateDistrictFields.checkForm(this._accountCreationForm)}},{key:"updateDom",value:function(a){var b=this;if(a.error)e.technicalError();else{f.set("availableCountries",a.available_countries);var c={formId:this.formID};m(n.ACTIVATE_CAPTCHA_URL,c,"GET").done(function(a){return a.error?void e.technicalError():(o.generateReCaptcha(a,b.formID),void e.hideOverlay())}).fail(function(){return e.technicalError()}),this._accountCreationForm.find("select").trigger("change")}}},{key:"propagateEmailValue",value:function(){this._emailHolderNodes.html(this._emailCheckInput.val())}},{key:"propagatePhoneValue",value:function(){this._phoneHolderNodes.html(this._phoneCodeCheckInput.val()+this._phoneNumberCheckInput.val())}},{key:"performLogin",value:function(){var a={locale:Drupal.settings.hermes_locale};m(u,a).done(this._loginDone.bind(this)).fail(this._loginError.bind(this))}},{key:"_onCreateButtonClick",value:function(a){a.preventDefault(),a.stopPropagation(),o.isChina()&&this.chineseAreas.initChineseSelect(null,null,this.form),o.needStateDistrictFields(this.form.find('[name*="country_id"]').val())&&this.stateDistrictFields.initSelect(null,null,this.form),this._emailCollectionFieldset.addClass("hidden"),this._emailRegisteredFieldset.addClass("hidden"),this._emailNotRegisteredFieldset.removeClass("hidden"),this._accountCreationForm.removeClass("hidden"),this._loginTitle.addClass("hidden"),this._requiredInformationTray.removeClass("hidden"),this._createAccountTitle.removeClass("hidden"),this.$el.attr("aria-labelledBy","title-tray-create-profile-create"),this.updateDisabledFields("create"),jQuery(".tray-close").focus(),jQuery(".validation-error").removeClass("validation-error"),jQuery(".error-message").removeClass("error-message"),jQuery(".error-create_profile_email").remove(),jQuery(".error-loginphone").find("span").empty(),jQuery(".error-message-copy").remove();var b=Drupal.settings.pathPrefix+"checkout_create_account";r.pushEvent("Checkout_CreateAccount","CreateAccountOverlay",null,b,"account")}},{key:"_onSubmitAccountCreationForm",value:function(a){a.preventDefault(),a.stopPropagation(),f.set("registerContext","checkout")}},{key:"_onSubmitAccountLoginForm",value:function(a){a.preventDefault(),a.stopPropagation();var b="checkout",c=""!==this._loginPasswordField.val(),d=!1,f=!1;if(o.needPhoneLogin()?(f=1===this._phoneNumberCheckInput.length&&this._phoneNumberCheckInput.val(),d=!0):(d=1===this._emailCheckInput.length&&this._emailCheckInput.val(),f=!0),c&&d&&f)if(e.showLoader(),o.needPhoneLogin()){var g={locale:Drupal.settings.hermes_locale,phonecode:this._phoneCodeCheckInput.val(),phonenumber:this._phoneNumberCheckInput.val(),pass:this._loginPasswordField.val()};APP.pubsub.publish("account.login.call",{serverReqData:g,$loginForm:this._secondaryForm,$phoneCodeField:this._phoneCodeCheckInput,$phoneNumberField:this._phoneNumberCheckInput,$passwordField:this._loginPasswordField,source:b})}else{var g={locale:Drupal.settings.hermes_locale,email:this._emailCheckInput.val(),pass:this._loginPasswordField.val()};APP.pubsub.publish("account.login.call",{serverReqData:g,$loginForm:this._secondaryForm,$emailField:this._emailCheckInput,$passwordField:this._loginPasswordField,source:b})}else this.validator.runTests(a),this.updateErrorFormMessageTitle(this.$el)}},{key:"fail",value:function(){e.technicalError()}},{key:"toggleTray",value:function(a,b){this.$errorMessage&&(this.$errorMessage.remove(),this.$errorMessage=!1),this.tray.isOpen?this.tray.close():b&&b.source!==n.CHECKOUT.toLowerCase()?this.prepareTray():(this.tray.open(),this.displayInlineMessage(b.errorMessage))}},{key:"_initialiseTray",value:function(){this._isInitialised=!0,this.passStrengthMeter(),this.getAvailableCountries()}},{key:"prepareTray",value:function(){if(this._isInitialised||this._initialiseTray(),this.$formHelpers.clearForm(this._accountCreationForm),this.$formHelpers.clearForm(this._secondaryForm),this._emailCollectionFieldset.removeClass("hidden"),this._emailRegisteredFieldset.addClass("hidden"),this._emailNotRegisteredFieldset.addClass("hidden"),this._accountCreationForm.addClass("hidden"),this._createAccountTitle.addClass("hidden"),this._loginTitle.removeClass("hidden"),this._requiredInformationTray.addClass("hidden"),this.$trayTitle.attr("aria-describedBy","title-tray-create-profile-login"),this.$el.attr("aria-labelledBy","title-tray-create-profile-login"),this.updateDisabledFields("collection"),("mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country)&&""===jQuery("#hermes-account-create-profile-form").find('input[name="city"]').val()){var a={mo:"Macau",hk:"Hong Kong"};jQuery("#hermes-account-create-profile-form").find('input[name="city"]').val(a[Drupal.settings.hermes_current_country])}}},{key:"getAvailableCountries",value:function(){m(t,{},"GET").done(this.updateDom.bind(this)).fail(this.fail)}},{key:"passStrengthMeter",value:function(){jQuery("#create-profile-create-password").pwdMeter({minLength:8})}},{key:"displayInlineMessage",value:function(a){var b=".error-message, .error-message-copy";this.$errorMessage=this.$el.find(b),this.$errorMessage.remove(),this._secondaryForm.before('\n      <p class="error-message-copy">\n        <svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n          <use xlink:href="#exclamation-mark"></use>\n        </svg>\n        <span class="sr-only">'+Drupal.settings.hermes_translations.validation.error_on_input_icon+"</span>\n        "+a+"\n      </p>\n    ")}},{key:"updateErrorFormMessageTitle",value:function(a){var b=jQuery("head title"),c=Drupal.settings.hermes_translations.validation.errorOnForm,d=b.text().replace(c,""),e=a.find(".validation-error:visible");e.length?(b.html(c+d),a.addClass("error-on-form")):(b.html(d),a.removeClass("error-on-form"))}},{key:"updateDisabledFields",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"collection":arguments[0];"collection"===a&&(this._emailCheckInput.prop("disabled",!1),this._loginPasswordField.prop("disabled",!1),this._emailCheckCreate.prop("disabled",!0),this._passwordCreateProfileField.prop("disabled",!0)),"create"===a&&(this._emailCheckInput.prop("disabled",!0),this._loginPasswordField.prop("disabled",!0),this._emailCheckCreate.prop("disabled",!1),this._passwordCreateProfileField.prop("disabled",!1))}}]),a}(),a("default",w)}}}),a.register("1c",["18","27","32","1e"],function(a){function b(){}var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";b.prototype.init=function(a){this.notPostCodeBis="[name*=postcode]:not([name*=postcode_bis])",this.$form=jQuery(a.form);var b=this.$form.find(".form-required");b.length>0&&(this.requiredHTML=this.$form.find(".form-required")[0].outerHTML),this.$countryInput=this.$form.find('[name*="country_id"]'),this.$countryInput.length>0&&this.$countryInput.on("change",this.changeHandler.bind(this))},b.prototype.changeHandler=function(a){var b=a.target.selectedIndex===-1?0:a.target.selectedIndex,d=void 0;d=b>0?a.target.options[b].value:c.get("currentCountry").toUpperCase();var e=Drupal.settings.hermes_account.options_countries[d],f=e.fields||{};this.localiseFields(f,d),this.localisePostcode(d),d&&this.setPostcodeMaxLength(d),this.fetchShippingRules(d,a.target)},b.prototype.localiseFields=function(a,b){var c=["day","month","year"],d=e({},f.FORM_COUNTRY_DEFAULT_FIELDS_VALUES,a);for(var g in d)if(d.hasOwnProperty(g)){var h=this.$form.find('[name*="'+g+'"]');if(!h.length)continue;var i=h.parents("fieldset");d[g]>=0?(d[g]?h[0].setAttribute(f.REQUIRED,f.REQUIRED):h[0].removeAttribute(f.REQUIRED),"region"===g&&(this.updateRegionField(h,b),h.trigger("change")),c.includes(g)&&i.hasClass("form-disabled")&&i.removeClass("form-disabled"),"regiontext"===g&&(this.updateRegionField(h,b),h.prev().find("span").remove()),h.prop("disabled")&&(h.prop("disabled",!1),h.closest(".form-item").removeClass("form-disabled"))):(h.prop(f.REQUIRED,!1),h.prop("disabled",!0),h.closest(".form-item").addClass("form-disabled"),c.includes(g)&&!i.hasClass("form-disabled")&&i.addClass("form-disabled"))}},b.prototype.localisePostcode=function(a){var b=Drupal.settings.hermes_account.options_countries[a],c=b["zip-pattern"],d=e({},f.FORM_COUNTRY_DEFAULT_FIELDS_VALUES,b.fields||{}),g=b["zip-label"]?b["zip-label"]:"postcode",h=Drupal.settings.hermes_translations.ui.formLabel[g],i=this.$form.find(this.notPostCodeBis),j=1===d.postcode;"undefined"==typeof c?i.removeAttr("pattern"):i.attr("pattern",c),i.siblings("label").html(h+" "+(j?this.requiredHTML:""))},b.prototype.setPostcodeMaxLength=function(a){var b=Drupal.settings.hermes_account.options_countries[a],c=b["zip-maxlength"]?parseInt(b["zip-maxlength"],10):5,d=this.$form.find(this.notPostCodeBis);c?d.attr("maxlength",c):d.removeAttr("maxlength")},b.prototype.updateRegionField=function(a,b){var c=window.APP.templates.regionOptions,e=Drupal.settings.hermes_account.states[b],f=Drupal.settings.hermes_account.regions_label[b],g=Drupal.settings.hermes_translations.ui.formLabel[f],h=void 0;if(e){var i=jQuery.map(e,function(a){return a});h=d.render(c,{options:i})}var j=a.html(h).closest(".container-fieldset");j.find("label").html(g+" "+this.requiredHTML)},b.prototype.fetchShippingRules=function(a,b){var e=c.get("availableCountries"),f=jQuery(b).parents(".form-item"),g=f.find(".shipping-note"),h=jQuery(b).parents("form").first().find('input[name="is_shipping_type_address"]').val();if(e&&!e.includes(a)&&"true"===h){var i=c.get("currentCountry").toUpperCase(),j=d.render(Drupal.settings.hermes_translations.ui.shipping.no_shipping,{country:Drupal.settings.hermes_translations.countries[a],current_store:i});if(g.length)g.text(j);else{var k='<p class="shipping-note"><svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n                            <use xlink:href="#exclamation-mark"></use>\n                            </svg>\n                            <span class="sr-only">'+Drupal.settings.hermes_translations.validation.error_on_input_icon+"</span>"+j+"</p>";f.find("label").after(k)}}else g.length&&g.remove()},a("default",b)}}}),a.register("33",["16","17","18","19","26","29","31","1b","1c","1a","1e","2a","2b","1d"],function(a){"use strict";function b(){var a=new n,b=new o,q="/address/add",r="/delivery/address/add",s="/address/edit",t="/address/delete",u=jQuery("select#edit-district-bis-id").children("option:selected").text();this.init=function(){var a=jQuery(".form-item-country-id");this.$el=jQuery("#tray-edit-address"),this.$form=this.$el.find("form"),this.tray=new c({$el:this.$el,name:"tray-edit-address",showOverlay:!0}),this.$form.get(0)&&(this.validator=new j({inputs:this.$form.get(0).querySelectorAll("[name]")})),this.formHelpers=new f;var b=new k;b.init({form:this.$form[0]}),a.show(),jQuery('select[musthide="yes"]').parents(".form-item").hide();var d=new i("#"+this.$form.attr("id"));if(d.init(),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var e=jQuery("#tray-edit-address");p.setLatinCharOnly(e),a.hide()}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var e=jQuery("#tray-edit-address");p.setLatinCharOnlyForUaeSa(e)}this.bind()},this.bind=function(){var a=this;APP.pubsub.subscribe("tray.editAddress.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.editAddress.state",this.setTrayState.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.clearForm.bind(this)),APP.pubsub.subscribe("profile.set.address",this.setCurrentAddress.bind(this)),this.$el.find(".js-create-address").on("click",this.handleNewAddress.bind(this)),this.$el.find(".js-update-address").on("click",this.updateAddress.bind(this)),this.$el.find(".js-remove-address").on("click",this.removeAddress.bind(this)),this.$el.find('[name="country_id"]').on("change",this.manageDistricts.bind(this)),jQuery(document).on("click",".js-address-undo",this.undoRemoveAddress.bind(this)).on("click",".js-notification-close",this.finishRemoveAddress.bind(this)).on("change",'[id^="edit-region--"]',this.updateRegionText.bind(this)),this.$form.find("select, input").on("blur",function(){a.$form.focus()})},this.manageDistricts=function(c){c.preventDefault(),b.getDistricts(c.target.value),p.isChina()&&a.checkChineseForm(this.$form),p.needStateDistrictFields(c.target.value)&&b.checkForm(this.$form)},this.updateRegionText=function(a){var b=a.target.value;b&&jQuery('[id^="edit-regiontext"]').each(function(){this.value=b})},this.toggleTray=function(a,b){if(this.currentAddress=b[0]||b,this.addressType=b.currentTarget&&b.currentTarget.dataset&&b.currentTarget.dataset.type,!this.tray.isOpen){Drupal.settings.hermes_global.lockListsAddress=!0,this.tray.$el[0].className="tray-content",this.tray.open();var c=jQuery.extend({},this.currentAddress);delete c.name,this.formHelpers.populateForm(c,this.$el),this.validator.resetErrors(this.$form)}},this.closeTray=function(){this.tray.isOpen&&this.tray.back()},this.setTrayState=function(c,d){this.tray.$el.addClass("tray-"+d);var f=jQuery("#tray-edit-address .button-tray"),g=jQuery("#title-tray-edit-address-add"),h=jQuery("#title-tray-edit-address-modify");if("address-new"===d){this.tray.$el.find("#address-edit-button").insertAfter("#address-create-button"),f.attr("aria-describedBy",g),g.show(),h.hide();var i=jQuery(".tray-"+d);this.formHelpers.clearForm(i);var j=e.get("user");j.is_light_account&&this.$el.find('.form-item [name="telephone"]').val(j.telephone);var k=e.get("currentCountry");if("jp"!==k){var l=i.find('select[name="prefix"]');if(l.find("option").length>0){var m=l.find("option")[0].text;l.parent().find(".label").html(m)}var n=i.find('[name="country_id"]');n.trigger("change")}this.validator.resetErrors()}else this.tray.$el.find("#address-create-button").insertAfter("#address-edit-button"),f.attr("aria-describedBy",h),g.hide(),h.show(),this.validator.runTests();if(a.populateChineseSelect(this.$form),b.populateSelect(this.$form),("mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country)&&""===jQuery("#hermes-account-address-book-form").find('input[name="city"]').val()){var o={mo:"Macau",hk:"Hong Kong"
};jQuery("#edit-city").val(o[Drupal.settings.hermes_current_country]),jQuery("#hermes-account-address-book-form").find('input[name="city"]').val(o[Drupal.settings.hermes_current_country])}},this.renderAddressList=function(a,b){var c=".js-delivery-mode #web2shop-address";APP.pubsub.publish("profile.update.address",{response:a,source:b}),this.clearForm(),this.closeTray(),e.get("delivery_step")===!0&&jQuery(c).trigger("click");var d=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"update:profile.update.address",trayData:{response:a,source:b}}});window.parent.dispatchEvent(d)},this.updateBillingAddress=function(a){var b=a.addresses.find(function(a){return a.is_default_billing});APP.pubsub.publish("profile.update.billingAddress",b)},this.handleNewAddress=function(a){var b=this.$el.find("[name]"),c={};a.preventDefault(),b.each(function(){c[this.name]=this.value}),c.is_default_billing="true"===c.is_default_billing,c.is_default_shipping="true"===c.is_default_shipping;var d=this.$form.find(".validation-error").length>0;this.$form[0].checkValidity()&&!d?this.createAddress(c):this.validator.runTests(a)},this.createAddress=function(a){var b=document.querySelector("#edit-street1"),c=this.validator.testField(b),f=document.querySelector(".address-form.hidden");if(!f&&c.length)return b.focus(),void this.validator.scrollToError();var g=Drupal.settings.currentPath===Drupal.settings.hermes_translations.url.checkout?r:q;u=jQuery("select#edit-district-bis-id").children("option:selected").text(),p.assignValues(a,u),d.showLoaderButton("loader-button-create-address"),a.locale=e.get("currentStore"),a.postcode=h(a.country_id,a.postcode),l(g,a).done(this.createDone.bind(this)).fail(function(){d.hideLoaderButton("loader-button-create-address"),d.technicalError()})},this.createDone=function(a){d.hideLoaderButton("loader-button-create-address"),a.error?this.handleError(a.error):("billing"===this.addressType?APP.addresses=a.shipping_addresses:APP.addresses=a.address,a.shipping_addresses&&a.shipping_addresses[0]&&e.set("shippingAddressId",a.shipping_addresses[0].address_id),APP.pubsub.publish("tray.update.user.info",a),APP.pubsub.publish("cart.update",a),d.showMessage({message:Drupal.settings.hermes_translations.notification.editAddressSuccess,callback:function(){var a=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"close"}});window.parent.dispatchEvent(a)}}),this.$form.find(".error-message").remove(),this.renderAddressList(a,"create"))},this.updateAddress=function(a){var b=jQuery(".tray-trigger-origin").attr("data-address");0!==b&&jQuery(".address-list").attr("tray-trigger-origin-data",b);var c=this.$el.find("[name]"),d={};a.preventDefault();for(var f=0;f<c.length;f++)d[c[f].name]=c[f].value;d.address_id=this.currentAddress.address_id,d.locale=e.get("currentStore");var g=this.$form.find(".validation-error").length>0,h=document.querySelector("#edit-street1"),i=document.querySelector(".address-form.hidden"),j=this.validator.testField(h);!i&&j.length&&(g=!0),this.$form[0].checkValidity()&&!g?this.sendUpdateAddress(d,!0):this.validator.runTests(a)},this.sendUpdateAddress=function(a,b){var c=this;this.tempNotification=b,b&&d.showLoaderButton("loader-button-update-address");var e=jQuery("#is_default_shipping").val(),f=!!e&&JSON.parse(e);jQuery.extend(a,{is_default_shipping:f}),a.postcode=h(a.country_id,a.postcode),u=jQuery("select#edit-district-bis-id").children("option:selected").text(),p.assignValues(a,u),l(s,a).done(this.updateDone.bind(this)).fail(function(){c.tray.close(),d.hideLoaderButton("loader-button-update-address"),d.technicalError()})},this.updateDone=function(a){this.tray.close(),d.hideOverlay(),d.hideLoaderButton("loader-button-update-address"),a.error?this.handleError(a.error):(a.shipping_addresses=a.addresses,APP.pubsub.publish("tray.update.user.info",a),this.tempNotification&&d.showMessage({message:Drupal.settings.hermes_translations.notification.editAddressSuccess}),this.$form.find(".error-message").remove(),this.renderAddressList(a,"update"),this.updateBillingAddress(a)),g.excludedMaterialMessage(a.basket)},this.removeAddress=function(a){var b=this;a.preventDefault(),d.showLoaderButton("loader-button-remove-address");var c={locale:e.get("currentStore"),address_id:this.currentAddress.address_id,is_default_billing:this.currentAddress.is_default_billing};l(t,c).done(this.removeDone.bind(this)).fail(function(){b.tray.close(),d.hideLoaderButton("loader-button-remove-address"),d.technicalError()})},this.removeDone=function(a){var b={message:Drupal.settings.hermes_translations.notification.removeAddressSuccess,messageVariables:Drupal.settings.hermes_translations.notification.removeAddressSuccess.variables};this.tray.close(),d.hideLoaderButton("loader-button-remove-address"),a.error?this.handleError(a.error):(this.$form.find(".error-message").remove(),d.showMessage(b),this.renderAddressList(a,"remove"))},this.undoRemoveAddress=function(a){a.preventDefault(),this.createAddress(this.currentAddress)},this.finishRemoveAddress=function(a){a.preventDefault(),d.hideOverlay()},this.handleError=function(a){if(a&&a.internal_code){var b=a.internal_code;if(b===m.ERRORCODE.inactivity)return void APP.pubsub.publish("account.httpsession.expired");d.hideOverlay(),this.tray.open();var c=b?Drupal.settings.hermes_translations.inline_notification.address[b]:Drupal.settings.hermes_translations.inline_notification.address.genericError;this.formHelpers.displayError(c.text,this.$form)}else d.technicalError()},this.setCurrentAddress=function(a,b){if(b&&b.hasOwnProperty("address_id")&&b.hasOwnProperty("notification")){var c=APP.addresses.find(function(a){return a.address_id===b.address_id});this.sendUpdateAddress(c,b.notification)}},this.clearForm=function(){this.formHelpers.clearForm(this.$el),this.$form.find(".error-message").remove()},this.init()}var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a},function(a){h=a.unformatPostcodeValue},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){a("default",b)}}}),a.register("34",["16","17","19","30","1b","1e","1a","1d","1f"],function(a){"use strict";function b(){function a(){jQuery("#edit-new-password").pwdMeter({minLength:8})}function b(a){var b=void 0,c={};if(a.success)this.formHelpers.clearForm(this.$el.find("form")),b=Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess;else{var e=a.error&&a.error.internal_code;switch(e){case g.ERRORCODE.wrongEmailPassword:b=Drupal.settings.hermes_translations.notification.account.loginCodes[e],c=Drupal.settings.hermes_translations.notification.account.loginCodes[e].variables;break;case g.ERRORCODE.oldPasswordIncorrect:b=Drupal.settings.hermes_translations.notification.account.passwordCases[e],c=Drupal.settings.hermes_translations.notification.account.passwordCases[e].variables;break;default:d.technicalError()}}b&&(window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:b.title,messageDescription:b.description},j.showNotification("tray-edit-password","change-password")),d.hideLoaderButton("loader-forgot-password-tray")}function k(){d.technicalError(),d.hideLoaderButton("loader-forgot-password-tray")}var l="/change-password";this.init=function(){var b="tray-edit-password";this.$el=jQuery("#tray-edit-password"),this.$notification=jQuery(".notification"),this.form=this.$el[0].querySelector("form"),this.formHelpers=new e,this.validator=new f({inputs:this.form.querySelectorAll("[name]")}),this.tray=new c({$el:this.$el,name:b,showOverlay:!0}),a(),this.bind()};var m=document.getElementById("strength-level-tray-edit-password"),n=document.getElementById("strength-level-tray-edit-password-span"),o={attributes:!0},p=document.getElementById("edit-new-password"),q=i.pwdStrengthScreenReader(m,n,p);q.observe(m,o),this.bind=function(){this.$el.unbind(),this.$el.on("click",".show-password",this.formHelpers.showPasswordMask.bind(this)),this.$el.on("submit",this.saveEditPassword.bind(this)),this.$el.on("click",".js-try-again",this.notificationTryAgain.bind(this)),APP.pubsub.subscribe("reset-password",this.resetPassword.bind(this))},this.saveEditPassword=function(a){if(a.preventDefault(),d.showLoaderButton("loader-forgot-password-tray"),this.form.checkValidity()){var c=jQuery(this.form).serializeObject();h(l,c).done(b.bind(this)).fail(k)}else this.validator.runTests(a),d.hideLoaderButton("loader-forgot-password-tray")},this.notificationTryAgain=function(a){a.preventDefault(),this.$el.find(".tray-notification-message").addClass("hidden"),this.$el.find(".continue-experience").addClass("hidden"),this.$el.find(".tray-content-container").show(),this.tray.back()},this.resetPassword=function(){jQuery("#edit-old-password, #edit-new-password").val(""),jQuery(".pwdMeter").removeClass("weak medium strong")},this.init()}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a}],execute:function(){a("default",b)}}}),a.register("2a",["3","4","17","18","35","2d","1e","1a","2b","1d"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(){c(this,a),this.stateDistrictFields=new j,jQuery(document).ready(function(){k.isChina()&&!e.get(this.getChineseAreasStorageNameVariable())&&this.getChinesAreasStorageDatas()}.bind(this))}return b(a,[{key:"getChineseAreasStorageNameVariable",value:function(){var a="CnEn";return"cn_zh"===Drupal.settings.hermes_locale&&(a="CnZh"),"chineseAreas"+a}},{key:"getChinesAreasStorageDatas",value:function(){var a=this;return"undefined"==typeof e.get(this.getChineseAreasStorageNameVariable())&&(e.set(this.getChineseAreasStorageNameVariable(),!0),h.REGION_DISTRICT_FIELDS.forEach(function(b){return a.stateDistrictFields.getDistricts(b)}),i(h.GET_LIST_CHINA_ADDRESS,{},"GET").done(this.updateChineseAreas.bind(this)).fail(this.fail.bind(this))),e.get(this.getChineseAreasStorageNameVariable())}},{key:"updateChineseAreas",value:function(a){return a.district?void e.set(this.getChineseAreasStorageNameVariable(),a.district):this.fail()}},{key:"fail",value:function(){d.technicalError(),e.deleteItem(this.getChineseAreasStorageNameVariable())}},{key:"populateChineseSelect",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?null:arguments[0],c=jQuery(b).find('select[name="country_id"]');"CN"===c.val()&&k.isChina()&&!function(){var c=jQuery(b).find('select[name="region"]'),d=jQuery(b).find('select[name="cityselect"]'),e=jQuery(b).find('select[name="district"]'),h=a.getChinesAreasStorageDatas(),i=c.val(),j=d.val(),k=e.val();if(c.children("option:not(:first)").remove(),g(h).forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),c.append(b)}),i){var l=g(h[i]);d.children("option:not(:first)").remove(),l.forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),d.append(b)}),a.setSelectValue(c,i)}if(i&&j){var m=f(h[i][j]);e.children("option:not(:first)").remove(),m.forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),e.append(b)}),a.setSelectValue(d,j)}e.parent().find(".label").text(e.find("option:selected").text()),i&&j&&k&&a.setSelectValue(e,k),i||a.initChineseSelect(null,null,b),a.bindChange(b)}()}},{key:"setSelectDefault",value:function(a){a.attr("data-old-value",""),a.prop("selectedIndex",0),a.attr("id").includes("edit-cityselect")&&a.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select),a.attr("id").includes("edit-district")&&a.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select),a.attr("id").includes("edit-region")&&a.parent().find(".label").text(Drupal.settings.hermes_translations.ui.formLabel.select)}},{key:"setSelectValue",value:function(a,b){a.val(b),a.attr("data-old-value",b),a.parent().find(".label").text(b)}},{key:"changeProvinceEvent",value:function(a,b,c){var d=jQuery(c).find('select[name="region"]'),e=jQuery(c).find('select[name="cityselect"]'),f=jQuery(c).find('select[name="district"]');if(a!==b){this.setSelectDefault(f),f.prop("disabled",!0);var h=g(this.getChinesAreasStorageDatas()[d.val()]);e.children("option:not(:first)").remove(),h.forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),e.append(b)}),this.setSelectDefault(e),e.prop("disabled",!1),this.setSelectValue(d,b)}}},{key:"changeCityEvent",value:function(a,b,c){var d=jQuery(c).find('select[name="region"]'),e=jQuery(c).find('select[name="cityselect"]'),g=jQuery(c).find('select[name="district"]');if(a!==b){var h=f(this.getChinesAreasStorageDatas()[d.val()][e.val()]);g.children("option:not(:first)").remove(),h.forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),g.append(b)}),this.setSelectDefault(g),g.prop("disabled",!1),this.setSelectValue(e,b)}}},{key:"changeCountryEvent",value:function(a){var b=jQuery(a).find('select[name="region"]'),c=jQuery(a).find('select[name="cityselect"]'),d=jQuery(a).find('select[name="district"]');b.attr("data-old-value")&&this.setSelectValue(b,b.attr("data-old-value")),c.attr("data-old-value")&&this.setSelectValue(c,c.attr("data-old-value")),d.attr("data-old-value")&&this.setSelectValue(d,d.attr("data-old-value"))}},{key:"initChineseSelect",value:function(a,b){var c=this,d=arguments.length<=2||void 0===arguments[2]?null:arguments[2],e=jQuery(d).find('select[name="country_id"]');"CN"===e.val()&&!function(){var e=jQuery(d).find('select[name="region"]'),f=jQuery(d).find('select[name="cityselect"]'),h=jQuery(d).find('select[name="district"]');if(a!==b||!a||!b){var i=g(c.getChinesAreasStorageDatas());e.children("option:not(:first)").remove(),i.forEach(function(a){var b=new Option(a,a);b.setAttribute("data-cs-mask",""),e.append(b)}),c.setSelectDefault(e),c.setSelectDefault(f),f.prop("disabled",!0),c.setSelectDefault(h),h.prop("disabled",!0),c.bindChange(d)}}()}},{key:"checkChineseForm",value:function(a){var b=jQuery(a).find('select[name="country_id"]');"CN"===b.val()&&"hermes-account-create-form"===jQuery(a).attr("id")&&this.initChineseSelect(null,null,a)}},{key:"bindChange",value:function(a){var b=this,c=jQuery(a).find('select[name="region"]'),d=jQuery(a).find('select[name="cityselect"]'),e=jQuery(a).find('select[name="country_id"]');c.on("change",function(d){if("CN"===e.val()&&void 0!==d.originalEvent){var f=c.attr("data-old-value"),g=c.val();b.changeProvinceEvent(f,g,a)}}),d.on("change",function(c){if("CN"===e.val()&&void 0!==c.originalEvent){var f=d.attr("data-old-value"),g=d.val();b.changeCityEvent(f,g,a)}}),e.on("change",function(c){"CN"===e.val()&&void 0!==c.originalEvent&&b.changeCountryEvent(a)})}}]),a}(),a("default",l)}}}),a.register("36",["3","4","37","38","39","3a","3b"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.ProductLocatorTools},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i=function(){function a(){c(this,a)}return b(a,null,[{key:"create",value:function(a){var b=null;return a===d.mapenginetype.GOOGLE&&(b=new j),a===d.mapenginetype.BAIDU&&(b=new k),b}},{key:"findLocationByAddress",value:function(b,c,d,e,f){a.create(b).findLocationByAdress(c,d,e,f)}},{key:"findAddressByLocation",value:function(b,c,d,e){var f=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];a.create(b).findAddressByLocation(c,d,e,f)}}]),a}(),a("Geocoder",i),j=function(a){function d(){c(this,d),f(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.geocoder=new google.maps.Geocoder,APP.hasOwnProperty("mapSearchResults")||(APP.mapSearchResults={})}return g(d,a),b(d,[{key:"findLocationByAdress",value:function(a,b,c,d){var f={address:a};b&&""!==a&&(f={address:a,componentRestrictions:{country:b}});var g=e.stringBase64Encode(a+b);return b&&APP.hasOwnProperty("mapSearchResults")&&APP.mapSearchResults.hasOwnProperty(g)?void c(APP.mapSearchResults[g]):void this.geocoder.geocode(f,function(e,f){var i=!0,j=h(e,1),k=j[0];if(null!==b&&k){var l=k.address_components&&k.address_components.length>0?k.address_components[0]:null,m=null!==l&&l.short_name?l.short_name:null,n=null!==l&&l.long_name?l.long_name:null,o=k.formatted_address?k.formatted_address:null;null!==m&&b===m&&o===n&&(i=o&&a&&a.toLowerCase().trim()===o.toLowerCase().trim())}if(f===google.maps.GeocoderStatus.OK&&i){var p=k.geometry.location.lat(),q=k.geometry.location.lng();return APP.mapSearchResults[g]={lat:p,lng:q,result:k},void c(APP.mapSearchResults[g])}d(new Error)})}},{key:"findAddressByLocation",value:function(a,b,c,d){a={lat:parseFloat(a.lat),lng:parseFloat(a.lng)},this.geocoder.geocode({location:a},function(a,e){if("OK"===e){var f=void 0;if(d){var g=h(a,1);f=g[0]}else{f=a.filter(function(a){return!("locality"!==a.types[0]&&"political"!==a.types[0]&&"country"!==a.types[0]||"locality"!==a.types[1]&&"political"!==a.types[1]&&"country"!==a.types[1])}),f=f[0];var i=a.filter(function(a){return"postal_code"===a.types[0]&&1===a.types.length});if(i.length&&f){var j=i[0].address_components.filter(function(a){return"postal_code"===a.types[0]});f&&f.address_components.push(j[0])}}return void(f?b(f):c(new Error))}c()})}}]),d}(i),a("GeocoderGmap",j),k=function(a){function d(){c(this,d),f(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.geocoder=new BMap.Geocoder}return g(d,a),b(d,[{key:"findLocationByAdress",value:function(a,b,c,d){this.geocoder.getPoint(a,function(b){b?c({lat:b.lat,lng:b.lng,result:a}):d(new Error)})}},{key:"findAddressByLocation",value:function(a,b,c){this.geocoder.getLocation(new BMap.Point(a.lng,a.lat),function(a){if(a){var d=a.addressComponents;b(d)}else c(new Error)})}}]),d}(i),a("GeocoderBaidu",k),a("default",{Geocoder:i,GeocoderGmap:j,GeocoderBaidu:k})}}}),a.register("3c",["3","4","18","3d"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a),this.ident="",0===b.value&&(b.value="0"),this.thereIsNoResult=!1,this.name=b.name||"",this.action=b.action||"",this.categ=b.categ||"",this.label=b.label||"",this.value=b.value||""}return b(a,[{key:"mergeDatas",value:function(a){0===a.value&&(a.value="0"),this.name=a.name||this.name,this.action=a.thereIsNoResult?"Get directions_0 results":a.action||this.action,this.categ=a.categ||this.categ,this.label=a.label||this.label,this.value=a.value||this.value,this.thereIsNoResult=a.thereIsNoResult||!1}},{key:"flush",value:function(){var a={event:"uaevent"};this.categ&&(a.eventcategory=this.categ),this.action&&(a.eventaction=this.action),this.label&&(a.eventlabel=this.label),this.value&&(a.eventvalue=this.value),window.dataLayer||(window.dataLayer=[]),window.dataLayer.push(a)}}]),a}(),g=function(){function a(b){c(this,a),this.pagetype=b}return b(a,[{key:"flush",value:function(){var a=d.get("user"),b={event:"pageview",pagename:document.title,pagetype:this.pagetype,buildVersion:e.getBuildVersion(),devicetype:e.getDeviceType(),languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry")};a&&(b.userId=a.customer_id,b.clientgender=e.getGender(a.prefix),b.clienttype=e.getUserType(a.user_type)),window.dataLayer||(window.dataLayer=[])}}]),a}(),h=function(){function a(){c(this,a)}return b(a,null,[{key:"newOneWithDatas",value:function(b){var c=new f(b);return a.currentTracker=c,c}},{key:"newOneGeneric",value:function(b){var c=new g(b);return a.currentTracker=c,c}},{key:"setDatas",value:function(b){var c=a.currentTracker;return c?c.mergeDatas(b):c=new f(b),c}},{key:"flush",value:function(){var b=a.currentTracker;b&&(b.flush(),a.currentTracker=null)}},{key:"categs",get:function(){return{STORE_LOCATOR:"Store Locator",PRODUCT_LOCATOR:"Product Locator"}}}]),a}(),a("default",h)}}}),a.register("3e",["3","4","36","37","39","3a","3f","3c"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.Geocoder,e=a.GeocoderGmap,f=a.GeocoderBaidu},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b,d){c(this,a)}return b(a,null,[{key:"create",value:function(a,b,c,d){if(a===g.mapenginetype.GOOGLE){var e=new m(b,c,d);return e}return new o(b,d)}}]),b(a,[{key:"getPlace",value:function(){}},{key:"hideAutocomplete",value:function(){}},{key:"checkIfCanRunSearchWithEnterClick",value:function(){}}]),a}(),a("Autocomplete",l),m=function(a){function d(a,b,e){var f=this;c(this,d),h(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,e),this.keyDown=40,this.keyUp=38,this.keyEscape=27,this.keyEnter=13,this.input=a,this.inputLabelId=this.input.id+"-label",this.listboxid=this.input.id+"-autocomplete-list",jQuery("label[for="+this.input.id+"]").attr("id",this.inputLabelId),this.inputHtml=jQuery(this.input),this.options=b,this.service=new google.maps.places.AutocompleteService,this.servicePlaces=new google.maps.places.PlacesService(document.createElement("div")),this.callback="function"==typeof e?e:function(a){f.defaultCallbackAction(a)},this.createAutocompleteListHtml(),this.isActive=!0}return i(d,a),b(d,[{key:"customAutocomplete",value:function(){var a=this,b=[];this.input.addEventListener("input",function(){setTimeout(function(){if(a.isActive){var c=a.input.value;if(!c||""===c.trim())return a.closeAllLists(),!1;var d={input:a.input.value};a.options&&(d.componentRestrictions=a.options),a.service.getPlacePredictions(d,function(c,d){b=a.autoCompletePredictions(c,d),a.closeAllLists(),a.currentFocus=-1,a.createAutocompleteHtml(b)});var e=new Event("change");a.input.dispatchEvent(e)}},50)}),this.input.addEventListener("keydown",function(b){if(a.isActive){var c=document.getElementById(a.input.id+"-autocomplete-list");c&&(c=c.getElementsByTagName("li")),b.keyCode===a.keyDown?(a.currentFocus++,a.addActive(c)):b.keyCode===a.keyUp?(a.currentFocus--,a.addActive(c)):b.keyCode===a.keyEnter?c.length>0&&(b.preventDefault(),a.currentFocus>-1&&c&&c[a.currentFocus].click()):b.keyCode===a.keyEscape&&(a.input.value="",a.input.focus(),a.closeAllLists(!0))}}),document.addEventListener("click",function(b){a.isActive&&a.closeAllLists(b.target)})}},{key:"createAutocompleteListHtml",value:function(){if(!document.getElementById(this.listboxid)){var a=document.createElement("ul");a.setAttribute("id",this.listboxid),a.setAttribute("class","autocomplete-items"),a.setAttribute("role","listbox"),a.setAttribute("aria-labelledby",this.inputLabelId),a.setAttribute("data-cs-mask",""),a.style.display="none",this.input.parentNode.appendChild(a)}}},{key:"createAutocompleteHtml",value:function(a){var b=this,c=document.getElementById(this.listboxid);c.style.display="block";for(var d=function(d){var e=document.createElement("li");e.setAttribute("id","result-item-"+d),e.setAttribute("role","option"),e.setAttribute("data-cs-mask",""),e.innerHTML='<img src="'+g.mapengine.map.pins.store.data+'">',e.innerHTML+=a[d].innerHTML,e.innerHTML+='<input type="hidden" value="'+a[d].innerText+'">',e.addEventListener("click",function(){b.callback(a[d].innerText,a[d].placeId),b.clickAutoCompleteAnalytics(a[d],a.length),b.closeAllLists()}),c.appendChild(e)},e=0;e<a.length;e++)d(e);this.setAriaAttribute("custom-autocomplete","aria-expanded","true"),APP.pubsub.publish("search.suggestions_list.state",!0)}},{key:"clickAutoCompleteAnalytics",value:function(a,b){this.analyticsCateg=this.getAnalyticsCateg(),k.newOneWithDatas({categ:this.analyticsCateg,action:"Click Search Autocomplete",label:a.innerText,value:b}),k.flush()}},{key:"getAnalyticsCateg",value:function(){return k.categs.STORE_LOCATOR}},{key:"autoCompletePredictions",value:function(a,b){var c=this,d=[];return b===google.maps.places.PlacesServiceStatus.OK&&a.forEach(function(a){var b=c.suggestionHtmlCreator(a);b&&d.push(b)}),d}},{key:"suggestionHtmlCreator",value:function(a){var b=null;if(a.structured_formatting){b=document.createElement("span");var c=this.createHtmlFromSuggestionElement(a.structured_formatting.main_text,a.structured_formatting.main_text_matched_substrings,"main-text"," ");c&&b.appendChild(c);var d=a.terms[a.terms.length-1].value;this.chinaWhitelist(d)&&(a.structured_formatting.secondary_text=this.concatWithChina(d,a.structured_formatting.secondary_text));var e=this.createHtmlFromSuggestionElement(a.structured_formatting.secondary_text,a.structured_formatting.secondary_text_matched_substrings,"secondary-text");e&&b.appendChild(e),b.placeId=a.place_id}return b}},{key:"chinaWhitelist",value:function(a){var b=["Hong Kong","Hongkong","香港","Macau","Macau","澳门","Taiwan","Taïwan","台湾"];return b.includes(a)}},{key:"concatWithChina",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=void 0,d="China",e=Drupal.settings.hermes_locale.split("_")[1];return"fr"===e?d="Chine":"zh"===e&&(d="中国"),c=b+", "+d}},{key:"createHtmlFromSuggestionElement",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?"":arguments[3],e=null;if(a){var f=b&&b.length>0?b[0].length:0;e=document.createElement("span"),e.setAttribute("class",c),e.innerHTML="<strong>"+a.substr(0,f)+"</strong>"+a.substr(f)+d}return e}},{key:"addActive",value:function(a){return!!a&&(this.removeActive(a),this.currentFocus>=a.length&&(this.currentFocus=0),this.currentFocus<0&&(this.currentFocus=a.length-1),a[this.currentFocus].classList.add("autocomplete-active"),this.setAriaAttribute(a[this.currentFocus].id,"aria-selected",!0),void this.setAriaAttribute(this.input.id,"aria-activedescendant",a[this.currentFocus].id))}},{key:"removeActive",value:function(a){for(var b=0;b<a.length;b++)a[b].classList.remove("autocomplete-active"),a[b].removeAttribute("aria-selected")}},{key:"closeAllLists",value:function(a){for(var b=document.getElementsByClassName("autocomplete-items"),c=0;c<b.length;c++)b[c].innerHTML="",b[c].style.display="none";this.setAriaAttribute("custom-autocomplete","aria-expanded","false"),this.inputHtml.removeAttr("aria-activedescendant")}},{key:"setAriaAttribute",value:function(a,b,c){var d=document.getElementById(a);d&&d.setAttribute(b,c)}},{key:"getAddressComponentsByPlaceId",value:function(a){var b=this;return new j(function(c,d){var e={placeId:a,fields:["address_component"]};b.servicePlaces.getDetails(e,function(a,b){b===google.maps.places.PlacesServiceStatus.OK?c(a.address_components):d()})})}},{key:"checkIfCanRunSearchWithEnterClick",value:function(){var a=!0,b=document.getElementById("searchfield-autocomplete-list");if(b)for(var c=0;c<b.childNodes.length;c++)if(b.childNodes[c].classList.contains("autocomplete-active")){a=!1;break}return a}},{key:"setOptions",value:function(a){this.options=a}},{key:"setActive",value:function(a){this.isActive=a;var b=this.inputHtml.parent().attr("role");"combobox"!==b||a||(this.inputHtml.unwrap(),this.inputHtml.removeAttr("aria-autocomplete").removeAttr("aria-controls").removeAttr("aria-activedescendant"),document.getElementById(this.listboxid).remove()),"combobox"!==b&&a&&(this.inputHtml.wrap('<div id="custom-autocomplete" role="combobox" aria-expanded="false" aria-owns="'+this.listboxid+'" aria-haspopup="listbox" ></div>'),this.inputHtml.attr("aria-autocomplete","list"),this.inputHtml.attr("aria-controls",this.listboxid),this.createAutocompleteListHtml())}},{key:"defaultCallbackAction",value:function(a){this.input.value=a}}]),d}(l),a("CustomAutocompleteGmap",m),n=function(a){function d(a,b,e){c(this,d),h(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,e),this.autocomplete=new google.maps.places.Autocomplete(a,b),this.autocompleteLsr=this.autocomplete.addListener("place_changed",function(){e()})}return i(d,a),b(d,[{key:"getPlace",value:function(a){var b=this.autocomplete.getPlace();if(a)a(b&&b.geometry?{lat:b.geometry.location.lat(),lng:b.geometry.location.lng(),name:b.formatted_address}:null);else if(b)return b}}]),d}(l),a("AutocompleteGmap",n),o=function(a){function d(a,b){c(this,d),h(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b);var e=this;e.place=null,e.autocomplete=new BMap.Autocomplete({input:a}),e.autocomplete.addEventListener("onconfirm",function(a){var c=a.item.value;e.place=c.province+c.city+c.district+c.street+c.business,b()})}return i(d,a),b(d,[{key:"getPlace",value:function(a,b){(new f).findLocationByAdress(this.place,null,function(a){b(a)},function(){b(null)})}},{key:"hideAutocomplete",value:function(){this.autocomplete.hide()}}]),d}(l),a("AutocompleteBaidu",o),a("default",{Autocomplete:l,CustomAutocompleteGmap:m,AutocompleteGmap:n,AutocompleteBaidu:o})}}}),a.register("31",["3","4","32","37","1d","3e"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.Autocomplete}],execute:function(){"use strict";h=function(){function a(b){var d=arguments.length<=1||void 0===arguments[1]?"street1":arguments[1];c(this,a),this.isAutoCompleteActive=f.isAutocompleteAddressActive(),this.allowedAutocompleteCountries=f.allowedAutocompleteCountries(),this.formId=b,this.searchInput=jQuery(this.formId+" [name="+d+"]"),this.countrySelector=this.formId+' [name="country_id"]',this.autoCompleteApiLoaded=!1}return b(a,[{key:"init",value:function(){this.isAutoCompleteActive&&this.loadGoogleApi(e.google.map.URL,"initPlacesAutocomplete"),this.fieldMapping=this.getFieldsMapping(Drupal.settings.hermes_current_country),this.events()}},{key:"loadGoogleApi",value:function(a,b){var c=this;window.google?this[b]():jQuery.getScript(a,function(){c[b]()})}},{key:"initPlacesAutocomplete",value:function(){var a=this;this.autoCompleteApiLoaded=!0,this.autoComplete=g.create(e.currentMapEngine(),this.searchInput[0],{country:[Drupal.settings.hermes_current_country]},function(b,c){a.autoComplete.getAddressComponentsByPlaceId(c).then(function(b){a.fillInAddress(b)})}),this.autoComplete.customAutocomplete(),this.searchInput[0].parentNode.style.position="relative"}},{key:"fillInAddress",value:function(a){this.clearAddressFields(),this.disableAutofillonInput(!0);for(var b=0;b<a.length;b++){var c=a[b].types[0];if(this.fieldMapping[c]){var d=a[b][this.fieldMapping[c].apiValueType],e=a[b][this.fieldMapping[c].apiValueTypeAlternate];this.fillField(this.fieldMapping[c],d,e)}}}},{key:"fillField",value:function(a,b,c){var d=a.type,e=a.fieldName,f=a.mappingValues;switch(d){case"input":""!==jQuery(this.formId+" [name="+e+"]").val()?jQuery(this.formId+" [name="+e+"]").val(function(a,c){return c+" "+b}):jQuery(this.formId+" [name="+e+"]").val(b);break;case"select":this.fillSelectField(e,b,c,f)}jQuery(this.formId+" [name="+e+"]").trigger("change")}},{key:"fillSelectField",value:function(a,b,c,d){var e=jQuery(this.formId+" [name="+a+"]");d?e.val(d[b]):e.val(b);var f=jQuery(this.formId+" [name="+a+"] option:selected");e.next().text(f.text())}},{key:"clearAddressFields",value:function(){for(var a in this.fieldMapping)this.fieldMapping.hasOwnProperty(a)&&jQuery(this.formId+" [name="+this.fieldMapping[a].fieldName+"]").val("")}},{key:"disableAutofillonInput",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0],b=arguments.length<=1||void 0===arguments[1]?this.searchInput:arguments[1];a?f.isFirefox()?b.attr("autocomplete","off"):b.attr("autocomplete","new-password"):b.removeAttr("autocomplete")}},{key:"getFieldsMapping",
value:function(a){var b={},c={street_number:{type:"input",fieldName:"street1",apiValueType:"short_name"},route:{type:"input",fieldName:"street1",apiValueType:"long_name"},postal_code:{type:"input",fieldName:"postcode",apiValueType:"short_name"}},e={administrative_area_level_1:{type:"select",fieldName:"region",apiValueType:"short_name",apiValueTypeAlternate:"long_name",mappingValues:!1}},g={mappingValues:f.getGoogleRegionMapping(a)},h={locality:{type:"input",fieldName:"city",apiValueType:"long_name"}},i={postal_town:{type:"input",fieldName:"city",apiValueType:"long_name"}},j={neighborhood:{type:"input",fieldName:"city",apiValueType:"long_name"}},k=["fr","be","cz","es","ie","fi","lu","nl","no","at","pt","ch","se","us","ca","au","dk","my","sg","nz"],l=["us","ca","au","my","nz"],m=["us","ca","au","fr","be","es","ie","fi","lu","nl","at","pt","ch","cz","dk","my","sg","nz"],n=["no","se","ie"],o=["cz"],p=["my"];return k.indexOf(a)!==-1&&(b=c),p.indexOf(a)!==-1&&d(e.administrative_area_level_1,g),l.indexOf(a)!==-1&&(b=d(c,e)),m.indexOf(a)!==-1&&(b=d(c,h)),n.indexOf(a)!==-1&&(b=d(c,i)),o.indexOf(a)!==-1&&(b=d(c,j)),o.indexOf(a)!==-1&&(b=d(c,j)),b}},{key:"changeAutoCompleteCountryRestriction",value:function(){this.autoCompleteApiLoaded===!0&&(this.clearAddressFields(),this.allowedAutocompleteCountries.includes(jQuery(this.countrySelector).val())?(this.autoComplete||this.initPlacesAutocomplete(),this.autoComplete.setActive(!0),this.autoComplete.setOptions({country:jQuery(this.countrySelector).val()}),this.fieldMapping=this.getFieldsMapping(jQuery(this.countrySelector).val().toLowerCase()),this.disableAutofillonInput(!0)):(this.autoComplete.setActive(!1),this.disableAutofillonInput(!1)))}},{key:"events",value:function(){jQuery(document).on("change",this.countrySelector,this.changeAutoCompleteCountryRestriction.bind(this))}}]),a}(),a("AutocompleteAddress",h),a("default",h)}}}),a.register("21",["17","18","1a"],function(a){"use strict";function b(){var a="/wechat-social-union",b="#hermes-account-checkout-email-form";this.init=function(a){this.formID=a,this.bind()},this.setSpecificRedirectUrl=function(a){return this.specificUrlRedirect=a,this},this.bind=function(){jQuery(this.formID).find(".wechat-social-login a").on("click",this.connectWithWechat.bind(this))};var f=function(a){if(c.hideOverlay(),a.authorize_url)return d.set("social_login",1),d.set("registerSocialContextUrl",window.location.href),void(window.location.href=a.authorize_url)},g=function(){c.technicalError()};this.connectWithWechat=function(){d.set("social_login_from_checkout",this.formID===b),c.showLoader(),e(a,this.specificUrlRedirect?{specific_url:this.specificUrlRedirect}:{},"GET").done(f).fail(g)}}var c,d,e;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",b)}}}),a.register("40",["16","17","18","19","21","27","31","1a","2a","2b","1d"],function(a){"use strict";function b(){var a=new k,b=new l,n="/wechat/unlink";this.init=function(){this.$el=jQuery("#tray-edit-profile"),this.$form=this.$el.find("form"),this.$wechatBinding=this.$el.find("#wechat_bind"),this.$notification=jQuery(".notification"),this.tray=new c({$el:this.$el,name:"tray-edit-profile",showOverlay:!0}),this.$formHelpers=new f;var a=new i("#"+this.$form.attr("id"));if(a.init(),m.isChina()&&m.isWechatInApp()&&(this.wechatSocialHelpers=new g),"mo"===Drupal.settings.hermes_current_country||"hk"===Drupal.settings.hermes_current_country){var b=jQuery("#tray-edit-profile");m.setLatinCharOnly(b)}if("sa"===Drupal.settings.hermes_current_country||"ae"===Drupal.settings.hermes_current_country){var b=jQuery("#tray-edit-profile");m.setLatinCharOnlyForUaeSa(b)}this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.editProfile.toggle",this.toggleTray.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$wechatBinding.find(".is_linked").on("click",this.unlinkWechatAccount.bind(this)),this.$wechatBinding.find(".is_not_linked").on("click",this.linkWechatAccount.bind(this)),this.$notification.on("click",".js-customer-profile",this.toggleTray.bind(this)),this.$notification.on("click",".js-customer-edit-tray",this.toggleTray.bind(this)),this.$notification.on("click",".js-customer-service",this.openHelpTray.bind(this)),m.isChina()&&this.$el.find(".form-item-newsletter input").on("click",function(){var a=jQuery("#tray-edit-profile");a.find(".form-item-newsletter input").prop("checked")?a.find(".form-item-email input").prop("required","required"):a.find(".form-item-email input").prop("required",!1)})},this.toggleWechatLink=function(){var a=e.get("user");a.is_binded_wechat===!0?(this.$wechatBinding.find(".is_not_linked").hide(),this.$wechatBinding.find(".is_linked").show()):m.isWechatInApp()?(this.$wechatBinding.find(".is_linked").hide(),this.$wechatBinding.find(".is_not_linked").show()):this.$wechatBinding.hide()},this._onTrayOpen=function(){Drupal.settings.hermes_global.lockListsAddress=!0;var c=e.get("user"),d=e.get("newsletterStatus");if(this.$formHelpers.populateForm(c,this.$el),a.populateChineseSelect(this.$form),b.populateSelect(this.$form,c),c.phone_login){var f=c.phone_code,g=c.phone_number,h=jQuery(this.$form).find('[name="phonecode"]'),i=jQuery(this.$form).find('[name="loginphone"]');h.val(f),h.attr("disabled",!0),h.attr("style","background-color:#F8F8F8"),i.val(g),i.attr("disabled",!0),i.attr("style","background-color:#F8F8F8"),this.toggleWechatLink()}d&&this.$el.find(".form-item-newsletter input").prop("checked",!0)},this.openHelpTray=function(){APP.trayController.getTray({name:"tray-help"}).open()},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.unlinkWechatAccount=function(){j(n,{},"GET").done(this.unbindSuccessWechat.bind(this)).fail(this.errorHandling)},this.linkWechatAccount=function(){this.wechatSocialHelpers.setSpecificRedirectUrl("profil").connectWithWechat()},this.unbindSuccessWechat=function(a){var b=e.get("user");b.is_binded_wechat=a.is_binded_wechat,e.set("user",b),a.is_binded_wechat===!1&&(jQuery("#profile-content").html(h.render(APP.templates.userProfileAsia,b)),d.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.unlinkWechat,messageVariables:window.Drupal.settings.hermes_translations.notification.account.unlinkWechat.variables}),this.toggleWechatLink())},this.errorHandling=function(a){if(a&&a.error){var b=a.error.internal_code,c=Drupal.settings.hermes_translations.notification.order[b];if(c){var e=void 0;e={message:c,messageVariables:c.variables,type:"critical"},d.showMessage(e)}else d.technicalError()}else d.technicalError()},this.init()}var c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("41",["42","43"],!0,function(a,b,c){var d=(this||self,a("42")),e=a("43")(!0);d(d.S,"Object",{entries:function(a){return e(a)}})}),a.registerDynamic("44",["41","45"],!0,function(a,b,c){this||self;a("41"),c.exports=a("45").Object.entries}),a.registerDynamic("46",["44"],!0,function(a,b,c){this||self;c.exports={default:a("44"),__esModule:!0}}),a.register("47",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"pushEvent",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];dataLayer.push({event:"uaevent",eventcategory:"Email-Us",eventaction:a,eventlabel:b})}}]),a}(),a("default",d)}}}),a.register("48",["16","17","18","35","46","47","1a","1b","1e","1d","1f"],function(a){function b(){function a(a){if(a.preventDefault(),d.showLoaderButton("loader-email-us-tray"),F.val())return d.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.emailUs.honeyPotError.variables}),void d.hideLoaderButton("loader-email-us-tray");if(!l.validateRecaptcha(this.form[0].id)){var c=jQuery(t);c.addClass("validation-error"),this.validator.showErrorMessageInPageTitle(c),d.hideLoaderButton("loader-email-us-tray")}if(this.form[0].checkValidity()&&l.validateRecaptcha(this.form[0].id)){var e=p(this);E.removeClass("validation-error"),h.pushEvent("Send",this.eventLabel),i(r,e).then(n.bind(this),o)}else{v.val()||u.throwError({input:v[0],error:window.Drupal.settings.hermes_translations.validation.emailUsInvalidMessage});var f=[w[0],y[0],A[0],B[0]];b(),B.length>0&&f.push(B[0]),x.length>0&&f.push(x[0]),z.length>0&&f.push(z[0]),D.length>0&&f.push(D[0]);for(var g=0;g<f.length;g++)u.testField(f[g]);d.hideLoaderButton("loader-email-us-tray")}}function b(){var a=jQuery("#edit-subject-list option:selected").val();"-1"===a&&(H.addClass("validation-error"),u.throwError({input:H[0],error:window.Drupal.settings.hermes_translations.validation.emailUsSubjectList}))}function n(a){G.find(".content-tray-email").addClass("hidden"),a.error?m.showNotification("tray-email","contact-us"):(m.showNotification("tray-email","contact-us","success"),H.children("option:first").attr("selected","selected").change()),d.hideLoaderButton("loader-email-us-tray")}function o(){G.find(".content-tray-email").addClass("hidden"),m.showNotification("tray-email","contact-us"),d.hideLoaderButton("loader-email-us-tray")}function p(a){var b={subject:H.val(),message:v.val(),firstname:w.val(),lastname:y.val(),firstname2:x.val(),lastname2:z.val(),sender_email:A.val(),telephone:B.val(),region:C.children(":selected").val(),recaptchaResponse:a.form.find("textarea[name=g-recaptcha-response]").val(),confirm_password:F.val(),formId:s};return window.APP.currentSetSKU&&window.APP.updatedProductSKU?b.sku=window.APP.updatedProductSKU:window.APP.currentSKU?b.sku=window.APP.currentSKU:b.sku="",b}var q="tray-email",r="/contact/email",s="#hermes-account-email-us-form",t="#hermes-account-email-us-form-captcha",u=null,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0;this.init=function(){G=jQuery("#"+q),this.form=jQuery("#hermes-account-email-us-form"),v=this.form.find("textarea[name=message_text]"),w=this.form.find("input[name=firstname]"),x=this.form.find("input[name=firstname2]"),y=this.form.find("input[name=lastname]"),z=this.form.find("input[name=lastname2]"),A=this.form.find("input[name=email]"),C=this.form.find("select[name=region]"),D=this.form.find("input[name=prefecture]"),E=this.form.find(".g-recaptcha.hermes-account-email-us-form"),F=this.form.find("input[name=confirm_password]"),H=this.form.find("#edit-subject-list"),B=this.form.find("input[name=telephone]"),C.attr("type","hidden"),this.tray=new c({$el:G,name:q,showOverlay:!0}),this.validator=new j({inputs:this.form.find("[data-encrypted-name], [name]")}),this.bind()},this.bind=function(){var b=this;this.tray.addEventListener("open",this._onTrayOpen.bind(this));var c=document.getElementById("edit-subject-list");c.addEventListener("change",function(a){b.eventLabel=a.currentTarget.value,h.pushEvent("Subject Select",b.eventLabel)}),this.form.on("submit",a.bind(this)),APP.pubsub.subscribe("imNotARobotEmail",this.validator.removeErrorMessageInPageTitle.bind(this.validator,t)),APP.pubsub.subscribe("imNotARobotEmailExpired",l.throwErrorReCaptcha.bind(this,jQuery(t))),APP.pubsub.subscribe("imNotARobotEmailExpired",this.validator.showErrorMessageInPageTitle.bind(this.validator,t))},this.setParams=function(a){if(a.contactUsPreselectedReason){var b=a.contactUsPreselectedReason,c=jQuery("#tray-email").find('select[name="subject_list"]');jQuery(c).val(b),jQuery(c).trigger("change")}},this._onTrayOpen=function(){G.find(".content-tray-email").removeClass("hidden"),d.hideLoaderButton("loader-email-us-tray"),void 0!==APP.recaptcha&&void 0!==APP.recaptcha["hermes-account-email-us-form"]&&window.grecaptcha.reset(),this.form.find("input[type=radio][name=subject_list]").removeAttr("checked"),v.val("");var a={formId:s};i(k.ACTIVATE_CAPTCHA_URL,a,"GET").done(function(a){if(a.error)return void d.technicalError();l.generateReCaptcha(a,s);var b=e.get("user"),c={firstname:w,firstname2:x,lastname:y,lastname2:z,email:A,telephone:B,prefecture:D,confirm_password:F};b?g(c).forEach(function(a){var c=a[0],d=a[1];d.val(b[c])}):f(c).forEach(function(a){return a.val("")}),C.children("option").removeAttr("selected"),b&&b.region&&C.children('option:contains("'+b.region+'")').attr("selected","selected").change();var h=e.get("currentCountry").toUpperCase();if("JP"!==h){var i=jQuery(".form-item-region");i.length>0&&i.hide()}d.hideOverlay()}).fail(function(){return d.technicalError()}),u=new j({inputs:this.form.find("[data-encrypted-name], [name]")})},this.init()}var c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a}],execute:function(){"use strict";a("default",b)}}}),a.register("49",["16","27","38","4a"],function(a){function b(){function a(a){var b=null;return a.attributes&&a.attributes.field_color_hermes&&a.attributes.field_color_hermes.attr_display&&(b=a.attributes.field_color_hermes.attr_display),b}function b(a){var b=arguments.length<=1||void 0===arguments[1]?"display":arguments[1],c=null;return a.ref_size&&"SANS_TAILLE"!==a.ref_size&&a.attributes&&a.attributes.field_ref_size&&a.attributes.field_ref_size.attr_display&&(c="field"===b?a.attributes.field_ref_size.id:a.attributes.field_ref_size.attr_display),c}function g(c){var d={},g=!0,j=!1,k=void 0;try{for(var l,m=f(c);!(g=(l=m.next()).done);g=!0){var n=l.value;if(n.sku&&n.sku===h()){d.currentSku=n.sku,d.media=i(n),d.title=n.display_name?n.display_name:null,d.size=b(n),d.sizeId=b(n,"field"),d.color=a(n),d.price=e.formatProductPrice(n);break}}}catch(a){j=!0,k=a}finally{try{!g&&m.return&&m.return()}finally{if(j)throw k}}return d}function h(){var a=e.getSelectedSku();return a?a:APP.currentSKU}function i(a){var b=null,c=null;return b=a&&a.thumbs&&a.thumbs.length>0?a.thumbs[0]:a&&a.images&&a.images.length>0?a.images[0]:null,null!==b&&b.isImage&&1===b.isImage&&b.uri&&(c=b.uri+"-100-100_n.jpg"),c}function j(){var a={},b=l();return b&&(a=g(b)),a}function k(){var a=jQuery("#tray-product-locator").height()-jQuery("#product-tray-header-area").outerHeight();jQuery("#product-locator-content-wrapper-scrollbar").height(a)}function l(){return Drupal.settings.hasOwnProperty("hermes_products")&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")?2===e.productLocatorVersion()&&Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products:null}function m(a){var b=document.getElementById("product-locator-"+a.sizeId);b&&(b.checked=!0);var c=document.getElementById("display-product-locator-configurator");c&&!c.classList.contains("disabled")&&c.addEventListener("click",function(){var a=document.getElementById("product-locator-configurator");!a||"none"!==a.style.display&&""!==a.style.display?(a.style.display="none",c.setAttribute("aria-expanded","false")):(a.style.display="block",c.setAttribute("aria-expanded","true"))},!1)}this.init=function(){this.$el=jQuery("#tray-product-locator"),this.$globalTray=jQuery("#tray"),this.$productLocatorInfos=this.$el.find("#tray-product-locator-content"),this.$productLocatorSearch=this.$el.find("#product-locator-search"),this.tray=new c({$el:this.$el,name:"tray-product-locator",showOverlay:!0}),this.bind(),this.render()},this.bind=function(){APP.pubsub.subscribe("tray.product.locator.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("product.locator.configurator.before.change",this.productLocatorConfiguratorBefore.bind(this)),APP.pubsub.subscribe("product.locator.configurator.after.change",this.productLocatorConfiguratorAfter.bind(this)),this.$el.on("click",".tray-close",this.handlePanel.bind(this))},this.productLocatorConfiguratorBefore=function(){e.forceClearList(),e.enableDisablePLButton(!0);var a=document.getElementById("product-locator-configurator");a&&(a.style.display="none")},this.productLocatorConfiguratorAfter=function(){var a=document.querySelectorAll('input[name="product-locator-field_ref_size"]'),b=document.getElementById("display-product-locator-configurator"),c=0;a.length>0&&([].forEach.call(a,function(a){a.hasAttribute("disabled")&&"disabled"===a.getAttribute("disabled")&&c++}),b&&c===a.length&&(b.classList.add("disabled"),b.setAttribute("disabled","disabled"))),e.enableDisablePLButton(!1);var d=e.getSelectedSku();if(d){var f=new CustomEvent("refresh-angular-product-from-product-locator",{detail:{sku:d}});document.dispatchEvent(f)}},this.render=function(){var a=j();if(a&&a.currentSku){var b=d.render(APP.templates.trayProductLocator,a);this.$productLocatorInfos.html(b),m(a),k(),jQuery(window).on("resize",k)}},this.toggleTray=function(a,b){this.tray.isOpen||(this.tray.open(),jQuery("#tray-product-locator store-product-locator-display-map #map").children().length>0&&(this.$globalTray.addClass("large-tray"),b.mapActive||this.$globalTray.addClass("map-hidden")),this.render())},this.handlePanel=function(){APP.pubsub.publish("zoom.out")},this.init()}var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.ProductLocatorTools},function(a){f=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("4b",[],function(a){"use strict";function b(a,b,d,e){if(a&&b){var f=Drupal.settings.hermes_global.url_backjs,g={locale:Drupal.settings.hermes_locale,productsku:b.replace(/\s+/g,"-"),storeid:a};jQuery.ajax({type:"POST",url:f+c,headers:{"Content-Type":"application/json"},crossDomain:!0,xhrFields:{withCredentials:!0},data:JSON.stringify(g),async:!0,success:function(){d()},error:function(){e("WS error")}})}else e("Query parameters error")}var c;return{setters:[],execute:function(){c="/ereservation",a("createEreservation",b)}}}),a.register("4c",["3","4","16","17","18","27","38","4d","4b","4e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ProductLocatorTools},function(a){i=a.EreservationTools},function(a){j=a},function(a){k=a.default}],execute:function(){"use strict";l="loader-request-confirm-tray",m=["ca_en","ca_fr","us_en"],n=function(){function a(){c(this,a),this.$el=jQuery("#tray-ereservation-request-confirm"),this.$confirm=this.$el.find("#button-confirm"),this.$errorCall=this.$el.find("#tray-ereservation-request-confirm-error-call"),this.tray=new d({$el:this.$el,name:"tray-ereservation-request-confirm",showOverlay:!0}),this.$customerInfos=this.$el.find("#tray-ereservation-customer-infos"),this.$productInfos=this.$el.find("#tray-ereservation-product-infos"),this.$storeInfos=this.$el.find("#tray-ereservation-store-infos"),this.bind()}return b(a,[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation-request-confirm.render",this.render.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$confirm.on("click",this.confirmEreservation.bind(this))}},{key:"_onTrayOpen",value:function(){this.hideErrorCall()}},{key:"render",value:function(){APP.trayController.popFromStack("tray-ereservation-signup-signin");var a=this.getCustomerData(),b=g.render(APP.templates.trayEreservationRequestConfirmCustomerInfos,a);this.$customerInfos.html(b);var c=this.getProductData(),d=g.render(APP.templates.trayEreservationRequestConfirmProductInfos,c);this.$productInfos.html(d);var e=this.getStoreData(),f=g.render(APP.templates.trayEreservationRequestConfirmStoreInfos,e);this.$storeInfos.html(f)}},{key:"getProductData",value:function(){var a=void 0,b=h.getCurrentProductVariation();a=b.thumbs&&Array.isArray(b.thumbs)&&b.thumbs.length>0&&b.thumbs[0].uri?b.thumbs[0].uri+"-300-300_n.jpg":b.images&&Array.isArray(b.images)&&b.images.length>0&&b.images[0].uri?b.images[0].uri+"-300-300_n.jpg":null;var c="SANS_TAILLE"!==b.ref_size&&b.attributes&&b.attributes.field_ref_size&&b.attributes.field_ref_size.attr_display?b.attributes.field_ref_size.attr_display:null,d=b.attributes&&b.attributes.field_color_hermes&&b.attributes.field_color_hermes.attr_display&&""!==b.attributes.field_color_hermes.attr_display.trim()?b.attributes.field_color_hermes.attr_display:null;return{media:a,title:b.display_name||null,price:h.formatProductPrice(b),size:c,color:d,showTaxesDiv:m.includes(Drupal.settings.hermes_locale)}}},{key:"getStoreData",value:function(){var a=i.getEreservationStore(),b=a.phone?a.phone.replace("/s/g","-"):null;return{name:a.name.toUpperCase()||null,city:a.city||null,postal_code:a.postalCode||null,country:a.country||null,distance:a.distance||null,phone_number:a.phone||null,phone_number_link_format:b,street_address1:a.street1||null,street_address2:a.street2||null,street_address3:a.street3||null}}},{key:"getCustomerData",value:function(){if(!f.get("isConnected"))return{};var a=f.get("user");return{civility:a.prefix,firstname:a.firstname,lastname:a.lastname,email:a.email,confirm_text:"You are about to confirm e-reservation request"}}},{key:"showErrorCall",value:function(){this.$errorCall.removeClass("invisible"),this.$errorCall.attr("aria-hidden","false"),this.$confirm.attr("aria-describedby","tray-ereservation-request-confirm-error-call")}},{key:"hideErrorCall",value:function(){this.$errorCall.addClass("invisible"),this.$errorCall.attr("aria-hidden","true"),this.$confirm.removeAttr("aria-describedby")}},{key:"confirmEreservation",value:function(){this.hideErrorCall(),e.showLoaderButton(l),k.trackConfirmEreservationClick(i.getEreservationStore().name),j.createEreservation(i.getEreservationStore().id,i.getEreservationSku(),this._createEreservationSuccess.bind(this),this._createEreservationError.bind(this))}},{key:"_createEreservationSuccess",value:function(){k.trackEreservationCreated(i.getEreservationStore().name),e.hideLoaderButton(l),i.openTrayRequestValidation()}},{key:"_createEreservationError",value:function(){e.hideLoaderButton(l),this.showErrorCall()}}]),a}(),a("default",n)}}}),a.register("4f",["18","27","50","1e"],function(a){"use strict";function b(a,b){var c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=APP.CURRENCY_MAP[e.get("currentStore")];return c&&(d=APP.CURRENCY_MAP[c]),"undefined"==typeof d.precision&&"undefined"!=typeof b&&(d.precision=b),g.formatMoney(a,d)}function c(a){if(a&&a.items){var c=jQuery.extend({},a,Drupal.settings.hermes_translations.ui.cart);return c.locale=Drupal.settings.hermes_url_locale,c.items=a.items.map(function(c){c.qty&&(c.qty=parseInt(c.qty,10)),c.final_price=b(c.row_incl_tax,2,a.store_code);var d=a.return_type===h.EXCHANGE,e=Drupal.settings.hermes_translations.ui.cart,f=d?e.exchange_reason:e.return_reason;return c.return_reason=c.return_reason?f+e.reason[c.return_reason]:"",c}),f.render(APP.templates.exchangeReturnItems,c)}}function d(a){if(a){var c="";c=a.shipping_address&&a.shipping_address.country_id?a.shipping_address.country_id:e.get("currentCountry")?e.get("currentCountry"):"";var d=a.show_tax_message&&a.show_tax_message[c.toLowerCase()],g=a.items.reduce(function(a,b){return a+parseInt(b.qty,10)},0),i=0;void 0!==a.adjustement_negative&&(i=a.adjustement_negative);var j={isExchange:a.return_type===h.EXCHANGE,isRefund:a.return_type===h.REFUND,totalItems:g,totalTax:b(a.tax_amount,2,a.store_code),totalShipping:b(a.shipping_amount,2,a.store_code),adjustementNegative:b(i,2,a.store_code),adjustementNegativeDisplay:i,totalPrice:b(a.grand_total,2,a.store_code),show_tax:a.show_tax[Drupal.settings.hermes_locale],taxMessage:Drupal.settings.hermes_translations.ui.checkout[d]};return f.render(APP.templates.exchangeRequestDetailSummary,j)}}var e,f,g,h;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("items",c),a("summary",d)}}}),a.register("51",["3","4","16","18","27","32","52","53","54","4f","1d"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a},function(a){l=a.default}],execute:function(){"use strict";m={exchange:"refund",refund:"exchange"},n=void 0,o=function(){function a(){c(this,a),n=new i,this._$el=jQuery("#tray-exchange-return-details"),this.tray=new d({$el:this._$el,name:"tray-exchange-return-details",showOverlay:!0}),this._$content=this._$el.find(".exchange-return-details-content"),this._bind(),APP.pubsub.publish("exchangeReturnDetails.newTrayDataFinish",{})}return b(a,[{key:"_bind",value:function(){APP.pubsub.subscribe("exchangeReturnDetails.newTrayData",this._handleNewTrayData.bind(this))}},{key:"_populateData",value:function(a){var b=g({},a.exchange,a.return,a);b.created_at=j(b.created_at),b.exchange_return_date=j(b.return_date),b.pickup_date=j(b.pickup_date);var c=Drupal.settings.hermes_global.url_ecp+"/proforma?",d=["locale="+e.get("currentStore"),"hash="+a.exchange.return_hash];if(b.proformaDownloadLink=c+d.join("&"),b.cartItems=k.items(b),b.summary=k.summary(b),b.pickup_address){var i=h(b.pickup_address),m=n.getAddress(b.pickup_address);l.isChina()?(b.pickup_address_name=i,b.pickup_address_label=m):b.pickup_address=i+", "+m}this._$content.html(f.render(APP.templates.exchangeReturnDetails,b))}},{key:"_handleNewTrayData",value:function(a,b){this._setupDomFromConfig(b),this._populateData(b)}},{key:"_setupDomFromConfig",value:function(a){var b=jQuery(this._$el),c=jQuery("#tray-exchange-return-details .button-tray"),d=a.return_type||a.exchange.return_type||a.return.return_type,e="[data-mode="+m[d]+"]",f="[data-mode="+d+"]",g=b.find(jQuery(e)),h=b.find(jQuery(f));g.each(function(){jQuery(this).addClass("hidden")}),h.each(function(){var a=jQuery(this).attr("id");b.attr("aria-labelledBy",a),a&&c.attr("aria-describedBy",a),jQuery(this).removeClass("hidden")})}}]),a}(),a("default",o)}}}),a.register("55",["3","4","16","17","18","27","50","54","2d","1e","1a"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m={exchange:"refund",refund:"exchange"},n={office:"pickup",pickup:"office"},o="/exchange-return/request/print-label?",p="pickup-slot-labels",q=function(){function a(){c(this,a),this._$el=jQuery("#tray-exchange-return-instructions"),this._$summaryHolderNode=jQuery("#return-summary-content"),this._$pickupTimeNode=jQuery("#return-pickup-datetime"),this._currencyFormat=APP.CURRENCY_MAP[f.get("currentStore")],this._currencyFormat.precision=2,this.tray=new d({$el:this._$el,name:"tray-exchange-return-instructions",showOverlay:!0}),this._bind()}return b(a,[{key:"_bind",value:function(){APP.pubsub.subscribe("exchangeReturnInstructions.newTrayData",this._handleNewTrayData.bind(this)),APP.pubsub.subscribe("exchangeReturnDetails.newTrayDataFinish",this._gotoReturnExchangeDetailsTray.bind(this)),this._$el.on("click",'[data-bind="exchange-return-label-url"]',this._onPrintReturnLabelClick.bind(this)),this._$el.on("click",'[data-bind="exchange-return-proforma-url"]',this._onPrintReturnProformaClick.bind(this)),this._$el.on("click",'[data-bind="view-order"]',this._onExchangeRefundOrderNodeClick.bind(this))}},{key:"_populateData",value:function(a){a.pickup_time&&(this._populatePickup(f.get(p)),f.deleteItem(p)),this._populateSummary(a),this._setupDomFromData(a)}},{key:"_populatePickup",value:function(a){this._$pickupTimeNode.html(g.render(this._$pickupTimeNode.html(),a))}},{key:"_setupDomFromData",value:function(a){var b=jQuery(this._$el),c="[data-mode="+m[a.return_type]+"]",d="[data-mode="+a.return_type+"]",e=b.find(jQuery(c)),f=b.find(jQuery(d));e.each(function(){jQuery(this).addClass("hidden")}),f.each(function(){var a=jQuery(this).attr("id");b.attr("aria-labelledBy",a),jQuery(this).removeClass("hidden")})}},{key:"_populateSummary",value:function(a){var b=this._generateSummaryData(a);this._$summaryHolderNode.html(g.render(APP.templates.exchangeRequestSummary,b)),APP.pubsub.publish("exchange-return-instructions-summary-renderer")}},{key:"_generateSummaryData",value:function(a){var b=a.items.reduce(function(a,b){return a+parseInt(b.qty,10)},0),c="";c=a.shipping_address&&a.shipping_address.country_id?a.shipping_address.country_id:Drupal.settings.hermes_locale?Drupal.settings.hermes_locale:"";var d=j(a.show_tax).find(function(a){return a.match(new RegExp("^"+c,"i"))}),e=a.show_tax_message&&a.show_tax_message[c.toLowerCase()],f=0;return void 0!==a.adjustement_negative&&(f=a.adjustement_negative),{isExchange:a.return_type===k.EXCHANGE,isRefund:a.return_type===k.REFUND,orderDate:i(a.return_date)||"date format unsupported",orderId:a.return_id,totalItems:b,totalPrice:h.formatMoney(a.grand_total,this._currencyFormat),subtotal:h.formatMoney(a.subtotal,this._currencyFormat),totalTax:h.formatMoney(a.tax_amount,this._currencyFormat),subtotalInclTax:h.formatMoney(a.subtotal_incl_tax,this._currencyFormat),shippingAmount:h.formatMoney(a.shipping_amount,this._currencyFormat),adjustementNegative:h.formatMoney(f,this._currencyFormat),adjustementNegativeDisplay:f,totalShipping:h.formatMoney(a.shipping_amount,this._currencyFormat),show_tax:a.show_tax[d],taxMessage:Drupal.settings.hermes_translations.ui.checkout[e]}}},{key:"_handleNewTrayData",value:function(a,b){this._data=b,this._$el.find('[data-return-method="'+b.returnMethod+'"]').show(),this._$el.find('[data-return-method="'+n[b.returnMethod]+'"]').hide(),this._populateData(this._data.exchange)}},{key:"_onExchangeRefundOrderNodeClick",value:function(a){a.preventDefault(),a.stopPropagation(),APP.pubsub.publish("analytics-refund-details-exchange-return",{mode:this._data.exchange.return_type}),APP.trayController.triggerTray({name:"tray-exchange-return-details"})}},{key:"_gotoReturnExchangeDetailsTray",value:function(){APP.pubsub.publish("exchangeReturnDetails.newTrayData",this._data)}},{key:"_onPrintReturnLabelClick",value:function(a){a.preventDefault(),a.stopPropagation();var b=this._generateLabelUrl(this._data.exchange.order_id,this._data.exchange.return_id);APP.pubsub.publish("analytics-return-print-exchange-return",{mode:this._data.exchange.return_type}),l(b,{},"GET").done(function(a){a.error?this._errorHandling(a.internal_code):this._downloadDocument(""+Drupal.settings.hermes_global.url_ecp+b)}.bind(this)).fail(this._errorHandling)}},{key:"_onPrintReturnProformaClick",value:function(a){a.preventDefault(),a.stopPropagation();var b="/proforma?",c=["locale="+f.get("currentStore"),"hash="+this._data.exchange.return_hash],d=b+c.join("&");l(d,{},"GET").done(function(a){a.error?this._errorHandling(a.internal_code):this._downloadDocument(""+Drupal.settings.hermes_global.url_ecp+d)}.bind(this)).fail(this._errorHandling)}},{key:"_downloadDocument",value:function(a){var b=document.createElement("a");b.href=a,b.target="_self",document.body.appendChild(b),b.click()}},{key:"_errorHandling",value:function(a){var b={message:Drupal.settings.hermes_translations.order[a]||Drupal.settings.hermes_translations.order.genericNoInvoiceGeneratedError,type:"critical"};e.showMessage(b)}},{key:"_generateLabelUrl",value:function(a,b){var c=["locale="+f.get("currentStore"),"order_id="+a,"return_id="+b];
return o+c.join("&")}}]),a}(),a("default",q)}}}),a.register("56",["3","4","16","17","18","24","27","29","32","50","54","57","58","3b","2d","1a","1e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.TrayUtils},function(a){h=a.default},function(a){i=a.unformatPostcodeValue},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default}],execute:function(){"use strict";s="/exchange-return/request/return-method",t="/exchange-return/request/finalise",u="pickup-slot-labels",v="2200105",w="4800012",x="pickup",y="Chronopost",z={exchange:"refund",refund:"exchange"},A={office:"office",pickup:"pickup"},B=void 0,C=function(){function a(){c(this,a),this._$el=jQuery("#tray-exchange-return-method"),this._$pickupFields=jQuery("#pick-up-fields"),this._$pickupTimeTitle=jQuery("#pick-up-time-title"),this._$dropOffFields=jQuery("#drop-off-fields"),this._$dropOffOnlyFields=jQuery("#drop-off-only-fields"),this._$summaryHolderNode=jQuery("#exchange-return-method-order-summary"),this._$submitButtonNode=this._$el.find(".button-request-exchange-return"),this._$carrierLocation=jQuery("#find-carrier-location-url"),this._$instructionsTrayContainer=jQuery("#tray-exchange-return-instructions"),this._$returnMethodAddressList=jQuery("#return-method-address-list"),this._$returnMethodPickUpTimesInstructions=jQuery("#return-method-pick-up-times-instructions"),this._$returnMethodPickUpTimesList=jQuery("#return-method-pick-up-times-list"),this._returnMethodPickUpTimesInstructionsHtml=this._$returnMethodPickUpTimesInstructions.html();var b={urlopen:'<button data-tray-trigger="tray-help" class="link-to-button-inside-trays" type="button"aria-controls="tray-help" aria-expanded="false" aria-haspopup="dialog">',urlclose:"</button>"};this._returnMethodPickUpTimesUnavailableHtml=h.render(Drupal.settings.hermes_translations.ui.exchange_pickup_options.no_pickup_options,b),this._currencyFormat=APP.CURRENCY_MAP[f.get("currentStore")],this._currencyFormat.precision=2,this.carrier=null,this.returnMethod="office",this.tray=new d({$el:this._$el,name:"tray-exchange-return-method",showOverlay:!0}),this._setupState(),this._bind(),APP.pubsub.subscribe("order-details-angular",this.sendOrderDataToAngular.bind(this))}return b(a,[{key:"_setupState",value:function(){this._config={data:{}},this._state={data:{}}}},{key:"_bind",value:function(){var a=this;this._$submitButtonNode.on("click",this._onSubmitButtonNodeClick.bind(this)),this._$el.on("click","#add-new-pickup-address",this._onAddAddressNodeClick.bind(this)),this._$el.on("change",'[name="return_method"]',this._onReturnMethodSelectChange.bind(this)),this._$el.on("change",'[name="request-address"]',this._onRequestAddressSelectChange.bind(this)),this._$el.on("change",'[name="request-timeslot"]',this._onRequestTimeslotSelectChange.bind(this)),this.tray.addEventListener("lockRelease",function(a){1===B.length&&B.includes(A.pickup)&&a.detail.isOpen&&jQuery("#edit-return-method-pickup").trigger("change")}),APP.pubsub.subscribe("profile.update.address",this._handleAddAddress.bind(this)),APP.pubsub.subscribe("instructions-return-angular",function(){a._$submitButtonNode.click()})}},{key:"setNewTrayData",value:function(a){this._handleNewTrayData(a)}},{key:"_changeReturnRequestShipmentMethod",value:function(a){f.deleteItem(u);var b={order_id:this._config.data.increment_id,request_id:this._state.data.request.request_id,selected_return_method:a,pickup_address:a!==A.office?this._state.data.local.pickup_address:void 0};return this.returnMethod=a,e.showLoader(),q(s,b).fail(function(){e.technicalError()})}},{key:"_changeReturnAddress",value:function(a){return e.showLoader(),q(s,{order_id:this._config.data.increment_id,request_id:this._state.data.request.request_id,selected_return_method:this._state.data.local.selected_return_method,pickup_address:a},"POST").fail(function(a){e.technicalError(),console.warn("Return/Exchange address chould not be changed"),console.warn(a)})}},{key:"_submitRequestFinalisation",value:function(){var a=this._assembleRequestPayload(),b=this._$el.data("unformatpostcode")===!0,c=a.pickup_address;return c&&(c.postcode&&c.postcode.length>0||b)&&(c.postcode=i(c.country_id,c.postcode)),e.showLoader(),q(t,a).done(function(){APP.pubsub.publish("return.finalisation.completed")}).fail(function(){e.technicalError()})}},{key:"_dispatchConfigMutation",value:function(){this._handleStateSet(this._state,"data",{})}},{key:"_dispatchStateMutation",value:function(a,b){if(b.data.local||b.data.request){this._resetTimeSlots(),this._setupDomFromState(b.data),this._populateSummary({state:b.data,config:this._config.data});var c=b.data.request;c.selected_return_method===x&&(c.available_pickup_slots&&this._populateTimeslots(c),c.addresses&&this._populateAddresses(c))}}},{key:"_setupDomFromState",value:function(a){var b=this;B=a.request.available_prepaid_shipping_mode,this.carrier=a.request.order_shipping_carrier,this._carrierLocationUrl(),B.forEach(function(a){var c=h.render(Drupal.settings.hermes_translations.exchangeReturn["return_label_"+a],{carrier:b.carrier});jQuery("#edit-return-method-"+a).next().html(c)});var c=h.render(this._$carrierLocation.html(),{carrier:b.carrier});this._$carrierLocation.html(c);var d=a.local.selected_return_method,e=a.request.return_type;return B&&1===B.length?void(B[0]===A.pickup?(this._setupDomFromDatas(e,A.pickup),this._$dropOffFields.addClass("hidden"),this._$dropOffOnlyFields.hide(),jQuery("#edit-return-method-office").parent().addClass("hidden")):(this._setupDomFromDatas(e,A.office),this._$pickupFields.addClass("hidden"),jQuery("#edit-return-method-pickup").parent().addClass("hidden"),this.carrier===y&&this._$dropOffFields.addClass("hidden"))):(this._$dropOffFields.removeClass("hidden"),this._$pickupFields.removeClass("hidden"),this._$dropOffOnlyFields.show(),jQuery("#edit-return-method-pickup").parent().addClass("hidden"),jQuery("#edit-return-method-office").parent().removeClass("hidden"),void this._setupDomFromDatas(e,d))}},{key:"_setupDomFromDatas",value:function(a,b){var c=jQuery(this._$el),d=jQuery("#tray-exchange-return-method .button-tray"),e=jQuery("[data-mode="+z[a]+"]"),f=jQuery("[data-mode="+a+"]"),g=c.find(e),h=c.find(f);g.each(function(){jQuery(this).addClass("hidden")}),h.each(function(){var a=jQuery(this).attr("id");c.attr("aria-labelledBy",a),a&&d.attr("aria-describedBy",a),jQuery(this).removeClass("hidden")}),this._$dropOffOnlyFields.addClass("hidden"),this._$pickupFields.toggleClass("hidden",b===A.office),this._$dropOffFields.toggleClass("hidden",b===A.pickup),jQuery("#edit-return-method-pickup").parent().removeClass("hidden"),this._$el.find('[name="return_method"][value="'+b+'"]').prop("checked",!0)}},{key:"_populateSummary",value:function(a){var b=this;this._totalItems=0;var c=0,d=0;a.state.request.items.forEach(function(e){b._totalItems+=parseInt(e.qty,10);var f=a.config.items.find(function(a){return a.sku===e.sku});c+=f.price_incl_tax*e.qty,d+=(f.price_incl_tax-f.unit_price)*e.qty});var e=a.config.shipping_address.country_id||Drupal.settings.hermes_locale,f=p(a.config.show_tax).find(function(a){return a.match(new RegExp("^"+e,"i"))}),g=a.config.show_tax_message&&a.config.show_tax_message[e.toLowerCase()],i=0,j=m.getReturnTotals(a.config,c);void 0!==j&&(void 0!==j.totalPrice&&(c=j.totalPrice),void 0!==j.adjustementNegative&&(i=j.adjustementNegative));var n={isExchange:a.state.request.return_type===r.EXCHANGE,isRefund:a.state.request.return_type===r.REFUND,orderDate:l(a.config.created_at),orderId:a.config.increment_id,totalItems:this._totalItems,totalPrice:k.formatMoney(c,this._currencyFormat),totalTax:k.formatMoney(d,this._currencyFormat),totalShipping:k.formatMoney(0,this._currencyFormat),adjustementNegative:k.formatMoney(i,this._currencyFormat),adjustementNegativeDisplay:i,show_tax:a.config.show_tax[f],taxMessage:Drupal.settings.hermes_translations.ui.checkout[g]};this._$summaryHolderNode.html(h.render(APP.templates.exchangeRequestSummary,n)),APP.pubsub.publish("exchange-return-method-summary-renderer")}},{key:"_populateAddresses",value:function(a){var b=this._prepareAddressData(a);this._$returnMethodAddressList.html(h.render(APP.templates.exchangeRequestAddresses,{addresses:b})),APP.pubsub.publish("exchange-return-method-addresses-renderer")}},{key:"_populateTimeslots",value:function(a){var b=this._prepareTimeslotData(a);this._$returnMethodPickUpTimesList.html(h.render(APP.templates.exchangeRequestTimeslots,{timeslots:b}))}},{key:"_gotoReturnInstructionsTray",value:function(a){this.trayExchangeReturnInstructions||(this.trayExchangeReturnInstructions=APP.trayController.triggerTray({name:"tray-exchange-return-instructions",dontAdd:!0})),APP.pubsub.publish("exchangeReturnInstructions.newTrayData",a),setTimeout(function(){APP.trayController._trayStack=["tray-exchange-return-instructions"]},500),this._pushNextTray("tray-exchange-return-instructions")}},{key:"_gotoAddAddressTray",value:function(){APP.trayController.triggerTray({name:"tray-edit-address"}),APP.pubsub.publish("tray.editAddress.state","address-new")}},{key:"_pushNextTray",value:function(a){APP.trayController.triggerTray({name:a})}},{key:"_carrierLocationUrl",value:function(){var a=void 0;switch(!0){case/dhl/i.test(this.carrier):a=Drupal.settings.hermes_checkout.exchange_and_return.dhl_locator_url;break;case/colissimo/i.test(this.carrier):a=Drupal.settings.hermes_checkout.exchange_and_return.colissimo_locator_url;break;default:a=Drupal.settings.hermes_checkout.exchange_and_return.fedex_locator_url}var b=f.get("currentStore");a&&b in a&&this._$carrierLocation.prop("href",a[b])}},{key:"_isIdenticalAddress",value:function(a,b){var c=!0;return c=c&&a.firstname===b.firstname,c=c&&a.lastname===b.lastname,c=c&&a.postcode===b.postcode,c=c&&a.prefix===b.prefix,c=c&&a.region===b.region,c=c&&a.street1===b.street1,c=c&&a.telephone===b.telephone}},{key:"_prepareAddressData",value:function(a){var b=this,c=a.addresses.find(function(a){return a.is_default_billing}),d=a.addresses.filter(function(a){return!a.is_default_billing}),e=!1;if(c)for(var g in d)if(this._isIdenticalAddress(d[g],c)){e=!0;break}return a.addresses.filter(function(a){return!e&&a.address_id||e&&a.address_id!==c.address_id}).map(function(a){var c=b._isIdenticalAddress(b._state.data.local.pickup_address,a),d=Drupal.settings.hermes_locale,e=void 0,g=void 0,h=" ";if(d){var i=d.split("_"),j=o(i,2);e=j[0],g=j[1]}else e=f.get("currentCountry"),g=f.get("currentLanguage");"kr"===e&&(h="");var k=a.firstname+h+a.lastname;return{address_id:a.address_id,is_selected:c,full_name:k,address:a.street1,zipcode:a.postcode,state:a.region_label,city:a.city,country:a.country_id,telephone:a.telephone,value_payload:JSON.stringify(a)}})}},{key:"_prepareTimeslotData",value:function(a){var b=this,c=[];return f.deleteItem(u),a.available_pickup_slots.days&&a.available_pickup_slots.days.length>0?a.available_pickup_slots.days.forEach(function(d,e){a.available_pickup_slots.time[d.value].forEach(function(a,g){var h=void 0,i=!0;h=b._state.data.local.pickup_date&&b._state.data.local.pickup_time?d.value===b._state.data.local.pickup_date&&a.value===b._state.data.local.pickup_time:0===e&&0===g,"Fedex"===b._state.data.request.order_shipping_carrier&&Drupal.settings.in_europe&&a.value.startsWith("fedex")&&a.value.substring(6,8)>0&&a.value.substring(6,8)<12&&(i=!1),i&&(c.push({day:d.value,time:a.value,is_selected:h,dayString:d.format,timeString:a.format,value_payload:JSON.stringify({day:d.value,time:a.value})}),h&&f.set(u,{date:d.format,timeslot:a.format}))})}):(this._$pickupTimeTitle.addClass("hidden"),this._$returnMethodPickUpTimesInstructions.addClass("hidden")),c}},{key:"_assembleRequestPayload",value:function(){var a=this._state.data.local,b=a.selected_return_method===A.pickup;return{items:this._config.data.items,order_id:this._config.data.increment_id,return_type:this._state.data.request.return_type,request_notes:this._state.data.request.request_notes,selected_return_method:a.selected_return_method,request_id:this._state.data.request.request_id,pickup_date:b?a.pickup_date:void 0,pickup_time:b?a.pickup_time:void 0,pickup_address:b?a.pickup_address:void 0}}},{key:"_handleNewTrayData",value:function(a){this._handleConfigSet(this._config,"data",a.orderData),a.type&&this._handleConfigSet(this._config,"type",a.type),this._handleStateSet(this._state,"data",{request:a.requestData,local:{selected_return_method:a.requestData.selected_return_method,pickup_address:a.requestData.address,pickup_date:a.requestData.pickup_date,pickup_time:a.requestData.pickup_time}})}},{key:"_handleConfigSet",value:function(a,b,c){return a[b]=c,this._dispatchConfigMutation(),!0}},{key:"_handleStateSet",value:function(a,b,c){var d=jQuery.extend(!0,{},a);return a[b]=c,this._dispatchStateMutation(d,a),!0}},{key:"_handleShipmentMethodChange",value:function(a){var b=jQuery.extend(!0,{},this._state.data);if(b.local.selected_return_method=a.selected_return_method,a.pickup_address?b.local.pickup_address=a.pickup_address:b.local.pickup_address=null,a.available_pickup_slots&&a.available_pickup_slots.days){var c=this._prepareTimeslotData(a);b.local.pickup_date=c[0]?c[0].day:null,b.local.pickup_time=c[0]?c[0].time:null}else b.local.pickup_date=null,b.local.pickup_time=null;b.request=a,this._handleStateSet(this._state,"data",b)}},{key:"_handleAddAddress",value:function(a,b){var c=this,d=jQuery.extend(!0,{},this._state.data),f=b.response.shipping_addresses||b.shipping_addresses;this.tray.back(),d.local.pickup_address=f[0],d.request.addresses.push(f[0]),this._handleStateSet(this._state,"data",d),this._changeReturnRequestShipmentMethod(this._state.data.local.selected_return_method).then(function(a){a.error?c._handleTimeSlotDataError(a):c._handleShipmentMethodChange(a),e.hideOverlay()})}},{key:"_handleRequestAddressChange",value:function(a){var b=jQuery.extend(!0,{},this._state.data);if(b.local.pickup_address=a.pickup_address,a.available_pickup_slots&&a.available_pickup_slots.days){var c=this._prepareTimeslotData(a);b.local.pickup_date=c[0].day,b.local.pickup_time=c[0].time}else b.local.pickup_date=null,b.local.pickup_time=null;b.request=a,this._handleStateSet(this._state,"data",b)}},{key:"_handleRequestTimeslotChange",value:function(a){var b=jQuery.extend(!0,{},this._state.data);b.local.pickup_date=a.day,b.local.pickup_time=a.time,this._handleStateSet(this._state,"data",b)}},{key:"_onSubmitButtonNodeClick",value:function(a){var b=this;a.preventDefault(),a.stopPropagation(),e.isLocked()||this._submitRequestFinalisation().then(function(a){if(e.hideOverlay(),a.error){var c=a.error.message,d=!1;a.error.internal_code===w&&(c=Drupal.settings.hermes_translations.notification.exchangeReturnError.message),e.showMessage({message:{description:c},messageVariables:d})}else{if("angular"!==b._config.type){var g={message:Drupal.settings.hermes_translations.notification.exchangeReturnSuccess,messageVariables:{operationType:Drupal.settings.hermes_translations.notification.exchangeReturnSuccess.translations[b._state.data.request.return_type],email:f.get("user").email},type:"critical"};e.showMessage(g)}APP.pubsub.publish("analytics-proceed-exchange-return",{mode:b._state.data.request.return_type,id:a.exchange.return_id});var h=f.get("total-orders");f.deleteItem("total-orders"),h>3&&setTimeout(function(){APP.pubsub.publish("get.orders.call")},4e3),setTimeout(function(){"angular"===b._config.type?b.sendMethodDataToAngular(n({},a,{returnMethod:b.returnMethod})):b._gotoReturnInstructionsTray(n({},a,{returnMethod:b.returnMethod}))},200)}})}},{key:"sendMethodDataToAngular",value:function(a){g.hideScrollbar();var b=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-instructions",trayData:a}});window.parent.dispatchEvent(b)}},{key:"_onReturnMethodSelectChange",value:function(a){var b=this;a.preventDefault(),a.stopPropagation();var c=a.currentTarget.value;e.isLocked()||(APP.pubsub.publish("analytics-choice-delivery-exchange-return",{mode:this._state.data.request.return_type,delivery_type:c}),this._changeReturnRequestShipmentMethod(c).then(function(a){e.hideOverlay(),a.error||b._handleShipmentMethodChange(a),a.available_pickup_slots||c!==x||(a.error={internal_code:v}),a.error&&b._handleTimeSlotDataError(a)}))}},{key:"_onRequestAddressSelectChange",value:function(a){var b=this;a.preventDefault(),a.stopPropagation();var c=JSON.parse(a.currentTarget.value);this._changeReturnAddress(c).then(function(a){e.hideOverlay(),a.error||b._handleRequestAddressChange(a),a.available_pickup_slots||(a.error={internal_code:v}),a.error&&b._handleTimeSlotDataError(a)})}},{key:"_handleTimeSlotDataError",value:function(a){if(this._showNoTimeSlots(),a.error.internal_code===v){var b={message:Drupal.settings.hermes_translations.notification.exchangeNoPickupTimes};e.showMessage(b)}else e.showMessage({message:{description:a.error.message}})}},{key:"_showNoTimeSlots",value:function(){this._setupDomFromDatas(this._state.data.request.return_type,A.pickup),this._$returnMethodPickUpTimesList.addClass("hidden"),this._$submitButtonNode.addClass("disabled"),this._$submitButtonNode.attr("disabled",!0),this._$returnMethodPickUpTimesInstructions.html(this._returnMethodPickUpTimesUnavailableHtml)}},{key:"_resetTimeSlots",value:function(){this._$submitButtonNode.attr("disabled",!1),this._$submitButtonNode.removeClass("disabled"),this._$returnMethodPickUpTimesList.removeClass("hidden"),this._$returnMethodPickUpTimesInstructions.html(this._returnMethodPickUpTimesInstructionsHtml)}},{key:"_onRequestTimeslotSelectChange",value:function(a){a.preventDefault(),a.stopPropagation();var b=JSON.parse(a.currentTarget.value);this._handleRequestTimeslotChange(b),APP.pubsub.publish("timeslot.selected",b)}},{key:"_onAddAddressNodeClick",value:function(a){a.preventDefault(),a.stopPropagation(),this._gotoAddAddressTray()}},{key:"sendOrderDataToAngular",value:function(){var a={mode:this._state.data.request.return_type},b=JSON.parse(window.localStorage.getItem("tray-request-exchange-return-data")).order;APP.pubsub.publish("analytics-order-details-exchange-return",a),g.hideScrollbar();var c=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:j(a,b)}});window.parent.dispatchEvent(c)}}]),a}(),a("default",C)}}}),a.register("57",["3","4","35","2d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a)}return b(a,null,[{key:"getReturnTotals",value:function(b,c){var d=b.returns_amount_fees,f=0;return null!==d&&e(d).length>0&&(f=a._retrieveAdjustmentNegative(c,d),c-=f),{totalPrice:c,adjustementNegative:f}}},{key:"_retrieveAdjustmentNegative",value:function(b,c){var e=0;return d(c).forEach(function(c){void 0!==c.max_price&&void 0!==c.min_price&&void 0!==c.fixed_price&&void 0!==c.percent_price&&b>=c.min_price&&(""===c.max_price||b<=c.max_price)&&(e=a._getFeesAmount(b,c.percent_price,c.fixed_price))}),e}},{key:"_getFeesAmount",value:function(a,b,c){return 0===b?c:c/100*a}}]),a}(),a("default",f)}}}),a.register("59",["3","4","16","17","18","24","26","27","32","35","50","54","57","2d","1a","1e","1b"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.TrayUtils},function(a){h=a},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default}],execute:function(){"use strict";s="/order/exchange-return-details",t="/exchange-return/request",u={exchange:"refund",refund:"exchange"},v=function(){function a(){c(this,a),this._$el=jQuery("#tray-request-exchange-return"),this._$itemListHolder=jQuery("#exchange-return-order-items"),this._$summaryHolder=jQuery("#exchange-return-order-summary"),this._$form=jQuery("#hermes-checkout-request-exchange-return-form"),this._$formSubmitError=jQuery("#missing-exchange-return-items-error"),this._$formTextBox=jQuery("#edit-exchange-additional-requests"),this._totalItems=0,this._currencyFormat=APP.CURRENCY_MAP[f.get("currentStore")],this._currencyFormat.precision=2,this.tray=new d({$el:this._$el,name:"tray-request-return",showOverlay:!0}),this._$form.attr("novalidate","novalidate"),this._$formSubmitError.addClass("hidden"),this._setupState(),this._bind()}return b(a,[{key:"_setupState",value:function(){this._config={data:{}},this._state={data:{}}}},{key:"_bind",value:function(){var a=this;APP.pubsub.subscribe("exchange.orderDetail.open",this._openOrderDetail.bind(this)),APP.pubsub.subscribe("return.items.loaded",function(){var a=void 0;this._$form.length&&(a=this._$form.get(0)),a&&(this.validator=new r({inputs:a.querySelectorAll("[name]")}))}.bind(this)),this._$el.on("click","[data-bind=quantity-modifier]",this._onModifyProductQuantityButtonClick.bind(this)),this._$el.on("click",'[data-bind="enableForRefundOrExchange"]',this._onEnableForRefundOrExchangeCheckboxChange.bind(this)),this._$el.on("change",'[data-bind="reasonChange"]',this._onReasonSelectChange.bind(this)),this._$form.on("submit",this._onSubmitRequest.bind(this)),APP.pubsub.subscribe("method-return-angular",function(){a._$form.submit()}),APP.pubsub.subscribe("order-details-angular",this.sendOrderDataToAngular.bind(this))}},{key:"setNewTrayData",value:function(a){this._handleNewTrayData(a)}},{key:"_loadState",value:function(a){return p(s,{order_id:a.orderNumber},"GET").fail(function(){e.technicalError()})}},{key:"_sendRequest",value:function(a){var b=this._assembleRequestPayload(a);return p(t,b).fail(function(){return e.technicalError()})}},{key:"_initialiseLocalState",value:function(a){var b={};return a.order.items.forEach(function(a){a.min_reached=!1,a.disableCheckbox=!1,a.max_reached=!0,a.qty=parseInt(a.qty_ordered,10),b[a.item_order_id]=jQuery.extend(!0,{},a)}),b}},{key:"_dispatchConfigMutation",value:function(a){var b=this;this._setupDomFromConfig(a),this._handleStateSet(this._state,"data",{}),this._loadState(a).done(function(a){if(e.hideOverlay(),a.error)e.showMessage({message:{description:a.error.message}});else{var c=jQuery.extend(!0,{},{local:b._initialiseLocalState(a),api:a});b._handleStateSet(b._state,"data",c)}})}},{key:"_dispatchStateMutation",value:function(a){this._populateOrderItems(a),this._populateSummary(a)}},{key:"_populateOrderItems",value:function(a){var b=this;if(a&&a.data.api&&a.data.api.order&&a.data.api.order.items){var c=a.data.api.order.hscode_proforma_dependency,d=a.data.api.order.items.map(function(d){var e=d.item_order_id,g=Drupal.settings.hermes_checkout.exchange_and_return.return_reasons.map(function(b){return{reason:b,selected:a.data.local[e].reason===b.value}}),i=b._config.data.config.mode,j=i===q.EXCHANGE,k=!j,m=j?q.EXCHANGE:q.RETURN,n=d.is_refundable&&d.is_exchangeable&&!(c&&""===d.hscode),o=Drupal.settings.hermes_translations.exchangeReturn[m+"Label"],p=Drupal.settings.hermes_translations.exchangeReturn.customerService,r=a.data.local[e];return h.updateCurrencyPl(a.data.api.order,APP.CURRENCY_MAP[a.data.api.order.store_code]),{isExchange:j,isRefund:k,returnType:i,returnOrExchange:m,returnOrExchangeFrontLabel:o,customerService:p,isReturnable:n,locale:f.get("currentStore").replace("_","/"),url:d.url,image:d.image,sku:d.sku,sku_trim:d.sku.replace(/\s/g,""),name:d.name,color:d.color,size:d.size,link_id:d.link_id,metal_titration1:d.metal_titration1,metal_titration2:d.metal_titration2,metal_titration3:d.metal_titration3,qty:r.qty,refundable_qty:r.refundable_qty,purchase_price:l.formatMoney(d.unit_price*r.qty,APP.CURRENCY_MAP[a.data.api.order.store_code]),refundable_price:l.formatMoney(d.unit_price*r.refundable_qty,APP.CURRENCY_MAP[a.data.api.order.store_code]),item_id:e,min_reached:r.min_reached,max_reached:r.max_reached,refundOrExchangeEnabled:r.refundOrExchangeEnabled,display_single_line:d.display_single_line,disableCheckbox:r.disableCheckbox,haveReason:r.haveReason,returnReasons:g,specificMessage:d.specific_message?Drupal.settings.hermes_translations.exchangeReturn[d.specific_message]:"",qty_increments:d.qty_increments}});this._$itemListHolder.html(i.render(APP.templates.exchangeRequestItems,{items:d})),APP.pubsub.publish("return.items.loaded")}}},{key:"_populateSummary",value:function(a){if(a&&a.data.api&&a.data.api.order&&a.data.api.order.items){var b=a.data.api.order,c=k(a.data.local).filter(function(a){return a.refundOrExchangeEnabled});this._totalItems=c.reduce(function(a,b){return a+=b.refundable_qty},0);var d=c.reduce(function(a,b){return a+=b.price_incl_tax*b.refundable_qty},0),e=0,f=n.getReturnTotals(b,d);void 0!==f&&(void 0!==f.totalPrice&&(d=f.totalPrice),void 0!==f.adjustementNegative&&(e=f.adjustementNegative));var g=c.reduce(function(a,b){return a+=(b.price_incl_tax-b.unit_price)*b.refundable_qty},0),j=b.shipping_address.country_id||Drupal.settings.hermes_locale,p=o(b.show_tax).find(function(a){return a.match(new RegExp("^"+j,"i"))}),r=b.show_tax_message&&b.show_tax_message[j.toLowerCase()];h.updateCurrencyPl(b,APP.CURRENCY_MAP[b.store_code]);var s={isExchange:this._config.data.config.mode===q.EXCHANGE,isRefund:this._config.data.config.mode===q.REFUND,orderDate:m(a.data.api.order.created_at),orderId:b.increment_id,totalItems:this._totalItems,totalPrice:l.formatMoney(d,APP.CURRENCY_MAP[b.store_code]),totalTax:l.formatMoney(g,APP.CURRENCY_MAP[b.store_code]),totalShipping:l.formatMoney(0,APP.CURRENCY_MAP[b.store_code]),adjustementNegative:l.formatMoney(e,APP.CURRENCY_MAP[b.store_code]),adjustementNegativeDisplay:e,show_tax:b.show_tax[p],taxMessage:Drupal.settings.hermes_translations.ui.checkout[r]};this._$summaryHolder.html(i.render(APP.templates.exchangeRequestSummary,s)),APP.pubsub.publish("request-exchange-return-summary-renderer")}}},{key:"_setupDomFromConfig",value:function(a){var b=jQuery(this._$el);b.length&&!function(){var c=jQuery("#tray-request-exchange-return .button-tray");e.showLoader();var d=jQuery('[data-mode="'+u[a.mode]+'"]'),f=jQuery('[data-mode="'+a.mode+'"]'),g=b.find(d),h=b.find(f);g.each(function(){jQuery(this).addClass("hidden")}),h.each(function(){var a=jQuery(this).attr("id");b.attr("aria-labelledBy",a),a&&c.attr("aria-describedBy",a),jQuery(this).removeClass("hidden")})}()}},{key:"_modifyAmount",value:function(a){var b=jQuery.extend(!0,{},this._state.data),c=parseInt(this._state.data.local[a.item_id].qty_ordered,10),d=a.step?a.step:1,e=this._state.data.local[a.item_id].refundable_qty+a.modifier*d,f=a.link_id,g=b.local[a.item_id],h=0===e,i=e===c;if(!(e<0||e>c)){if(g.refundable_qty=e,g.chosenForProcessing=!1,g.min_reached=h,g.max_reached=i,f){var j=jQuery('select[data-link-id="'+f+'"]');j.val(a.reason),j.each(function(){var a=jQuery(this).attr("data-item_id"),c=b.local[a];c.refundable_qty=e,c.chosenForProcessing=!1,c.min_reached=h,c.max_reached=i})}this._handleStateSet(this._state,"data",b)}}},{key:"_enableExchangeOrRefund",value:function(a){var b=jQuery.extend(!0,{},this._state.data),c=b.local[a.item_id];c.refundOrExchangeEnabled=a.enabled,c.refundable_qty=parseInt(c.qty_ordered,10),this._handleStateSet(this._state,"data",b)}},{key:"_checkLinkProduct",value:function(a){var b=this,c=a.link_id,d=a.item_id;if(c){var e=jQuery('[data-mode="'+this._config.data.config.mode+'"] [data-link-id="'+c+'"]:not([value="'+d+'"])');e.each(function(c,d){b._state.data.local[jQuery(d).val()].disableCheckbox=a.enabled,b._enableExchangeOrRefund({enabled:a.enabled,item_id:jQuery(d).val()})})}}},{key:"_storeSelectedReason",value:function(a){var b=a.link_id,c=this._state.data.local;if(c[a.item_id].reason=a.reason,c[a.item_id].haveReason=!0,b){var d=jQuery('select[data-link-id="'+b+'"]');d.val(a.reason),d.each(function(){var b=jQuery(this).attr("data-item_id");c[b].reason=a.reason,c[b].haveReason=!0})}}},{key:"_prepareSubmitRequest",value:function(a){var b=this;e.showLoader(),this._sendRequest(a).done(function(a){e.hideOverlay(),a.error?e.showMessage({message:{description:a.error.message}}):b._handleRequestData(a)})}},{key:"_assembleRequestPayload",value:function(a){var b=k(a.state.local).filter(function(a){return a.refundOrExchangeEnabled}).map(function(a){return{order_item_id:+a.item_order_id,return_reason:a.reason,qty:a.refundable_qty}});return b.length?{return_type:this._config.data.config.mode,request_notes:a.additionalRequests,locale:f.get("currentStore"),order_id:this._config.data.config.orderNumber,items:b}:{}}},{key:"_gotoRequestTray",value:function(a){this.trayExchangeReturnMethod||(this.trayExchangeReturnMethod=APP.trayController.getTray({name:"tray-exchange-return-method"}).wrapper),this.trayExchangeReturnMethod.setNewTrayData(a),this._pushNextTray("tray-exchange-return-method")}},{key:"_pushNextTray",value:function(a){APP.trayController.triggerTray({name:a})}},{key:"_handleConfigSet",value:function(a,b,c){return a[b]=c,this._dispatchConfigMutation(a.data.config),!0}},{key:"_handleStateSet",value:function(a,b,c){return a[b]=c,this._dispatchStateMutation(a),!0}},{key:"_handleNewTrayData",value:function(a){this._handleConfigSet(this._config,"data",a)}},{key:"_handleRequestData",value:function(a){var b={requestData:a,orderData:this._state.data.api.order};"angular"===this._config.data.config.type?this.sendRequestDataToAngular(b):this._gotoRequestTray(b)}},{key:"sendRequestDataToAngular",value:function(a){g.hideScrollbar();var b=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-method",trayData:a}});window.parent.dispatchEvent(b)}},{key:"_onModifyProductQuantityButtonClick",value:function(a){var b=+a.currentTarget.getAttribute("data-modifier"),c=a.currentTarget.getAttribute("data-item_id"),d=a.currentTarget.getAttribute("data-link-id"),e=a.currentTarget.getAttribute("data-step");this._modifyAmount({modifier:b,item_id:c,link_id:d,step:e})}},{key:"_onEnableForRefundOrExchangeCheckboxChange",value:function(a){var b=a.currentTarget.value,c=a.currentTarget.checked,d=a.currentTarget.getAttribute("data-link-id");this._enableExchangeOrRefund({item_id:b,enabled:c}),this._checkLinkProduct({link_id:d,enabled:c,item_id:b,current_target:a.currentTarget}),c&&APP.pubsub.publish("analytics-enable-exchange-return",{mode:this._config.data.config.mode}),this._setRequiredSelectForm(this._$form)}},{key:"_setRequiredSelectForm",value:function(a){a.find("select").each(function(){var a=jQuery(this),b=jQuery('[id*="-item-'+a.data("item_id")+'"]');b.is(":checked")&&!b.is(":disabled")&&(a.attr(q.REQUIRED,q.REQUIRED),a.addClass(q.REQUIRED))})}},{key:"_onReasonSelectChange",value:function(a){a.preventDefault();var b=a.currentTarget.getAttribute("data-item_id"),c=a.currentTarget.value,d=a.currentTarget.getAttribute("data-link-id");this._storeSelectedReason({item_id:b,reason:c,link_id:d}),this.validator.changeHandler(a)}},{key:"_onSubmitRequest",value:function(a){var b=jQuery('[data-bind="enableForRefundOrExchange"]');if(a.preventDefault(),a.stopPropagation(),APP.pubsub.publish("analytics-continue-exchange-return",{mode:this._config.data.config.mode}),this.validator.runTests(a),!this._$form.find(".validation-error").length)if(this._totalItems){this._$formSubmitError.addClass("hidden"),this.validator.removeErrorMessageInPageTitle(b);var c=this._$formTextBox.val(),d=jQuery.extend(!0,{},this._state.data);this._prepareSubmitRequest({state:d,additionalRequests:c})}else this._$formSubmitError.removeClass("hidden"),this.validator.showErrorMessageInPageTitle(b)}},{key:"_openOrderDetail",value:function(){var a={mode:this._config.data.config.mode};APP.pubsub.publish("analytics-order-details-exchange-return",a),jQuery(".js-to-order-details").trigger("click",j(a,this._state.data.api.order));
}},{key:"sendOrderDataToAngular",value:function(){var a={mode:this._config.data.config.mode},b=JSON.parse(window.localStorage.getItem("tray-request-exchange-return-data")).order;APP.pubsub.publish("analytics-order-details-exchange-return",a),g.hideScrollbar();var c=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:j(a,b)}});window.parent.dispatchEvent(c)}}]),a}(),a("default",v)}}}),a.register("5a",["16","17","1b","1e","1a","1d"],function(a){"use strict";function b(){function a(a){var c=jQuery(a.currentTarget),d=c.attr("id")||"tray-fapiao-personal";o.find("label").each(function(){var a=jQuery(this);a.attr("id").includes(d)?a.addClass("checked"):a.removeClass("checked")}),"tray-fapiao-personal"===d?r.slickGoTo(0):r.slickGoTo(1),b(d),s.resetErrors()}function b(a){j.find("input").each(function(){var b=jQuery(this);a===b.data("fapiao-type")&&b.hasClass("required")?(b.attr(f.REQUIRED,f.REQUIRED),"required-chinese"===b.data("required-chinese")&&b.addClass(b.data("required-chinese"))):(b.removeAttr(f.REQUIRED),b.removeClass(b.data("required-chinese")))})}var i=jQuery("#tray-request-fapiao .tray-close"),j=jQuery("#tray-fapiao-options"),k=jQuery("#request-fapiao-informations"),l=jQuery('#request-fapiao-informations [name="fapiao-method"]'),m=jQuery('#request-fapiao-informations [name="fapiao-method"]#tray-fapiao-personal'),n=jQuery('#request-fapiao-informations [name="fapiao-method"]#tray-fapiao-company'),o=jQuery(".checkout-fapiao-choice"),p=jQuery("#tray-fapiao-generate-form"),q="/fapiao/create",r=void 0,s=void 0;this.init=function(){this.$el=jQuery("#tray-request-fapiao"),this.tray=new c({$el:this.$el,name:"tray-request-fapiao",showOverlay:!0}),k[0]&&(s=new e({inputs:k[0].querySelectorAll("[name]")})),p.attr("novalidate","novalidate"),this.createFapiaoCarousel(),h.isWechatInApp()&&jQuery(".loader-button-fapiao-confirm").html(Drupal.settings.hermes_translations.ui.confirm),this.bind()},this.bind=function(){APP.pubsub.subscribe("order.details.render",function(a,b){this.fapiao=b.order.fapiao,this.order=b.order,this.fapiao&&this.preFillForm()}.bind(this)),this.tray.addEventListener("open",this._onOpenComplete.bind(this)),l.on("change",a),p.on("submit",this.submitForm.bind(this))},this.createFapiaoCarousel=function(){r=j.slick({arrows:!1,adaptiveHeight:!1,draggable:!1,touchMove:!1,swipe:!1,infinite:!1,accessibility:!0}).slick("getSlick"),j.on("beforeChange",function(a,b,c,d){var e=jQuery(b.$slides[d]).height();jQuery(b.$slider).animate({height:e},200)})},this.submitForm=function(a){var b=this;if(s.runTests(a),!p.find(".validation-error").length){this.showLoader();var c={order_id:this.order.increment_id};m.is(":checked")?(c.type=0,c.name=jQuery("#edit-name").val(),c.locale=Drupal.settings.hermes_locale):(c.type=1,c.company_name=jQuery("#edit-companyname").val(),c.tax_id=jQuery("#edit-taxid").val(),c.company_address=jQuery("#edit-companyaddress").val(),c.company_phone_number=jQuery("#edit-companyphonenumber").val(),c.company_bank_account=jQuery("#edit-companybankaccount").val(),c.locale=Drupal.settings.hermes_locale),g(q,c).done(function(a){if(a.success){window.parent.location=h.isWechatInApp()?a.qr_url:a.pdf_url,b.fapiao||(b.order.fapiao={}),b.order.fapiao.pdf_url=a.pdf_url,b.order.fapiao.qr_url=a.qr_url,b.order.fapiao.fapiaoGenerated=!0,APP.pubsub.publish("order.details.render",{order:b.order});var c=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"update:order.details.render",trayData:{order:b.order}}});window.parent.dispatchEvent(c),i.click()}else b.showNotificationError();b.hideLoader()}).fail(function(){b.hideLoader(),b.showNotificationError()})}},this.showLoader=function(){d.showLoaderButton("loader-button-fapiao-confirm")},this.hideLoader=function(){d.hideLoaderButton("loader-button-fapiao-confirm")},this.showNotificationError=function(){var a={message:Drupal.settings.hermes_translations.notification.account.fapiaoErrorMessage,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.account.fapiaoErrorMessage.variables),d.showMessage(a)},this.preFillForm=function(){p[0].reset(),this.fapiao.type_company===!0?this.preFillFormCompany():this.preFillFormPersonnal()},this.preFillFormPersonnal=function(){m.trigger("change"),m.prop("checked",!0),jQuery("#edit-name").val(this.fapiao.name)},this.preFillFormCompany=function(){n.trigger("change"),n.prop("checked",!0),jQuery("#edit-companyname").val(this.fapiao.company_name),jQuery("#edit-taxid").val(this.fapiao.tax_id),jQuery("#edit-companyaddress").val(this.fapiao.company_address),jQuery("#edit-companyphonenumber").val(this.fapiao.company_phone_number),jQuery("#edit-companybankaccount").val(this.fapiao.company_bank_account)},this._onOpenComplete=function(){jQuery('[data-tray-trigger="tray-request-fapiao"]').on("click",APP.pubsub.publish("analytics.generate.fapiao")),r.refresh()},this.setTrayState=function(a){this.fapiao=a.order.fapiao,this.order=a.order,this.fapiao?this.preFillForm():(m.trigger("change"),m.prop("checked",!0)),r.refresh(),APP.pubsub.publish("analytics.generate.fapiao")},this.init()}var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",b)}}}),a.register("5b",["16","17","18","19","1b","1a"],function(a){"use strict";function b(){function a(a){a.order?(APP.trayController.triggerTray({name:"tray-order",data:a}),this.$emailField.val(""),this.$orderNumber.val(""),this.$errorMessage&&(this.$errorMessage.remove(),this.$errorMessage=void 0,this.$orderNumber.removeClass("error"))):b.call(this,a)}function b(a){if(a&&a.error){var b=a.error.internal_code,d=Drupal.settings.hermes_translations.notification.order[b];if(d){var e={message:d,messageVariables:d.variables,type:"critical"};c.call(this,e)}else f.technicalError()}else f.technicalError()}var d="/order";this.init=function(){this.$el=jQuery("#tray-find-order"),this.$findOrderForm=this.$el.find("#hermes-commerce-find-order-form"),this.$signIn=this.$el.find(".js-sign-in-cta"),this.$emailField=this.$findOrderForm.find("[id^=edit-email]"),this.$orderNumber=this.$findOrderForm.find("#edit-order-ref"),this.$formItemOrderRef=this.$findOrderForm.find(".form-item-order-ref"),this.tray=new e({$el:this.$el,name:"tray-find-order",showOverlay:!0}),this.formHelpers=new h,this.$findOrderForm.get(0)&&(this.validator=new i({inputs:this.$findOrderForm.get(0).querySelectorAll("[name]")})),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.findOrder.toggle",this.toggleTray.bind(this)),this.$findOrderForm&&this.$findOrderForm.on("submit",this.getOrderInfo.bind(this)),this.$signIn.on("click",this.$el,this.pushAccountTray.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.openTray()},this.pushAccountTray=function(a){a.preventDefault(),this.tray.back()},this.openTray=function(){this.tray.isOpen||(this.$emailField.val(""),this.$orderNumber.val(""),this.tray.open())},this.getOrderInfo=function(c){if(c.preventDefault(),this.$findOrderForm[0].checkValidity()){var e=void 0,g=void 0,h=void 0;f.showLoader(),g=encodeURIComponent(this.$emailField.val()),e=this.$orderNumber.val(),h=d+"?order_id="+e+"&email="+g,j(h,{},"GET").done(a.bind(this)).fail(b.bind(this))}else this.validator.runTests(c)},this.init()}function c(a){d.call(this,a),f.hideOverlay()}function d(){this.$errorMessage||(this.$orderNumber.addClass("error"),this.$formItemOrderRef.after('<p class="error-order_ref clearfix error-message">'+Drupal.settings.hermes_translations.notification.order[2300001].description+"</p>"),this.$errorMessage=this.$el.find(".error-message, .error-message-copy"))}var e,f,g,h,i,j;return{setters:[function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",b)}}}),a.register("5c",["16","17","18","19","27","37","1e","1d"],function(a){"use strict";function b(){var a=jQuery(".container-elements-wts"),b=jQuery("#tray-find-store"),k=jQuery("#geolocate_user"),l=jQuery("#geolocate_address"),m=jQuery("#edit-find-stores-address"),n=jQuery("#find-store-content"),o=null;this.userLocation={latitude:null,longitude:null},this.init=function(){this.geocoder,h.currentMapEngine()===h.mapenginetype.GOOGLE?this.geocoder=new google.maps.Geocoder:this.geocoder=new BMap.Geocoder,this.webToShopData=null,this.formHelper=new f,window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(this.geoLocationSuccess.bind(this),function(){this.handleLocationError(!0)}.bind(this)):k.hide(),this.tray=new c({$el:b,name:"tray-find-store",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.find_store.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.store.favorite-shop",this.onFavoriteShopChange.bind(this)),k.on("click",this.geolocateUser.bind(this)),l.on("click",this.geolocateAddress.bind(this)),n.on("click",'[data-bind="shop-item"]',this.onShopItemClick.bind(this)),n.on("keydown",'[data-bind="shop-item"]',this.adressKeyPressed.bind(this)),m.on("keydown",this.keyPressed.bind(this))},this.setWebToShopData=function(a){this.webToShopData=a},this.onSelectShopClick=function(b){b.preventDefault();var c=b.currentTarget.getAttribute("data-shop-id");APP.pubsub.publish("tray.store.selected-shop",c),a.hide(),this.tray.close()},this.renderShopsList=function(a,c){var d=[],f=function(a){return a*Math.PI/180},h=function(a,b){var c=6378137,d=f(b.latitude-a.latitude),e=f(b.longitude-a.longitude),g=Math.sin(d/2)*Math.sin(d/2)+Math.cos(f(a.latitude))*Math.cos(f(b.latitude))*Math.sin(e/2)*Math.sin(e/2),h=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return c*h};if(void 0!==this.webToShopData)for(var k in this.webToShopData.shops)if(this.webToShopData.shops.hasOwnProperty(k)){if(!c){this.webToShopData.shops[k].calculatedDistance=h(this.userLocation,this.webToShopData.shops[k]);var l=this.webToShopData.shops[k].calculatedDistance/1e3,m=l.toFixed(2).replace(/\.0+$/,""),o=Drupal.settings.hermes_translations.units.distance.kmValue,p=e.get("currentCountry").toUpperCase();"string"==typeof p&&i.COUNTRY_USING_MILES.includes(p)&&(o=Drupal.settings.hermes_translations.units.distance.milesValue,m*=.621371,m=m.toFixed(2).replace(/\.0+$/,""),Number.prototype.toLocaleString&&(m=m.toLocaleString())),this.webToShopData.shops[k].calculatedDistanceHumanReadable=g.render(o,{distance:m})}d.push(this.webToShopData.shops[k])}c||"distance"!==a?d.sort(function(a,b){return a.company<b.company?-1:a.company>b.company?1:0}):d.sort(function(a,b){return a.calculatedDistance<b.calculatedDistance?-1:a.calculatedDistance>b.calculatedDistance?1:0});for(var q=0;q<d.length;q++)d[q].idx=q+1;var r=g.render(APP.templates.web2shopFindStoreTrayShopEntry,{shops:d,telLabel:Drupal.settings.hermes_translations.ui.cart.telLabel,getDirectionsOnMapText:Drupal.settings.hermes_translations.ui.cart.getDirectionsOnMapText});n.html(r),j.trapFocusInTray(b),jQuery('[data-bind="select-shop"]').on("click",this.onSelectShopClick.bind(this))},this.keyPressed=function(a){a.key===i.ENTER_KEY&&this.geolocateAddress(a)},this.adressKeyPressed=function(a){a.key===i.ENTER_KEY&&this.onShopItemClick(a)},this.geolocateUser=function(a){a.preventDefault(),window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(this.geoLocationSuccess.bind(this),function(){this.handleLocationError(!0)}.bind(this)):this.handleLocationError(!1)},this.geoLocationSuccess=function(a){this.userLocation.latitude=a.coords.latitude,this.userLocation.longitude=a.coords.longitude;var b={location:{lat:a.coords.latitude,lng:a.coords.longitude}};h.currentMapEngine()===h.mapenginetype.GOOGLE?this.geocoder.geocode(b,function(a,b){"OK"===b&&a[0]&&a[0].formatted_address?(m.val(a[0].formatted_address),this.renderShopsList("distance")):this.handleLocationError(!0)}.bind(this)):this.geocoder.getLocation(new BMap.Point(a.coords.longitude,a.coords.latitude),function(a){a?(m.val(a.address),this.renderShopsList("distance")):this.handleLocationError(!0)}.bind(this))},this.geolocateAddress=function(a){a.preventDefault();var b=m.val();d.showLoader();var c={address:b};h.currentMapEngine()===h.mapenginetype.GOOGLE?this.geocoder.geocode(c,function(a,b){"OK"===b&&a[0]&&a[0].geometry?(this.userLocation.latitude=a[0].geometry.location.lat(),this.userLocation.longitude=a[0].geometry.location.lng(),this.renderShopsList("distance"),d.hideOverlay()):this.handleLocationError(!0)}.bind(this)):(c=b,this.geocoder.getPoint(c,function(a){a?(this.userLocation.latitude=a.lat,this.userLocation.longitude=a.lng,this.renderShopsList("distance"),d.hideOverlay()):this.handleLocationError(!0)}.bind(this)))},this.handleLocationError=function(a){var b={message:Drupal.settings.hermes_translations.notification.checkout.unknownError};a?b.message=Drupal.settings.hermes_translations.notification.checkout.unableToLocateUser:b.message=Drupal.settings.hermes_translations.notification.checkout.geolocationNotSupported,d.showMessage(b);var c=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:c,message:b.message.description})},this.onFavoriteShopChange=function(a,b){this.webToShopData.favorite=b},this.onShopItemClick=function(a){a.preventDefault(),o||(o=APP.trayController.triggerTray({name:"tray-store-details",dontAdd:!0}));var b=jQuery.extend({},this.webToShopData.shops[a.currentTarget.getAttribute("data-id")],{isFavorite:a.currentTarget.getAttribute("data-id")===this.webToShopData.favorite,user:e.get("user")});o.wrapper.setWebToShopData(b),APP.trayController.triggerTray({name:"tray-store-details"})},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close(),a.hide()},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.init()}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",b)}}}),a.register("5d",["16","17","19","23","1b","1a","1d","1f"],function(a){"use strict";function b(a){function b(a){var b=void 0,c={};i.needPhoneLogin()?(c.destination=this.forgottenPasswordPhoneCodeField.value+this.forgottenPasswordLoginPhoneField.value,c.emailOrSms="SMS",c.emailOrPhone="phone number"):(c.destination=this.forgottenPasswordEmailField.value,c.emailOrSms="email",c.emailOrPhone="email address"),b=a.error&&"2330001"===a.error.internal_code?Drupal.settings.hermes_translations.notification.account.loginCodes[2330001]:Drupal.settings.hermes_translations.notification.account.forgotpassword,window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:b.title,messageDescription:b.description},j.showNotification("tray-forgotpassword","change-password"),d.hideLoaderButton("loader-forgot-password-tray")}function k(){d.technicalError(),d.hideLoaderButton("loader-forgot-password-tray")}var l="/forgot-password";this.init=function(a){this.formID="#tray-forgotpassword",this.$el=jQuery(this.formID),this.wrapper=document.querySelector(".tray-content-wrapper.forgot-password"),this.forgottenPasswordEmailField=this.wrapper.querySelector("#forgotten-password-email"),this.forgottenPasswordLoginPhoneField=this.wrapper.querySelector('input[name="loginphone"]'),this.forgottenPasswordPhoneCodeField=this.wrapper.querySelector('input[name="phonecode"]'),this.form=document.querySelector("#hermes-account-forgot-password-form"),this.honeypot=this.wrapper.querySelector("input[name=confirm_password]"),this.tray=new c({$el:this.$el,name:"tray-forgotpassword",showOverlay:!0}),this.formHelpers=new e,i.needPhoneLogin()&&(this.smsHelpers=new f,this.smsHelpers.init(this.formID)),this.validator=new g({inputs:this.form.querySelectorAll("[name]")}),this.bind(),this.setParams(a)},this.setParams=function(a){a&&a.email&&this.setEmail(a.email),a&&a.phoneCode&&this.setPhoneCode(a.phoneCode),a&&a.phoneNumber&&this.setPhoneNumber(a.phoneNumber)},this.bind=function(){APP.pubsub.subscribe("tray.forgotpassword.toggle",this.toggleTray.bind(this)),jQuery(this.forgottenPasswordPhoneCodeField).on("keyup",this.checkPhoneCode),jQuery("#forgotten-password-email").on("blur",this.formHelpers.checkEmailInput.bind(this)).on("keypress",this.formHelpers.reCheckErrorEmailInput.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.form.addEventListener("submit",this.submitForgottenPassword.bind(this))},this.checkPhoneCode=function(){var a=jQuery(this).val();jQuery(this).val(a.split(" ").join("")),a.indexOf("+")===-1&&jQuery(this).val("+"+a)},this._onTrayOpen=function(){if(i.needPhoneLogin())this.setPhoneNumber(jQuery('#hermes-account-login-form [name="loginphone"]').val()),this.setPhoneCode(jQuery('#hermes-account-login-form [name="phonecode"]').val());else{var a=jQuery("#login-email").val(),b=jQuery("#account-checkout-email").val();a?this.setEmail(a):b?this.setEmail(b):this.forgottenPasswordEmailField.value=""}this.setHoneyPot(jQuery('#hermes-account-login-form [name="confirm_password"]').val()),d.hideLoaderButton("loader-forgot-password-tray")},this.setEmail=function(a){a&&(this.forgottenPasswordEmailField.value=a)},this.setPhoneCode=function(a){a&&(this.forgottenPasswordPhoneCodeField.value=a)},this.setPhoneNumber=function(a){a&&(this.forgottenPasswordLoginPhoneField.value=a)},this.setHoneyPot=function(a){a&&(this.honeyPot.value=a)},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.submitForgottenPassword=function(a){if(a.preventDefault(),d.showLoaderButton("loader-forgot-password-tray"),!this.honeypot.value)if(this.form.checkValidity()){var c={};APP.pubsub.publish("tray.overlay.close",a),i.needPhoneLogin()?(c.phonecode=this.forgottenPasswordPhoneCodeField.value,c.phonenumber=this.forgottenPasswordLoginPhoneField.value):c.email=this.forgottenPasswordEmailField.value,c.async=!0,h(l,c).done(b.bind(this)).fail(k)}else this.validator.runTests(a),d.hideLoaderButton("loader-forgot-password-tray")},this.init(a)}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a}],execute:function(){a("default",b)}}}),a.registerDynamic("5e",[],!0,function(a,b,c){this||self;c.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a}}),a.registerDynamic("5f",["60","61","62","63","64","65"],!0,function(a,b,c){var d=(this||self,a("60")),e=a("61"),f=a("62"),g=a("63"),h=a("64"),i=a("65");c.exports=function(a,b,c,j){var k,l,m,n=i(a),o=d(c,j,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(f(n))for(k=h(a.length);k>p;p++)b?o(g(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)e(m,o,l.value,b)}}),a.registerDynamic("66",[],!0,function(a,b,c){this||self;c.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}}),a.registerDynamic("67",["63","68","69"],!0,function(a,b,c){var d=(this||self,a("63")),e=a("68"),f=a("69")("species");c.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}}),a.registerDynamic("6a",[],!0,function(a,b,c){this||self;c.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}}),a.registerDynamic("6b",["6c"],!0,function(a,b,c){this||self;c.exports=a("6c").document&&document.documentElement}),a.registerDynamic("6d",["6e","6c"],!0,function(a,b,c){var d=(this||self,a("6e")),e=a("6c").document,f=d(e)&&d(e.createElement);c.exports=function(a){return f?e.createElement(a):{}}}),a.registerDynamic("6f",["60","6a","6b","6d","6c","70","6"],!0,function(a,b,c){this||self;!function(b){var d,e,f,g=a("60"),h=a("6a"),i=a("6b"),j=a("6d"),k=a("6c"),b=k.process,l=k.setImmediate,m=k.clearImmediate,n=k.MessageChannel,o=0,p={},q="onreadystatechange",r=function(){var a=+this;if(p.hasOwnProperty(a)){var b=p[a];delete p[a],b()}},s=function(a){r.call(a.data)};l&&m||(l=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return p[++o]=function(){h("function"==typeof a?a:Function(a),b)},d(o),o},m=function(a){delete p[a]},"process"==a("70")(b)?d=function(a){b.nextTick(g(r,a,1))}:n?(e=new n,f=e.port2,e.port1.onmessage=s,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",s,!1)):d=q in j("script")?function(a){i.appendChild(j("script"))[q]=function(){i.removeChild(this),r.call(a)}}:function(a){setTimeout(g(r,a,1),0)}),c.exports={set:l,clear:m}}(a("6"))}),a.registerDynamic("71",["6c","6f","70","6"],!0,function(a,b,c){this||self;!function(b){var d,e,f,g=a("6c"),h=a("6f").set,i=g.MutationObserver||g.WebKitMutationObserver,b=g.process,j=g.Promise,k="process"==a("70")(b),l=function(){var a,c,f;for(k&&(a=b.domain)&&(b.domain=null,a.exit());d;)c=d.domain,f=d.fn,c&&c.enter(),f(),c&&c.exit(),d=d.next;e=void 0,a&&a.enter()};if(k)f=function(){b.nextTick(l)};else if(i){var m=1,n=document.createTextNode("");new i(l).observe(n,{characterData:!0}),f=function(){n.data=m=-m}}else f=j&&j.resolve?function(){j.resolve().then(l)}:function(){h.call(g,l)};c.exports=function(a){var c={fn:a,next:void 0,domain:k&&b.domain};e&&(e.next=c),d||(d=c,f()),e=c}}(a("6"))}),a.registerDynamic("72",["73"],!0,function(a,b,c){var d=(this||self,a("73"));c.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a}}),a.registerDynamic("74",["45","75","76","69"],!0,function(a,b,c){"use strict";var d=(this||self,a("45")),e=a("75"),f=a("76"),g=a("69")("species");c.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.setDesc(b,g,{configurable:!0,get:function(){return this}})}}),a.registerDynamic("77",["75","78","6c","60","79","42","6e","63","68","5e","5f","7a","66","69","67","71","76","72","7b","74","45","7c","6"],!0,function(a,b,c){this||self;!function(b){"use strict";var c,d=a("75"),e=a("78"),f=a("6c"),g=a("60"),h=a("79"),i=a("42"),j=a("6e"),k=a("63"),l=a("68"),m=a("5e"),n=a("5f"),o=a("7a").set,p=a("66"),q=a("69")("species"),r=a("67"),s=a("71"),t="Promise",b=f.process,u="process"==h(b),v=f[t],w=function(){},x=function(a){var b,c=new v(w);return a&&(c.constructor=function(a){a(w,w)}),(b=v.resolve(c)).catch(w),b===c},y=function(){function b(a){var c=new v(a);return o(c,b.prototype),c}var c=!1;try{if(c=v&&v.resolve&&x(),o(b,v),b.prototype=d.create(v.prototype,{constructor:{value:b}}),b.resolve(5).then(function(){})instanceof b||(c=!1),c&&a("76")){var e=!1;v.resolve(d.setDesc({},"then",{get:function(){e=!0}})),c=e}}catch(a){c=!1}return c}(),z=function(a,b){return!(!e||a!==v||b!==c)||p(a,b)},A=function(a){var b=k(a)[q];return void 0!=b?b:a},B=function(a){var b;return!(!j(a)||"function"!=typeof(b=a.then))&&b},C=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=l(b),this.reject=l(c)},D=function(a){try{a()}catch(a){return{error:a}}},E=function(a,c){if(!a.n){a.n=!0;var d=a.c;s(function(){for(var e=a.v,g=1==a.s,h=0,i=function(b){var c,d,f=g?b.ok:b.fail,h=b.resolve,i=b.reject;try{f?(g||(a.h=!0),c=f===!0?e:f(e),c===b.promise?i(TypeError("Promise-chain cycle")):(d=B(c))?d.call(c,h,i):h(c)):i(e)}catch(a){i(a)}};d.length>h;)i(d[h++]);d.length=0,a.n=!1,c&&setTimeout(function(){var c,d,g=a.p;F(g)&&(u?b.emit("unhandledRejection",e,g):(c=f.onunhandledrejection)?c({promise:g,reason:e}):(d=f.console)&&d.error&&d.error("Unhandled promise rejection",e)),a.a=void 0},1)})}},F=function(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!F(b.promise))return!1;return!0},G=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),E(b,!0))},H=function(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=B(a))?s(function(){var d={r:c,d:!1};try{b.call(a,g(H,d,1),g(G,d,1))}catch(a){G.call(d,a)}}):(c.v=a,c.s=1,E(c,!1))}catch(a){G.call({r:c,d:!1},a)}}};y||(v=function(a){l(a);var b=this._d={p:m(this,v,t),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(g(H,b,1),g(G,b,1))}catch(a){G.call(b,a)}},a("72")(v.prototype,{then:function(a,b){var c=new C(r(this,v)),d=c.promise,e=this._d;return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&E(e,!1),d},catch:function(a){return this.then(void 0,a)}})),i(i.G+i.W+i.F*!y,{Promise:v}),a("7b")(v,t),a("74")(t),c=a("45")[t],i(i.S+i.F*!y,t,{reject:function(a){var b=new C(this),c=b.reject;return c(a),b.promise}}),i(i.S+i.F*(!y||x(!0)),t,{resolve:function(a){if(a instanceof v&&z(a.constructor,this))return a;var b=new C(this),c=b.resolve;return c(a),b.promise}}),i(i.S+i.F*!(y&&a("7c")(function(a){v.all(a).catch(function(){})})),t,{all:function(a){var b=A(this),c=new C(b),e=c.resolve,f=c.reject,g=[],h=D(function(){n(a,!1,g.push,g);var c=g.length,h=Array(c);c?d.each.call(g,function(a,d){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[d]=a,--c||e(h))},f)}):e(h)});return h&&f(h.error),c.promise},race:function(a){var b=A(this),c=new C(b),d=c.reject,e=D(function(){n(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})}(a("6"))}),a.registerDynamic("7d",["7e","7f","80","77","45"],!0,function(a,b,c){this||self;a("7e"),a("7f"),a("80"),a("77"),c.exports=a("45").Promise}),a.registerDynamic("3f",["7d"],!0,function(a,b,c){this||self;c.exports={default:a("7d"),__esModule:!0}}),a.register("81",["18","58"],function(a){function b(a,b,d,e){var f=void 0;return e=e||window.csrfEnabled,d&&d.match(/^(POST|GET)$/)||(d="POST"),e?f=c(a,b,d):(f=jQuery.Deferred(),APP.pubsub.subscribe("csrfToken.headerAdded",function(){c(a,b,d).done(function(){var a;(a=f).resolve.apply(a,arguments)}).fail(function(){var a;(a=f).reject.apply(a,arguments)})})),f}function c(a,b,c){var f=void 0;if(c&&c.match(/^(POST|GET)$/)||(c="POST"),b||(b={}),b=e({from:"drpl"},b),a){b.locale=d.get("currentStore");var g=!!b.async;return g&&delete b.async,f={method:c,url:""+Drupal.settings.hermes_global.url_backjs+a,headers:{"Cache-Control":"max-age=0"}},"POST"===c?(f=e({},f,{data:JSON.stringify(b),contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}),g&&(f.async=g)):f=e({},f,{data:b,xhrFields:{withCredentials:!0}}),jQuery.ajax(f)}}var d,e;return{setters:[function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("82",["16","17","18","81","83","3f","1e"],function(a){function b(){function a(){z.addClass("focus")}function b(){z.removeClass("focus")}function e(a){return H=!0,u()?(B.html('<span class="warning">'+t()+"</span>"),E.addClass("disabled")):(B.html(t()),E.removeClass("disabled")),!(t()<=0&&a.key===i.ENTER_KEY)}function j(a){var b=a.originalEvent.clipboardData.getData("text/plain"),c=b.split("\n").length-1-t();return!(c>0)&&(B.html(c),E.removeClass("disabled"),!0)}function k(a){a.key===i.BACKSPACE_KEY&&t()>=0&&(B.html(t()),E.removeClass("disabled"))}function l(a,b){C[0]&&(C[0].checked=b)}function m(){APP.pubsub.publish("checkout.gift.hidePrice",!!C[0].checked)}function n(){q(),p(A[0])}function o(a){a.stopPropagation()}function p(a){var b=void 0;if(document.createRange){b=document.createRange(),b.selectNodeContents(a),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}else b=document.body.createTextRange(),b.moveToElementText(a),b.collapse(!1),b.select()}function q(){var a=A[0].getAttribute("placeholder");A.find(".placeholder-text").text()!==a&&A.text()||(A.off("focus",r),A.html(""),window.navigator.userAgent.toLowerCase().includes("firefox")&&A.html("&nbsp;")),g.isSmall()&&jQuery(".tray-gift").scrollTop(z.offset().top-30)}function r(){A.text().length||(A.html(G),A.on("focus",q),B.html(A.data("giftMaxLines")))}function s(){A.html(""),r()}function t(){var a=18,b=z[0].clientHeight-A[0].clientHeight;return Math.ceil(b/a)}function u(){var a=18,b=z[0].clientHeight+a;return b<A[0].clientHeight}var v="/delivery/gift",w=this,x=jQuery("#tray-gift"),y=jQuery("#tray"),z=jQuery("#giftMessageWrapper"),A=jQuery("#giftMessage"),B=jQuery('[data-bind="gift-lines-info"]'),C=jQuery("#edit-hide-price--2"),D=jQuery("#hermes-checkout-delivery-gift-message-form"),E=D.find("button"),F=jQuery("#edit-gift"),G=void 0,H=!1;this.init=function(){this.tray=new c({$el:x,name:"tray-gift",showOverlay:!0,validate:this.trayValidator.bind(this)}),G=jQuery(document.createElement("div")).text(A.attr("placeholder")).addClass("placeholder-text"),A.text(""),r(),this.bind()},this.bind=function(){A.on("input",e.bind(this)),A.on("keyup",k.bind(this)),A.on("paste",j.bind(this)),A.on("focus",a.bind(this)),A.on("blur",r.bind(this),b.bind(this)),A.on("click",o.bind(this)),z.on("click",n.bind(this)),C.on("change",m.bind(this)),D.on("submit",w.onGiftingFormSubmit.bind(this)),APP.pubsub.subscribe("tray.gift.toggle",this.toggleTray.bind(this)),APP.pubsub.subscribe("tray.gift.setHidePrice",l.bind(this))},this.trayValidator=function(){return new h(function(a){H?(d.showMessage({message:Drupal.settings.hermes_translations.notification.giftTextConfirmation,messageVariables:Drupal.settings.hermes_translations.notification.giftTextConfirmation.variables,type:"critical"}),jQuery(document).off("click.gifttrayClose").on("click.gifttrayClose",'[data-bind="closeTray"]',function(){s(),a(!0),d.hideOverlay(),jQuery(document).off("click.gifttrayClose",'[data-bind="closeTray"]')}),jQuery(document).off("click.gifttraySave").on("click.gifttraySave",'[data-bind="saveMessage"]',function(){a(!0),d.hideOverlay(),w.onGiftingFormSubmit(),jQuery(document).off("click.gifttraySave",'[data-bind="saveMessage"]')})):a(!0)})},w.onGiftingFormSubmit=function(a){var b=A.html().replace(/<\/div>/g,"").replace(/<div>/g,"\n").replace(/<br>/g,"").trim();return a&&a.preventDefault(),H=!1,APP.pubsub.publish("checkout.gift.setMessage",b),!u()&&(d.showLoader(),void f(v,{gift:{is_gift:F.is(":checked"),message:b,hide_price:!!C[0].checked,handwritten:!1,gift_card_type:b?"custom":"blank"}}).done(this.closeTray.bind(this)).fail(function(a){console.error(a),d.hideOverlay()}))},this.openTray=function(){y.addClass("tray-gift"),this.tray.open()},this.closeTray=function(){d.hideOverlay(),this.tray.isOpen&&(this.tray.close(),setTimeout(function(){y.removeClass("tray-gift")},500))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.init()}var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("84",["16","85","1d","1e"],function(a){"use strict";function b(){this.init=function(){if(this.$el=jQuery("#tray-help"),this.tray=new c({$el:this.$el,name:"tray-help",showOverlay:!0}),this.bind(),("cn"===Drupal.settings.hermes_current_country||window.location.host.includes(".cn"))&&(jQuery(".chat-with-us").css({display:"block"}),window.screen.width<f.TABLET_PORTRAIT_WIDTH?(jQuery(".chat-with-us-description-mobile").css({display:"block"}),jQuery(".chat-with-us-description").css({display:"none"}),jQuery(".chat-with-us-qr").css({width:"40%"})):(jQuery(".chat-with-us-description-mobile").css({display:"none"}),jQuery(".chat-with-us-description").css({display:"inline-block"}),jQuery(".chat-with-us-qr").css({width:"30%"})),e.isWechatInApp())){var a=jQuery(".chat-with-us .chat-with-us-qr");a&&a.length>0&&a.css({
display:"none"})}("cn_en"===Drupal.settings.hermes_locale||window.location.search.includes("cn_en"))&&jQuery("#chat-with-us-description-hours").css({display:"block",width:"60%"}),jQuery(".call-us a").on("click",function(a){d.helpLink(a,"Help","Contact","Call-us")}),jQuery(".help-questions > li > a").on("click",function(a){d.helpLink(a,"Help","FAQ")}),jQuery(".tray-help-content-wrapper  > a").on("click",function(a){d.helpLink(a,"Help","FAQ","See all")})},this.bind=function(){APP.pubsub.subscribe("tray.help.toggle",this.toggleTray.bind(this)),APP.pubsub.publish("helpAnalytics.pageview")},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.init()}var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",b)}}}),a.register("86",["16","17","18"],function(a){"use strict";function b(){this.init=function(){this.$el=jQuery("#tray-locale"),this.$navItems=this.$el.find("[data-action]"),this.$countryNotification=jQuery(".country-notification"),this.$language=jQuery("#tray-locale-1 a.ripple-effect"),this.tray=new c({$el:this.$el,name:"tray-locale",showOverlay:!0}),this.bind()},this.bind=function(){APP.pubsub.subscribe("tray.locale.toggle",this.toggleTray.bind(this)),this.$navItems.on("click",this.handleSubTray.bind(this)),this.$countryNotification.on("click",this.countryNotification.bind(this)),this.$language.on("click",this.changeCountry.bind(this))},this.handleSubTray=function(a){a.preventDefault();var b=a.currentTarget.dataset.tray.substring(1);this.tray.dispatchEvent(new CustomEvent("genericTrayTrigger",{detail:{name:b}}))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.countryNotification=function(a){a.preventDefault();var b=jQuery(jQuery(a.target).attr("href"))[0].outerHTML;b.length&&d.showMessage({type:"semi-critical",inject:!0,message:b})},this.changeCountry=function(a){a.preventDefault(),e.set("changeLanguage",!0),window.location.href=a.currentTarget.href},this.init()}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("87",["6e","88"],!0,function(a,b,c){var d=(this||self,a("6e"));a("88")("freeze",function(a){return function(b){return a&&d(b)?a(b):b}})}),a.registerDynamic("89",["87","45"],!0,function(a,b,c){this||self;a("87"),c.exports=a("45").Object.freeze}),a.registerDynamic("8a",["89"],!0,function(a,b,c){this||self;c.exports={default:a("89"),__esModule:!0}}),a.register("8b",["3","4","8a","1e"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b,f,g){if(c(this,a),"object"==typeof b){b.tabIndex=-1,this.tree=f,this.groupTreeitem=g,this.domNode=b,this.isExpandable=!1,this.isVisible=!1,this.inGroup=g;for(var h=b.firstElementChild;h;){if("ul"===h.tagName.toLowerCase()){this.isExpandable=!0;break}h=h.nextElementSibling}this.keyCode=d({SPACE:e.SPACE_KEYCODE,LEFT:e.LEFT_KEYCODE,UP:e.UP_KEYCODE,RIGHT:e.RIGHT_KEYCODE,DOWN:e.DOWN_KEYCODE,HOME:e.HOME_KEYCODE,END:e.END_KEYCODE})}}return b(a,[{key:"init",value:function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),jQuery("#tray-nav-shop").on("click",".tray-close",this.hideExpandedMenu.bind(this))}},{key:"isExpanded",value:function(){return!!this.isExpandable&&"true"===this.domNode.getAttribute("aria-expanded")}},{key:"getRightKeyCode",value:function(a){this.isExpandable&&this.isExpanded()?this.tree.setFocusToNextItem(this):this.tree.expandTreeitem(this),a.stopPropagation(),a.preventDefault()}},{key:"getLeftKeyCode",value:function(a){this.isExpandable&&this.isExpanded()&&(this.tree.collapseTreeitem(this),a.stopPropagation(),a.preventDefault()),this.inGroup.isArray&&(this.tree.setFocusToParentItem(this),a.stopPropagation(),a.preventDefault())}},{key:"getSpaceKeyCode",value:function(a){this.isExpandable&&(this.isExpanded()?this.tree.collapseTreeitem(this):this.tree.expandTreeitem(this)),a.stopPropagation(),a.preventDefault()}},{key:"switchKeyCode",value:function(a){switch(a.keyCode){case this.keyCode.SPACE:this.getSpaceKeyCode(a);break;case this.keyCode.UP:this.tree.setFocusToPreviousItem(this),a.stopPropagation(),a.preventDefault();break;case this.keyCode.DOWN:this.tree.setFocusToNextItem(this),a.stopPropagation(),a.preventDefault();break;case this.keyCode.RIGHT:this.getRightKeyCode(a);break;case this.keyCode.LEFT:this.getLeftKeyCode(a);break;case this.keyCode.HOME:this.tree.setFocusToFirstItem(),a.stopPropagation(),a.preventDefault();break;case this.keyCode.END:this.tree.setFocusToLastItem(),a.stopPropagation(),a.preventDefault()}}},{key:"handleKeydown",value:function(a){a.altKey||a.ctrlKey||a.metaKey||(a.shift&&a.keyCode===this.keyCode.SPACE||a.shift&&a.keyCode===this.keyCode.RETURN?(a.stopPropagation(),a.preventDefault()):this.switchKeyCode(a))}},{key:"handleClick",value:function(a){a.target!==this.domNode&&a.target!==this.domNode.firstElementChild||(this.isExpandable&&this.isExpanded()?(this.tree.collapseTreeitem(this),a.stopPropagation()):(this.tree.expandTreeitem(this),a.stopPropagation()),this.domNode.classList.remove("focus"))}},{key:"handleFocus",value:function(){this.domNode.classList.add("focus")}},{key:"handleBlur",value:function(){this.domNode.classList.remove("focus")}},{key:"hideExpandedMenu",value:function(){var a=jQuery("#tray-nav-shop").find(".expanded"),b=jQuery("#tray-nav-shop").find("li").first();a.removeClass("expanded"),a.parent("li").attr("aria-expanded",!1),a.parent("li").attr("tabindex",-1),b.hasClass("has-sub-item")?b.attr("tabindex",0):b.find("a").attr("tabindex",0),this.tree.updateVisibleTreeitems()}}]),a}(),a("default",f)}}}),a.register("8c",["3","4","8b"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(b){c(this,a),"object"==typeof b&&(this.domNode=b,this.treeitems=[],this.firstTreeitem=null,this.lastTreeitem=null)}return b(a,[{key:"init",value:function(){this.findTreeitems(this.domNode,this,!1),this.updateVisibleTreeitems(),this.firstTreeitem.domNode.tabIndex=0}},{key:"findTreeitems",value:function(a,b,c){for(var e=a.firstElementChild,f=c;e;)("li"===e.tagName.toLowerCase()&&"span"===e.firstElementChild.tagName.toLowerCase()||"a"===e.tagName.toLowerCase())&&(f=new d(e,b,c),f.init(),b.treeitems.push(f)),e.firstElementChild&&this.findTreeitems(e,b,f),e=e.nextElementSibling}},{key:"setFocusToFirstItem",value:function(){this.setFocusToItem(this.firstTreeitem)}},{key:"setFocusToLastItem",value:function(){this.setFocusToItem(this.lastTreeitem)}},{key:"setFocusToItem",value:function(a){for(var b=0;b<this.treeitems.length;b++){var c=this.treeitems[b];c===a?(c.domNode.tabIndex=0,c.domNode.focus()):c.domNode.tabIndex=-1}}},{key:"setFocusToNextItem",value:function(a){for(var b=!1,c=this.treeitems.length-1;c>=0;c--){var d=this.treeitems[c];if(d===a)break;d.isVisible&&(b=d)}b&&this.setFocusToItem(b)}},{key:"setFocusToPreviousItem",value:function(a){for(var b=!1,c=0;c<this.treeitems.length;c++){var d=this.treeitems[c];if(d===a)break;d.isVisible&&(b=d)}b&&this.setFocusToItem(b)}},{key:"setFocusToParentItem",value:function(a){a.groupTreeitem&&this.setFocusToItem(a.groupTreeitem)}},{key:"expandTreeitem",value:function(a){if(a.isExpandable){var b=jQuery(a.domNode).parent("ul"),c=b.find(".expanded"),d=jQuery(a.domNode).children(".sub-nav");c.removeClass("expanded"),c.parent("li").attr("aria-expanded",!1),d.addClass("expanded"),a.domNode.setAttribute("aria-expanded",!0);var e=jQuery(a.domNode).parent(".sub-nav").parent(".has-sub-item");e.addClass("has-sub-nav"),this.updateVisibleTreeitems()}}},{key:"collapseTreeitem",value:function(a){var b=!1;if(b=a.isExpanded()?a:a.groupTreeitem){var c=jQuery(".nav-list-menu").find(".has-sub-nav");c.removeClass("has-sub-nav");var d=jQuery(a.domNode).children(".sub-nav");d.removeClass("expanded"),b.domNode.setAttribute("aria-expanded",!1),this.updateVisibleTreeitems(),this.setFocusToItem(b)}}},{key:"updateVisibleTreeitems",value:function(){this.firstTreeitem=this.treeitems[0];for(var a=0;a<this.treeitems.length;a++){var b=this.treeitems[a],c=b.domNode.parentNode;for(b.isVisible=!0;c&&c!==this.domNode;)"false"===c.getAttribute("aria-expanded")&&(b.isVisible=!1),c=c.parentNode;b.isVisible&&(this.lastTreeitem=b)}}}]),a}(),a("default",e)}}}),a.register("8d",["3","4","18","3b","2d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(){c(this,a)}return b(a,null,[{key:"init",value:function(){var b=jQuery("#tray-nav-shop");b.find("li:not(.aftersales):not(.editorial) a, li:not(.aftersales):not(.editorial) button").on("click",a.nav),b.find("li.aftersales a").on("click",a.navAftersales),b.find("li.editorial a").on("click",a.navEditorial)}},{key:"navAftersales",value:function(b){a.pushEventNavTrayInstitutional("ShopNavTray","Aftersales",b.srcElement.innerHTML)}},{key:"navEditorial",value:function(b){a.pushEventNavTrayInstitutional("ShopNavTray","Maison_Hermes_footer",b.srcElement.innerHTML)}},{key:"nav",value:function(b){var c=[];if(b&&b.currentTarget&&b.currentTarget.innerText&&b.currentTarget.className){c.push(a.toTitleCase(b.currentTarget.innerText).trim()),jQuery(this).parents("li").each(function(){var b=jQuery(this).find("span:eq(0)").text();""!==b&&c.unshift(a.toTitleCase(b).trim())});var e=c;"nav-item-institutional"!==b.currentTarget.className&&(e=a.convertCategoryPathListIntoPimCode(c)),a.sendCategoryToAnalytics(e,b),!e||window.location.pathname.indexOf("search")!==-1&&"link-menu"!==b.currentTarget.className||d.set("nav",e.join("/"))}}},{key:"sendCategoryToAnalytics",value:function(b,c){if(b&&b[0]){var d=e(b,3),f=d[0],g=d[1],h=d[2];if("nav-item-institutional"===c.currentTarget.className){var i=c.currentTarget.getAttribute("data-track");return void a.pushEventNavTrayInstitutional("ShopNavTray","Maison_Hermes_footer",i)}"nav-hero-cta"===c.currentTarget.className?g?a.pushEventNavTray("Lv1_"+f,"Lv2_"+g,"Lv3_"+g+"_EDITO_IMG"):a.pushEventNavTray("Lv1_"+f,f?"Lv2_"+f+"_EDITO_IMG":null,null):a.pushEventNavTray("Lv1_"+f,g?"Lv2_"+g:null,h?"Lv3_"+h:null)}}},{key:"toTitleCase",value:function(a){if(a)return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}},{key:"convertCategoryPathListIntoPimCode",value:function(b){var c=Drupal.settings.hermes_categories?Drupal.settings.hermes_categories:null;null!==c&&"object"==typeof c&&(c=f(c).map(function(a){return c[a]}));var d=a.checkCategoryPim(c,b);return d.length?d:b}},{key:"checkCategoryPim",value:function(a,b){if(null!==a&&a.length&&b[0]&&a[0].subcategories){var c=function(){var c=[];return a[0].subcategories.forEach(function(d){d.name.toUpperCase()===b[0].toUpperCase()&&(c.push(d.pim_code),a=d)}),b[1]&&a.subcategories.forEach(function(d){d.name.toUpperCase()===b[1].toUpperCase()&&(c.push(d.pim_code),a=d)}),b[2]&&a.subcategories.forEach(function(a){a.name.toUpperCase()===b[2].toUpperCase()&&c.push(a.pim_code)}),{v:c}}();if("object"==typeof c)return c.v}}},{key:"pushEventNavTray",value:function(a,b,c){var d="ShopNavTray";dataLayer.push({event:"uaevent",eventcategory:d,eventaction:a,eventlabel:b,event_lv3:c})}},{key:"pushEventNavTrayInstitutional",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=arguments.length<=3||void 0===arguments[3]?"":arguments[3];dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b||"",eventlabel:c,eventvalue:d})}}]),a}(),a("default",g)}}}),a.register("8e",["16","8c","8d"],function(a){"use strict";function b(){var a="tray-nav-shop";this.init=function(){this.$el=jQuery("#"+a),this.tray=new c({$el:this.$el,name:a,showOverlay:!0});for(var b=document.querySelectorAll('[role="tree"]'),f=0;f<b.length;f++){var g=new d(b[f]);g.init()}e.init(),this.bind()},this.bind=function(){var a=this;APP.pubsub.subscribe("tray.navigation.toggle",this.toggleTray.bind(this)),jQuery("[nav-tray-trigger]").on("click",function(b){return a.toggleOtherSideTray(b)})},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.toggleOtherSideTray=function(a){a.preventDefault();var b=a.currentTarget.getAttribute("nav-tray-trigger"),c=b.replace("-",".")+".toggle";this.tray.animationSpeed=0,this.tray.close(),this.tray.animationSpeed=.35,APP.trayController.triggerTray({name:b,dontAdd:!0}),APP.pubsub.publish(c),jQuery("[data-tray-trigger='"+b+"']").first().addClass("tray-trigger-origin")},this.init()}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("30",[],!1,function(b,c,d){var e=a.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){!function(){jQuery.fn.pwdMeter=function(a){return a=jQuery.extend({minLength:6,displayGeneratePassword:!1,generatePassText:"Password Generator",generatePassClass:"GeneratePasswordLink",randomPassLength:13,passwordBox:this},a),this.each(function(){function b(){var b=0,d=jQuery(a.passwordBox).val();switch(d.length>0&&d.length<a.minLength&&(b=1),d.length>=a.minLength&&b++,d.match(/[a-z]/)&&d.match(/[A-Z]/)&&b++,d.match(/\d+/)&&b++,d.match(/.[!,@#$%^&*?_~\-()]/)&&b++,d.length>12&&b++,c.attr("class","pwdMeter"),c.addClass("neutral"),b){case 1:case 2:c.addClass("weak");break;case 3:c.addClass("medium");break;case 4:case 5:c.addClass("strong");break;default:c.addClass("neutral")}}var c;jQuery(this).keyup(function(){c=jQuery(".pwdMeter"),b()})})}}()}(this),e()}),a.register("8f",["16","17","18","19","30","1a","1b","1e","1d","1f"],function(a){"use strict";function b(){function a(){jQuery("#create-new-password").pwdMeter({minLength:8})}function b(a){if(a.user){this.formHelpers.clearForm(this.$el.find("form"));var b={message:Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess,type:"critical",messageVariables:{}};jQuery.extend(b.messageVariables,Drupal.settings.hermes_translations.notification.account.changedPasswordSuccess.variables),window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:b.message.title,messageDescription:b.message.description},k.showNotification("tray-create-password","change-password"),e.set("sessionNeedsRefresh",!0),APP.pubsub.publish("account.checkSession")}else d.technicalError(),n.toggleTray();d.hideLoaderButton("loader-forgot-password-tray")}function l(a,b){var c=void 0;b&&"critical"===b?(c={message:Drupal.settings.hermes_translations.notification.account.passwordCases[a],messageVariables:{},type:"critical"},jQuery.extend(c.messageVariables,Drupal.settings.hermes_translations.notification.account.passwordCases[a].variables)):c={message:Drupal.settings.hermes_translations.notification.account.passwordCases[a],messageVariables:{}},window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:c.message.title,messageDescription:c.message.description}}function m(){d.technicalError(),d.hideLoaderButton("loader-forgot-password-tray"),n.toggleTray()}var n=this,o="/reset-password",p="/check-hash-validity";this.init=function(){var b=this;this.$el=jQuery("#tray-create-password"),this.$notification=jQuery(".tray-notification-message"),this.$form=this.$el.find("form"),this.formHelpers=new f,this.tray=new c({$el:this.$el,name:"tray-create-password",showOverlay:!0}),this.validator=new h({inputs:this.$form[0].querySelectorAll("[name]")}),this.getStateKeyHash().done(function(c){c.error?(b.handleError(c),b.showForgotPasswordTray(),b.$notification.on("click",".js-try-newhash, .js-try-again",b.notificationTryNewReset.bind(b))):c.user?(b.bind(),b.tray.open(),a()):d.technicalError()}).fail(m);var e=document.getElementById("strength-level"),g=document.getElementById("strength-level-span"),i={attributes:!0},k=document.getElementById("create-new-password"),l=j.pwdStrengthScreenReader(e,g,k);l.observe(e,i)},this.bind=function(){this.$el.find(".show-password").on("click",this.formHelpers.showPasswordMask.bind(this)),this.$form.on("submit",this.saveNewPassword.bind(this)),APP.pubsub.subscribe("tray.password.toggle",this.toggleTray.bind(this)),this.$notification.on("click",".js-try-newhash, .js-try-again",this.notificationTryNewReset.bind(this)),this.$notification.on("click",".js-signin",this.notificationSignIn.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.closeTray():this.openTray()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.saveNewPassword=function(a){if(a.preventDefault(),d.showLoaderButton("loader-forgot-password-tray"),this.$form[0].checkValidity()){var c=this.$el.find("#create-new-password").val(),e={pass:c,hash:Drupal.settings.hermes_account.reset_password_hash};g(o,e).done(b.bind(this)).fail(m)}else this.validator.runTests(a),d.hideLoaderButton("loader-forgot-password-tray")},this.getStateKeyHash=function(){var a={hash:Drupal.settings.hermes_account.reset_password_hash};return g(p,a,"GET")},this.showForgotPasswordTray=function(){this.toggleTray(),k.showNotification("tray-create-password","change-password")},this.handleError=function(a){var b=a.error.internal_code;switch(b){case i.ERRORCODE.expiredHash:case i.ERRORCODE.wrongEmailPassword:l(b,"critical");break;case i.ERRORCODE.hashNotFound:l(b);break;default:d.technicalError()}},this.notificationTryNewReset=function(a){a.preventDefault(),APP.trayController.triggerTray({name:"tray-forgotpassword",dontAdd:!0}),APP.pubsub.publish("tray.forgotpassword.toggle")},this.notificationSignIn=function(a){a.preventDefault(),d.hideOverlay(),APP.trayController.triggerTray({name:"tray-account",dontAdd:!0}),APP.pubsub.publish("tray.account.toggle")},this.init()}var c,d,e,f,g,h,i,j,k;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a}],execute:function(){a("default",b)}}}),a.register("53",["3","4","27","29","1e"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.formatPostcodeValue},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(){c(this,a)}return b(a,[{key:"getAddress",value:function(a,b,c){var g={default:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{region}}, {{{city}}}; {{country_id}}",AT:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",AU:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",CA:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",FI:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",FR:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{postcode}}; {{country_id}}",JP:"{{postcode}}; {{region_label}}{{{city}}}{{{street1}}} {{{street2}}}; {{country_id}}",NZ:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",SE:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcode}}; {{country_id}}",UK:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{{city}}}, {{region}}; {{country_id}}",US:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}, {{region}}, {{postcodewithzip}}; {{country_id}}",CN:"{{{region}}}, {{{city}}}, {{{district}}}, {{street1}}, {{country_id}}",DE:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}, {{region_label}}, {{{city}}}; {{country_id}}",SG:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{{city}}}; {{postcode}}, {{country_id}}",MY:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{postcode}}; {{{city}}}; {{region_label}}; {{country_id}}",HK:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{region_label}}, {{district_bis_label}}, {{{city}}}",MO:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{district_bis_label}}, {{{city}}}",TW:"{{{postcode}}}; {{region_label}}; {{district_bis_label}}; {{{street1}}}; {{{street2}}}; {{{country_id}}}",KR:"{{{street2}}}; {{{street1}}}; {{{city}}}; {{postcode}}; {{country_id}}",RI:"{{{street1}}}; {{{street2}}}; {{{city}}}; {{country_id}}",DH:"{{{street1}}}; {{{street2}}}; {{{city}}}; {{country_id}}",TH:"{{{company}}}; {{{street1}}}; {{{street2}}}; {{region_label}}; {{district_bis_label}}; {{postcode}}; {{{country_id}}}"};if(a){b=b||", ";var h=a.country_id?a.country_id:Drupal.settings.hermes_current_country.toUpperCase(),i=g[h]||g.default;c===f.REGION_DISABLED&&(i=i.replace("{{region}}, ",""),i=i.replace("{{region_label}}, ",""),i=i.replace("{{region_label}}","")),a.district_bis_label=a.district_bis_name,a.postcode=e(a.country_id,a.postcode),a.country_label=this.getCountryName(a.country_id),a.postcodewithzip=a.postcode,a.postcode_bis&&(a.postcodewithzip+="-"+a.postcode_bis);var j=d.render(i,a);return j=j.split("&#x2F;").join("/"),j=j.split("&#39;").join("'"),j=j.replace(/( ,)|( ;)/g,""),j=j.split(";").join(b),j=j.replace(/^,/,""),j=j.replace(/^ +/,""),a.isChinaZH&&(j=j.replace(/,/g,"")),j}}},{key:"getAreasStorageNameVariable",value:function(){var a=Drupal.settings.hermes_current_country.charAt(0).toUpperCase()+Drupal.settings.hermes_current_country.slice(1);return"areas"+a}},{key:"getCountryName",value:function(a){var b={default:"",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",BE:"Belgium",BW:"Botswana",BR:"Brazil",BG:"Bulgaria",CA:"Canada",CL:"Chile",CN:"China",CO:"Colombia",CR:"Costa Rica",HR:"Croatia",CZ:"Czech Republic",DK:"Denmark",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",GT:"Guatemala",HN:"Honduras",HK:"Hong Kong SAR China",HU:"Hungary",IN:"India",ID:"Indonesia",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakstan",KE:"Kenya",KR:"South Korea",KW:"Kuwait",LV:"Latvia",LB:"Lebanon",LT:"Lithuania",LU:"Luxembourg",MO:"Macau SAR China",MK:"Macedonia",MG:"Madagascar",MY:"Malaysia",ML:"Mali",MT:"Malta",MU:"Mauritius",MX:"Mexico",MD:"Moldova",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NO:"Norway",PK:"Pakistan",PA:"Panama",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",QA:"Qatar",RO:"Romania",RU:"Russia",SA:"Saudi Arabia",SN:"Senegal",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",ZA:"South Africa",ES:"Spain",LK:"Sri Lanka",SE:"Sweden",CH:"Switzerland",TW:"Taiwan",TH:"Thailand",TN:"Tunisia",TR:"Turkey",UG:"Uganda",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",VE:"Venezuela",VN:"Vietnam"};return b[a]||b.default}}]),a}(),a("default",g)}}}),a.register("26",["18","27","50","1e","1d"],function(a){"use strict";function b(a,b){var c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],d=c&&c.store_code?c.store_code:g.get("currentStore"),e=jQuery.extend(!0,{},APP.CURRENCY_MAP[d]);return c&&"plold_en"===c.store_code&&(e.symbol="€"),"undefined"==typeof e.precision&&"undefined"!=typeof b&&(e.precision=b),"string"==typeof a&&a.includes(e.symbol)?a:i.formatMoney(a,e)}function c(a,b){"plold_en"===a.store_code&&(b.symbol="€")}function d(a){if(a&&a.items&&a.items.length)for(var b=0;b<a.items.length;b++){var c=a.items[b],d=c.excluded_material?Drupal.settings.hermes_translations.ui.cart.excludedMaterial[c.excluded_material]:"",e=c.sku.replace(/\s/g,"");(e.indexOf("/")>=0||e.indexOf("|")>=0)&&(e=e.replace(/(\/|\|)/g,"\\$1")),jQuery("#"+e+" .cart-product-excluded-material").html(d);var f=c.excluded_material?Drupal.settings.hermes_translations.ui.cart.accessibility.warning:"";jQuery("#cart-product-excluded-material-warning").html(f)}}function e(a){var c=arguments.length<=1||void 0===arguments[1]?null:arguments[1],e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],f=void 0;if(a&&a.items){if(f=jQuery.extend({},a,Drupal.settings.hermes_translations.ui.cart),f.locale=Drupal.settings.hermes_url_locale,a.items&&a.items[0]&&a.items[0].options&&a.items[0].options.perso_info){if(a.items[0].options.perso_info.perso_product_type&&(f.is_perso_leather=p.includes(a.items[0].options.perso_info.perso_product_type),f.is_perso_smlg=a.items[0].options.perso_info.perso_product_type===n,f.is_perso_beltkit=a.items[0].options.perso_info.perso_product_type===o,f.is_perso_beltkit)){var g=void 0,i=void 0;a.items[0].set_items.forEach(function(a){"U003P"===a.product_code?i=a:g=a}),g&&(f.buckle_title=g.name,f.buckle_color=g.color,f.buckle_sku=g.sku),i&&(f.strap_title=i.name,f.strap_sku=i.sku),f.strap_size=a.items[0].options.perso_info.personalization_info_properties.size}a.items[0].options.perso_info.personalization_info_properties&&a.items[0].options.perso_info.personalization_info_properties.font&&(f.font_class=a.items[0].options.perso_info.personalization_info_properties.font.toLowerCase())}for(var k=function(d){var g=a.items[d];g.qty>1&&(g.several_quantities=!0);var i={metals:g.prop65,url_prop65:'<a href="https://www.p65warnings.ca.gov/" target="_blank">www.P65Warnings.ca.gov</a>'};g.prop65_information=!!g.prop65&&h.render(Drupal.settings.hermes_translations.ui.cart.prop65,i),g.final_price=b(g.final_price,2,f),g.max_reached=g.qty>=g.max_sale_qty,!e&&g.hasOwnProperty("set_items")&&g.set_items.forEach(function(a){for(var b=1;b<a.qty/g.qty;b++)g.set_items.push(a)}),g.stock&&g.stock.is_less_than_qty&&(g.max_reached=!0,g.stock&&g.stock.is_empty?g.stock_message=Drupal.settings.hermes_translations.ui.cart.error_no_stock:g.stock_message=Drupal.settings.hermes_translations.ui.cart.error_insufficient_stock),!c||c.internal_code!==j.ERRORCODE.notInStock&&c.internal_code!==j.ERRORCODE.outOfStock||g.sku!==c.item||(g.stock_message=Drupal.settings.hermes_translations.ui.cart.error_no_stock,g.qty_increments>1&&(g.stock_message=Drupal.settings.hermes_translations.ui.cart.error_not_enough_stock)),g.sku_trim=g.sku.replace(/\s/g,"")},l=0;l<a.items.length;l++)k(l);return d(a),h.render(APP.templates.cartItems,f)}}function f(a){var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(a){var d=jQuery.extend({},a,Drupal.settings.hermes_translations.ui.cart),e=Drupal.settings.hermes_locale;d.hasTax=!1;var f=g.get("isConnected");d.show_tax=!d.show_tax||d.show_tax[e],"ri_en"!==e&&"dh_en"!==e||(d.show_tax=!1),d.show_tax&&(a.tax_amount&&f===!0?d.tax_amount=b(a.tax_amount,2):a.isCheckoutPage?d.tax_amount=b(0,2):(a.grand_total=a.grand_total-a.tax_amount,d.tax_amount=j.NOTAX),d.tax_amount!==j.NOTAX&&a.shipping_address&&f===!0&&(d.hasTax=!0));var i="";i=a.shipping_address&&a.shipping_address.country_id?a.shipping_address.country_id:g.get("currentCountry")?g.get("currentCountry"):"";var n=a.show_tax_message&&a.show_tax_message[i.toLowerCase()];n&&(d.taxMessage=Drupal.settings.hermes_translations.ui.checkout[n]);var o=0;d.items&&d.items.forEach(function(a){l.includes(a.product_code)&&o<2?(o=2,d.express_options_label=d.delivery_options_label_furniture_items):m.includes(a.department_code)&&o<1?(o=1,d.express_options_label=d.delivery_options_label_perfume_items):d.express_options_label=d.delivery_options_label_regular_items}),a.isCheckoutPage&&(d.checkout=!0);var p=g.get("shipping_method")||a.shipping_method,q=a.available_shipping_methods;if(d.shipping_method=p,q&&q[p]&&!a.shipping_address.is_webtoshop){var r=q[p];d.shipping_method_label=r.title,d.shipping_amount=b(r.price,2),d.shipping_amount_product_page=b(a.shipping_amount,2),a.isCheckoutPage&&(d.duration_label=r.duration)}return a.shipping_address&&a.shipping_address.is_webtoshop&&(d.shipping_method_label=Drupal.settings.hermes_translations.ui.cart.collect_instore,d.shipping_amount="",d.web_shop_name=a.shipping_address.company,d.duration_label=a.shipping_duration),d.shipping_amount=b(d.shipping_amount,2),d.subtotal=a.subtotal&&b(a.subtotal,2),d.total=a.grand_total&&b(a.grand_total,2),d.locale=Drupal.settings.hermes_url_locale,d.description=Drupal.settings.hermes_translations.ui.summary.description,d.qty=Drupal.settings.hermes_translations.ui.summary.qty,d.amount=Drupal.settings.hermes_translations.ui.summary.amount,d.france_only=i===j.FRANCE,d.cards=d.available_payments_methods?k.getCreditCardsData(d.available_payments_methods,!0):"",k.isChina()&&d.available_payments_methods&&jQuery.each(d.available_payments_methods,function(a){d[a]=!k.isWechatInApp()||"alipay_payment"!==a}),c?h.render(APP.templates.checkoutSummary,d):h.render(APP.templates.cartSummary,d)}}var g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){l=["M50","M51","7001","7002"],m=["V"],n="smallleathergoods",o="beltkits",p=[n,o],a("items",e),a("summary",f),a("excludedMaterialMessage",d),a("updateCurrencyPl",c)}}}),a.register("90",["16","17","18","26","27","32","50","52","53","54","2d","1a","1d","1e"],function(a){function b(a){var b=Drupal.settings.hermes_global.url_ecp+"/invoice?locale=LOCALE&hash=",q="/order",r=(Drupal.settings.hermes_locale,void 0);this.init=function(){r=new k,this.$el=jQuery("#tray-order"),this.$contentWrap=this.$el.find("#order-content"),(a.data||a.order)&&(this.orderData=a.order||a.data.order),(a.data||a.shops)&&(this.orderData.shops=a.shops||a.data.shops),this.tray=new c({$el:this.$el,name:"tray-order",showOverlay:!0}),a.email&&a.ref&&this.getOrderInfo(a.ref,a.email);var b=o.findGetParameter("order_id",window.location.search);b&&(APP.pubsub.subscribe("account.loggedin.CheckDone",this.checkUserAndLoadOrder.bind(this,b)),APP.pubsub.subscribe("account.loggedin.DOM",this.checkUserAndLoadOrder.bind(this,b))),this.bind(),this.orderData&&this.render()},this.checkUserAndLoadOrder=function(a){return e.hasSessionStorage()&&e.get("checkUserSessionToken")?void this.getOrderInfo(a):(e.set("close-account",!0),APP.trayController.removeLock(this.tray.instanceId),void APP.trayController.triggerTray({name:"tray-account",forceOpen:!0}))},this.getOrderInfo=function(a,b){var c={};c.order_id=a,b&&(c.email=b),d.showLoader(),n(q,c,"GET").fail(function(){d.technicalError()}).then(this.updateDom.bind(this))},this.updateDom=function(a){a.order?(d.hideOverlay(),this.orderData=a.order,this.render()):(this.tray.close(),this.errorHandling(a))},this.errorHandling=function(a,b){if(a&&a.error){var c=Drupal.settings.hermes_translations.notification.order[404];if(b=b||{},b.message=c,c)return void d.showMessage(b)}d.technicalError()},this.bind=function(){APP.pubsub.subscribe("order.details.render",function(a,b){this.orderData=b.order,this.orderData.shops=b.shops,this.render()}.bind(this)),this.$el.on("click","a.print-invoice",function(){APP.pubsub.publish("analytics-print-invoice",{mode:this.orderData.mode})}.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.render=function(){var a=jQuery.extend({},this.orderData,Drupal.settings.hermes_translations.ui),c=APP.CURRENCY_MAP[this.orderData.store_code];if(a.noTaxLabel=!0,a.shipping_address.name=j(this.orderData.shipping_address),a.billing_address.name=j(this.orderData.billing_address),a.billing_address.isHKorMO="HK"===a.billing_address.country_id||"MO"===a.billing_address.country_id,a.shipping_address.isHKorMO="HK"===a.shipping_address.country_id||"MO"===a.shipping_address.country_id,o.isChina()&&(a.billing_address.isChinaZH="cn_zh"===e.get("currentStore"),a.shipping_address.isChinaZH="cn_zh"===e.get("currentStore")),a.shipping_address.address=r.getAddress(this.orderData.shipping_address,"<br>"),
a.billing_address.address=r.getAddress(this.orderData.billing_address,"<br>"),this.orderData.webtoshop&&this.orderData.shops){var d=this.orderData.shops[this.orderData.webtoshop.shop_id];a.webtoshop.shop_name=d.company}a.is_gift=!!(a.gift&&a.gift.gift_card_type&&a.gift.gift_card_type.match(/^(custom|blank)$/i)),a.is_gift&&a.gift.message&&(a.gift.message=a.gift.message.replace(/\n/g,"<br>")),"adyen_hpp_paypal"===this.orderData.payment.method||"mercury_hpp_adyen_paypal"===this.orderData.payment.method?(a.payment.isPaypal=!0,a.payment.type="paypal"):(a.payment.isPaypal=null,a.payment.type=this.orderData.payment.cc_type),Drupal.settings.hermes_translations.ui.order.card_type_alt_tags[a.payment.type]?a.payment.type_label=Drupal.settings.hermes_translations.ui.order.card_type_alt_tags[a.payment.type]:a.payment.type_label=a.payment.type?a.payment.type.charAt(0).toUpperCase()+a.payment.type.slice(1):"",a.order.collection_by_label=Drupal.settings.hermes_translations.ui.order.collection_by_text,a.payment.cc_last4=this.orderData.payment.cc_last4,a.payment.cc_exp_month=this.orderData.payment.cc_exp_month,a.payment.cc_exp_year=this.orderData.payment.cc_exp_year,a.payment.cc_owner=this.orderData.payment.cc_owner,a.waitingInfo=this.orderData.payment.cc_last4?null:Drupal.settings.hermes_translations.ui.order.waiting_message_payment,a.created_at=l(this.orderData.created_at),"cn"===Drupal.settings.hermes_current_country?a.print=Drupal.settings.hermes_translations.ui.print_cn:a.print=Drupal.settings.hermes_translations.ui.print,a.downloadFapiao=Drupal.settings.hermes_translations.ui.downloadFapiao,a.generateFapiao=Drupal.settings.hermes_translations.ui.generateFapiao,a.generateFapiaoExpired=g.render(Drupal.settings.hermes_translations.ui.generateFapiaoExpired.title,{link1:Drupal.settings.hermes_translations.ui.generateFapiaoExpired.link1}),a.cartItems=f.items(this.orderData),a.status=null===this.orderData.status?"":this.orderData.status;var h=["au","ch","cn","no"];h.includes(Drupal.settings.hermes_translations.ui.order.local_country)&&(a.goodcountry=!0),a.noreturn=Drupal.settings.hermes_translations.ui.order.noreturnorder,a.customer_service=Drupal.settings.hermes_translations.ui.order.customer_service,a.returnDate=this.getReturnDate(a),a.returnDate&&(a.status=g.render(a.status,a)),this.isCountryWithNoDecimal(e.get("currentStore").substr(0,2))||(c.precision=2),a.orderSummary=this.getSummary(a,c),a.invoiceDownloadLink=b.replace("LOCALE",e.get("currentStore"))+this.orderData.order_id_hash,o.isChina()&&(a.order.billing_address_subtitle=Drupal.settings.hermes_translations.ui.order.billing_address_subtitle_cn),o.isWechatInApp()&&(a.weChatInApp=!0),a.isKorea="kr_ko"===Drupal.settings.hermes_locale,a.isChinaEN="cn_en"===Drupal.settings.hermes_locale,a.isChina=a.isChinaEN||"cn_zh"===Drupal.settings.hermes_locale,a.japanOrder=o.isJapan(),a.isKorea=o.isKorea(),a.desired_date_shipment=Drupal.settings.hermes_translations.ui.order.desired_date_shipment,a.displaySama=p.JAPAN.toUpperCase()===this.orderData.shipping_address.country_id,a.displayPrefix=p.JAPAN.toUpperCase()!==this.orderData.shipping_address.country_id,a.order.shipping_duration=this.orderData.shipping_duration,APP.pubsub.publish("order-details-renderer"),this.$contentWrap.html(g.render(APP.templates.orderDetails,a))},this.getReturnDate=function(a){var b=null;if(a.shipment.delivered_at&&(b=l(a.shipment.delivered_at)),a.refund){var c=a.refund[a.refund.length-1];b=l(c.return_date)}if(a.exchange){var d=a.exchange[a.exchange.length-1];b=l(d.return_date)}return b},this.getSummary=function(a,b){var c=a.shipping_address.country_id||Drupal.settings.hermes_locale,d=m(a.show_tax).find(function(a){return a.match(new RegExp("^"+c,"i"))}),e=a.show_tax_message&&a.show_tax_message[c.toLowerCase()],j=h({},b),k=a.taxes_covered?"taxes_covered":"";f.updateCurrencyPl(a,j);var l={subtotal_label:Drupal.settings.hermes_translations.ui.cart.subtotal_label,subtotal:i.formatMoney(a.subtotal,j),taxes_label:Drupal.settings.hermes_translations.ui.cart.taxes_label,tax_amount:i.formatMoney(a.tax_amount,j),shipping_label:Drupal.settings.hermes_translations.ui.cart.shipping_label,shipping_amount:i.formatMoney(a.shipping_amount,j),total_label:Drupal.settings.hermes_translations.ui.cart.total_label,total:i.formatMoney(a.grand_total,j),show_tax:a.show_tax[d],taxMessage:Drupal.settings.hermes_translations.ui.checkout[e],display_taxe_included:!o.isJapan(),taxes_covered_label:Drupal.settings.hermes_translations.ui.checkout[k]};return g.render(APP.templates.orderDetailsSummary,l)},this.isCountryWithNoDecimal=function(a){return a===p.JAPAN||a===p.HK||a===p.MACAO||a===p.KOREA||a===p.SAUDI||a===p.EMIRATES},this.init()}var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("54",["27","1e"],function(a){"use strict";function b(a){if(a){var b=void 0,e={},f=[];if(a.year)e={monthIndex:a.month,day:a.day,year:a.year};else{if(f=a.split(/[^0-9]/).filter(function(a){return a}),!(f.length>5))return a;b=new Date(f[0],f[1]-1,f[2],f[3],f[4],f[5]),e={monthIndex:b.getMonth()+1,day:b.getDate(),year:b.getFullYear()}}return e.month_name=Drupal.settings.hermes_translations.months[e.monthIndex],window.Drupal.settings.hermes_locale.substr(0,2)===d.JAPAN&&(e.year+=Drupal.settings.hermes_translations.year_symbol,e.day+=Drupal.settings.hermes_translations.day_symbol),c.render(Drupal.settings.hermes_translations.date_format,e)}}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("91",[],function(a){"use strict";function b(a){if("undefined"==typeof a.status_id&&"undefined"==typeof a.status)return"";var b="undefined"==typeof a.status_id?a.status.toLowerCase():a.status_id.toLowerCase(),c=void 0;switch(b=b.replace(/\.$/,"")){case"validated":c=a.exchange||a.refund?Drupal.settings.hermes_translations.ui.order.status.return_approved:Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"available_in_shop":c=a.exchange||a.refund||!a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.available_in_store;break;case"canceled":c=a.exchange||a.refund?Drupal.settings.hermes_translations.ui.order.status.return_cancelled:Drupal.settings.hermes_translations.ui.order.status.cancelled;break;case"cancel_asked":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.cancel_asked;break;case"closed":c="";break;case"retrieved_in_shop":c=a.exchange||a.refund||!a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.collected_in_store;break;case"complete":c=a.exchange||a.refund||a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.complete;break;case"credit_ko":case"credit_ok":c=a.refund?Drupal.settings.hermes_translations.ui.order.status.return_approved:a.exchange||a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"credit_refunded":c=a.refund?Drupal.settings.hermes_translations.ui.order.status.refunded:"";break;case"pending":case"pending_payment":case"pending_review":case"payment_review":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.pending_payment;break;case"debit_ok":case"paypal_canceled_reversal":case"paypal_reversed":case"pending_customization":case"waiting_capture":case"debit_ko":case"to_prepare":case"waiting_supply":case"preparation_asked":case"prepared":case"being_prepared":case"received_by_warehouse":case"carrier_error":case"supply_cancel_asked":case"supply_cancel_confirmed":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"total_exchange":case"partial_exchange":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.exchanged;break;case"invoiced":case"pending_packing":c=a.exchange||a.refund?"":a.webtoshop?Drupal.settings.hermes_translations.ui.order.status.preparing_order:Drupal.settings.hermes_translations.ui.order.status.shipping_order;break;case"holded":c=a.exchange||a.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"processing":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.approving_order;break;case"received":c=a.exchange||a.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:Drupal.settings.hermes_translations.ui.order.status.delivered_order;break;case"total_refund":c=a.exchange?"":Drupal.settings.hermes_translations.ui.order.status.refunded;break;case"partial_refund":c=a.exchange||a.refund?"":Drupal.settings.hermes_translations.ui.order.status.refunded;break;case"out_for_delivery":c=a.exchange||a.refund?"":a.webtoshop?Drupal.settings.hermes_translations.ui.order.status.preparing_order:Drupal.settings.hermes_translations.ui.order.status.shipped_order;break;case"fraud":case"waiting_authorization":c=a.exchange||a.refund||a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.approving_order;break;case"waiting_refund":c=a.exchange||a.refund?Drupal.settings.hermes_translations.ui.order.status.return_pending_approval:a.webtoshop?"":Drupal.settings.hermes_translations.ui.order.status.preparing_order;break;case"approved":c=Drupal.settings.hermes_translations.ui.order.status.return_approved;break;case"pending approval":c=Drupal.settings.hermes_translations.ui.order.status.return_pending_approval;break;case"pending shipping":c=Drupal.settings.hermes_translations.ui.order.status.return_pending_shipping;break;default:c=""}return c}return{setters:[],execute:function(){a("default",b)}}}),a.register("24",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"hideScrollbar",value:function(){var a=document.getElementById("tray-scroll-wrap"),b=document.querySelector("html");a&&b&&(a.style.overflow="hidden",b.style.overflow="hidden")}}]),a}(),a("TrayUtils",d)}}}),a.register("92",["3","4","16","17","18","24","27","54","91","1a","1e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.TrayUtils},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m="out_for_delivery",n="received",o="total-orders",p=function(){function a(){c(this,a),this.$el=jQuery("#tray-order-list"),this.$signIn=this.$el.find(".js-sign-in-cta"),this.$helpCopy=this.$el.find(".orders-help-copy"),this.$ordersTitle=this.$el.find("#title-tray-order-list"),this.tray=new d({$el:this.$el,name:"tray-order-list",showOverlay:!0}),this.GET_ORDERS_URL="/orders",this.GET_EXCHANGE_RETURN_DETAILS="/exchange-return/request",this.ANIMATION_SPEED=.35,this.EASE=window.Power2.easeInOut,this.reloadOrders=!1,this.newData=[],this.trayExchangeReturnRequest=null,this.$orderListContent=jQuery(".order-list-content"),this.$showOrders=jQuery(".js-show-all-orders"),this.orderPagination={page:1,limit:3},this.bind(),this.getOrders()}return b(a,[{key:"bind",value:function(){var a=this;this.$el.on("click",".js-to-order-details",this.showOrderDetails.bind(this)),this.$el.on("click",".js-show-all-orders",this.getOrders.bind(this)),this.$el.on("click",".js-lets-shop",this.letsShop.bind(this)),this.$signIn.on("click",this.$el,this.pushAccountTray.bind(this)),this.$el.on("click","[data-bind=exchange-order]",this.onExchangeOrderNodeClick.bind(this)),this.$el.on("click","[data-bind=refund-order]",this.onRefundOrderNodeClick.bind(this)),this.$el.on("click","[data-bind=exchange-return-details]",this.onExchangeReturnShowDetailsClick.bind(this)),this.tray.addEventListener("open",this.checkNewDataRequired.bind(this)),this.tray.addEventListener("animateLastTrayFromStackComplete",this.showFirstOrders.bind(this)),APP.pubsub.subscribe("return.finalisation.completed",this.invalidateOrders.bind(this)),APP.pubsub.subscribe("get.orders.call",this.getOrdersCall.bind(this)),APP.pubsub.subscribe("order-details-angular",function(b,c){a.sendOrderDataToAngular(c)}),APP.pubsub.subscribe("request-return-angular",function(b,c){APP.pubsub.publish("analytics-open-exchange-return-request",{mode:c.mode,order_id:a.newData[c.position].increment_id}),a.sendReturnRequestDataToAngular(c)}),APP.pubsub.subscribe("return-details-angular",function(b,c){APP.pubsub.publish("analytics-open-exchange-return-details",{order_id:c.orderId,return_type:c.returnType}),k(a.GET_EXCHANGE_RETURN_DETAILS,{order_id:c.orderId,return_id:c.exchangeReturnOrderId},"GET").fail(function(a){e.technicalError(),console.warn("Return/Exchange details could not be retrieved from the API"),console.warn(a)}).then(function(b){a.sendReturnDetailsDataToAngular(b)})})}},{key:"showFirstOrders",value:function(){var a=0;this.$orderListContent.height("").find(".order-item").each(function(b){b<3&&(a+=jQuery(this).outerHeight(!0))}),this.$orderListContent.find(".order-item").length>2&&this.$showOrders.show()}},{key:"checkNewDataRequired",value:function(a){a.preventDefault(),this.reloadOrders&&(this.getOrders(),this.reloadOrders=!1)}},{key:"invalidateOrders",value:function(){this.reloadOrders=!0}},{key:"getOrdersCall",value:function(){var a=void 0;this.newData=[],this.orderPagination={page:1,limit:3},a=this.GET_ORDERS_URL,a+="?page="+this.orderPagination.page,a+="&limit="+this.orderPagination.limit,k(a,{},"GET").done(this.successGet.bind(this)).fail(this.errorHandling.bind(this))}},{key:"pushAccountTray",value:function(a){a.preventDefault(),APP.trayController._trayStack=[APP.trayController._trayStack[0],APP.trayController._trayStack.length-1],this.tray.back()}},{key:"getOrders",value:function(){var a=void 0;e.showLoader(),a=this.GET_ORDERS_URL,a+="?page="+this.orderPagination.page,a+="&limit="+this.orderPagination.limit,k(a,{},"GET").done(this.successGet.bind(this)).fail(this.errorHandling.bind(this))}},{key:"successGet",value:function(a){e.hideOverlay(),a.orders?0===a.orders.items.length?this.noOrders():this.updateDOM("event",a):this.errorHandling(a)}},{key:"updateDOM",value:function(a,b){var c=b.orders.items,d=b.orders.total;f.set(o,d),c&&d<4?(this.newData=[],this.handleOrdersListRender(b.orders,{orders:this.newData})):(this.handleOrdersListRender(b.orders,{orders:this.newData,order_number:Drupal.settings.hermes_translations.ui.order.order_number}),this.showFirstOrders()),this.newData.length<d?this.orderPagination.page++:this.$showOrders.hide(),APP.pubsub.publish("order-list-renderer")}},{key:"handleOrdersListRender",value:function(a,b){var c=void 0;this.$el.addClass("orders-list");for(var d=0;d<a.items.length;d++){var e=a.items[d];if(e.created_at=i(e.created_at),(e.status_id===m&&!e.webtoshop||e.status_id===n)&&(e.trackOrder=!0),e.returns&&e.returns[0]&&(e.return_label=j(e.returns[0])),e.refund)for(c=0;c<e.refund.length;c++)e.refund[c].increment_id=e.increment_id;else if(e.exchange)for(c=0;c<e.exchange.length;c++)e.exchange[c].increment_id=e.increment_id;this.getStatus(e),this.getPrintInvoice(e),e.track_url=e.shipment.tracking_url?h.render(e.shipment.tracking_url,e.shipment):null,this.newData.push(e)}this.$orderListContent.html(h.render(APP.templates.orderList,b)),1===parseInt(a.total,10)?(this.$helpCopy.html(h.render(Drupal.settings.hermes_translations.ui.order.has_orders_list_help_copy_singular,{order_count:a.total})),this.$ordersTitle.html(h.render(Drupal.settings.hermes_translations.ui.order.has_orders_title_singular))):(this.$helpCopy.html(h.render(Drupal.settings.hermes_translations.ui.order.has_orders_list_help_copy_plural,{order_count:a.total.trim()})),this.$ordersTitle.html(h.render(Drupal.settings.hermes_translations.ui.order.has_orders_title_plural)))}},{key:"getPrintInvoice",value:function(a){a.status===Drupal.settings.hermes_translations.ui.order.status.preparing_order?a.is_invoiced=!1:(a.refund||a.exchange)&&(a.is_invoiced=!0),a.is_invoiced&&("cn"===Drupal.settings.hermes_current_country?a.print=Drupal.settings.hermes_translations.ui.print_cn:a.print=Drupal.settings.hermes_translations.ui.print)}},{key:"getStatus",value:function(a){return a.refund||a.exchange?(a.status=null,a):(a.status=j(a),a.shipment.updated_at&&(a.returnDate=i(a.shipment.updated_at)),void(a.returnDate&&(a.status=h.render(a.status,a))))}},{key:"noOrders",value:function(){this.$helpCopy.html(h.render(Drupal.settings.hermes_translations.ui.order.no_orders_list_help_copy,{link:Drupal.settings.hermes_translations.ui.order.letsshop})),this.$helpCopy.show(),this.$ordersTitle.html(h.render(Drupal.settings.hermes_translations.ui.order.no_orders_title)),this.$orderListContent.empty()}},{key:"pushNextTray",value:function(a){APP.trayController.triggerTray(a)}},{key:"errorHandling",value:function(a){a.error.internal_code===l.ERRORCODE.inactivity?APP.pubsub.publish("account.logout"):e.technicalError()}},{key:"sendOrderDataToAngular",value:function(a){g.hideScrollbar();var b=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-order",trayData:this.newData[a]}});window.parent.dispatchEvent(b)}},{key:"sendReturnRequestDataToAngular",value:function(a){g.hideScrollbar();var b=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-request-exchange-return",trayData:{mode:a.mode,order:this.newData[a.position]}}});window.parent.dispatchEvent(b)}},{key:"sendReturnDetailsDataToAngular",value:function(a){g.hideScrollbar();var b=new CustomEvent("drupalTrayEvent",{detail:{trayEvent:"open:tray-exchange-return-details",trayData:a}});window.parent.dispatchEvent(b)}},{key:"showOrderDetails",value:function(a,b){a.preventDefault();var c=void 0,d=void 0;b?(d=b,this.newData.forEach(function(a){a.increment_id===d.increment_id&&(d=jQuery.extend({},d,a))})):(c=jQuery(a.currentTarget).parent().prevAll().length,d=this.newData[c]),d.fromList=!0,this.pushNextTray({name:"tray-order",order:d}),APP.pubsub.publish("order.details.render",{order:d})}},{key:"onExchangeOrderNodeClick",value:function(a){a.preventDefault(),a.stopPropagation(),this.trayExchangeReturnRequest||(this.trayExchangeReturnRequest=APP.trayController.getTray({name:"tray-request-return"}).wrapper),this.trayExchangeReturnRequest.setNewTrayData({config:{mode:"exchange",orderNumber:a.currentTarget.getAttribute("data-order-id")}}),APP.pubsub.publish("analytics-open-exchange-return-request",{mode:"exchange",order_id:a.currentTarget.getAttribute("data-order-id")}),this.pushNextTray({name:"tray-request-return"})}},{key:"onRefundOrderNodeClick",value:function(a){a.preventDefault(),a.stopPropagation(),this.trayExchangeReturnRequest||(this.trayExchangeReturnRequest=APP.trayController.getTray({name:"tray-request-return"}).wrapper),this.trayExchangeReturnRequest.setNewTrayData({config:{mode:"refund",orderNumber:a.currentTarget.getAttribute("data-order-id")}}),APP.pubsub.publish("analytics-open-exchange-return-request",{mode:"refund",order_id:a.currentTarget.getAttribute("data-order-id")}),this.pushNextTray({name:"tray-request-return"})}},{key:"onExchangeReturnShowDetailsClick",value:function(a){var b=this;a.preventDefault(),a.stopPropagation();var c=parseInt(a.currentTarget.getAttribute("data-return-exchange-id"),10),d=a.currentTarget.getAttribute("data-order-id"),f=a.currentTarget.getAttribute("data-return-type");APP.pubsub.publish("analytics-open-exchange-return-details",{order_id:d,return_type:f}),e.setLock(!0),k(this.GET_EXCHANGE_RETURN_DETAILS,{order_id:d,return_id:c},"GET").fail(function(a){e.technicalError(),console.warn("Return/Exchange details could not be retrieved from the API"),console.warn(a)}).then(function(a){b.pushNextTray({name:"tray-exchange-return-details"}),APP.pubsub.publish("exchangeReturnDetails.newTrayData",a)})}},{key:"letsShop",value:function(a){a.preventDefault(),window.location.href.split(Drupal.settings.hermes_url_locale)[1].length>0?window.location.href=window.location.origin+"/"+Drupal.settings.hermes_url_locale:this.tray.close()}}]),a}(),a("default",p)}}}),a.register("93",["3","4","16","17","18","27","38","83","94","95","96","3b","2d","1e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.ProductLocatorTools},function(a){i=a.isSmall},function(a){j=a.default},function(a){k=a},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default}],execute:function(){"use strict";p=function(){function a(b){var e=this;if(c(this,a),this.ZOOM_SPEED=b.zoomSpeed||.5,this.SCROLL_SPEED=b.scrollSpeed||1,this.variants=b.products,this.allVariants=this.allVariants?this.allVariants:b.products,this.defaultSku=b.sku,this.attributes=b.attributes,this.selectedAttributes,this.forceSizeDisabling=!1,this.firstUpdate=!0,this.availableOptions={},this.GLOBAL=Drupal.settings.hermes_products.data,this.currentAttr,this.firstCall=!0,this.selectedAttribut=null,this.isDouble,this.firstVariant,this.selectedSize=!1,this.noSelected=!1,this.isAppleWatchKit=b.isAppleWatchKit,this.availableColorsNumber=0,this.availableVolumesNumber=0,this.formErrorMessage=Drupal.settings.hermes_translations.validation.errorOnForm,this.$pageTitle=jQuery("head title"),this.titleContent=this.$pageTitle.text(),this.buyable,this.hermesStoresDatas,this.FIELD_REF_SIZE=o.FIELD_REF_SIZE,this.FIELD_COLOR_HERMES=o.FIELD_COLOR_HERMES,this.FIELD_MASS_VOLUME_IMP=o.FIELD_MASS_VOLUME_IMP,this.FIELD_MASS_VOLUME_INT=o.FIELD_MASS_VOLUME_INT,this.$el=jQuery("#panel-configurator"),this.$el.length){if(this.tray=new d({$el:this.$el,name:"tray-configurator",animationSpeed:this.ZOOM_SPEED,scrollSpeed:this.SCROLL_SPEED}),this.isDouble=Drupal.settings.hermes_products_attributes?Drupal.settings.hermes_products_attributes.isDouble:null,APP.currentSetSKU=Drupal.settings.hermes_products.data.default_variant.set_sku,APP.currentSKU=Drupal.settings.hermes_products.data.default_variant.sku,this.isDouble){var f=this.defaultSku.split("-"),g=f[2]?f[2]:null;this.firstVariant=f[1]?f[1]:null,this.defaultSku=g}this.defaultVariant=this.selectedVariant=function(){var a=2===h.productLocatorVersion()?e.allVariants:e.variants,b=a.find(function(a){var b=a.sku;return b===e.defaultSku});return b?b:a[0]}(),this.cacheDom(),this.bind(),this.initSelectedAttributes(this.defaultVariant.attributes),this.showDefaultValues(),this.resetAvailableOptions(),this.findMatchingVariants(),jQuery(".product-configurator-field_ref_size").find("legend span").text(""),this.$el.find(".product-locator-container-button").hide()}}return b(a,[{key:"update",value:function(a){this.variants=a,this.resetAvailableOptions(),this.findMatchingVariants()}},{key:"cacheDom",value:function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.eco_tax=this.$el[0].querySelector(".field-type-commerce-eco-tax"),this.descriptionEl=this.$el[0].querySelector(".field-name-field-description-configurator"),this.configMeasurements=this.$el[0].querySelector(".field-name-field-measurements-configurator"),this.detail=document.querySelector(".product-detail-info-content span"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.$productBanner=jQuery("#product-banner"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.descriptionDom=jQuery(".field-name-field-description-configurator"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input"),this.$elProductLocator=jQuery("#tray-product-locator"),this.$productLocatorFormInputs=this.$elProductLocator.find(".product-configurator-form-input"),this.$title=jQuery("#title-panel-configurator"),this.$productLocatorTitle=jQuery(".tray-product-locator-label")}},{key:"bind",value:function(){APP.pubsub.subscribe("tray.configurator.open",this.showPanel.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.hidePanel.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanel.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$elProductLocator.on("change",".product-configurator-form-input",this.productLocatorConfiguration.bind(this)),this.$el.on("change",".product-configurator-form-input",this.changeConfiguration.bind(this)).on("click",".tray-close",this.handlePanel.bind(this)).on("click","[data-bind=product-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=configurator-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=product-find-in-store]",this.findInStoreClickConfigurator.bind(this))}},{key:"showDefaultValues",value:function(){var a=this.defaultVariant.attributes;for(var b in a)if(a.hasOwnProperty(b)&&b!==this.FIELD_REF_SIZE){var c=jQuery('[href="#configurator-'+b+'"] .product-attribute-value span',this.productInfo);a[b].attr_display?c.text(a[b].attr_display):c.text(a[b].name),this.currentAttr=a[b].id.replace(/\s/g,"")}}},{key:"initSelectedAttributes",value:function(a){this.selectedAttributes=n(a).reduce(function(b,c){return b[c]=a[c].id.replace(/\s/g,""),b},{}),this.selectedAttributes.field_ref_size&&(this.selectedAttributes.field_ref_size=null)}},{key:"resetAvailableOptions",value:function(){var a=this;this.availableOptions={},this.variants.forEach(function(b){for(var c in a.attributes)if(a.attributes.hasOwnProperty(c)){var d=b.attributes[c];if("undefined"!=typeof d){var e=d.id.replace(/\s/g,"");a.availableOptions[e]=1}}})}},{key:"findMatchingVariants",value:function(){var a=jQuery.map(this.selectedAttributes,function(a,b){return{field:b,value:a}}),b=[],c=[],d=[],e=[];this.matchingVarients=this.variants,this.matchingPLVarients=this.allVariants;var f=this.matchingVarients?this.matchingVarients.length:0;if(0===f&&2===h.productLocatorVersion()&&h.hasRetailStock()&&(f=-1),0===f){jQuery("#variant").find(".product-configurator-form-input").filter('input[id="'+this.currentAttr+'"]').attr("disabled",!0);for(var g in this.availableOptions)this.availableOptions.hasOwnProperty(g)&&g.includes(this.FIELD_REF_SIZE)&&(this.$formInputs.filter('input[id="'+g+'"]').attr("disabled",!0),this.$productLocatorFormInputs.filter('input[id="product-locator-'+g+'"]').attr("disabled",!0))}for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){for(var j=[],k=[],l=a.shift(),m=0;m<this.matchingVarients.length;m++)"undefined"!=typeof this.matchingVarients[m].attributes[i]&&(l.value&&this.matchingVarients[m].attributes[i].id.replace(/\s/g,"")!==l.value||j.push(this.matchingVarients[m]),b.push(this.matchingVarients[m].attributes[i].id.replace(/\s/g,"")));for(var n=2===h.productLocatorVersion()?this.matchingPLVarients:[],m=0;m<n.length;m++){var o=n[m]&&n[m].hasOwnProperty("attributes")&&n[m].attributes.hasOwnProperty(i)?n[m].attributes[i]:null,p=n[m]&&n[m].hasOwnProperty("sku")?n[m].sku:null;if(o&&p&&(h.isAvailableStockRetail(p)||i!==this.FIELD_REF_SIZE)){var q=o.hasOwnProperty("id")&&o.id?o.id.replace(/\s/g,""):null;l.value&&q!==l.value||k.push(n[m]),i!==this.FIELD_COLOR_HERMES||h.isAvailableStockRetail(p)||e.includes(q)?(c.includes(q)||c.push(q),i===this.FIELD_COLOR_HERMES&&h.isAvailableStockRetail(p)&&!d.includes(q)&&d.push(q)):e.push(q)}}if(!(j.length||k.length||e.length))return jQuery(document.getElementById(l.value)).removeAttr("checked"),void(this.selectedAttributes[l.field]=null);this.matchingVarients=j,this.matchingPLVarients=k}this.updateOptionsAvailability(b,c,d),this.matchingVarients.length>0?this.selectedVariant=this.matchingVarients[0]:2===h.productLocatorVersion()&&this.matchingPLVarients.length>0&&(this.selectedVariant=this.matchingPLVarients[0]),this.updateConfiguratorDom()}},{key:"productSkuFromAttributeId",value:function(a,b){if(Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")){var c=Drupal.settings.hermes_products.data.products_attributes;for(var d in c)if(c[d]&&c[d].hasOwnProperty(b)&&c[d][b].hasOwnProperty("id")&&c[d][b].id.replace(/\s/g,"")===a)return d}return null}},{key:"isAssociatedToCurrentColor",value:function(a){return!!(this.selectedVariant&&this.selectedVariant.hasOwnProperty("attributes")&&this.selectedVariant.attributes[this.FIELD_COLOR_HERMES])&&(this.selectedVariant.attributes[this.FIELD_COLOR_HERMES].hasOwnProperty("id")&&this.selectedVariant.attributes[this.FIELD_COLOR_HERMES].id.replace(/\s/g,"")===a.replace(/\s/g,""))}},{key:"updateOptionsAvailability",value:function(a,b,c){var d=this,e=0,f=0,g=!1,i=jQuery(".product-locator-error-message",this.$el);i&&i.length&&(i[0].innerHTML="");var j=this.$form.find(".product-configurator-form-input"),k=[].map.call(j,function(a){var b=a.id.split("-"),c=m(b,1),e=c[0];return{variationField:e,id:a.id.replace(/\s/g,""),$el:jQuery(a),$productLocatorEl:e===d.FIELD_REF_SIZE?jQuery("#product-locator-"+a.id.replace(/\s/g,"")):null}});if(this.firstCall){var l=k.find(function(a){var b=a.id;return b===d.currentAttr});l&&l.$el.attr("checked","checked"),this.firstCall=!1}k.forEach(function(i){var j=i.variationField,k=i.id,l=i.$el,m=i.$productLocatorEl,n=b.includes(k),p=c.includes(k),q=h.stockTypeKey;if(l&&l.removeAttr(q),m&&m.removeAttr(q),a.includes(k))switch(j){case d.FIELD_REF_SIZE:if(d.forceSizeDisabling)break;h.setAccessibilityMessageToVariation([l,m],!0,n),h.disableSlashedSize(l),h.disableSlashedSize(m),l.attr("disabled",!1),m.length>0&&m.attr("disabled",!1),h.setStockTypeAttr(!0,n,l,m);break;case o.FIELD_MASS_VOLUME_IMP:case o.FIELD_MASS_VOLUME_INT:f++,l.attr("disabled",!1);break;case d.FIELD_COLOR_HERMES:h.setAccessibilityMessageToVariation([l,m],!0,n),e++}else switch(j){case d.FIELD_REF_SIZE:if(d.forceSizeDisabling)break;h.setAccessibilityMessageToVariation([l,m],!1,n),2===h.productLocatorVersion()&&n?(h.enableSlashedSize(l),h.enableSlashedSize(m)):(l.attr("disabled",!0),m.length>0?m.attr("disabled",!0):null),h.setStockTypeAttr(!1,n,l,m);break;case d.FIELD_MASS_VOLUME_IMP:case d.FIELD_MASS_VOLUME_INT:l.attr("disabled",!0);break;case d.FIELD_COLOR_HERMES:h.setAccessibilityMessageToVariation([l,m],!1,p),2===h.productLocatorVersion()&&p?(e++,l.attr("disabled",!1),l.parent("li").show(),g=!1):k===d.currentAttr?(l.attr("disabled",!0),g=!0):2===h.productLocatorVersion()?l.parent("li").hide():l.parent("li").remove()}}),this.availableColorsNumber=e,this.availableVolumesNumber=f,!g||this.selectedAttribut&&this.selectedAttribut!==this.currentAttr||k.filter(function(b){var c=b.variationField,e=b.id;return c===d.FIELD_REF_SIZE&&a.includes(e)}).forEach(function(a){var b=a.$el,c=a.$productLocatorEl;b.attr("disabled",!0),c.length>0&&c.attr("disabled",!0)}),jQuery(".product-attributes-field_color_hermes .product-attribute-title").eq(0).find("span").text("("+e+")"),jQuery(".product-configurator-field_color_hermes").find(".product-configurator-option-available").text(e);var n=jQuery(".product-attributes-field_color_hermes button");if(n.attr("aria-label")){var p=n.attr("aria-label").match(/\d+/g);parseInt(p,10)!==e&&n.attr("aria-label",n.attr("aria-label").replace(p,e))}var q=jQuery(".product-attributes-field_mass_volume_imp"),r=jQuery(".product-attributes-field_mass_volume_int");0!==q.length&&q.find(".product-attribute-title").eq(0).find("span").text("("+f+")"),0!==r.length&&r.find(".product-attribute-title").eq(0).find("span").text("("+f+")");var s=q.find("button"),t=r.find("button"),u=s?s:t;if(u.attr("aria-label")){var v=u.attr("aria-label").match(/\d+/g);parseInt(v,10)!==f&&u.attr("aria-label",u.attr("aria-label").replace(v,f))}}},{key:"changeConfiguration",value:function(a){var b=this;APP.pubsub.publish("init-configurator-change",null);
var c=a.currentTarget.getAttribute("data-field");if(this.noSelected=!0,2===h.productLocatorVersion()){if(this.forceSizeDisabling=!0,c===this.FIELD_COLOR_HERMES){this.selectedAttributes.field_ref_size=null;var d=this.$form.find('.product-configurator-form-input[data-field="'+this.FIELD_REF_SIZE+'"]');d.attr("disabled",!0).attr("checked",!1),h.removeSlashInAllSize(d)}h.disableAllButtons()}this.selectedAttributes[c]=a.currentTarget.value,this.selectedAttribut=this.selectedAttributes[c],this.selectedAttributes[c].includes(this.FIELD_REF_SIZE)&&(this.selectedSize=!0),this.findMatchingVariants(),this.updateConfiguratorDom(),i()&&this.updateDom(),this.updateValidation({updatedField:c,configuratorId:a.currentTarget.name}),h.setSelectedSku(this.selectedVariant.sku);var e=2===h.productLocatorVersion()?this.allVariants:this.GLOBAL.products,f=e.find(function(a){return a.sku===b.selectedVariant.sku});APP.pubsub.publish("configurator.change",f)}},{key:"showPanel",value:function(a,b){var c=(arguments.length<=2||void 0===arguments[2]?null:arguments[2],jQuery("#panel-configurator .variant-image"));if(jQuery.map(c,function(a){return jQuery(a).attr("src",jQuery(a).data("src"))}),b&&jQuery(b.scrollTo).length){var d=jQuery(b.scrollTo).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:d})}this.tray.open(),jQuery("#tray-product-locator store-product-locator-display-map #map").children().length>0&&this.tray.$wrapper.removeClass("map-hidden")}},{key:"hidePanel",value:function(){var a=jQuery(".tray-product-locator-visible");this.tray.isOpen&&!a[0]&&this.tray.close()}},{key:"handlePanel",value:function(){var a=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),a){var b='button[data-field="'+a+'"]';jQuery(b).focus()}APP.pubsub.publish("zoom.out")}},{key:"updateConfiguratorDom",value:function(){var a=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariant),b=Drupal.settings.hermes_products.shipping_information[a.sku],c=this.getDescription(a),d=this.selectedVariant.images[0].uri,e=this.selectedVariant.designer||"",f=this.selectedVariant.metals_titrations||[],h=jQuery('[href="#configurator-field_ref_size"] .product-attribute-value span'),i=jQuery("#tray-product-locator .tray-product-locator-details span.size-value"),k=jQuery(".field-name-field-designer-configurator"),l=jQuery(".field-name-field-metals-titrations-configurator"),m=jQuery(".shipping-info"),n=f.reduce(function(a,b){return a+=g.render(APP.templates.productCardMetalTitration,b)},"");this.$title.text(this.selectedVariant.title),this.$productLocatorTitle.text(this.selectedVariant.title);var o=Drupal.settings.hermes_translations.ui.product_page.configurator.title.accessibility;this.$title.prepend("<span class=sr-only></span>"),this.$title.find(".sr-only").text(o);var p=void 0;this.selectedVariant.unit_price?(p=this.selectedVariant.price+'&nbsp;<span class="fragrance-price-per-unit">'+this.selectedVariant.unit_price+"</span>",jQuery("div.field-type-commerce-price, p.tray-product-locator-price").html(p)):(p=this.selectedVariant.price,this.price.textContent=p),this.eco_tax&&this.selectedVariant.eco_tax&&(this.eco_tax.textContent=this.selectedVariant.eco_tax),this.configMeasurements.textContent=a.measurements[0]||"",k.html(e),l.html(n),this.descriptionDom.html(c);var q=this.isAppleWatchKit?a.firstVariantDetails:a.detail;this.showDetail(q),a.attributes.field_ref_size&&this.selectedSize&&(h.html(a.attributes.field_ref_size.attr_display),i.html(a.attributes.field_ref_size.attr_display)),b&&m.text(b),APP.pubsub.publish("dom.update.zoomImg",d+"-SIZE-SIZE");var r=new j(this.selectedVariant.description,this.descriptionDom);r.splitDescription()}},{key:"getDescription",value:function(a){var b=this.selectedVariant.description;return"string"==typeof b?a.intro=b:b&&b[0]&&(a.intro=b[0],a.remaining_copy=b.slice(1,b.length).join(" ")),this.descriptionEl.textContent=Array.isArray(b)?b.join(" "):b||"",this.descriptionEl.textContent}},{key:"showDetail",value:function(a){var b=jQuery(".product-detail-info-content"),c=b.parents(".accordion-item");a.trim()&&this.detail?(b.find("span").size()>0&&b.children().text(""),b.find("span").append(jQuery.parseHTML(a)),c.show()):c.hide()}},{key:"updateDom",value:function(){var a=[],b=void 0;if(this.noSelected||(this.selectedVariant=this.defaultVariant),!this.firstUpdate&&this.productSku.textContent===this.selectedVariant.sku)return void(this.firstUpdate=!1);var c=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariant),d=c.description;"string"==typeof d?c.intro=d:"undefined"!=typeof d[0]&&(c.intro=d[0],c.remaining_copy=d.slice(1,d.length).join(" ")),c.attributes=[];for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&(b=jQuery.extend({},this.selectedVariant.attributes[e],{count:this.attributes[e]}),this.selectedAttributes[e]?b.attr_display&&(b.name=b.attr_display,b.field.includes(this.FIELD_REF_SIZE)?b.accessibility_select_button=Drupal.settings.hermes_translations.ui.product_page.accessibility.current_size+":\n          "+b.name+", "+Drupal.settings.hermes_translations.ui.product_page.accessibility.change_size:b.field.includes(this.FIELD_COLOR_HERMES)?b.accessibility_select_button=Drupal.settings.hermes_translations.ui.product_page.accessibility.current_color+":\n          "+b.name+", "+b.count+" "+Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available+",\n          "+Drupal.settings.hermes_translations.ui.product_page.accessibility.change_color:(b.field.includes(this.FIELD_MASS_VOLUME_IMP)||b.field.includes(this.FIELD_MASS_VOLUME_INT))&&(b.accessibility_select_button=Drupal.settings.hermes_translations.ui.product_page.accessibility.current_volume+":\n          "+b.name+", "+b.count+" "+Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available+"\n          "+Drupal.settings.hermes_translations.ui.product_page.accessibility.change_volume)):(b.name=Drupal.settings.hermes_translations.ui.select,b.field.includes(this.FIELD_REF_SIZE)?b.accessibility_select_button=Drupal.settings.hermes_translations.ui.product_page.accessibility.size:b.field.includes(this.FIELD_COLOR_HERMES)?b.accessibility_select_button=b.count+"\n          "+Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available+"\n          "+Drupal.settings.hermes_translations.ui.product_page.accessibility.select_color:b.field.includes(this.FIELD_MASS_VOLUME_IMP||this.FIELD_MASS_VOLUME_INT)&&(b.accessibility_select_button=b.count+"\n          "+Drupal.settings.hermes_translations.ui.product_page.accessibility.choices_available)),b.count&&b.field.includes(this.FIELD_COLOR_HERMES)?b.count=this.availableColorsNumber:b.count&&b.field.includes(this.FIELD_REF_SIZE)?b.count="":b.count&&b.field.includes(this.FIELD_MASS_VOLUME_IMP||this.FIELD_MASS_VOLUME_INT)&&(b.count=this.availableVolumesNumber),b.is_disabled=!1,c.attributes.push(b));c.thumb=c.images[0]&&c.images[0].uri,jQuery.extend(this.selectedVariant.images[0],{single:1===this.selectedVariant.images.length});var f=g.render(APP.templates.productImages,this.selectedVariant),h=g.render(APP.templates.productInfo,c),j=g.render(APP.templates.productBanner,c);if(this.$productDetail.find("#variant-info").html(h),this.$productDetail.find(".product-image-list").html(f),this.$productBanner.html(j),this.isDouble){a[0]=this.firstVariant,a[1]=this.selectedVariant.sku;var k=a.join(" | ");jQuery(this.productSku).html(k),APP.updatedProductSKU=k}else jQuery(this.productSku).html(this.selectedVariant.sku),APP.updatedProductSKU=this.selectedVariant.sku;if(!this.selectedSize&&b&&b.field.includes(this.FIELD_REF_SIZE)){var l=jQuery('[href="#configurator-field_ref_size"] .product-attribute-value span');l.html(Drupal.settings.hermes_translations.ui.select)}if(i())APP.pubsub.publish("dom.updated");else{var m=this.selectedVariant.thumbs.map(function(a,b){return{uri:a.uri,index:b}});m[0].active=!0;var n=g.render(APP.templates.productImagesNav,{images:m});this.$productDetail.find(".product-images-navigation ul").html(n)}}},{key:"isValid",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=2===h.productLocatorVersion()&&a?this.matchingPLVarients:this.matchingVarients,c=l(this.selectedAttributes);return 1===b.length&&!c.includes(null)}},{key:"validate",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(!this.isValid(a)){var b=!1;for(var c in this.selectedAttributes)if(this.selectedAttributes.hasOwnProperty(c)&&!this.selectedAttributes[c]){this.throwValidationError({field:c.split("-")[0]}),b=!0;break}jQuery(".product-configurator-error-message").attr("aria-hidden",!b);var d=2===h.productLocatorVersion()&&a?this.matchingPLVarients:this.matchingVarients;if(!d.length)throw new Error("No products match this configuration","product-configurator.js")}}},{key:"throwValidationError",value:function(a){var b="#configurator-"+a.field,c=document.querySelector(b),d=this.tray.$wrapper.scrollTop()+jQuery(c).offset().top-window.pageYOffset;c.classList.add("error"),setTimeout(function(){var a=jQuery(".product-configurator-error-message");a&&a.length>0&&(a.attr("tabindex","0"),a.attr("role","alert"),a.focus(),a.attr("tabindex","-1"))},50),this.$el.addClass("error-on-form"),this.$pageTitle.html(this.formErrorMessage+this.titleContent),this.tray.scrollTo({top:d})}},{key:"updateValidation",value:function(a){var b=document.querySelector("#configurator-"+a.configuratorId);b&&b.classList.remove("error");var c=this.productInfo.querySelector(".product-attributes-"+a.updatedField);c&&c.classList.remove("error"),this.$el.removeClass("error-on-form"),this.$pageTitle.html(this.titleContent)}},{key:"onAddToCartClick",value:function(a){var b=[],c=void 0;if(a.preventDefault(),a.stopPropagation(),!this.isValid())return void this.validate();var d=jQuery(".tray-trigger-origin").attr("data-field");if(APP.pubsub.publish("zoom.out"),this.updateDom(),d){var e='a[data-field="'+d+'"]';jQuery(e).focus()}if(this.tray.close(),this.isDouble){var g=void 0;b[0]=this.matchingVarients[0].set_sku?this.matchingVarients[0].set_sku:null,b[1]=this.firstVariant?this.firstVariant:null,b[2]=this.matchingVarients[0].sku?this.matchingVarients[0].sku:null,g=null!==b[0]&&null!==b[1]&&null!==b[2]?b.join("-"):null,c=g}else c=this.matchingVarients[0]?this.matchingVarients[0].sku:null;var h={sku:c,container_id:this.matchingVarients[0].set_sku||null,image:this.matchingVarients[0].images[0].uri,category:f.get("nav")?f.get("nav"):"direct"};APP.pubsub.publish("addToCart",h)}},{key:"setBuyable",value:function(a){this.buyable=a}},{key:"setHermesStoresDatas",value:function(a){this.hermesStoresDatas=a}},{key:"findInStoreClickConfigurator",value:function(a){return a.preventDefault(),a.stopPropagation(),this.isValid(!0)?void h.productLocatorScript(null,this.findInStoreLocator.bind(this)):void this.validate(!0)}},{key:"findInStoreLocator",value:function(){var a=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),a){var b='a[data-field="'+a+'"]';jQuery(b).focus()}this.cegidStockCall(this.$el)}},{key:"cegidStockCall",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0],b=void 0,c=2===h.productLocatorVersion()?this.matchingPLVarients:this.matchingVarients;if(b=c[0]?c[0].sku:null,this.isValid(!0)){var d={sku:b,container_id:c[0].set_sku||null,image:c[0].images[0].uri,category:f.get("nav")?f.get("nav"):"direct"};k.testStockWithCegidIdProductLocator(this.hermesStoresDatas,d,a)}else e.hideOverlay(),APP.pubsub.publish("tray.product.locator.no.result.error")}},{key:"productLocatorConfiguration",value:function(a){if(e.showLoader(),a.currentTarget&&a.currentTarget.defaultValue){var b=document.getElementById(a.currentTarget.defaultValue);b&&(b.checked=!0)}APP.pubsub.publish("product.locator.configurator.before.change",a),this.changeConfiguration(a),APP.pubsub.publish("product.locator.configurator.after.change",a),this.cegidStockCall(null),i()||this.updateDom()}}]),a}(),a("default",p)}}}),a.register("97",["3","4","96","2d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a),this.selectedAttributes="",this.matchingVarients="",this.tray="",this.targetSlot=""}return b(a,[{key:"validateSelection",value:function(){var a=this;if(!this.isValidSelection()){var b=e(this.selectedAttributes).find(function(b){return!a.selectedAttributes[b]});if(b)return this._showMessageAndScroll({field:b.split("-")[0]}),!0}return!1}},{key:"_showMessageAndScroll",value:function(a){var b=document.querySelector("#configurator-"+a.field+this.targetSlot),c=this.tray.$wrapper.scrollTop()+jQuery(b).offset().top-window.pageYOffset;b.classList.add("error"),this.tray.scrollTo({top:c})}},{key:"isValidSelection",value:function(){var a=d(this.selectedAttributes);return 1===this.matchingVarients.length&&!a.includes(null)}},{key:"removeErrorSelection",value:function(){var a=this;e(this.selectedAttributes).filter(function(b){return a.selectedAttributes[b]}).forEach(function(b){return a._removeError({field:b.split("-")[0]})})}},{key:"removeErrorWithoutCheck",value:function(){var a=this;e(this.selectedAttributes).forEach(function(b){return a._removeError({field:b.split("-")[0]})})}},{key:"_removeError",value:function(a){document.querySelector("#configurator-"+a.field+this.targetSlot).classList.remove("error")}}]),a}(),a("default",f)}}}),a.register("98",["16","94","97"],function(a){"use strict";function b(a){var b=a.zoomSpeed||.5,f=a.scrollSpeed||1,g=a.sku,h=a.attributes,i=a.slotNumber,j={},k={VARIANT_PRODUCT:0,DOUBLE_PRODUCT:0,PERFUME_SET:1,LOOK_SET:2,BIKINI_SET:3},l=void 0,m=!1,n=a.products;this.init=function(a){function d(a){return(a.filter(function(a){if(a.sku===g)return!0})||[])[0]}this.$el=jQuery("#panel-configurator"),this.$el.length&&(this.isProductOptionChanged=!1,this.enabledOptions=[],this.tray=new c({$el:this.$el,name:"tray-configurator-look",instanceId:a.instanceId,animationSpeed:b,scrollSpeed:f}),this.defaultVariant=this.previousVariant=this.selectedVariant=d(n),this.cacheDom(),this.bind(),Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&Drupal.settings.hermes_products.data.default_variant&&Drupal.settings.hermes_products.data.default_variant.sku&&Array.isArray(Drupal.settings.hermes_products.data.default_variant.sku)&&(this.productSku.textContent=Drupal.settings.hermes_products.data.default_variant.sku.join(", ")),this.setDefaultVariant(),this.calculateVariantOptionsCount(),this.findMatchingVariants(),this.updateDom())},this.cacheDom=function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.description=this.$el[0].querySelector(".field-name-field-description-configurator"),this.$descriptionSelector=jQuery(".field-name-field-description-configurator"),this.sku=this.$el[0].querySelector(".commerce-product-sku-value"),this.$measurements=this.$el.find(".field-name-field-measurements-configurator"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.$productBanner=jQuery("#product-banner"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input"),this.$title=jQuery("#title-panel-configurator")},this.bind=function(){APP.pubsub.subscribe("tray.configurator.look.open",this.showPanel.bind(this)),this.tray.addEventListener("openOne",this.bindTrayEvents.bind(this)),this.tray.addEventListener("closeAll",this.unbindTrayEvents.bind(this)),this.tray.addEventListener("backButtonClick",this.unbindTrayEvents.bind(this)),this.$el.on("change",".slot-"+i+" .product-configurator-form-input",this.changeConfiguration.bind(this)).on("click",".validate",this.onValidate.bind(this)),jQuery("#product-look-"+i).parent().on("keypress click",this.clickCheckbox)},this.clickCheckbox=function(){var a=jQuery("#product-look-"+i).prop("checked");jQuery("#product-look-"+i).prop("checked",!a).change()},this.bindTrayEvents=function(){APP.pubsub.subscribe("tray.overlay.close",this.closeTrayWithoutChecking.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanelAndSelectProduct.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$el.on("click",".tray-close",this.closeTrayWithoutChecking.bind(this)).on("click","#select-look-slot",this.hidePanelAndSelectProduct.bind(this))},this.unbindTrayEvents=function(){APP.pubsub.unsubscribe("tray.overlay.close",this.closeTrayWithoutChecking.bind(this)),APP.pubsub.unsubscribe("zoomed.out",this.hidePanelAndSelectProduct.bind(this)),this.$el.off("click",".tray-close",this.closeTrayWithoutChecking.bind(this)).off("click","#select-look-slot",this.hidePanelAndSelectProduct.bind(this))},this.setDefaultVariant=function(){l=this.mapAttributes(this.defaultVariant.attributes),l.field_ref_size&&(l.field_ref_size=null)},this.mapAttributes=function(a){var b={};return jQuery.map(a,function(a,c){b[c]=a.id.replace(/\s/g,"")}),b},this.calculateVariantOptionsCount=function(){for(var a=0;a<n.length;a++)for(var b in h)if(h.hasOwnProperty(b)&&n[a].attributes[b]){var c=n[a].attributes[b].id.replace(/\s/g,"");j[c]=1}},this.setVariants=function(a){n=a},this.findMatchingVariants=function(){var a=[],b=jQuery.map(l,function(a,b){return{field:b,value:a}});this.matchingVarients=n,this.enabledOptions=[];for(var c in h)if(h.hasOwnProperty(c)){for(var d=b.shift(),e=0;e<this.matchingVarients.length;e++)"undefined"!=typeof d&&"undefined"!=typeof this.matchingVarients[e].attributes[c]&&(d.value&&this.matchingVarients[e].attributes[c].id.replace(/\s/g,"")!==d.value||a.push(this.matchingVarients[e]),this.enabledOptions[this.matchingVarients[e].attributes[c].id.replace(/\s/g,"")]=!0);if(!a.length){"undefined"!=typeof d&&(d.value&&(d.value=d.value.replace(/'/g,"")),jQuery(document.getElementById(d.value)).removeAttr("checked"),l[d.field]=null);var f=k[Drupal.settings.hermes_products.data.configurator_type];return void(f!==k.LOOK_SET&&this.findMatchingVariants())}this.matchingVarients=a,a=[]}this.updateOptionsAvailability(),this.previousVariant=this.selectedVariant,this.selectedVariant=this.matchingVarients[0]},this.updateOptionsAvailability=function(){this.$form.find(".slot-"+i+" .product-configurator-form-input").not(":checked").attr("disabled",!0);for(var a in this.enabledOptions)this.enabledOptions.hasOwnProperty(a)&&this.$form.find(".slot-"+i+' input[value="'+a+'"]').attr("disabled",!1)},this.getProd=function(a){var b=void 0;return Drupal.settings.hermes_products.data.products.some(function(c){return c.find(function(c){c.sku===a&&(b=c)}),b}),b},this.changeConfiguration=function(a){var b=a.currentTarget.getAttribute("data-field"),c=jQuery("#details-slot-"+i);l[b]=a.currentTarget.value,this.isProductOptionChanged=!0,this.findMatchingVariants(),this.updateConfiguratorDom(),this.removeErrorMessageIfExist(),c.attr("sku",this.selectedVariant.sku),this.updateConfiguratorSetSkus();var d=this.getProd(this.selectedVariant.sku);if(APP.pubsub.publish("configurator.change",d),this.selectedVariant.attributes.field_ref_size){var e=c.find(".product-attribute-size"),f=jQuery("#product-look-"+i),g=Drupal.settings.hermes_translations.ui.product_page.accessibility,h=c.find(".size-accessibility");e.text(this.selectedVariant.attributes.field_ref_size.attr_display+" "),h.text(", "+g.current_size+" : "+this.selectedVariant.attributes.field_ref_size.attr_display+", "+g.change_size),f.removeAttr("disabled"),c.addClass("product-size-selected")}},this.showPanel=function(a,b){if(b.targetSlot===i){var c=jQuery("#panel-configurator .variant-image");if(jQuery.map(c,function(a){return jQuery(a).attr("src",jQuery(a).data("src"))}),b&&jQuery(b.scrollTo).length){var d=jQuery(b.scrollTo).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:d})}b&&b.zoomData&&(this.zoomData=b.zoomData);var e=this.tray.$wrapper.find(".product-configurator-form fieldset"),f=this.tray.$wrapper.find(".product-configurator-form .slot-"+i);e.hide(),f.show(),APP.pubsub.publish("zoom.in",this.zoomData),this.updateConfiguratorDom(),this.tray.open(),this.isActive=!0,b.showErrorMessage&&this.checkSelectionAndShowErrorMessage()}},this.hidePanelAndSelectProduct=function(a){a&&a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),this.tray.isOpen&&!this.checkSelectionAndShowErrorMessage()&&(this.isActive&&this.updateDom(!0),this.tray.isOpen&&this.tray.close(),this.isActive=!1,m&&(this.isProductOptionChanged=!0,this.updateDom(!0)),APP.pubsub.publish("zoom.out"))},this.hidePanel=function(a){a&&a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),this.tray.isOpen&&(this.isActive&&this.updateDom(!1),this.tray.isOpen&&this.tray.close(),this.isActive=!1,APP.pubsub.publish("zoom.out"))},this.closeTrayWithoutChecking=function(a){a&&a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),this.tray.isOpen&&(this.cleanTrayFromErrorMessage(),this.tray.close(),APP.pubsub.publish("zoom.out"))},this.handlePanel=function(){this.updateDom(!0),APP.pubsub.publish("variant.changed",this.selectedVariant),APP.pubsub.publish("zoom.out")},this.updateConfiguratorDom=function(){this.$title.text(this.selectedVariant.title);var a=Drupal.settings.hermes_translations.ui.product_page.configurator.title.accessibility;this.$title.prepend("<span class=sr-only></span>"),this.$title.find(".sr-only").text(a),this.price.textContent=this.selectedVariant.price;var b=this.selectedVariant.measurements[0]||"";this.$measurements.text(b),APP.pubsub.publish("dom.update.zoomImg",this.selectedVariant.images[0].uri+"-SIZE-SIZE");var c=new d(this.selectedVariant.description,this.$descriptionSelector);c.splitDescription()},this.updateDom=function(a){var b=jQuery("#details-slot-"+i),c=b.find(".product-attribute-title"),d=b.find(".product-attribute-color"),e=b.find(".product-attribute-price"),f=b.find(".product-attribute-thumbnail"),g=jQuery("#product-look-"+i);m=!1,this.selectedVariant.attributes.field_color_hermes||this.selectedVariant.attributes.field_ref_size||(m=!0),b.attr("sku",this.selectedVariant.sku),this.updateConfiguratorSetSkus(),c.text(this.selectedVariant.display_name+" "),e.text(this.selectedVariant.price+" "),this.selectedVariant.attributes&&this.selectedVariant.attributes.field_color_hermes&&this.selectedVariant.attributes.field_color_hermes.name&&(""!==this.selectedVariant.attributes.field_color_hermes.attr_display.trim()?d.text(this.selectedVariant.attributes.field_color_hermes.attr_display+" "):d.text(this.selectedVariant.attributes.field_color_hermes.name+" ")),this.isProductOptionChanged||jQuery(".product-configurator-form fieldset").each(function(){var c=jQuery(this).find("input");jQuery(c).is(":checked")&&a&&(g.prop("checked",!0),b.addClass("product-selected")),APP.pubsub.publish("product.size.selected")}),this.isProductOptionChanged&&this.selectedVariant.attributes&&this.selectedVariant.attributes.field_color_hermes&&this.selectedVariant.attributes.field_color_hermes.name&&(a&&(g.prop("checked",!0),b.addClass("product-color-selected")),APP.pubsub.publish("product.color.selected")),(this.isProductOptionChanged&&this.selectedVariant.attributes&&this.selectedVariant.attributes.field_ref_size&&this.selectedVariant.attributes.field_ref_size.name||this.isProductOptionChanged&&m)&&(a&&(g.prop("checked",!0),b.addClass("product-size-selected")),APP.pubsub.publish("product.size.selected")),this.isProductOptionChanged=!1,f.length>0&&this.selectedVariant.thumbs&&this.selectedVariant.thumbs.length>0&&(f[0].src=this.selectedVariant.thumbs[0].uri+"-60-60.jpg")},this.updateConfiguratorSetSkus=function(){var a=jQuery(".product-attribute-item"),b=a.toArray().map(function(a){return jQuery(a).attr("sku")}).reduce(function(a,b){return a+" | "+b},"").replace(/^( \| )/,"");jQuery(".commerce-product-sku-value").html(b),APP.updatedProductSKU=b},this.isValid=function(){var a=this.configureErrorMessage();return a.isValidSelection()},this.validate=function(){var a=this.configureErrorMessage();return a.validateSelection()},this.onAddToCartClick=function(a){this.hidePanel(),a.preventDefault(),a.stopPropagation()},this.onValidate=function(a){a.preventDefault(),a.stopPropagation(),this.tray.isOpen&&this.tray.close()},this.checkSelectionAndShowErrorMessage=function(){var a=this.configureErrorMessage();return a.validateSelection()},this.removeErrorMessageIfExist=function(){var a=this.configureErrorMessage();a.removeErrorSelection()},this.cleanTrayFromErrorMessage=function(){var a=this.configureErrorMessage();a.removeErrorWithoutCheck()},this.configureErrorMessage=function(){var b=new e;return b.selectedAttributes=l,b.matchingVarients=this.matchingVarients,b.tray=this.tray,b.targetSlot=a.slotNumber?a.slotNumber:"",b},this.init(a)}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",b)}}}),a.register("94",["3","4","27"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(b,d){c(this,a),this.blocDescription=b,this.descriptionSelector=d}return b(a,[{key:"splitDescription",value:function(){var a=this.blocDescription;if(a&&a.length){var b={intro:a[0],remaining_copy:a[1]},c=d.render(APP.templates.productDescriptionSplitter,b);this.descriptionSelector.html(c),jQuery(".read-more-toggle-description").on("click",this.toggleReadMore)}}},{key:"toggleReadMore",value:function(){var a=jQuery("#remaining-description-set"),b=jQuery("#read-more-description-set");"none"===a.css("display")?(a.css("display","inline"),b.hide(),a.show()):(a.hide(),b.show())}}]),a}(),a("default",e)}}}),a.register("99",["16","94"],function(a){"use strict";function b(){var a=.5,b=1,e=Drupal.settings.hermes_products.data,f=new d,g={submit:".product-actions button, .tray-close",item:".product-configurator-parfume label"};this.init=function(){this.$el=jQuery("#panel-configurator"),this.$configProdTitle=this.$el.find("#title-tray-content-wrapper"),this.$configDescription=this.$el.find(".field-name-field-description-configurator"),this.$configMeasurements=this.$el.find(".field-name-field-measurements-configurator"),f.descriptionSelector=this.$configDescription,this.$el.length&&(this.tray=new c({$el:this.$el,name:"tray-configurator-multi",animationSpeed:a,scrollSpeed:b}),this.bind())},this.bind=function(){var a=this;APP.pubsub.subscribe("parfume.configurator",this.showPanel.bind(this)),APP.pubsub.subscribe("parfume.outofstock",this.disableOutOfStock.bind(this)),APP.pubsub.subscribe("tray.configurator.openTray",this.openTray.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.closeTray.bind(this)),APP.pubsub.subscribe("zoomed.out",this.updateDom.bind(this)),this.$el.on("click",".tray-close",this.handlePanel.bind(this)).on("click",".tray-trigger",this.showPanel.bind(this)),this.$el.find(g.item).click(function(b){var c=jQuery(b.currentTarget),d=c.attr("for").replace("parfume",""),e=a.getProd(d),g=e.images[0].uri.replace("50-0","0-0-0"),h=e.description;f.blocDescription=h,f.splitDescription();var i=e.measurements;APP.pubsub.publish("dom.update.zoomImg",g+"-SIZE");var j=a.getProd(d).display_name;a.$configProdTitle.text(j),a.$configMeasurements.html(i.join("\n"))}),this.$el.find(g.submit).removeClass("add-to-cart").click(function(b){b.preventDefault(),a.updateDom()})},this.updateDom=function(a){if(this.tray.isOpen){var b=this.$el.find("input.product-configurator-form-input:checked").val(),c=this.getProd(b),d={pos:this.configuratorReplacePos,prod:c};APP.pubsub.publish("configurator.changed",d),APP.pubsub.publish("tray.overlay.close",a)}this.closeTray()},this.getProd=function(a){var b=void 0;return e.products.some(function(c){return c.sku===a&&(b=c),b}),b},this.showPanel=function(a,b){var c=b.split("-")[0],d=this.getProd(c);if(this.configuratorReplacePos=b.split("-")[1],d){var e=d.display_name||"",g=d.description;f.blocDescription=g,f.splitDescription();var h=d.measurements;this.$el.find("#parfume"+c).prop("checked",!0),this.$configProdTitle.text(e),this.$configMeasurements.html(h.join("\n"))}this.openTray()},this.openTray=function(){var a=jQuery(".tray-trigger-origin").parent("li").index()+1;0!==a&&jQuery("#variant-info").attr("tray-trigger-origin-position",a),this.tray.open()},this.closeTray=function(){if(this.tray.isOpen){this.tray.close();var a=jQuery("#variant-info").attr("tray-trigger-origin-position");a&&jQuery(".product-attributes li:nth-child("+a+") button").focus()}},this.handlePanel=function(a){APP.pubsub.publish("tray.overlay.close",a)},this.disableOutOfStock=function(a,b){b.forEach(function(a){var b=jQuery('.product-attributes a[sku="'+a+'"]'),c=jQuery(".product-configurator-parfume #parfume"+a);b.addClass("disabled"),c.addClass("disabled")})},this.isValid=function(){return!0},this.init()}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("9a",["16","9b"],function(a){"use strict";function b(){this.init=function(){this.$el=jQuery("#tray-sister-brands"),this.loadImage(),this.tray=new c({$el:this.$el,name:"tray-sister-brands",showOverlay:!0}),this.bind(),this.$el.on("visibleChange",function(){d.trayPageview()}),d.sisterBrandsLink()},this.bind=function(){APP.pubsub.subscribe("tray.sister-brands.toggle",this.toggleTray.bind(this))},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.loadImage=function(){var a=jQuery(".sister-brand-image img");jQuery.map(a,function(a){jQuery(a).attr("src",jQuery(a).data("src")).removeAttr("data-src")})},this.init()}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("9c",["16","9d"],function(a){function b(){this.init=function(){this.$el=jQuery("#tray-size-guide"),this.$radio=this.$el.find("[name=units]"),this.$sizeTable=this.$el.find(".size-guide-tables table"),this.tray=new c({$el:this.$el,name:"tray-size-guide",showOverlay:!0}),this.bind()},this.bind=function(){var a=this;this.tray.addEventListener("openOne",this.openTray.bind(this)),this.tray.addEventListener("open",this.openTray.bind(this)),APP.pubsub.publish("analytics.size_guide.open"),jQuery("#zoom-wrapper").add("#tray-overlay").on("click",function(){APP.pubsub.publish("zoom.out"),a.closeTray()})},this.setParams=function(a){a.sizeGuideType&&(this.guideType=a.sizeGuideType)},this.toggleTray=function(){this.tray.isOpen?this.closeTray():(this.tray.open(),this.openTray())},this.openTray=function(){this.$el.find(".size-guide-item").removeClass("active"),this.$currentGuide=this.$el.find("[data-size-guide-type="+this.guideType+"]"),this.$currentGuide.addClass("active"),this.$radio=this.$currentGuide.find("[type=radio]"),this.$sizeTable=this.$currentGuide.find(".size-guide-tables table"),this.$radio.off("change.sizeTable").on("change.sizeTable",this.toggleSizeTables.bind(this)),this.toggleSizeTables()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.toggleSizeTables=function(){var a=this.$radio.filter(":checked").val();this.$sizeTable.removeClass("active");var b=this.$sizeTable.filter("#"+a);b.addClass("active");var c=b.find("th"),e=c.toArray().map(function(a){return jQuery(a)}).map(function(a){return a.outerHeight()}),f=Math.max.apply(Math,d(e));c.css({height:f})},this.init()}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("9e",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{STORE_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",
HOME_PIN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABQCAMAAABVumeJAAAAYFBMVEVMaXHpj4fibWTojYXaTEHeWU7rnpfso53vsa3eX1TURDjicmjkeG/kfnXmhHvXPzHYQjbdTUHSOCvZRTjfUEXdSD7hVEjbRzrhV0xuNC/FRjyCODK2QjhyNjFqMi6UPDSgygjXAAAAD3RSTlMAXLV37+JEKhHN+p6MhaGQa3UDAAACi0lEQVR4AY3Th46sMAyFYVPS6IQ6/f3f8lqxljmKGG7+LWqfjswUijNZkzulXN5khi4zrdvnMbQs46ga85vW+zyv6xwauW1bcn1KbbOvkmCZH5bansy6dd2Fz6CZKx1brZie4mUqs8iWu3SCt2lATUbtF3ibRrjEuvWwZ3gbSnPgbt6vlrk+/7PZChZeOsBTX8ARl1cw/jukmL92/4Wnvg7DKh4+xTKdzUBhOMJydT6v0jHM/0bmYANWlgybPfyEmI7Pz+PxeY4zDHPDZEjPog57f9xCjydiuaMdkbJ93V6h2+0p9sA55SMLkdxaiRV9h2HGjhxjKQx/xIbeHxyeBkVqxsYXdHvdF7BDGeH7C3s/r/B6v8HuTfAEeIQjYJk1YraM3TJ+myvY5e443CvKtxH18WowfX/AMnbUAubkdWYbhhc4Yuhr0ngG92Qtu+HiCXBGtgS9cPfHO/SI7WCI8okFtsmnrlqEBisnE2WAD78t8AoL9gVjq1AHJEXD8o0thsOJRCqW8zVxMo0stjDM0/12QSXfkGTVEFO0MmxJogwwSLC+oKO8R4lW8o6+mXIAE8/yjyao6E+p4D48HeT6iKJVFikeElNOo5RDUKL1HbDjEHCHHOAIyGwRDa8DD+MRcEg0G/I1nWUda6BycGnpNN33IGXbZ/Sj3AMU6+hXugJ5MSx1ngHanH5nKqScpotymb68GF+QpIslB9PyGl+UIW7pOouPaK6tPCI+XuIdvvgvtuUfrviKlDsSrpAKH6j3bQI2lZc0JeTEKkqpEVwnYS04S8K29Jy8cIlHK0qrlZPT0uknyyvdG0pMefncJ5V7n1NqhXwwkp8wS8bGe5OMbVXZdFyW6Zico7P+AbjAlYsTQvYhAAAAAElFTkSuQmCC",HERMES_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgLTEgMjcgMzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI2LjkyMiAxMy42MThDMjYuOTIyIDYuMDk4IDIwLjg5NSAwIDEzLjQ2MiAwIDYuMDI3IDAgMCA2LjEgMCAxMy42MThjMCAzLjIxOCAxLjEwMyA2LjE3NCAyLjk1IDguNTA1aC0uMDA0YzMuNDc3IDQuMzkyIDguMzg4IDEwLjYwMiA5Ljk4NSAxMi42MjMuMTM1LjE2LjMyNi4yNTQuNTMyLjI1NC4yMDQgMCAuMzk1LS4wOTMuNTMtLjI1NGw5Ljk4LTEyLjYxN2MuMDAzIDAgLjAwMy0uMDA0LjAwMy0uMDA0bC0uMDAzLS4wMDNjMS44NDUtMi4zMyAyLjk1LTUuMjg3IDIuOTUtOC41MDUiIGZpbGw9IiM0NDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMTBoNC4wMDZ2MS40MjJoLTEuMjZ2Mi40MzJoNC41MDZ2LTIuNDMyaC0xLjI2OFYxMEgxOXYxLjQyMmgtMS4yOHY3LjE2SDE5VjIwaC00LjAxNnYtMS40MTdoMS4yNjh2LTMuMzJsLTQuNTA2LS4wMDJ2My4zMjNoMS4yNlYyMEg5di0xLjQxN2gxLjI3N3YtNy4xNkg5Ii8+PC9zdmc+",CLUSTER_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyOSI+PHN0eWxlPi5zdDB7ZmlsbDojNDQ0NDQ0O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yIDBDNSAwIDAgNSAwIDExLjJjMCAyLjYuOCA1IDIuNCA3bDcuMiA5IDEuNiAyIDEuNi0yIDUuOC03LjQgMS4yLTEuNmMxLjYtMiAyLjQtNC40IDIuNC03IDAtNi4yLTUtMTEuMi0xMS0xMS4yeiIvPjwvc3ZnPg=="})}}}),a.register("9f",["16","27","37","1a","9e"],function(a){"use strict";function b(){function a(){var a=d.render(APP.templates.web2shopShopTrayData,{shop:r});p.html(a),m.html(r.company),b()}function b(){if(e.currentMapEngine()===e.mapenginetype.GOOGLE){var a={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};s?s.setCenter(a):s=new google.maps.Map(q,{zoom:12,center:a}),t?t.setPosition(a):t=new google.maps.Marker({position:a,map:s,icon:{url:k}})}else{var b=new BMap.Point(parseFloat(r.longitude),parseFloat(r.latitude));if(s?s.setCenter(b):(s=new BMap.Map(q),s.centerAndZoom(b,12),s.enableScrollWheelZoom(!0),s.addControl(new BMap.NavigationControl({type:BMAP_NAVIGATION_CONTROL_ZOOM}))),t)t.setPosition(b);else{var c=k,d=e.mapengine.map.pins.store.size,f=e.mapengine.map.pins.store.anchor,g=new BMap.Icon(c,new BMap.Size(d.x,d.y),{anchor:new BMap.Size(f.x,f.y)});t=new BMap.Marker(b,{icon:g}),s.addOverlay(t)}}}function h(a){var b=a.currentTarget.getAttribute("data-shop-id");a.currentTarget.checked||(b=null),APP.pubsub.publish("tray.store.favorite-shop",b),f(j,{favorite_shop_code:b||0,action:"edit"}).fail()}function i(){this.tray.isOpen?o.closeTray():o.openTray()}var j="/customer",k=g.STORE_PIN,l=jQuery("#tray-store-details"),m=jQuery("#title-tray-store-details"),n=jQuery("#store-content"),o=this,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0;this.init=function(){r=null,this.tray=new c({$el:l,name:"tray-store-details",showOverlay:!0}),n.html(d.render(APP.templates.web2shopShopTrayContainer)),p=jQuery('[data-bind="shop-details-data-wrapper"]'),q=jQuery('[data-bind="shop-details-map-wrapper"]')[0],this.bind()},this.setWebToShopData=function(b){r=b,this.unbind(),a(),this.rebind()},this.bind=function(){APP.pubsub.subscribe("tray.store.toggle",i.bind(this))},this.unbind=function(){jQuery('[data-bind="make-favorite-shop"]').off("click",h.bind(this)),jQuery('[data-bind="select-shop"]').off("click",this.onSelectShopClick.bind(this))},this.rebind=function(){jQuery('[data-bind="make-favorite-shop"]').on("click",h.bind(this)),jQuery('[data-bind="select-shop"]').on("click",this.onSelectShopClick.bind(this))},this.onSelectShopClick=function(a){a.preventDefault();var b=a.currentTarget.getAttribute("data-shop-id");APP.pubsub.publish("tray.store.selected-shop",b),this.tray.close()},this.openTray=function(){this.tray.open()},this.closeTray=function(){this.tray.isOpen&&this.tray.close()},this.init()}var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("a0",[],!0,function(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}this||self;c.exports=d}),a.registerDynamic("a1",["a0"],!0,function(a,b,c){function d(){h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=!0;for(var a in{toString:null})g=!1}function e(a,b,c){var e,j=0;null==g&&d();for(e in a)if(f(b,a,e,c)===!1)break;if(g)for(var k=a.constructor,l=!!k&&a===k.prototype;(e=h[j++])&&("constructor"===e&&(l||!i(a,e))||a[e]===Object.prototype[e]||f(b,a,e,c)!==!1););}function f(a,b,c,d){return a.call(d,b[c],c,b)}var g,h,i=(this||self,a("a0"));c.exports=e}),a.registerDynamic("a2",["a0","a1"],!0,function(a,b,c){function d(a,b,c){f(a,function(d,f){if(e(a,f))return b.call(c,a[f],f,a)})}var e=(this||self,a("a0")),f=a("a1");c.exports=d}),a.registerDynamic("96",["a2"],!0,function(a,b,c){function d(a){var b=[];return e(a,function(a,c){b.push(a)}),b}var e=(this||self,a("a2"));c.exports=d}),a.register("95",["17","38","3b","1e"],function(a){function b(){v&&(p.enableDisableFindInStoreLoader(!1),v.abort())}function c(a,b){u=b}function d(a,b){p.forceActivatingPL(),p.isConfiguratorIsLoaded()||(p.initTrayConfigurator(),p.setConfiguratorIsLoaded()),p.productLocatorScript(a,e,b)}function e(a,b){m(u,b,null,null,!0,!0)}function f(a){a.attr("tabindex",0),a.focus(),a.attr("tabindex",-1)}function g(a,b,c,d){var e=arguments.length<=4||void 0===arguments[4]?null:arguments[4],f=arguments.length<=5||void 0===arguments[5]||arguments[5],g=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],h="?locale=",i=Drupal.settings.hermes_locale,j=Drupal.settings.hermes_global.url_backjs,k="&productsku=",l=p.productLocatorStockRetailWS(),m="stock-by-store"===l?"&storeid=":"",n="stock-by-store"===l&&b?b.filter(Boolean).join(";"):"",o=a.sku.replace(/ /g,"-"),r=encodeURIComponent(n),s=j+"/"+l+h+i+k+o+m+r,t=q(d,2),u=t[0],w=t[1];f&&p.enableDisableFindInStoreLoader(),v=jQuery.ajax({url:s,method:"GET",xhrFields:{withCredentials:!0},async:!1,success:function(b){var d=b.inventoryDetailsByStore[0].stores;u(d,a,c,e,g)},error:function(b,d){p.enableDisableFindInStoreLoader(!1),"abort"!==d&&w(c,a,g)}})}function h(a,b,c){if(!p.isProductLocatorConfigurationInitialized()||!p.isProductLocatorActive()||p.isProductExcluded())return o.hideLoaderButton("loader-button-add-to-cart"),void p.enableAllAttributesButtons();if(2===p.productLocatorVersion()){var d={};if(d.allSkus=[],!Drupal.settings.hermes_products.hasOwnProperty("data")||!Drupal.settings.hermes_products.data.hasOwnProperty("all_products"))return;for(var e=0;e<Drupal.settings.hermes_products.data.all_products.length;e++)Drupal.settings.hermes_products.data.all_products[e]&&Drupal.settings.hermes_products.data.all_products[e].hasOwnProperty("sku")&&d.allSkus.push(Drupal.settings.hermes_products.data.all_products[e].sku);i(d.allSkus,c)}else b&&p.addClassToMultiElements(document.getElementsByClassName("product-locator-container-button"),"add",["show"])}function i(a,b){null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts?!function(){var c="/stock-presentability",d=Drupal.settings.hermes_global.url_backjs,e=Drupal.settings.hermes_locale,f={data:{presentabilities:[]}},g={parameters:{skus:a,country_code:e.substr(0,e.indexOf("_")).toUpperCase()}};jQuery.ajax({type:"POST",url:d+c,headers:{"Content-Type":"application/json"},data:JSON.stringify(g),crossDomain:!0,xhrFields:{withCredentials:!0},async:!1,success:function(c){j(c,a,b)},error:function(){j(f,a,b)}})}():p.refreshAllButtons(b)}function j(a,b,c){p.refreshStockRetailPresentability(a,b),p.refreshAllButtons(c)}function k(a,b){var c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(c)return b.storesStock=[],b.requestFrom="page_product",b.availabilityLimit=Drupal.settings.product_locator_configuration.availabilityLimit,b.proximityMsgMaxKm=Drupal.settings.product_locator_configuration.proximityMsgMaxKm,b.mapActive=Drupal.settings.product_locator_configuration.mapActive,b.technicalErrorForAngular=!0,void APP.pubsub.publish("tray.product.locator.toggle",b);APP.pubsub.publish("tray.product.locator.ws.response.error",!0);var d=jQuery(".product-locator-error-message",a);d&&d.length>0&&(d[0].innerHTML='<p class="product-locator-button-error-text"> '+Drupal.settings.hermes_translations.ui.product_locator.service_unavailable+" </p>",jQuery(".product-locator-button").addClass("product-locator-disabled"),jQuery(".product-locator-disabled").attr("aria-hidden","true"),jQuery(".product-locator-disabled").attr("tabindex",-1),f(d))}function l(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?null:arguments[3],e=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];p.enableDisableFindInStoreLoader(!1),d&&d.hidePanel();var g=!1;b.storesStock=[];for(var h=0;h<a.length;h++)a[h].available&&(g=!0,b.storesStock.push({cegidId:a[h].storeId,available:a[h].available,limited:a[h].limited,ereservationActivated:a[h].ereservationActivated}));b.proximityMsgMaxKm=Drupal.settings.product_locator_configuration.proximityMsgMaxKm,b.mapActive=Drupal.settings.product_locator_configuration.mapActive;var i=jQuery(".product-locator-error-message",c);g?(i[0].innerHTML="",c||e?b.requestFrom="page_product":b.requestFrom="tray_product_locator",APP.pubsub.publish("tray.product.locator.toggle",b)):!function(){var a=Drupal.settings.hermes_locale.split("_")[0],c="no_stock_"+a;setTimeout(function(){i&&i.length>0&&(i[0].innerHTML='<p class="product-locator-button-error-text">'+Drupal.settings.hermes_translations.ui.product_locator[c]+"</p>")},50),APP.pubsub.publish("tray.product.locator.without.stock",b),e&&(b.noStockForAngular=!0,APP.pubsub.publish("tray.product.locator.toggle",b)),f(i)}()}function m(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?null:arguments[3],e=arguments.length<=4||void 0===arguments[4]||arguments[4],f=!(arguments.length<=5||void 0===arguments[5])&&arguments[5];if(f&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&p.checkIfRetailPresentabilityIsNull()){var h={};h.allSkus=[];for(var j=0;j<Drupal.settings.hermes_products.data.all_products.length;j++)Drupal.settings.hermes_products.data.all_products[j]&&Drupal.settings.hermes_products.data.all_products[j].hasOwnProperty("sku")&&h.allSkus.push(Drupal.settings.hermes_products.data.all_products[j].sku);i(h.allSkus,!0)}var m=null;if(a&&a.length>0){var n=a.map(function(a){return a.getDatas()}),o=n.filter(function(a){return a.country===s[Drupal.settings.hermes_current_country]});m=o.map(function(a){return a.cegid_id})}var q=[l,k];g(b,m,c,q,d,e,f)}function n(){return Drupal.settings.product_locator_configuration}var o,p,q,r,s,t,u,v;return{setters:[function(a){o=a},function(a){p=a.ProductLocatorTools},function(a){q=a.default},function(a){r=a.default}],execute:function(){"use strict";s=r.EZ_PUBLISH_COUNTRY_MAPPING,t=null,u=null,v=null,APP.pubsub.subscribe("open-plv2-tray",d),APP.pubsub.subscribe("hermes-stores-datas-ready-product-page",c),APP.pubsub.subscribe("init-configurator-change",b),a("stockPresentabilityQuery",h),a("testStockWithCegidIdProductLocator",m),a("getStoreViewConfiguration",n)}}}),a.register("a3",["3","4","16","18","27","83","95","96","3b"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.isSmall},function(a){h=a},function(a){i=a.default},function(a){j=a.default}],execute:function(){"use strict";k=function(){function a(b){c(this,a),this.ZOOM_SPEED=b.zoomSpeed||.5,this.SCROLL_SPEED=b.scrollSpeed||1,this.variants=b.products,this.defaultSetSku=b.sku,this.attributes=b.attributes,this.selectedAttributes,this.firstUpdate=!0,this.availableOptions={},this.GLOBAL=Drupal.settings.hermes_products.data,this.currentAttr,this.firstCall=!0,this.selectedAttribut=null,this.firstVariant,this.selectedSizeTop=!1,this.selectedSizeBot=!1,this.noSelected=!1,this.isAppleWatchKit=b.isAppleWatchKit,this.availableColorsNumber=0,this.formErrorMessage=Drupal.settings.hermes_translations.validation.errorOnForm,this.$pageTitle=jQuery("head title"),this.titleContent=this.$pageTitle.text(),this.buyable,this.REF_SIZE_TOP="field_ref_size_top",this.REF_SIZE_BOT="field_ref_size_bot",this.REF_SIZE="field_ref_size",this.COLOR_ATTR="field_color_hermes",this.$el=jQuery("#panel-configurator"),this.$el.length&&(this.tray=new d({$el:this.$el,name:"tray-configurator-bikini",animationSpeed:this.ZOOM_SPEED,scrollSpeed:this.SCROLL_SPEED}),APP.currentSetSKU=Drupal.settings.hermes_products.data.set.sku,APP.currentSKU=Drupal.settings.hermes_products.data.default_variant.sku.join("-"),this.defaultSkus=Drupal.settings.hermes_products.data.default_variant.sku,this.defaultVariants=this.selectedVariants=this.findDefaultVariants(Drupal.settings.hermes_products.data.products),this.firstVariant=this.defaultSkus[0],this.secondVariant=this.defaultSkus[1],this.cacheDom(),this.bind(),this.initSelectedAttributes(),this.showDefaultValues(),this.findMatchingVariants(),jQuery(".product-configurator-field_ref_size_top").find("legend span").text(""),jQuery(".product-configurator-field_ref_size_bot").find("legend span").text(""),this.$el.find(".product-locator-container-button").hide())}return b(a,[{key:"findDefaultVariants",value:function(a){var b=this,c=[];return a.forEach(function(a,d){return c.push(a.find(function(a){return a.sku===b.defaultSkus[d]}))}),c}},{key:"update",value:function(a){this.variants=a,this.findMatchingVariants()}},{key:"cacheDom",value:function(){this.title=this.$el[0].querySelector(".title-tray-container h2"),this.price=this.$el[0].querySelector(".field-type-commerce-price"),this.eco_tax=this.$el[0].querySelector(".field-type-commerce-eco-tax"),this.productInfo=document.querySelector("#product-info"),this.$productDetail=jQuery("#product-detail"),this.productSku=this.productInfo.querySelector(".commerce-product-sku-value"),this.$form=jQuery("#variant"),this.$formInputs=this.$form.find(".product-configurator-form-input")}},{key:"bind",value:function(){APP.pubsub.subscribe("tray.configurator.bikini.open",this.showPanel.bind(this)),APP.pubsub.subscribe("tray.overlay.close",this.hidePanel.bind(this)),APP.pubsub.subscribe("zoomed.out",this.hidePanel.bind(this)),APP.pubsub.subscribe("update.dom",this.updateDom.bind(this)),this.$el.on("change",".product-configurator-form-input",this.changeConfiguration.bind(this)).on("click",".tray-close",this.handlePanel.bind(this)).on("click","[data-bind=product-add-to-cart]",this.onAddToCartClick.bind(this)).on("click","[data-bind=configurator-add-to-cart]",this.onAddToCartClick.bind(this))}},{key:"showDefaultValues",value:function(){var a=jQuery('[href="#configurator-'+this.COLOR_ATTR+'"] .product-attribute-value span',this.productInfo),b=Drupal.settings.hermes_products.data.products[0][0].attributes;a.text(b.field_color_hermes.attr_display||b.field_color_hermes.name),this.currentAttr=b.field_color_hermes.id.replace(/\s/g,"")}},{key:"initSelectedAttributes",value:function(){this.selectedAttributes={field_color_hermes:this.defaultVariants[0].attributes.field_color_hermes},this.selectedAttributes.field_ref_size_top=null,this.selectedAttributes.field_ref_size_bot=null}},{key:"findMatchingVariants",value:function(){var a=this;this.matchingVarients=this.variants;var b=[],c=[];this.matchingVarients.forEach(function(d,e){return d.forEach(function(d){"undefined"!=typeof d.attributes[a.REF_SIZE]&&(b.push(d),0===e?c.push(d.attributes[a.REF_SIZE].field+"_top-"+d.attributes[a.REF_SIZE].name):c.push(d.attributes[a.REF_SIZE].field+"_bot-"+d.attributes[a.REF_SIZE].name+"1"))})}),this.matchingVarients=b,this.updateOptionsAvailability(c),this.updateConfiguratorDom()}},{key:"updateOptionsAvailability",value:function(a){var b=this,c=this.$form.find(".product-configurator-form-input"),d=[].map.call(c,function(a){var b=a.id.split("-"),c=j(b,1),d=c[0];return{variationField:d,id:a.id.replace(/\s/g,""),$el:jQuery(a)}});d.forEach(function(c){var d=c.variationField,e=c.id,f=c.$el;d!==b.REF_SIZE_TOP&&d!==b.REF_SIZE_BOT||(a.includes(e)?f.attr("disabled",!1):f.attr("disabled",!0))})}},{key:"changeConfiguration",value:function(a){var b=this;this.selectedSizeTop=!1,this.selectedSizeBot=!1;var c=a.currentTarget.getAttribute("data-field");this.noSelected=!0,this.selectedAttributes[c]=a.currentTarget.value,this.selectedAttribut=this.selectedAttributes[c],this.selectedAttributes[c].includes(this.REF_SIZE_TOP)&&(this.selectedSizeTop=!0),this.selectedAttributes[c].includes(this.REF_SIZE_BOT)&&(this.selectedSizeBot=!0),this.findMatchingVariants(),this.selectedSizeTop&&(this.selectedVariants[0]=this.firstVariant=this.GLOBAL.products[0].find(function(a){return a.attributes.field_ref_size.field+"_top-"+a.attributes.field_ref_size.name===b.selectedAttribut})),this.selectedSizeBot&&(this.selectedVariants[1]=this.secondVariant=this.GLOBAL.products[1].find(function(a){return a.attributes.field_ref_size.field+"_bot-"+a.attributes.field_ref_size.name===b.selectedAttribut})),this.updateConfiguratorDom(),g()&&this.updateDom(),this.updateValidation({updatedField:c,configuratorId:a.currentTarget.name}),this.selectedSizeTop&&APP.pubsub.publish("configurator.change",this.firstVariant),this.selectedSizeBot&&APP.pubsub.publish("configurator.change",this.secondVariant)}},{key:"showPanel",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{scrollTo:this.REF_SIZE_TOP}:arguments[1],c=(arguments.length<=2||void 0===arguments[2]?null:arguments[2],jQuery("#panel-configurator .variant-image"));jQuery.map(c,function(a){return jQuery(a).attr("src",jQuery(a).data("src"))});var d=b.scrollTo;if(b.scrollTo===this.REF_SIZE_BOT&&(d=b.scrollTo+"1"),b&&jQuery("#configurator-"+d).length){var e=jQuery("#configurator-"+d).offset().top+this.tray.$wrapper.scrollTop()-window.pageYOffset;this.tray.scrollTo({top:e})}this.tray.open(),this.firstCall&&(this.$form.find(" .product-configurator-form-input").removeAttr("checked"),jQuery('[name="field_color_hermes"]').attr("checked","checked"),this.firstCall=!1)}},{key:"hidePanel",value:function(){this.tray.isOpen&&(this.tray.close(),APP.pubsub.publish("zoom.out"))}},{key:"handlePanel",value:function(){var a=jQuery(".tray-trigger-origin").attr("data-field");if(this.updateDom(),a){var b='button[data-field="'+a+'"]';jQuery(b).focus()}this.tray.close(),APP.pubsub.publish("zoom.out")}},{key:"updateConfiguratorDom",value:function(){var a=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[0]),b=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[1]),c=jQuery('[data-field="'+this.REF_SIZE_TOP+'"] .product-attribute-value span'),d=jQuery('[data-field="'+this.REF_SIZE_BOT+'"] .product-attribute-value span');this.selectedSizeTop&&c.html(a.attributes.field_ref_size.attr_display),this.selectedSizeBot&&d.html(b.attributes.field_ref_size.attr_display)}},{key:"updateDom",value:function(){var a=[];if(this.noSelected||(this.selectedVariants=this.defaultVariants),!this.firstUpdate&&this.productSku.textContent===this.selectedVariants[0].sku+" | "+this.selectedVariants[1].sku)return void(this.firstUpdate=!1);this.updatedDataRender(),a[0]=this.selectedVariants[0]?this.selectedVariants[0].sku:null,a[1]=this.selectedVariants[1]?this.selectedVariants[1].sku:null;var b=a.join(" | ");if(jQuery(this.productSku).html(b),APP.updatedProductSKU=b,!this.selectedAttributes[this.REF_SIZE_TOP]){var c=jQuery('[data-field="field_ref_size_top"] .product-attribute-value span');c.html(Drupal.settings.hermes_translations.ui.select)}if(!this.selectedAttributes[this.REF_SIZE_BOT]){var d=jQuery('[data-field="field_ref_size_bot"] .product-attribute-value span');d.html(Drupal.settings.hermes_translations.ui.select)}}},{key:"updatedDataRender",value:function(){var a=jQuery.extend({},Drupal.settings.hermes_translations.ui,this.selectedVariants[0]),b=Drupal.settings.hermes_products.data.set.description;a.color=this.variants[0][0].attributes.field_color_hermes,a.bottom_bikini_selected=this.selectedVariants[1],a.top_bikini_selected=this.selectedVariants[0],a.thumb=this.variants[0][0].thumbs[0].uri,a.intro=b?b[0]:null,a.remaining_copy=b[1]?b[1]:null;var c=f.render(APP.templates.productInfoBikini,a);this.$productDetail.find("#variant-info").html(c)}},{key:"isValid",value:function(){var a=i(this.selectedAttributes);return!a.includes(null)}},{key:"validate",value:function(){if(!this.isValid()){for(var a in this.selectedAttributes)this.selectedAttributes.hasOwnProperty(a)&&(this.selectedAttributes[a]||this.throwValidationError({field:a.split("-")[0]}));if(!this.matchingVarients.length)throw new Error("No products match this configuration","product-bikini-configurator.js")}}},{key:"throwValidationError",value:function(a){var b=a.field;a.field===this.REF_SIZE_BOT&&(b=a.field+"1");var c=document.querySelector("#configurator-"+b),d=this.tray.$wrapper.scrollTop()+jQuery(c).offset().top-window.pageYOffset;c.classList.add("error"),this.$el.addClass("error-on-form"),this.$pageTitle.html(this.formErrorMessage+this.titleContent),this.tray.scrollTo({top:d})}},{key:"updateValidation",value:function(a){document.querySelector("#configurator-"+a.configuratorId).classList.remove("error"),this.productInfo.querySelector(".product-attributes-"+a.updatedField).classList.remove("error"),this.$el.removeClass("error-on-form"),this.$pageTitle.html(this.titleContent)}},{key:"onAddToCartClick",value:function(a){if(a.preventDefault(),a.stopPropagation(),!this.isValid())return void this.validate();var b=[this.defaultSetSku||null,this.firstVariant.sku||null,this.secondVariant.sku||null],c=b.includes(null)?null:b.join("-"),d=jQuery(".tray-trigger-origin").attr("data-field");if(APP.pubsub.publish("zoom.out"),this.updateDom(),d){var f='a[data-field="'+d+'"]';jQuery(f).focus()}this.tray.close();var g={sku:c,container_id:this.defaultSetSku||null,image:this.defaultVariants[0].thumbs[0].uri,category:e.get("nav")?e.get("nav"):"direct"};APP.pubsub.publish("addToCart",g)}},{key:"setBuyable",value:function(a){this.buyable=a}}]),a}(),a("default",k)}}}),a.register("23",["17","1a"],function(a){"use strict";function b(){var a="/send-sms-code",b=void 0,e=void 0,f=void 0;this.init=function(a){this.formID=a,this.bind()},this.bind=function(){jQuery(this.formID).find("input[name=phonecode], input[name=registredphonecode]").on("keyup",this.checkPhoneCode),jQuery(this.formID).find("input[name=loginphone], input[name=registredloginphone]").on("keyup",this.checkPhoneNumber)};var g=function(a){var b=a,c=setInterval(function(){f.val(--b+" "+window.Drupal.settings.hermes_translations.notification.account.sms.sec),b<=0&&(f.val(window.Drupal.settings.hermes_translations.notification.account.sms.sendcode).removeAttr("disabled").removeClass("disabled-input"),clearInterval(c))},1e3),d=function(){f.val(window.Drupal.settings.hermes_translations.notification.account.sms.sendcode).attr("disabled","disabled").addClass("disabled-input"),clearInterval(c)};APP.pubsub.subscribe("account.sms.banned",d)},h=function(a){if(a.error){var b={messageVariables:{}},d="";switch(!0){case"undefined"!=typeof a.error.internal_code:jQuery.extend(b.messageVariables,{time_to_wait:"60"}),d="2200001"===a.error.internal_code?{description:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[a.error.internal_code]}:{description:a.error.message};break;case 3100005===a.error:case 3100004===a.error:f.attr("disabled","disabled").addClass("disabled-input"),g(a.time_to_wait),jQuery.extend(b.messageVariables,{time_to_wait:a.time_to_wait/60}),d=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[a.error];break;case 3100002===a.error:f.attr("disabled","disabled").addClass("disabled-input"),setTimeout(function(){f.removeAttr("disabled").removeClass("disabled-input")},36e5),d=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[3100004],jQuery.extend(b.messageVariables,{time_to_wait:"60"});break;default:d=window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[a.error]}jQuery.extend(b,{message:d}),c.hideOverlay(),c.showMessage(b)}else f.attr("disabled","disabled").addClass("disabled-input"),g(a.time_to_wait),c.hideOverlay()},i=function(){c.technicalError()};this.checkPhoneCode=function(a){var b=jQuery(this).val();jQuery(this).val(b.split(" ").join("")),b.indexOf("+")===-1&&jQuery(this).val("+"+b)},this.checkPhoneNumber=function(a){var b=jQuery(this).val();jQuery(this).val(b.split(" ").join("")),b&&"0"===b[0]&&jQuery(this).val(b.substring(1))},this.sendSmsCode=function(){var g=void 0,j=jQuery(this.form);f=j.find(".edit-send-sms-button"),b=j.find("input[name=phonecode]"),b.val(b.val().split(" ").join("")),e=j.find("input[name=loginphone]"),e.val(e.val().split(" ").join(""));var k=new RegExp(b.attr("pattern")),l=new RegExp(e.attr("pattern"));k.test(b.val())&&l.test(e.val())&&(g={phone_code:b.val(),phone_number:e.val()},c.showLoader(),d(a,g).done(h.bind(this)).fail(i))}}var c,d;return{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("a4",["16","17","18","23","1b","1e","1a","1d"],function(a){"use strict";function b(){var a="/wechat/binding/loginbyphone",b=jQuery("#request-wechat-binding-informations"),j=void 0;this.init=function(){this.formID="#hermes-account-wechat-binding-form",this.$el=jQuery("#tray-wechat-binding"),this.form=this.$el.find("form"),this.tray=new c({$el:this.$el,name:"tray-wechat-binding",showOverlay:!0}),b[0]&&(j=new g({inputs:b[0].querySelectorAll("[name]")})),this.form.attr("novalidate","novalidate"),this.smsHelpers=new f,this.smsHelpers.init(this.formID),this.bind()},this.bind=function(){this.form.find(".edit-send-sms-button").on("click",this.smsHelpers.sendSmsCode).bind(this),APP.pubsub.subscribe("tray.wechat-binding.toggle",this.toggleTray.bind(this)),this.form.on("submit",this.submitForm.bind(this))},this.submitForm=function(b){var c=this;if(b.preventDefault(),b.stopPropagation(),j.runTests(b),!this.form.find(".validation-error").length){this.showLoader();var d={};d.phonecode=this.form.find('input[name="phonecode"]').val(),d.loginphone=this.form.find('input[name="loginphone"]').val(),d.verificationcode=this.form.find('input[name="verificationcode"]').val(),d.confirm_verificationcode=this.form.find('input[name="confirm_verificationcode"]').val(),i(a,d).done(this.loginWechatBindingDone.bind(this)).fail(function(){c.hideLoader(),c.showNotificationError()})}},this.loginWechatBindingDone=function(a){e.deleteItem("social_login"),d.hideOverlay(),a.need_create_account?(e.set("user_sms_bp",!0),window.location=window.location.origin+"/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.account_create):a.error?(this.hideLoader(),this.handleErrorResponse(a)):(delete a.user.social,a.user.wechatlinked=!0,APP.pubsub.publish("account.login.done",{jqXHR:a,source:"wechat"}))},this.showNotificationError=function(){var a={message:Drupal.settings.hermes_translations.notification.account.errorMessage,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.account.errorMessage.variables),d.showMessage(a)},this.showLoader=function(){d.showLoaderButton("loader-button-wechat-binding")},this.hideLoader=function(){d.hideLoaderButton("loader-button-wechat-binding")},this.handleErrorResponse=function(a){var b=a.error?a.error.internal_code:void 0,c=a.error?a.error.message:void 0,e=Drupal.settings.hermes_translations.notification.account.wechatBindingCodes,f={};if(a.error&&a.error.smsErrorNumber)return d.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.sms.errorCode[a.error.smsErrorNumber]}),void(a.error.smsErrorNumber.toString()===h.ERRORCODE.smsBanned&&APP.pubsub.publish("account.sms.banned"));switch(b){case h.ERRORCODE.wechatbindingUserNotFound:case h.ERRORCODE.wechatbindingUserAlreadyBind:case h.ERRORCODE.wechatbindingUnionIdAlreadyUsed:case h.ERRORCODE.wechatbindingNeededParams:f={message:e[b],messageVariables:{message:c},type:"critical"},jQuery.extend(f.messageVariables,e[b].variables),d.showMessage(f);break;case h.ERRORCODE.inactivity:APP.pubsub.publish("account.httpsession.expired");break;default:d.technicalError()}},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.init()}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",b)}}}),a.register("19",["29","2d","1e"],function(a){function b(){var a=/^.*@.*(\.|::).*$/;this.checkEmailInput=function(b){var c="blur"===b.type?jQuery(b.currentTarget):jQuery(b.target.querySelector("input[type=email]")),d=!c.val()||a.test(c.val());return d?c.removeClass("error"):c.addClass("error"),d},this.checkPhoneInput=function(a){var b="blur"===a.type?jQuery(a.currentTarget):jQuery(a.target.querySelector("input[name=loginphone]")),c=new RegExp(b.attr("pattern")),d=b.val()&&c.test(b.val());return d?b.removeClass("error"):b.addClass("error"),d},this.reCheckErrorEmailInput=function(b){var c=jQuery(b.currentTarget),d=jQuery(b.target);d.hasClass(e.ERROR)&&a.test(c.val())&&c.removeClass(e.ERROR)},this.showPasswordMask=function(a){var b=jQuery(a.currentTarget),c=b.closest("div").find('input[name*="password"]'),d=c.length?c.prop("type"):"";c.length&&("text"===d?(c.prop("type","password"),b.text(b.attr("data-show")),b.attr("aria-label",Drupal.settings.hermes_translations.account.show)):(c.prop("type","text"),b.text(b.attr("data-hide")),b.attr("aria-label",Drupal.settings.hermes_translations.account.hide)))},this.populateForm=function(a,b){var e=this,f='.form-item [name*="regiontext"]:enabled';d(a).map(function(b){return{key:b,value:a[b]}}).forEach(function(a){var d="postcode"===a.key?'.form-item [name*="'+a.key+'"]:not([name*="bis"])':'.form-item [name*="'+a.key+'"]',g=b.find(d),h="region"===a.key&&g.prop("disabled")?b.find(f):g;if(h.length)if("select-one"===h.prop("type"))e.updateSelect(h,a.value);else{if("postcode"===a.key){var i=h.parents("form").find('[name*="country_id"]'),j=i.val();a.value=c(j,a.value)}h.val(a.value)}})},this.clearForm=function(a){var b=a.find('.form-item [name]:not([id^="edit-country"]):not([id^="edit-phonecode"]):not([id^="edit-registredphonecode"]):not([id^="edit-send-sms-button"])');b.map(function(a){return jQuery(b.get(a))}).each(function(){"select-one"===this.prop("type")?(this.prop("selectedIndex",0),this.trigger("change")):this.val("")})},this.updateSelect=function(a,b){if(a.length&&b){var c=!!a.find("option").toArray().find(function(a){return jQuery(a).val()===b.toString()});if(!c){var d=jQuery("<option>",{value:b.toString(),text:b});a.append(d)}a.val(b.toString()),a.trigger("change")}},this.displayError=function(a,b){
var c=b.find(".error-message");c.length>0?c.innerHTML=a:b.prepend('<p class="error-message">'+a+"</p>")}}var c,d,e;return{setters:[function(a){c=a.formatPostcodeValue},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("a5",["3","4","16","17","18","19","1e","1d","1a","1b","2c","4d"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.EreservationTools}],execute:function(){"use strict";n="hermes-ereservation-signin-form",o="hermes-ereservation-signup-form",p="hermes-ereservation-signup-form-captcha",q="loader-sign-in-tray",r="loader-sign-up-tray",s=function(){function a(){c(this,a),this.$el=jQuery("#tray-ereservation-signup-signin"),this.$loginForms=this.$el.find("#"+n),this.$signUpForms=this.$el.find("#"+o),this.$signUpCaptcha=this.$el.find("#"+p),this.$emailField=this.$el.find("#signin-email"),this.$passwordField=this.$el.find("#signin-password"),this.$createAccountButton=this.$signUpForms.find(".button.button-block.form-submit"),this.$errorCallCreateAccount=this.$signUpForms.find("#tray-ereservation-signup-error-call"),this.formHelpers=new g,this.$loginForms.length>0&&(this.validatorSignIn=new k({inputs:this.$loginForms[0].querySelectorAll("[name]")})),this.$signUpForms.length>0&&(this.validatorSignUp=new k({inputs:this.$signUpForms[0].querySelectorAll("[name]")})),this.tray=new d({$el:this.$el,name:"tray-ereservation-signup-signin",showOverlay:!0}),this.bind()}return b(a,[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.signupsignin.open",this.initTray.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTray",this.removeCaptchaError.bind(this)),APP.pubsub.subscribe("imNotARobotProfileTrayExpired",this.addCaptchaError.bind(this)),this.$el.on("click",".show-password",this.formHelpers.showPasswordMask.bind(this)),this.$loginForms.on("submit",this.submitSignInForm.bind(this)),this.$signUpForms.on("submit",this.submitSignUpForm.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this))}},{key:"initTray",value:function(){this.isCaptchaInitialized?APP.trayController.triggerTray({name:"tray-ereservation-signup-signin"}):(this.initCaptcha(),this.isCaptchaInitialized=!0)}},{key:"initCaptcha",value:function(){var a="#"+o,b={formId:a};j(h.ACTIVATE_CAPTCHA_URL,b,"GET").done(function(b){return b.error?void e.technicalError():(i.generateReCaptcha(b,a),void APP.trayController.triggerTray({name:"tray-ereservation-signup-signin"}))}).fail(function(){return e.technicalError()})}},{key:"removeCaptchaError",value:function(){this.$signUpCaptcha.removeClass("validation-error"),this.$signUpForms.find("p.captcha-error-message.error-message").remove()}},{key:"addCaptchaError",value:function(){this.$signUpCaptcha.addClass("validation-error")}},{key:"_onTrayOpen",value:function(){l.ereservationAccountOverlay()}},{key:"submitSignInForm",value:function(a){if(a.preventDefault(),!(this.$loginForms.length<1))if(this.$loginForms[0].checkValidity()){var b="ereservation";e.showLoaderButton(q);var c={locale:f.get("currentStore"),email:this.$emailField.val(),pass:this.$passwordField.val(),source:b};APP.pubsub.publish("account.login.call",{serverReqData:c,$loginForm:this.$loginForms,$emailField:this.$emailField,$passwordField:this.$passwordField,source:b})}else this.validatorSignIn.runTests(a)}},{key:"getFieldValueFromSignUpForm",value:function(a){if(a){var b=this.$signUpForms.find(a);return b.length?b.val():""}return""}},{key:"submitSignUpForm",value:function(a){if(a.preventDefault(),this.hideErrorCallCreateAccount(),!(this.$signUpForms.length<1)&&this.$signUpForms[0]){var b=i.validateRecaptcha(o);if(b?this.removeCaptchaError():this.addCaptchaError(),this.$signUpForms[0].checkValidity()&&b){e.showLoaderButton(r);var c={email:this.getFieldValueFromSignUpForm("#edit-email"),prefix:this.getFieldValueFromSignUpForm("#edit-prefix"),firstname:this.getFieldValueFromSignUpForm("#edit-firstname"),lastname:this.getFieldValueFromSignUpForm("#edit-lastname"),light_account_telephone:this.getFieldValueFromSignUpForm("#edit-telephone"),country_id:Drupal.settings.hermes_current_country.toUpperCase(),locale:Drupal.settings.hermes_locale,action:"create",formId:"#"+o,"g-recaptcha-response":this.getFieldValueFromSignUpForm("textarea[name=g-recaptcha-response]")};j(h.CREATE_LIGHT_ACCOUNT_URL,c,"POST").done(this.handleCreateAccountSuccess.bind(this)).fail(this.handleCreateAccountError.bind(this))}else this.validatorSignUp.runTests(a)}}},{key:"handleCreateAccountSuccess",value:function(a){if(!a||a.error)return void this.handleCreateAccountError(a);var b=a.user;b.basket=a.basket,b.cart=null,b["mini-wishlist"]=null,f.set("user",b),f.set("isConnected",!0),f.set("returningUser",!0),f.set("checkUserSessionToken",!0),window.APP.NOTIFICATIONS.messages={prefix:b.prefix,firstname:b.firstname,lastname:b.lastname},l.ereservationSignup(),e.hideLoaderButton(r),m.openTrayRequestConfirm(),this.resetCaptcha(o)}},{key:"handleCreateAccountError",value:function(a){var b=a&&a.error?a.error.internal_code:null,c=Drupal.settings.hermes_translations.ereservation.error.technical;switch(b){case h.ERRORCODE.emailExist:c=Drupal.settings.hermes_translations.ereservation.error.emailExist}this.showErrorCallCreateAccount(c),l.ereservationSignup(c),e.hideLoaderButton(r),this.resetCaptcha(o)}},{key:"showErrorCallCreateAccount",value:function(a){this.$errorCallCreateAccount.removeClass("invisible"),this.$errorCallCreateAccount.attr("aria-hidden","false"),this.$errorCallCreateAccount.find(".sr-only").text(a),this.$errorCallCreateAccount.find(".text").text(a),this.$createAccountButton.attr("aria-describedby","tray-ereservation-signup-error-call")}},{key:"hideErrorCallCreateAccount",value:function(){this.$errorCallCreateAccount.addClass("invisible"),this.$errorCallCreateAccount.attr("aria-hidden","true"),this.$createAccountButton.removeAttr("aria-describedby")}},{key:"resetCaptcha",value:function(a){APP.recaptcha&&APP.recaptcha.hasOwnProperty(a)&&window.grecaptcha.reset()}}]),a}(),a("default",s)}}}),a.register("a6",["3","4","16","17","1e","1b","1a","1f"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a}],execute:function(){"use strict";j="#hermes-ereservation-forgot-password-form",k="loader-forgot-password-tray",l=function(){function a(){c(this,a),this.$el=jQuery("#tray-ereservation-forgot-password"),this.$forgotForms=this.$el.find(j),this.$emailField=this.$el.find("#ereservation-forgotten-password-email"),this.$forgotForms.length>0&&(this.validator=new g({inputs:this.$forgotForms[0].querySelectorAll("[name]")})),this.tray=new d({$el:this.$el,name:"tray-ereservation-forgot-password",showOverlay:!0}),this.bind()}return b(a,[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.forgotpassword.toggle",this.toggleTray.bind(this)),this.tray.addEventListener("open",this._onTrayOpen.bind(this)),this.$forgotForms.on("submit",this.submitForm.bind(this))}},{key:"_onTrayOpen",value:function(){var a=jQuery("#signin-email").val();a&&this.$emailField.val(a)}},{key:"toggleTray",value:function(){this.tray.isOpen?this.tray.close():this.tray.open()}},{key:"submitForm",value:function(a){if(a.preventDefault(),!(this.$forgotForms.length<1))if(e.showLoaderButton(k),this.$forgotForms[0].checkValidity()){var b={email:this.$emailField.val()};b.async=!0,h(f.FORGOT_PASSWORD_URL,b).done(function(a){var b=Drupal.settings.hermes_translations.notification.account.forgotpassword;a.error&&"2330001"===a.error.internal_code&&(b=Drupal.settings.hermes_translations.notification.account.loginCodes[2330001]),window.APP.NOTIFICATIONS.messageChangePassword={messageTitle:b.title,messageDescription:b.description},i.showNotification("tray-ereservation-forgot-password","change-password"),e.hideLoaderButton(k)}).fail(function(){e.technicalError(),e.hideLoaderButton(k)})}else this.validator.runTests(a),e.hideLoaderButton(k)}}]),a}(),a("default",l)}}}),a.registerDynamic("a7",["a8","88"],!0,function(a,b,c){var d=(this||self,a("a8"));a("88")("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})}),a.registerDynamic("a9",["75","a7"],!0,function(a,b,c){var d=(this||self,a("75"));a("a7"),c.exports=function(a,b){return d.getDesc(a,b)}}),a.registerDynamic("aa",["a9"],!0,function(a,b,c){this||self;c.exports={default:a("a9"),__esModule:!0}}),a.registerDynamic("39",["aa"],!0,function(a,b,c){"use strict";var d=(this||self,a("aa").default);b.default=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;e=!1,null===f&&(f=Function.prototype);var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;if(void 0===j)return;return j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return;a=k,b=g,c=h,e=!0,i=k=void 0}},b.__esModule=!0}),a.registerDynamic("ab",["75"],!0,function(a,b,c){var d=(this||self,a("75"));c.exports=function(a,b){return d.create(a,b)}}),a.registerDynamic("ac",["ab"],!0,function(a,b,c){this||self;c.exports={default:a("ab"),__esModule:!0}}),a.registerDynamic("7a",["75","6e","63","60"],!0,function(a,b,c){var d=(this||self,a("75").getDesc),e=a("6e"),f=a("63"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};c.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("60")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return g(a,b),c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g}}),a.registerDynamic("ad",["42","7a"],!0,function(a,b,c){var d=(this||self,a("42"));d(d.S,"Object",{setPrototypeOf:a("7a").set})}),a.registerDynamic("ae",["ad","45"],!0,function(a,b,c){this||self;a("ad"),c.exports=a("45").Object.setPrototypeOf}),a.registerDynamic("af",["ae"],!0,function(a,b,c){this||self;c.exports={default:a("ae"),__esModule:!0}}),a.registerDynamic("3a",["ac","af"],!0,function(a,b,c){"use strict";var d=(this||self,a("ac").default),e=a("af").default;b.default=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e?e(a,b):a.__proto__=b)},b.__esModule=!0}),a.registerDynamic("b0",["75","a8"],!0,function(a,b,c){var d=(this||self,a("75")),e=a("a8");c.exports=function(a,b){for(var c,f=e(a),g=d.getKeys(f),h=g.length,i=0;h>i;)if(f[c=g[i++]]===b)return c}}),a.registerDynamic("b1",["a8","75"],!0,function(a,b,c){var d=(this||self,a("a8")),e=a("75").getNames,f={}.toString,g="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(a){return g.slice()}};c.exports.get=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}}),a.registerDynamic("b2",["75"],!0,function(a,b,c){var d=(this||self,a("75"));c.exports=function(a){var b=d.getKeys(a),c=d.getSymbols;if(c)for(var e,f=c(a),g=d.isEnum,h=0;f.length>h;)g.call(a,e=f[h++])&&b.push(e);return b}}),a.registerDynamic("b3",["70"],!0,function(a,b,c){var d=(this||self,a("70"));c.exports=Array.isArray||function(a){return"Array"==d(a)}}),a.registerDynamic("b4",["75","6c","b5","76","42","73","b6","b7","7b","b8","69","b0","b1","b2","b3","63","a8","b9","78"],!0,function(a,b,c){"use strict";var d=this||self,e=a("75"),d=a("6c"),f=a("b5"),g=a("76"),h=a("42"),i=a("73"),j=a("b6"),k=a("b7"),l=a("7b"),m=a("b8"),n=a("69"),o=a("b0"),p=a("b1"),q=a("b2"),r=a("b3"),s=a("63"),t=a("a8"),u=a("b9"),v=e.getDesc,w=e.setDesc,x=e.create,y=p.get,z=d.Symbol,A=d.JSON,B=A&&A.stringify,C=!1,D=n("_hidden"),E=e.isEnum,F=k("symbol-registry"),G=k("symbols"),H="function"==typeof z,I=Object.prototype,J=g&&j(function(){return 7!=x(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=v(I,b);d&&delete I[b],w(a,b,c),d&&a!==I&&w(I,b,d)}:w,K=function(a){var b=G[a]=x(z.prototype);return b._k=a,g&&C&&J(I,a,{configurable:!0,set:function(b){f(this,D)&&f(this[D],a)&&(this[D][a]=!1),J(this,a,u(1,b))}}),b},L=function(a){return"symbol"==typeof a},M=function(a,b,c){return c&&f(G,b)?(c.enumerable?(f(a,D)&&a[D][b]&&(a[D][b]=!1),c=x(c,{enumerable:u(0,!1)})):(f(a,D)||w(a,D,u(1,{})),a[D][b]=!0),J(a,b,c)):w(a,b,c)},N=function(a,b){s(a);for(var c,d=q(b=t(b)),e=0,f=d.length;f>e;)M(a,c=d[e++],b[c]);return a},O=function(a,b){return void 0===b?x(a):N(x(a),b)},P=function(a){var b=E.call(this,a);return!(b||!f(this,a)||!f(G,a)||f(this,D)&&this[D][a])||b},Q=function(a,b){var c=v(a=t(a),b);return!c||!f(G,b)||f(a,D)&&a[D][b]||(c.enumerable=!0),c},R=function(a){for(var b,c=y(t(a)),d=[],e=0;c.length>e;)f(G,b=c[e++])||b==D||d.push(b);return d},S=function(a){for(var b,c=y(t(a)),d=[],e=0;c.length>e;)f(G,b=c[e++])&&d.push(G[b]);return d},T=function(a){if(void 0!==a&&!L(a)){for(var b,c,d=[a],e=1,f=arguments;f.length>e;)d.push(f[e++]);return b=d[1],"function"==typeof b&&(c=b),!c&&r(b)||(b=function(a,b){if(c&&(b=c.call(this,a,b)),!L(b))return b}),d[1]=b,B.apply(A,d)}},U=j(function(){var a=z();return"[null]"!=B([a])||"{}"!=B({a:a})||"{}"!=B(Object(a))});H||(z=function(){if(L(this))throw TypeError("Symbol is not a constructor");return K(m(arguments.length>0?arguments[0]:void 0))},i(z.prototype,"toString",function(){return this._k}),L=function(a){return a instanceof z},e.create=O,e.isEnum=P,e.getDesc=Q,e.setDesc=M,e.setDescs=N,e.getNames=p.get=R,e.getSymbols=S,g&&!a("78")&&i(I,"propertyIsEnumerable",P,!0));var V={for:function(a){return f(F,a+="")?F[a]:F[a]=z(a)},keyFor:function(a){return o(F,a)},useSetter:function(){C=!0},useSimple:function(){C=!1}};e.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(a){var b=n(a);V[a]=H?b:K(b)}),C=!0,h(h.G+h.W,{Symbol:z}),h(h.S,"Symbol",V),h(h.S+h.F*!H,"Object",{create:O,defineProperty:M,defineProperties:N,getOwnPropertyDescriptor:Q,getOwnPropertyNames:R,getOwnPropertySymbols:S}),A&&h(h.S+h.F*(!H||U),"JSON",{stringify:T}),l(z,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)}),a.registerDynamic("7e",[],!0,function(a,b,c){"format cjs";this||self}),a.registerDynamic("ba",["b4","7e","45"],!0,function(a,b,c){this||self;a("b4"),a("7e"),c.exports=a("45").Symbol}),a.registerDynamic("bb",["ba"],!0,function(a,b,c){this||self;c.exports=a("ba")}),a.registerDynamic("bc",["bb"],!0,function(a,b,c){this||self;c.exports={default:a("bb"),__esModule:!0}}),a.register("bd",["3","4","bc"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=d(),f=function(){function a(){c(this,a),this[e]={}}return b(a,[{key:"dispatchEvent",value:function(a){return!!(a instanceof CustomEvent&&this[e][a.type])&&(this[e][a.type].forEach(function(b){b(a)}),!0)}},{key:"addEventListener",value:function(a,b){var c=this;if(!(a&&b&&b instanceof Function))return null;this[e][a]=this[e][a]||[];var d=this[e][a].push(b)-1;return{remove:function(){c[e][a].splice(d,1)}}}}]),a}(),a("default",f)}}}),a.register("16",["3","4","39","83","3a","bd","1d","1f"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.isSmall},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a}],execute:function(){"use strict";j=function(a){function g(a){c(this,g),d(Object.getPrototypeOf(g.prototype),"constructor",this).call(this);var b={overlay:document.querySelector("#tray-overlay"),duration:5e3,animationSpeed:.35,scrollSpeed:1,ease:window.Power2.easeInOut};this.validate=a.validate,this.$wrapper=jQuery("#tray"),this.$el=a.$el,this.overlay=b.overlay,this.name=a.name,this.instanceId=a.instanceId||this.name,this.duration=a.duration||b.duration,this.animationSpeed=a.animationSpeed||b.animationSpeed,this.scrollSpeed=a.scrollSpeed||b.scrollSpeed,this.ease=a.ease||b.ease,this.showOverlay=a.showOverlay,this.isOpen=!1}return f(g,a),b(g,[{key:"_bindDomEvents",value:function(){this.$el.on("click",".tray-close",this._onTrayBackNodeClick.bind(this))}},{key:"_unbindDomEvents",value:function(){this.$el.off("click",".tray-close",this._onTrayBackNodeClick.bind(this))}},{key:"open",value:function(){this.dispatchEvent(new CustomEvent("openOne",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"doOpen",value:function(){this.$wrapper.removeClass("large-tray"),this.dispatchEvent(new CustomEvent("open",{detail:{name:this.name,instanceId:this.instanceId}})),this.$el.removeClass("invisible").trigger("visibleChange"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.updateErrorFormMessageTitle(this.$el),this.ariaHiddenElementsBehindTray(!0),TweenLite.to(this.$wrapper,this.animationSpeed,{autoAlpha:1,x:0,force3D:!0,ease:this.ease,onComplete:this._onOpenComplete.bind(this)}),i.hideNotification(),h.trapFocusInTray(this.$el),this.focusOnButton(this.$el),this.showBackground()}},{key:"close",value:function(){this.dispatchEvent(new CustomEvent("closeAll",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"doClose",value:function(){this.ariaHiddenTray(this.$el,!1),this.$el.attr("aria-live","assertive"),this.$el.hasClass("tray-nav")?(this.$wrapper.css({right:"auto",left:"0"}),TweenLite.to(this.$wrapper,this.animationSpeed,{x:this.$wrapper.outerWidth()*-1,force3D:!0,ease:this.ease,onComplete:this._onCloseComplete.bind(this)})):(this.$wrapper.css({left:"auto",right:"0"}),TweenLite.to(this.$wrapper,this.animationSpeed,{x:this.$wrapper.outerWidth(),force3D:!0,ease:this.ease,onComplete:this._onCloseComplete.bind(this)})),this.hideBackground(),this.dispatchEvent(new CustomEvent("close",null))}},{key:"back",value:function(){var a=this;this.validate?this.validate().then(function(b){b&&a.dispatchEvent(new CustomEvent("backButtonClick",{detail:{name:a.name,instanceId:a.instanceId}}))}):this.dispatchEvent(new CustomEvent("backButtonClick",{detail:{name:this.name,instanceId:this.instanceId}}))}},{key:"animateIntoStack",value:function(a){var b=25*a.to;this.$el.removeClass("invisible"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.$el.addClass("opening-tray"),this.dispatchEvent(new CustomEvent("open",{detail:{name:this.name,instanceId:this.instanceId}})),TweenLite.fromTo(this.$el,.4,{autoAlpha:0,xPercent:b},{autoAlpha:1,xPercent:0,delay:.1,force3D:!0,ease:window.Power2.easeInOut,onComplete:this._onTrayAnimateIntoStackComplete.bind(this)})}},{key:"animateOutOfStack",value:function(a){var b=25*a.from;this.$el.removeClass("invisible"),this.ariaHiddenTray(this.$el,!0),this.modalDialogTray(this.$el,!0),this.$el.addClass("closing-tray"),TweenLite.to(this.$wrapper,.15,{scrollTo:{x:0,y:0},delay:.2,force3D:!0,ease:window.Power2.easeInOut}),TweenLite.fromTo(this.$el,.5,{autoAlpha:1,xPercent:0},{autoAlpha:0,xPercent:b,force3D:!0,ease:window.Power2.easeInOut,onComplete:this._onTrayAnimateOutOfStackComplete.bind(this)})}},{key:"showBackground",value:function(){null!==this.overlay&&(this.showOverlay||e())&&this.overlay.classList.add("visible")}},{key:"hideBackground",value:function(){null!==this.overlay&&this.overlay.classList.contains("visible")&&this.overlay.classList.remove("visible")}},{key:"hide",value:function(){this.$el.addClass("invisible"),this.ariaHiddenTray(this.$el,!1),this.$el.removeAttr("style")}},{key:"scrollTo",value:function(a){TweenLite.to(this.$wrapper,this.scrollSpeed,{scrollTo:{y:a.top},ease:this.ease})}},{key:"_onTrayAnimateIntoStackComplete",value:function(){this.isOpen=!0,this.$el.removeClass("opening-tray"),this._bindDomEvents(),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),h.trapFocusInTray(this.$el),this.focusOnButton(this.$el),this.updateErrorFormMessageTitle(this.$el)}},{key:"_onTrayAnimateOutOfStackComplete",value:function(){this.isOpen=!1,this.$el.removeClass("closing-tray"),this._unbindDomEvents(),this.hide(),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),h.trapFocusInTray(this.$el),this.focusOnButton(this.$el)}},{key:"_onOpenComplete",value:function(){this.isOpen=!0,this._bindDomEvents(),this.dispatchEvent(new CustomEvent("animateLastTrayFromStackComplete",{detail:{name:this.name,instanceId:this.instanceId}})),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}}))}},{key:"_onCloseComplete",value:function(){this.isOpen=!1,this._unbindDomEvents(),this.hide(),this.dispatchEvent(new CustomEvent("animateLastTrayFromStackComplete",{detail:{name:this.name,instanceId:this.instanceId}})),this.dispatchEvent(new CustomEvent("lockRelease",{detail:{name:this.name,instanceId:this.instanceId,isOpen:this.isOpen}})),this.$wrapper.removeAttr("style"),TweenLite.set(this.$wrapper,{clearProps:"transform"}),jQuery("#variant-info").removeAttr("tray-trigger-origin-position"),this.ariaHiddenElementsBehindTray(!1),this.updateErrorFormMessageTitle()}},{key:"_onTrayBackNodeClick",value:function(a){a.preventDefault(),a.stopPropagation(),this.back()}},{key:"focusOnButton",value:function(a){a.find("button")[0].focus()}},{key:"ariaHiddenTray",value:function(a,b){a.attr("aria-hidden",!b)}},{key:"modalDialogTray",value:function(a,b){b&&a.attr({"aria-labelledBy":"title-"+a.attr("id"),"aria-atomic":!1,role:"dialog"})}},{key:"ariaHiddenElementsBehindTray",value:function(a){var b=jQuery("#tray-scroll-wrap"),c=jQuery("#header-meta, #page-header, #page-footer, .cookie-banner-container, .scroll-nav-container");b.nextAll().attr("aria-hidden",a),b.prevAll().attr("aria-hidden",a),c.attr("aria-hidden",a)}},{key:"updateErrorFormMessageTitle",value:function(a){var b=jQuery("head title"),c=jQuery("body"),d=Drupal.settings.hermes_translations.validation.errorOnForm,e=b.text().replace(d,"");a?a.hasClass("error-on-form")?b.html(d+e):b.html(e):c.hasClass("error-on-form")?b.html(d+e):b.html(e)}}]),g}(g),a("default",j)}}}),a.register("be",["3","4","16","4e","4d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.EreservationTools}],execute:function(){"use strict";g=function(){function a(){c(this,a),this.$el=jQuery("#tray-e-reservation-request-validation"),this.tray=new d({$el:this.$el,name:"tray-ereservation-request-validation",showOverlay:!0}),this.bind()}return b(a,[{key:"bind",value:function(){APP.pubsub.subscribe("tray.ereservation.request.validation.open",this.toggleTray.bind(this)),this.$el.on("click",".e-reservation-continue-experience-button, .e-reservation-close-button",this.closeTray.bind(this))}},{key:"toggleTray",value:function(){this.tray.isOpen?this.closeTray():APP.trayController.triggerTray({name:"tray-ereservation-request-validation"})}},{key:"closeTray",value:function(){var a=f.getEreservationStore();a&&a.hasOwnProperty("name")&&e.trackContinueExperienceClick(a.name),APP.pubsub.publish("zoom.out"),this.tray.close()}}]),a}(),a("default",g)}}}),a.register("9b",["3","4","18"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(){c(this,a)}return b(a,null,[{key:"trayPageview",value:function(){var a=d.get("currentLanguage"),b=d.get("currentCountry");dataLayer.push({event:"pageview",virtualPageUri:b+"/"+a+"/footer/our-partner-brands"})}},{key:"sisterBrandsLink",value:function(){jQuery("[data-track-sister-brand]").on("click",function(a){var b=jQuery(a.currentTarget).attr("name");dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"AccessPartnerBrands",eventlabel:b})})}}]),a}(),a("default",e)}}}),a.register("bf",["3","4","15","16","17","18","22","25","33","34","40","48","49","51","55","56","58","59","82","84","85","86","90","92","93","98","99","2f","4c","5a","5b","5c","5d","8e","8f","9a","9c","9f","a3","a4","a5","a6","be","1d","1e","9b"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default},function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default},function(a){F=a.default},function(a){G=a.default},function(a){H=a.default},function(a){I=a.default},function(a){J=a.default},function(a){K=a.default},function(a){L=a.default},function(a){M=a.default},function(a){N=a.default},function(a){O=a.default},function(a){P=a.default},function(a){Q=a.default},function(a){R=a.default},function(a){S=a.default},function(a){T=a.default},function(a){U=a.default}],execute:function(){"use strict";V="visible",W=function(){function a(b){if(c(this,a),this._moduleHash={"tray-account":h,"tray-cart":i,"tray-create-profile":C,"tray-edit-address":j,"tray-edit-password":k,"tray-edit-profile":l,"tray-email":m,"tray-exchange-return-details":o,"tray-exchange-return-instructions":p,"tray-exchange-return-method":q,"tray-request-return":s,"tray-request-fapiao":E,"tray-find-order":F,"tray-find-store":G,"tray-forgotpassword":H,"tray-gift":t,"tray-help":u,"tray-locale":w,"tray-nav-shop":I,"tray-create-password":J,"tray-subscribe":d,"tray-order":x,"tray-order-list":y,"tray-configurator":z,"tray-configurator-look":A,"tray-configurator-multi":B,"tray-sister-brands":K,"tray-size-guide":L,"tray-store-details":M,"tray-configurator-bikini":N,"tray-wechat-binding":O},b&&"single product page"==b&&(this._moduleHash["tray-product-locator"]=n,this._moduleHash["tray-ereservation-request-confirm"]=D,this._moduleHash["tray-ereservation-signup-signin"]=P,this._moduleHash["tray-ereservation-forgot-password"]=Q,this._moduleHash["tray-ereservation-request-validation"]=R),this._instanceHash={},this._eventHandlerHash={},this._lockList=[],this._trayStack=[],this._currentVisibleInstanceId=null,this.suggestionsListState=!1,this._init(b),this._bind(),window.initTray){f.init();var e=new CustomEvent("drupalTrayInit-"+window.initTray);window.parent.dispatchEvent(e)}}return b(a,[{key:"_init",value:function(a){var b=this;Drupal.settings.instantiateTrays&&(APP.newsletter=this._getTrayInstance({name:"tray-subscribe"}),this._getTrayInstance({name:"tray-nav-shop"}),this._getTrayInstance({name:"tray-cart"}),this._getTrayInstance({name:"tray-help"}),this._getTrayInstance({name:"tray-find-order"}),this._getTrayInstance({name:"tray-request-fapiao"}),this._getTrayInstance({name:"tray-wechat-binding"}),this._getTrayInstance({name:"tray-request-fapiao"}),this._getTrayInstance({name:"tray-wechat-binding"}),this._getTrayInstance({name:"tray-account"}),this._getTrayInstance({name:"tray-subscribe"}),a&&"single product page"==a&&(this._getTrayInstance({name:"tray-product-locator"}),this._getTrayInstance({name:"tray-ereservation-request-confirm"}))),window.location.hash&&this._handleFragment(window.location.hash.slice(1)),APP.pubsub.subscribe("trap-focus",function(a,b){S.trapFocusInTray(jQuery("#"+b))}),APP.pubsub.subscribe("help-tray-angular",function(){b._getTrayInstance({name:"tray-help"})}),APP.pubsub.subscribe("email-tray-angular",function(){var a=b._getTrayInstance({name:"tray-email"});a&&a.wrapper&&(a.wrapper._onTrayOpen(),b.fixCaptchaClass())}),APP.pubsub.subscribe("account-tray-angular",function(){var a=b._getTrayInstance({name:"tray-account"});a&&a.wrapper&&a.wrapper.toggleTrayState()}),APP.pubsub.subscribe("forgot-password-tray-angular",function(){var a=b._getTrayInstance({name:"tray-forgotpassword"});a&&a.wrapper&&a.wrapper._onTrayOpen()}),APP.pubsub.subscribe("subscribe-tray-angular",function(){var a=b._getTrayInstance({name:"tray-subscribe"});a&&a.wrapper&&a.wrapper._onTrayOpen()}),APP.pubsub.subscribe("order-list-tray-angular",function(){var a=b._getTrayInstance({name:"tray-order-list"});a&&a.wrapper&&a.wrapper.showFirstOrders()}),APP.pubsub.subscribe("order-tray-angular",function(a,c){b._getTrayInstance({name:"tray-order",order:c})}),APP.pubsub.subscribe("exchange-return-request-tray-angular",function(a,c){var d=b._getTrayInstance({name:"tray-request-return"});d&&d.wrapper&&d.wrapper.setNewTrayData({config:{mode:c.mode,orderNumber:c.order.increment_id,type:"angular"}})}),APP.pubsub.subscribe("exchange-return-method-tray-angular",function(a,c){var d=b._getTrayInstance({name:"tray-exchange-return-method"});d&&d.wrapper&&(d.wrapper.setNewTrayData(r({type:"angular"},c)),d.dispatchEvent(new CustomEvent("lockRelease",{detail:{isOpen:!0}})))}),APP.pubsub.subscribe("exchange-return-instructions-tray-angular",function(a,c){var d=b._getTrayInstance({name:"tray-exchange-return-instructions"});d&&d.wrapper&&(d.wrapper._handleNewTrayData(void 0,c),APP.pubsub.subscribe("analytics-refund-details-exchange-return-angular",function(a,b){APP.pubsub.publish("analytics-refund-details-exchange-return",b)}))}),APP.pubsub.subscribe("exchange-return-details-tray-angular",function(a,c){var d=b._getTrayInstance({name:"tray-exchange-return-details"});d&&d.wrapper&&d.wrapper._handleNewTrayData(void 0,c)}),APP.pubsub.subscribe("edit-address-angular",function(a,c){var d=b._getTrayInstance({name:"tray-edit-address"});d&&d.wrapper&&d.wrapper.setTrayState(a,c)}),APP.pubsub.subscribe("request-fapiao-angular",function(a,c){var d=b._getTrayInstance({name:"tray-request-fapiao"});d.wrapper.setTrayState(c)}),APP.pubsub.subscribe("sister-brands-tray-angular",function(){b._getTrayInstance({name:"tray-sister-brands"}),U.trayPageview()})}},{key:"_bind",value:function(){var a=this;jQuery(".continue-experience").on("click",this.closeAll.bind(this)),jQuery(document.body).on("click","[data-tray-trigger]",this._onTrayTriggerClick.bind(this)),jQuery(document.body).on("keypress","[data-tray-trigger]",function(b){b.key===(T.ENTER_KEY||T.SPACE_KEY)&&a._onTrayTriggerClick(b)}),jQuery('[data-tray-trigger], a[href^="#tray-"]').on("keypress click",function(b){return a._addTrayTriggerOriginClass(b)}),jQuery(document).on("keypress click",".tray-trigger",function(b){return a._addTrayTriggerOriginClass(b)}),[jQuery("#tray-overlay"),jQuery("#tray-scroll-wrap")].forEach(function(b){b.on("click",a._onTrayOverlayClick.bind(a))}),jQuery("button .button-icon").bind("keypress click",function(){$(".title-tray").focus()}),jQuery('a[href*="#tray-find-order"]').on("click",function(){return APP.pubsub.publish("tray.findOrder.toggle")}),APP.pubsub.subscribe("search.suggestions_list.state",this._setSuggestionsListState.bind(this))}},{key:"_getTrayInstance",value:function(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1],c=a.instanceId||a.name,d=g.get("user");if(a.name&&"tray-order-list"===a.name&&void 0!==this._userInfoOld&&JSON.stringify(d)!==JSON.stringify(this._userInfoOld)&&(this._instanceHash[c]=void 0),APP.pubsub.publish("reset-password"),!this._instanceHash[c]){if(!this._moduleHash[a.name])return console.error("Requested to instantiate an instance of "+a.name+" but this module could not be found. Check the name?"),{};var e=new this._moduleHash[a.name](a);a.name&&"tray-order-list"===a.name&&(this._userInfoOld=g.get("user")),
this._instanceHash[c]=e.tray,this._instanceHash[c].wrapper=e,this._bindTrayEvents(this._instanceHash[c],b)}return this._instanceHash[c].wrapper&&this._instanceHash[c].wrapper.setParams&&this._instanceHash[c].wrapper.setParams(a),this._instanceHash[c]}},{key:"_getGenericTrayInstance",value:function(a){var b=a.instanceId||a.name;if(!this._instanceHash[b]){if(!document.getElementById(a.name))return console.error("The tray has no content to be populated with. Check application logic?"),{};this._instanceHash[b]=new e({$el:jQuery("#"+a.name),name:a.name,instanceId:b,showOverlay:!0}),this._bindTrayEvents(this._instanceHash[b],"tray-configurator-look"!==a.name)}return this._instanceHash[b]}},{key:"_bindTrayEvents",value:function(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];b?this._eventHandlerHash[a.instanceId]={backButtonClickHandler:a.addEventListener("backButtonClick",this._onTrayBackNodeClick.bind(this)),stackClosedHandler:a.addEventListener("animateLastTrayFromStackComplete",this._onStackClosedComplete.bind(this)),lockReleaseHandler:a.addEventListener("lockRelease",this._onTrayLockRelease.bind(this)),genericTrayTriggerHandler:a.addEventListener("genericTrayTrigger",this._onGenericTrayTrigger.bind(this)),openOneHandler:a.addEventListener("openOne",this.openOne.bind(this)),closeAllHandler:a.addEventListener("closeAll",this.closeAll.bind(this))}:this._eventHandlerHash[a.instanceId]={stackClosedHandler:a.addEventListener("animateLastTrayFromStackComplete",this._onStackClosedComplete.bind(this)),lockReleaseHandler:a.addEventListener("lockRelease",this._onTrayLockRelease.bind(this)),genericTrayTriggerHandler:a.addEventListener("genericTrayTrigger",this._onGenericTrayTrigger.bind(this)),openOneHandler:a.addEventListener("openOne",this.openOne.bind(this)),closeAllHandler:a.addEventListener("closeAll",this.closeAll.bind(this))}}},{key:"getDepth",value:function(){return this._trayStack.length}},{key:"getStack",value:function(){return this._trayStack}},{key:"addLock",value:function(a){return this._lockList.push(a),this._lockList}},{key:"removeLock",value:function(a){return this._lockList=this._lockList.filter(function(b){return b!==a}),this._lockList}},{key:"isLocked",value:function(){return!!this._lockList.length}},{key:"getTray",value:function(a){return this._getTrayInstance(a)}},{key:"triggerTray",value:function(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];if(!this.isLocked()){"1"===jQuery(".notification").css("opacity")&&"update"!==a.source&&"create"!==a.source&&"undefined"==typeof g.get("social_login")&&f.hideOverlay();var c=this._getTrayInstance(a,b);return a.dontAdd||this.handleTray(c,a.forceOpen),c}}},{key:"handleTray",value:function(a,b){var c=this._trayStack.length,d=a.instanceId||a.name;if(!this.isLocked()){if(this.addLock(d),this._trayStack[c-1]===a.instanceId)return b||this.popStack(),void this.removeLock(d);c||jQuery("html").addClass("tray-open"),"tray-email"===d&&this.fixCaptchaClass(),this.pushStack(a);var e=document.querySelector("body");e.param=this;var f=this;e.addEventListener("keyup",this.checkEscPress.bind(null,f))}}},{key:"fixCaptchaClass",value:function(){var a=jQuery('iframe[title*="recaptcha"]:not([title*="widget"])'),b=a.parent();b.addClass("captchaHandlePos"),b.parent().addClass("deleteTopLeftIframe"),jQuery("#page-header").removeClass("affixed"),jQuery("#page-header").addClass("header-uptop")}},{key:"checkEscPress",value:function(a,b){b=b||event,void 0!==b.currentTarget.param&&(27!==b.keyCode||"tray-product-locator"===a._trayStack[0]&&a.suggestionsListState||b.currentTarget.param.closeAll())}},{key:"pushStack",value:function(a){var b=a.instanceId||a.name,c=this._getTrayInstance({name:this._trayStack[this._trayStack.push(b)-1]});if(this._trayStack.length>1){var d=this._getTrayInstance({name:this._trayStack[this._trayStack.length-2]});d.animateOutOfStack({from:-1}),c.animateIntoStack({to:1}),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+V)}else c.doOpen();this._currentVisibleInstanceId=c.instanceId,"tray-nav"===this._currentVisibleInstanceId.substring(0,8)&&jQuery("body").addClass("tray-nav-open"),jQuery("#tray").addClass(this._currentVisibleInstanceId+"-"+V)}},{key:"popStack",value:function(){if(this._trayStack.length){var a=this._getTrayInstance({name:this._trayStack.pop()});if(jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+V),jQuery("body").removeClass("tray-nav-open"),this._trayStack.length){var b=this._getTrayInstance({name:this._trayStack[this._trayStack.length-1]});this._currentVisibleInstanceId=b.instanceId,"tray-nav"===this._currentVisibleInstanceId.substring(0,8)&&jQuery("body").addClass("tray-nav-open"),jQuery("#tray").addClass(this._currentVisibleInstanceId+"-"+V),b.animateIntoStack({to:-1}),a.animateOutOfStack({from:1})}else this._focusOnTrayTriggerOrigin(),this._currentVisibleInstanceId=null,a.doClose()}}},{key:"popFromStack",value:function(a){var b=this._trayStack.length;if(b){if(this._currentVisibleInstanceId===a||this._trayStack[b-1]===a)return void this.popStack();for(var c=0;c<b-1;c++)if(this._trayStack[c]===a)return void this._trayStack.splice(c,1)}}},{key:"closeAll",value:function(){this._trayStack.length&&(this._focusOnTrayTriggerOrigin(),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+V),jQuery("body").removeClass("tray-nav-open"),this._currentVisibleInstanceId=null,this.addLock(this._trayStack[this._trayStack.length-1]),this._instanceHash[this._trayStack[this._trayStack.length-1]].doClose(),this._trayStack=[])}},{key:"quickCloseAll",value:function(){this._trayStack.length&&(this._focusOnTrayTriggerOrigin(),jQuery("#tray").removeClass(this._currentVisibleInstanceId+"-"+V),jQuery("body").removeClass("tray-nav-open"),this._currentVisibleInstanceId=null,this._instanceHash[this._trayStack[this._trayStack.length-1]].hide(),this._trayStack=[])}},{key:"openOne",value:function(a){this.quickCloseAll();var b=this._getTrayInstance(a.detail);this.handleTray(b)}},{key:"_onTrayLockRelease",value:function(a){this.removeLock(a.detail.instanceId)}},{key:"_onTrayOverlayClick",value:function(a){var b=this;if(a.target===a.currentTarget){var c=this._getTrayInstance({name:this._trayStack[this._trayStack.length-1]});c.validate?c.validate().then(function(a){a&&b.closeAll()}):this.closeAll()}}},{key:"_onTrayBackNodeClick",value:function(a){this.isLocked()||(this.addLock(a.detail.instanceId||a.detail.name),this.popStack())}},{key:"_onStackClosedComplete",value:function(){if(!this._trayStack.length){var a=parseInt(jQuery("body").css("margin-top"),10);jQuery("html").removeClass("tray-open"),jQuery("body").attr("style",null),jQuery("body").scrollTop(-a)}}},{key:"_onTrayTriggerClick",value:function(a){if(!this.isLocked()){f.hideOverlay(),a.preventDefault(),a.stopPropagation();var b=null,c={name:a.currentTarget.getAttribute("data-tray-trigger")},d=JSON.parse(a.currentTarget.getAttribute("data-tray-trigger-params")),e=jQuery.extend({},d,c),g=this._getTrayInstance(e);d&&(b=d.forceOpen),APP.pubsub.publish("tray.trigger.click"),APP.pubsub.publish("exchange.orderDetail.open"),this.handleTray(g,b)}}},{key:"_handleFragment",value:function(a){var b=a.split("&"),c={};b[0].indexOf("tray")!==-1&&(b.forEach(function(a,b){0!==b?c[a.split("=")[0]]=a.split("=")[1]:c.name=a}),this.triggerTray(c),window.location.hash="")}},{key:"_onGenericTrayTrigger",value:function(a){if(!this.isLocked()){var b=this._getGenericTrayInstance({name:a.detail.name});this.handleTray(b)}}},{key:"_addTrayTriggerOriginClass",value:function(a){var b=jQuery(a.currentTarget);b.parents("#tray").length||b.addClass("tray-trigger-origin"),b.blur()}},{key:"_focusOnTrayTriggerOrigin",value:function(){var a=jQuery(".tray-trigger-origin");a.length&&a[0].focus(),a.removeClass("tray-trigger-origin")}},{key:"_setSuggestionsListState",value:function(a,b){this.suggestionsListState=b}}]),a}(),a("default",W)}}}),a.register("c0",["18","27","52"],function(a){"use strict";function b(){var a=jQuery(".info-banner");e.set("accountCreated",!1),a.removeClass("info-banner-show").empty(),a.removeAttr("role","alert")}function c(){e.get("accountCreated")&&Drupal.settings.show_account_creation_notification_banner&&(setTimeout(d(),300),e.deleteItem("accountCreated"))}function d(){var a=jQuery(".info-banner"),c=e.get("user");if(c){var d=g(c),h={name:d,createbywechat:e.get("accountCreatedByWechat")};e.deleteItem("accountCreatedByWechat"),a.attr("role","alert"),a.html(f.render(APP.templates.accountCreated,h));var i=jQuery(".info-banner-container"),j=jQuery("#close-info-banner");a.addClass("info-banner-show"),i.attr("tabindex",0).focus(),i.removeAttr("tabindex"),j.on("click",b)}}var e,f,g;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){e.get("show-info-banner")&&jQuery(document).ready(c()),a("hideNotification",b),a("showNotification",c)}}}),a.register("c1",[],function(a){"use strict";function b(a,b){var c=a.getBoundingClientRect();return b=void 0!==b?b:document.documentElement.scrollTop||document.body.scrollTop,{x:c.x,y:c.y,width:c.width,height:c.height,top:c.top+b,right:c.right,bottom:c.bottom+b,left:c.left}}return a("default",b),{setters:[],execute:function(){}}}),a.register("c2",["18","27","83","c0","c1","1d"],function(a){"use strict";function b(){function a(){function a(){jQuery.ajax({url:u+"/"+v+"/api/banners",dataType:"json"}).done(function(a){f(a)&&(c.set("notificationsData",JSON.stringify(f(a))),e())}).fail(function(a){console.warn("☠ Failed to load header notifications with ajax"),console.warn(a),K.hide()})}function e(){var a=c.get("notificationsData")?c.get("notificationsData"):null;a&&a.forEach(function(a){a.content&&F.append(d.render(APP.templates.notificationsHeader,a))}),c.get("hideNotifications")?K.hide():(K.show(),F.find(".header-message").length>1&&(G.find(".slick-prev").show(),G.find(".slick-next").show(),F.slick({autoplay:!0,autoplaySpeed:Drupal.settings.hermes_notifications.carousel_interval||4e3,arrows:!0,prevArrow:G.find(".slick-prev"),nextArrow:G.find(".slick-next"),adaptiveHeight:!1,fade:!0,responsive:[{breakpoint:768,settings:{arrows:!1}},{breakpoint:1920,settings:{arrows:!0}}]})),L.on("click",r))}function f(a){return a&&a.banners&&a.banners.notifications&&a.banners.notifications.length>0?a.banners.notifications:null}APP.header={},z=jQuery("#page-header-wrap"),A=jQuery("#page-header"),B=jQuery("#header-actions"),D=jQuery("#product-banner"),E=jQuery("#product-detail"),C=jQuery(".header .block-wrapper"),K=jQuery(".header-notifications"),F=jQuery("#header-notifications"),G=jQuery("#header-meta"),H=jQuery(".filter-results-header-banner"),I=jQuery("#filter-spacer"),L=jQuery(".js-close-notifications"),M=jQuery("html"),B.isExpanded=!0,D.isExpanded=!1,this.openNotificationBanner=a,A.length&&(m(),h(),b(),window.pageYOffset&&window.scrollTo(0,window.pageYOffset-1),Drupal.settings.hermes_global&&Drupal.settings.hermes_global.cartPageAngular&&jQuery("#open-cart").click(function(){window.location=window.location.origin+"/"+Drupal.settings.hermes_url_locale+"/cart/"}))}function b(){APP.pubsub.subscribe("resize",i),APP.pubsub.subscribe("scroll",n),APP.pubsub.subscribe("mediaQuery.small",j),APP.pubsub.subscribe("mediaQuery.medium",j),APP.pubsub.subscribe("mediaQuery.large",j),window.addEventListener("orientationchange",i),t.on("click",k),L.on("click",r),jQuery('[data-action="go-frontpage"]').off("click.go-frontpage").on("click.go-frontpage",s)}function h(){y.tl={},y.tl.header=TweenLite.fromTo(A,.2,{y:-APP.header.data.height},{y:0,paused:!0,force3D:!0,ease:window.Power2.easeInOut}),y.tl.header.progress(1),"product"===w?(y.tl.productBanner=TweenLite.fromTo(D,.2,{y:0},{y:APP.header.data.height,paused:!0,ease:window.Power2.easeInOut}),y.tl.productBanner.progress(0)):"grid"===w&&e.isSmall()&&(y.tl.filterBanner=TweenLite.fromTo(H,.2,{y:-y.filterHeight},{y:0,force3D:!0,ease:window.Power2.easeInOut}),y.tl.filterBanner.progress(1)),"faq"===w||"grid"===w&&g.isAngularMode()||window.scrollTo(0,document.body.scrollTop-1)}function i(a,b){l(b)&&m()}function j(){H.hasClass("affixed")&&H.removeClass("affixed").removeAttr("style")}function k(){jQuery("#collection-button").focus()}function l(a){var b=!1,c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return!(c&&window.screen.height/window.screen.width>2)&&(!a||((!a.height||a.height-Q.height>100)&&(b=!0),Q=a,b))}function m(){APP.header.data=f(z[0]),y.headerMetaHeight=G.height(),y.headerHeight=A.height(),N=!1,O=!1,P=!1,"grid"===w?(y.filterBannerOffset=q(),y.filterHeight=H.outerHeight(),y.filterTop=y.filterBannerOffset-y.filterHeight):"product"!==w||x||(y.productBottom=E.position().top-D.height()),clearTimeout(J),J=setTimeout(h,250)}function n(a,b){A.toggleClass("header-uptop",b.pos<=y.headerMetaHeight),M.toggleClass("header-fixed",b.pos>y.headerMetaHeight),y.headerMetaHeight=G.height(),y.headerHeight=A.height(),F.hasClass("slick-initialized")&&(b.pos>F.height()?F.slick("slickPause"):F.slick("slickPlay")),!O&&b.pos>y.headerMetaHeight&&"down"===b.direction?(O=!0,A.addClass("affixed"),C.prop("position","static"),D.removeClass("hidden")):(0===b.pos||O&&b.pos<=y.headerMetaHeight&&"up"===b.direction)&&(O=!1,A.removeClass("affixed"),D.addClass("hidden")),"product"===w?o(b):"grid"===w&&e.isSmall()&&p(b)}function o(a){a.pos>=y.productBottom&&"down"===a.direction&&!P?(C.prop("position","static"),P=!0,N=!1,y.tl.productBanner.play(),y.tl.header.timeScale(.75),y.tl.header.reverse()):N&&P&&a.pos>=y.productBottom&&"down"===a.direction?(N=!1,y.tl.header.reverse()):!N&&P&&a.pos>=y.productBottom&&"up"===a.direction?(N=!0,y.tl.header.play()):a.pos<y.productBottom&&P&&(P=!1,y.tl.productBanner.reverse())}function p(a){a.pos>=y.filterTop&&"down"===a.direction&&!P?(P=!0,H.addClass("affixed"),A.removeClass("affixed")):O&&P&&a.pos>=y.filterBannerOffset&&"down"===a.direction?(O=!1,A.removeClass("affixed"),y.tl.header.reverse(),y.tl.filterBanner.reverse()):!O&&P&&a.pos>=y.filterTop&&"up"===a.direction?(O=!0,y.tl.header.play(),y.tl.filterBanner.play()):a.pos<y.filterTop&&P&&(P=!1,H.removeClass("affixed"))}function q(){if(I.length){var a=I.offset();return a&&a.top}}function r(a){a.preventDefault(),K.hide(),c.set("hideNotifications",!0)}function s(a){a.preventDefault(),window.location.href=Drupal.settings.basePath+Drupal.settings.hermes_url_locale}var t=jQuery("#skip-link-nav-shop"),u=Drupal.settings.baseUrl,v=Drupal.settings.hermes_url_locale,w=Drupal.settings.hermes_global.pageType,x=Drupal.settings.hermes_global.pageProductAngular,y={},z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=!0,O=!1,P=!1,Q={};a.bind(this)()}var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",b)}}}),a.register("c3",["3","4","83","9d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a),d.isSmall()?this._srcAttributeName="data-src-mobile":this._srcAttributeName="data-src-desktop",this._scrollListener=this._displayBackgrounds.bind(this)}return b(a,[{key:"run",value:function(){window.addEventListener("load",this._load.bind(this))}},{key:"_load",value:function(){this._$decorativeBackgrounds=[].concat(e(document.getElementsByClassName("decorative-bg"))),this._displayBackgrounds(),window.addEventListener("scroll",this._scrollListener)}},{key:"_displayBackgrounds",value:function(){var a=this;window.requestAnimationFrame(function(){for(var b=Math.max(document.documentElement.clientHeight,window.innerHeight),c=0;c<a._$decorativeBackgrounds.length;){var d=a._$decorativeBackgrounds[c],e=d.getBoundingClientRect().top,f=d.clientWidth;if(e<=b){var g=d.getAttribute(a._srcAttributeName);d.setAttribute("style",'background-image: url("'+g+"&wid="+f+'")'),a._$decorativeBackgrounds.splice(c,1)}else c++}0===a._$decorativeBackgrounds.length&&window.removeEventListener("scroll",a._scrollListener)})}}]),a}(),a("default",f)}}}),a.register("c4",["3","4","18","1e"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){if(c(this,a),this.showDrupalGeoBanner=Drupal.settings.show_geo_filtering_banner,this._cookieName="GeoFilteringBanner",this._$geoFilteringBanner=a._getElementByClassName(document,"geo-filtering-banner",!1),this._$geoFilteringBanner){if(this._$continueButton=a._getElementByClassName(this._$geoFilteringBanner,"continue",!0),!this._$continueButton)return void this.destroy();if(this._$selectCountryButton=a._getElementByClassName(this._$geoFilteringBanner,"js-locale-tray",!0),!this._$selectCountryButton)return void this.destroy();this._$closeButton=a._getElementByClassName(this._$geoFilteringBanner,"js-close-notifications",!0),this._$closeButton||this.destroy()}}return b(a,[{key:"run",value:function(){return!this.showDrupalGeoBanner||1!==Drupal.settings.geo_filtering_banner||this._isCookie()?void this.destroy():(d.set("hideNotifications",!0),this._setCookie(),void this._showBannerByUserCountry())}},{key:"destroy",value:function(){if(this._$geoFilteringBanner){var a=this._$geoFilteringBanner.parentElement;a.removeChild(this._$geoFilteringBanner)}d.get("hideNotifications")||d.set("hideNotifications",!1),document.removeEventListener("click",this._destroyListener,!0),document.removeEventListener("keyup",this._keyupListener,!0),APP.pubsub.publish("geoFilteringBanner.destroy")}},{key:"_isCookie",value:function(){if(!document.cookie)return!1;for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var c=a[b].split("=");if(c[0].trim()===this._cookieName)return!0}return!1}},{key:"_setCookie",value:function(){if(document.cookie){var a=new Date;a.setTime(a.getTime()+2592e6);var b=window.location.host.split(".");if(b.length>1){var c="."+b[b.length-2]+"."+b[b.length-1];document.cookie=this._cookieName+"=1;expires="+a.toUTCString()+";domain="+c+";path=/"}else document.cookie=this._cookieName+"=1;expires="+a.toUTCString()+";path=/"}}},{key:"_showBannerByUserCountry",value:function(){var b=this,c=new XMLHttpRequest;c.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var c=this.getResponseHeader("x-geo-country");"string"!=typeof c&&(c="AA"),c===Drupal.settings.hermes_current_country.toUpperCase()?b.destroy():(b._showBanner(),APP.pubsub.publish("geoFilteringBanner.view",c),a._hideHeaderNotifications())}},c.open("GET",document.location.origin+"/us/en/geo/"),c.send(null)}},{key:"_showBanner",value:function(){this._$geoFilteringBanner.style.display="block",this._destroyListener=this.destroy.bind(this),this._keyupListener=this._keyup.bind(this),this._$continueButton.addEventListener("click",function(){var a=Drupal.settings.hermes_country.english_name.replace(/\s/g,"");APP.pubsub.publish("geoFilteringBanner.stayCountry",a)}),this._$closeButton.addEventListener("click",function(){APP.pubsub.publish("geoFilteringBanner.close")}),document.addEventListener("click",this._destroyListener,!0),document.addEventListener("keyup",this._keyupListener,!0),this._$selectCountryButton.addEventListener("click",function(){var a=document.getElementsByClassName("js-locale-tray");a.length>0&&a[0].click(),APP.pubsub.publish("geoFilteringBanner.switchCountry")})}},{key:"_keyup",value:function(){event.key!==e.ENTER_KEY&&0!==event.offsetX&&0!==event.clientX||this.destroy()}}],[{key:"_getElementByClassName",value:function(a,b,c){var d=a.getElementsByClassName(b);return 1===d.length?d[0]:(c&&console.error('GeoFilteringBanner: There is not only one tag with class "'+b+"\" in banner, don't know what to do."),null)}},{key:"_hideHeaderNotifications",value:function(){var b=document.getElementById("header-meta"),c=a._getElementByClassName(b,"header-notifications block",!1);c&&b.removeChild(c)}}]),a}(),a("default",f)}}}),a.register("c5",["1e"],function(a){"use strict";function b(a){function b(){n.removeClass("show-suggestion"),m.attr("aria-expanded",!1),i.removeAttr("aria-activedescendant")}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a.eq(c).is(b))return c;return-1}function f(a){function d(a){a.key===c.DOWN_KEY&&(n=!0),a.key===c.UP_KEY&&(m=!0),p=!0}function f(){n&&h.eq(0).addClass("active").attr("aria-selected",!0),m&&h.last().addClass("active").attr("aria-selected",!0)}function g(){return l===k?n?0:m?l-1:l:n?l+1:m?l-1:l}var h=j.find("li"),k=h.length-1,l=e(h,".active"),m=!1,n=!1;if(d(a),h.attr("aria-selected",!1),(a.key===c.ESCAPE_KEY||a.altKey)&&(i.val(""),b()),l===-1)f();else{var o=g();h.removeClass("active").eq(o).addClass("active").attr("aria-selected",!0)}var r=j.find(".active");if(r.length){i.attr("aria-activedescendant",r[0].id);var s=j.parent().scrollTop(),t=r.position().top+s;j.parent().animate({scrollTop:t-q},"fast")}}function g(a){return(a.key===c.ENTER_KEY||"submit"===a.type)&&p}function h(a){if(f(a),g(a)&&j.find("li.active").length){var b=j.find("li.active span:first-child")[0].textContent;j.find("li.active")[0].click(),a.preventDefault(),a.stopPropagation(),i.val(b),k.blur()}!p&&o&&o(a),a.key!==c.UP_KEY&&a.key!==c.DOWN_KEY&&setTimeout(function(){p=!1},100)}d++;var i=jQuery("#block-hermes-commerce-nav-search"),j=a.$target,k=a.$source,l=k.parents("form"),m=jQuery("#combobox-search"),n=jQuery(".header-search"),o=a.cb,p=!1,q=void 0;!function(){l.off("submit.suggest-"+d+" keyup.suggest-"+d).on("submit.suggest-"+d+" keyup.suggest-"+d,h),a.suppressEvents||k.on("blur.suggest-"+d,b)}()}var c,d;return{setters:[function(a){c=a.default}],execute:function(){d=0,a("default",b)}}}),a.registerDynamic("c6",["c7"],!0,function(a,b,c){"use strict";var d=(this||self,a("c7").default);b.default=function(a){return Array.isArray(a)?a:d(a)},b.__esModule=!0}),a.registerDynamic("61",["63"],!0,function(a,b,c){var d=(this||self,a("63"));c.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}}),a.registerDynamic("62",["c8","69"],!0,function(a,b,c){var d=(this||self,a("c8")),e=a("69")("iterator"),f=Array.prototype;c.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}}),a.registerDynamic("64",["c9"],!0,function(a,b,c){var d=(this||self,a("c9")),e=Math.min;c.exports=function(a){return a>0?e(d(a),9007199254740991):0}}),a.registerDynamic("7c",["69"],!0,function(a,b,c){var d=(this||self,a("69")("iterator")),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}c.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}}),a.registerDynamic("ca",["60","42","cb","61","62","64","65","7c"],!0,function(a,b,c){"use strict";var d=(this||self,a("60")),e=a("42"),f=a("cb"),g=a("61"),h=a("62"),i=a("64"),j=a("65");e(e.S+e.F*!a("7c")(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})}),a.registerDynamic("cc",["7f","ca","45"],!0,function(a,b,c){this||self;a("7f"),a("ca"),c.exports=a("45").Array.from}),a.registerDynamic("c7",["cc"],!0,function(a,b,c){this||self;c.exports={default:a("cc"),__esModule:!0}}),a.registerDynamic("9d",["c7"],!0,function(a,b,c){"use strict";var d=(this||self,a("c7").default);b.default=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return d(a)},b.__esModule=!0}),a.register("cd",["3","4","3b","c6","9d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(b){switch(c(this,a),this.baseurl="",this.path="",this.queryParams="",this.fragment={params:[],pipedValues:[],keyword:""},typeof b){case"string":this._parse(b);break;case"undefined":break;default:throw"Invalid 'url' parameter, string expected, got: "+JSON.stringify(b)}}return b(a,[{key:"build",value:function(){var a=this.baseurl;this.path&&(this.path.startsWith("/")||(a+="/"),a+=this.path),this.queryParams&&(a+=this.queryParams);var b=this._buildFragment(this.fragment);return b&&(a+="#"+b),a}},{key:"getFragmentParam",value:function(a){if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);return this.fragment.params.find(function(b){return b.key===a})}},{key:"addFragmentParam",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]||arguments[2];if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);if("string"!=typeof b)throw"Invalid 'value' parameter, string expected, got: "+JSON.stringify(b);if("boolean"!=typeof c)throw"Invalid 'updateIfExists' parameter, boolean expected, got: "+JSON.stringify(c);if(c){var d=this.getFragmentParam(a);if(d)return d.value=b,!0}return this.fragment.params.push({key:a,value:b}),!1}},{key:"removeFragmentParam",value:function(a){if("string"!=typeof a)throw"Invalid 'key' parameter, string expected, got: "+JSON.stringify(a);for(var b=!1,c=this.fragment.params,d=c.length-1;d>=0;d--)c[d].key===a&&(c.splice(d,1),b=!0);return b}},{key:"_parse",value:function(a){var b=document.createElement("a");b.href=a;var c=b.protocol,d=b.hostname;this.path=b.pathname,this.path.startsWith("/")||(this.path="/"+this.path),"string"==typeof b.origin?this.baseurl=b.origin:this.baseurl=c+"//"+d,this.queryParams=b.search;var e=b.hash;e.startsWith("#")&&(e=e.substring(1)),this.fragment=this._parseFragment(e)}},{key:"_parseFragment",value:function(a){var b=a.split("||"),c=d(b,2),f=c[0],g=c[1],h=f.split("|"),i=e(h),j=i[0],k=i.slice(1),l=[];j.split("&").forEach(function(a){if(""!==a){var b=a.split("=").map(decodeURIComponent);l.push({key:b[0],value:b[1]})}});var m=k.map(decodeURIComponent);return{params:l,pipedValues:m,keyword:g}}},{key:"_buildFragment",value:function(a){var b=a.params.map(function(a){if(!a.key||!a.value)throw"Invalid fragment parameter, expected a object with key and value property, got: "+JSON.stringify(a);if("string"!=typeof a.key)throw"Invalid 'key' property of fragment parameter, expected a string, got: "+JSON.stringify(a.key);if("string"!=typeof a.value)throw"Invalid 'value' property of fragment parameter, expected a string, got: "+JSON.stringify(a.value);var b=encodeURIComponent(a.key),c=encodeURIComponent(a.value);return b+"="+c}).join("&"),c=a.pipedValues.map(encodeURIComponent),d=[b].concat(f(c)).join("|"),e=d;if(a.keyword){if("string"!=typeof a.keyword)throw"Invalid 'keyword' of fragment, expected a string, got: "+JSON.stringify(a.keyword);e+="||"+a.keyword}return e}}]),a}(),a("default",g)}}}),a.register("ce",["18","27","83","2d","c5","cd"],function(a){function b(){"use strict";function a(){if(K.length){G(),p(),F(),new g({$target:R,$source:N,suppressEvents:!0});var a={};for(var b in Drupal.settings.hermes_categories)a[b]=Drupal.settings.hermes_categories[b];for(var c in Drupal.settings.hermes_editorial_menus)a[c]=Drupal.settings.hermes_editorial_menus[c];APP.pubsub.publish("tray-nav-init",a),j(null,Drupal.settings.hermes_categories)}}function b(){var a=void 0;return function(b,c){window.clearTimeout(a),a=setTimeout(b,c)}}function j(a,b){function c(a){for(var b=0,d=a.length;b<d;b++){var e=a[b];if(e.subcategories&&c(e.subcategories),i[e.pim_code]&&e.path&&i[e.pim_code].rank<e.path.split("/").length)return;e.path?i[e.pim_code]={url:e.path,rank:e.path.split("/").length}:console.error("searchBar.procCats: no category path information for current category. Information from /ajax/product-category is likely incorrect")}}var d=jQuery.map(b,function(a){return[a]});c(d)}function k(a){a&&a.preventDefault&&!Z&&(a.preventDefault(),a.stopPropagation(),Z=!0,K.addClass("expand-in"),L.addClass("search-expanded"),jQuery(a.target).is(N)||N.focus())}function l(){N.blur(function(){this.value&&M.submit()})}function m(){Z&&(Z=!1,N.trigger("blur"),L.removeClass("search-expanded"),_(function(){K.removeClass("expand-in"),C()},500))}function n(a){return a?a.replace(/https?:\/\//gi,"").replace(/\//g,""):""}function o(){Y=n(N.val());var a=void 0;if(v(),"undefined"!=typeof I){var b=I.split("_"),c=b[0],d=b[1];if(c&&d)return a=S.suggestion.replace("{term}",Y).replace("{locale}",I),(Y?T.suggestion[Y]:null)||jQuery.ajax({url:a,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}).fail(function(a){console.error("error fetching suggestion: ",a)});console.error("the country or language are incorrect => Country : "+c+" language : "+d)}else console.error("the lang variable is in the wrong format "+I)}function p(){return c.get("pastsearches")}function q(a,b){var c=a.concat(b);return c.filter(function(a,b,c){return c.indexOf(a)===b})}function r(a){return(i[(a||"").toUpperCase()]||{}).url}function s(a){return a.searchterm||a.title||a.display_name||a.mlValue||a.indexTitle||a.short_title}function t(a,b,c){var d=new RegExp("("+Y+")","gi");return b&&(a=a.splice(0,b)),jQuery.each(a,function(b){var e=a[b],f=s(e),g={hilite:f.replace(/Herm\u00c3\u00a8s/gi,"Hermès").replace(d,'<strong role="presentation">$1</strong>'),searchterm:f};if(0===jQuery("#block-hermes-commerce-nav-search").val().length&&(g.hilite=f.replace(/Herm\u00c3\u00a8s/gi,"Hermès").replace(d,"")),e.leafid&&(g.url=r(e.leafid)),"stores"===c&&(g.url="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.store+"/"+a[b].slug),"products"===c){g.action="find-product",g.product_link="#"+e.slug+"/"+e.sku||e.secondary_id;var i=e.sku||e.secondary_id,j=i.replace(" ","v"),k=window.location.origin+"/"+Drupal.settings.hermes_url_locale,l=k+"/product/"+e.slug+"-"+j,m=new h(l);g.product=m.build()}var n=a[b].secondid,o=a[b].nrResults;g.secondid=n,g.total=o,a[b]=g}),a}function u(){W=!0,v()}function v(){K.addClass("hide-past")}function w(){W||K.removeClass("hide-past")}function x(a,b){var c=[],d=0,e=void 0,f={recent:Drupal.settings.hermes_translations.search.recent,suggested:Drupal.settings.hermes_translations.search.suggested,suggestions:Drupal.settings.hermes_translations.search.suggestions,noSuggestions:Drupal.settings.hermes_translations.search.noSuggestions,items:Drupal.settings.hermes_translations.search.products,link:Drupal.settings.hermes_translations.search.link,urllocale:Drupal.settings.hermes_url_locale,searchurlkey:Drupal.settings.hermes_translations.url.search,pastsearches:{keywords:[]}};if(b.pastsearches||b.common){var g=p(),h=q((b.pastsearches||{}).keywords||[],g||[]);f.pastsearches.keywords=h.map(function(a){return{searchterm:a,hilite:a}})}if(b.suggestionGroups&&b.suggestionGroups.length)b.suggestionGroups.forEach(function(a){d=a.suggestions.length?d+1:d}),b.suggestionGroups.forEach(function(a){var b=H["got "+d+" groups"],e={indexTitle:a.suggestions.length?a.indexTitle:null};"1keywords"===a.indexName?e.suggestions={keywords:t(a.suggestions)}:"2categories"===a.indexName?e.suggestions={categories:t(a.suggestions,b,null)}:"3products"===a.indexName?e.suggestions={products:t(a.suggestions,b,"products")}:"4content"===a.indexName?e.suggestions={content:t(a.suggestions,b,null)}:"5stores"===a.indexName&&(e.suggestions={stores:t(a.suggestions,b,"stores")}),c.push(e)}),c.push(c.shift());else{w();var i=f.pastsearches.keywords.length?3:5;if(b&&b.common&&b.common.length){var j={indexTitle:"Presuggest",categories:t(b.common[0],i,null)};c.push(j)}}f.suggestionGroups=c,y(f),V||(V=[]),V.length||f.pastsearches.keywords.length?a.removeClass("no-prev"):a.addClass("no-prev"),e=V.length;for(var k=0;k<e;k++)f.pastsearches.keywords.push({searchterm:V[k]
});z(a,f)}function y(a){X=0,a.suggestionGroups.forEach(function(b,c){var d=f(a.suggestionGroups[c].suggestions)[0];a.suggestionGroups[c].suggestions[d].forEach(function(b,e){a.suggestionGroups[c].suggestions[d][e].suggestId="suggest-item-"+X,X++})})}function z(a,b){X>0&&jQuery("#search-suggest-label span").html(b.suggestions+'<span class="sr-only">, '+X+" "+b.items+"</span>"),0===X&&jQuery("#search-suggest-label span").text(b.noSuggestions),a.find("dd").remove(),a.append(d.render(U,b)).on("click","li",function(a){var b=jQuery(a.currentTarget),c=b[0].dataset.link;b.is("[data-action]")&&"#/"!==c.substring(0,2)?(a.preventDefault(),jQuery.when(D(b.data("link").replace("#",""))).then(E)):(a.preventDefault(),window.location.href=b.data("href"))})}function A(a){x(R,a)}function B(){K.addClass("show-suggestion"),O.attr("aria-expanded",!0),jQuery.when(o()).then(A)}function C(){K.removeClass("show-suggestion"),O.attr("aria-expanded",!1),N.removeAttr("aria-activedescendant")}function D(a){return jQuery.ajax({url:S.product.replace("{product}",a),type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}}).fail(function(a){console.error("error fetching product suggestion: ",a)})}function E(a){a.url&&(window.location.href="/"+Drupal.settings.hermes_url_locale+a.url)}function F(){J.off("mouseup.search-bar").on("mouseup.search-bar",function(a){K.has(a.target).length||(J.off("mouseup.search-bar"),m())}),N.off("keyup.search-bar focus.search-bar").on("keyup.search-bar focus.search-bar",function(a){a.keyCode&&[27,13,40,38].indexOf(a.keyCode)!==-1||(a.preventDefault(),a.stopPropagation(),$(B,50))})}function G(){P.off("click.search-bar").on("click.search-bar",function(a){k(a),l()}),jQuery('[data-action="open-search"]').off("click.open-search").on("click.open-search",k),K.off("focusin.search-bar").on("focusin.search-bar",k),N.on("blur",m),Q.on("mousedown",function(){N.val("")}),e()||APP.pubsub.subscribe("scroll",m),M.off("submit.search-bar").on("submit.search-bar",function(){if(!N.val().length)return!1}),K.off("click.search-bar").on("focus.search-bar",".search-past-search .close",u)}var H={got4groups:1,got3groups:2,got1groups:4},I=c.get("currentStore"),J=jQuery(document),K=jQuery(".header-search"),L=jQuery(".header-logo"),M=K.find("form"),N=jQuery("#block-hermes-commerce-nav-search"),O=jQuery("#combobox-search"),P=M.find(".icon-search"),Q=M.find(".btn.search-shrink"),R=K.find(".search-suggestion"),S={search:M.attr("action"),suggestion:Drupal.settings.hermes_global.url_cde+"/search/suggest?term={term}&locale={locale}",product:Drupal.settings.hermes_global.url_cde+"/search/product/{product}"},T={suggestion:[]},U=APP.templates.suggestions,V=void 0,W=!1,X=void 0,Y="",Z=!1,$=new b,_=new b;a()}var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.isSmall},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i={},a("default",b)}}}),a.register("cf",["3","4","27","83","1d","1e"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(b,f,g){c(this,a),this.pageWrapper=jQuery(".page-wrapper"),this.isMobile=e.isSmall(),this.device=this.isMobile?"mobile":"desktop",this.template=b,this.targetSelector=""+f,this.data=g,this.targetElement=jQuery(this.targetSelector),this.notification=jQuery("<div>").addClass("globale-notification").addClass("globale-notification-"+this.device).append(d.render(APP.templates[this.template])),this.overlay=jQuery(".global-notification-overlay"),this.subMessage=this.notification.find(".sub-message"),this.addAccessibilityOnModal(),this.addNotificationToDom()}return b(a,[{key:"addAccessibilityOnModal",value:function(){this.notification.attr("role","dialog"),this.notification.attr("aria-labelledby","notification-message")}},{key:"addNotificationToDom",value:function(){this.pageWrapper.append(this.notification),this.toggleSubMessage(),this.bindEvents()}},{key:"bindEvents",value:function(){jQuery(".notification-cta").click(this.openCartTray.bind(this)),jQuery(".notification-close").click(this.clickToCloseNotification.bind(this)),jQuery(document).on("click touchstart",".global-notification-overlay",this.hideNotification.bind(this)),jQuery(document).on("keydown",this.checkEscPress.bind(this)),jQuery(document).on("click.hideNotification",this.checkOutsideNotificationClick.bind(this)),APP.pubsub.subscribe("tray.trigger.click",this.hideNotification.bind(this))}},{key:"showNotification",value:function(){this.isMobile?this.showMobileNotification():this.scrollUpAndShowNotification(),f.trapFocusInTray(this.notification)}},{key:"showMobileNotification",value:function(){this.showOverlay(),this.notification.addClass("open"),f.setFocusOnElement(".notification-close")}},{key:"showDesktopNotification",value:function(){this.attachNotificationToTarget(),this.notification.addClass("open"),f.setFocusOnElement(".notification-close")}},{key:"scrollUpAndShowNotification",value:function(){TweenLite.to(window,.5,{scrollTo:{y:0,x:0},ease:window.Power2.ease,onComplete:this.showDesktopNotification.bind(this)})}},{key:"showOverlay",value:function(){this.overlay.addClass("visible")}},{key:"hideNotification",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0];this.notification.html().length>0&&(this.hideOverlay(),this.notification.addClass("close").removeClass("open"),setTimeout(function(){a.notification.remove(),jQuery(document).unbind("click.hideNotification")},500),b&&f.setFocusOnElement(".page-cart-button"))}},{key:"hideOverlay",value:function(){this.overlay.removeClass("visible")}},{key:"attachNotificationToTarget",value:function(){var a=this.getTargetOffset();this.notification.css({top:a.top,right:a.right})}},{key:"getTargetOffset",value:function(){var a=parseInt(window.getComputedStyle(document.querySelector(".globale-notification"),":before").getPropertyValue("right"),10),b=[];return b.top=jQuery(this.targetElement).offset().top+jQuery(this.targetElement).outerHeight(!0),b.right=document.body.offsetWidth-(jQuery(this.targetElement).offset().left+jQuery(this.targetElement).outerWidth(!0)+a/2),b}},{key:"openCartTray",value:function(){return this.hideNotification(!1),APP.pubsub.publish("analytics.viewCartFromNotification"),Drupal.settings.hermes_global&&Drupal.settings.hermes_global.cartPageAngular?(APP.pubsub.publish("gtm.openCart",this.data),void(window.location=window.location.origin+"/"+Drupal.settings.hermes_url_locale+"/cart/")):void APP.pubsub.publish("tray.cart.open")}},{key:"clickToCloseNotification",value:function(){this.hideNotification(),APP.pubsub.publish("analytics.closeAddtoCartNotification")}},{key:"checkEscPress",value:function(a){a&&a.keyCode===g.ESCAPE_KEYCODE&&this.hideNotification()}},{key:"checkOutsideNotificationClick",value:function(a){this.notification.is(a.target)||0!==this.notification.has(a.target).length||this.hideNotification()}},{key:"toggleSubMessage",value:function(){this.hasComplimentaryDelivery()||this.subMessage.hide()}},{key:"hasComplimentaryDelivery",value:function(){return this.data.basket.has_complimentary_delivery}}]),a}(),a("GlobalNotification",h),a("default",h)}}}),a.registerDynamic("d0",["d1"],!0,function(a,b,c){"use strict";var d=(this||self,a("d1").default);b.default=function(a,b,c){return b in a?d(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},b.__esModule=!0}),a.register("d2",["3","4","18","d0","d3"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(){c(this,a)}return b(a,[{key:"init",value:function(){APP.pubsub.subscribe("analyticsCart.add",this.addOrRemoveProduct),APP.pubsub.subscribe("analyticsCart.remove",this.addOrRemoveProduct)}},{key:"addOrRemoveProduct",value:function(a,b){var c=b.items,g="analyticsCart.add"===a?"addToCart":"removeFromCart",h="analyticsCart.add"===a?"add":"remove",i=f.mapProducts(c);dataLayer.push({event:g,ecommerce:e({currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code},h,{products:i})})}}]),a}(),a("default",g)}}}),a.register("d4",["17","18","1a","1d","cf","d2"],function(a){"use strict";function b(){function a(){document.querySelector("#page-header")&&(r=document.querySelector("#open-cart .header-count"),b())}function b(){APP.pubsub.subscribe("addToCart",f),APP.pubsub.subscribe("updateCart",i),APP.pubsub.subscribe("removeProduct",j),jQuery(document).on("click",".notif-open-cart",function(){APP.pubsub.publish("tray.cart.open")})}function f(a,b){var d=Array.isArray(b);if(APP.pubsub.publish("tray.cart.reset.variable"),!d&&!b.sku)throw new Error("Cant undefined SKU to cart");c.showLoaderButton("loader-button-add-to-cart");var f=d?b:[b];s=f,e(t,{items:f}).done(l).fail(m)}function i(a,b){s=[b],e(u,{items:s}).done(l).fail(m)}function j(a,b){s=[b],e(v,{items:s}).done(n).fail(m)}function k(a){var b=a.basket&&a.basket.items.length;if(b<1&&d.get("user")&&d.get("user").basket.items.length>1){var e=d.get("user");e.basket=a.basket,d.set("user",e),APP.pubsub.publish("cart.update",{basket:d.get("user").basket}),APP.pubsub.publish("gtm.basket",{basket:d.get("user").basket});var f={message:Drupal.settings.hermes_translations.notification.checkout.emptyCart,type:"critical"};return c.showMessage(f),!0}return!1}function l(a){if(a.error)return void m(a);if(c.hideLoaderButton("loader-button-add-to-cart"),jQuery(".cart-tray").hasClass("invisible")){var b=new g("addToCart","#open-cart",a);b.showNotification()}if(k(a))return!0;var e=d.get("total_items")>a.basket.total_items;o(a,e),q(a)}function m(a){var b=a.error&&a.error.internal_code,d=Drupal.settings.hermes_translations.notification.cart[b],e="undefined"!=typeof a.error.name?a.error.name:"",f={message:d,messageVariables:{locale:"/"+Drupal.settings.pathPrefix,title:e}};f.message?(c.showMessage(f),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.cart[b].description})):(c.technicalError(),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.account.errorMessage.description})),a.basket&&APP.pubsub.publish("cart.update",a),c.hideLoaderButton("loader-button-add-to-cart")}function n(a){if(a.error)return void m(a);if(k(a))return!0;if(a.deleted_items&&a.deleted_items[0]&&a.deleted_items[0]["ecom.item_type"]){var b=a.deleted_items[0];b["ecom.item_type"]!==w.DOUBLE_PRODUCT&&b["ecom.item_type"]!==w.PERFUME_SET||!function(){var a=0;jQuery.each(b.set_items,function(b,c){c.in_stock&&a++})}()}o(a,!0),q(a)}function o(a,b){d.set("total_items",a.basket&&a.basket.total_items||0),r.innerHTML=d.get("total_items")||"";var c=b?"analyticsCart.remove":"analyticsCart.add",e=a.deleted_items||p(a.basket.items);a.cartChange=!0,APP.pubsub.publish(c,{items:e}),APP.pubsub.publish("cart.update",a)}function p(a){return a.filter(function(a){var b=s.filter(function(b){return b.sku===a.sku});return b.length})}function q(a){var b=d.get("user")||{};b.basket=a.basket,d.set("shipping_method",b.basket.default_shipping_method),d.set("user",b)}var r=void 0,s=void 0,t="/basket/add",u="/basket/set",v="/basket/delete",w={DOUBLE_PRODUCT:"double",PERFUME_SET:"set",SIMPLE_PRODUCT:"single"},x=new h;x.init(),a()}var c,d,e,f,g,h;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("d5",["75","cb","d6","b6"],!0,function(a,b,c){var d=(this||self,a("75")),e=a("cb"),f=a("d6");c.exports=a("b6")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign}),a.registerDynamic("d7",["42","d5"],!0,function(a,b,c){var d=(this||self,a("42"));d(d.S+d.F,"Object",{assign:a("d5")})}),a.registerDynamic("d8",["d7","45"],!0,function(a,b,c){this||self;a("d7"),c.exports=a("45").Object.assign}),a.registerDynamic("32",["d8"],!0,function(a,b,c){this||self;c.exports={default:a("d8"),__esModule:!0}}),a.registerDynamic("58",["32"],!0,function(a,b,c){"use strict";var d=(this||self,a("32").default);b.default=d||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.__esModule=!0}),a.register("1a",["18"],function(a){"use strict";function b(a,b,d,e){var f=void 0;return e=e||window.csrfEnabled,d&&d.match(/^(POST|GET)$/)||(d="POST"),e?f=c(a,b,d):(f=jQuery.Deferred(),APP.pubsub.subscribe("csrfToken.headerAdded",function(){c(a,b,d).done(function(){var a;(a=f).resolve.apply(a,arguments)}).fail(function(){var a;(a=f).reject.apply(a,arguments)})})),f}function c(a,b,c){var e=void 0;if(c&&c.match(/^(POST|GET)$/)||(c="POST"),b||(b={}),a){b.country||(b.country=d.get("currentCountry")),b.locale||(b.locale=d.get("currentStore"));var f=!!b.async,g=b.cache?b.cache:void 0;return f&&delete b.async,g&&delete b.cache,"POST"===c?(e={method:c,url:""+Drupal.settings.hermes_global.url_ecp+a,data:JSON.stringify(b),contentType:"application/json; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0}},f&&(e.async=f)):e={method:c,url:""+Drupal.settings.hermes_global.url_ecp+a,data:b,xhrFields:{withCredentials:!0}},g&&(e.headers={"Cache-Control":"public, max-age="+g}),jQuery.ajax(e)}}var d;return{setters:[function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("2b",["3","4","17","18","35","58","2d","1e","1a","1d"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l='select[name="region"]',m='[name="country_id"]',n='select[name="district_bis_id"]',o="option:not(:first)",p='select[name="postcode_select"]',q=function(){function a(){var b=this;c(this,a),APP.pubsub.subscribe("app.start",function(){k.needStateDistrictFields(Drupal.settings.hermes_current_country)&&!e.get(b.getAreasStorageNameVariable())&&j(i.ADDRESS_DISTRICTS_URL,{},"GET").done(b.updateAreas.bind(b)).fail(b.fail.bind(b))})}return b(a,[{key:"getAreasStorageNameVariableByCountrySelector",value:function(a){var b=a.charAt(0).toUpperCase()+a.slice(1).toLowerCase();return"areas"+b}},{key:"getAreasStorageNameVariable",value:function(){var a=Drupal.settings.hermes_current_country.charAt(0).toUpperCase()+Drupal.settings.hermes_current_country.slice(1);return"areas"+a}},{key:"updateAreas",value:function(a){e.set("required_area",a.required_for),e.set(this.getAreasStorageNameVariable(),a.districts)}},{key:"updateAreasByCountrySelector",value:function(a,b){e.set(this.getAreasStorageNameVariableByCountrySelector(a),b.districts)}},{key:"fail",value:function(){d.technicalError(),e.deleteItem(this.getAreasStorageNameVariable())}},{key:"failBySelectCountry",value:function(a){d.technicalError(),e.deleteItem(this.getAreasStorageNameVariableByCountrySelector(a))}},{key:"populateSelect",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?null:arguments[0],c=arguments.length<=1||void 0===arguments[1]?null:arguments[1],d=jQuery(b).find(m),i=d.val();"undefined"==typeof i&&(i=Drupal.settings.hermes_current_country),k.needStateDistrictFields(i)&&!function(){var d=jQuery(b).find(l),j=jQuery(b).find(n),k=g({},Drupal.settings.hermes_account.states[i.toUpperCase()]),m=d.val(),p=j.val();if(d.children(o).remove(),h(k).length>0&&f(k).forEach(function(a){var b=new Option(a.name,a.region_id);b.setAttribute("data-cs-mask",""),d.append(b)}),m){var q=e.get(a.getAreasStorageNameVariableByCountrySelector(i))||[],r=q[m]||[];j.children(o).remove(),r&&r.length>0&&r.forEach(function(a){var b=new Option(a.name,a.district_bis_id);b.setAttribute("data-cs-mask",""),j.append(b)}),h(k).length>0&&"unknown"!==m&&a.setSelectValue(d,m,k[m].name),p&&("undefined"!=typeof c&&null!==c&&"undefined"!=typeof c.district_bis_id&&null!==c.district_bis_id&&(p=c.district_bis_id),a.setSelectValue(j,p,r.filter(function(a){return a.district_bis_id===p})[0].name)),j.parent().find(".label").text(j.find("option:selected").text())}m||a.initSelect(null,null,b),a.bindChange(b)}()}},{key:"setSelectDefault",value:function(a){if(0!=a.length){a.attr("data-old-value",null),a.prop("selectedIndex",0);var b=jQuery(a).next()[0];(a.attr("id").includes("edit-district-bis-id")||a.attr("id").includes("edit-region")||a.attr("id").includes("edit-postcode-select"))&&(b.innerText=Drupal.settings.hermes_translations.ui.formLabel.select)}}},{key:"setSelectValue",value:function(a,b,c){a.find("option").filter(function(a,c){return jQuery(c).val()===b}).prop("selected",!0),a.attr("data-old-value",b),a.parent().find(".label").text(c)}},{key:"changeDistrictEvent",value:function(a,b,c){var d=this;this.isPostCodeSelectAvailable()&&!function(){var f=jQuery(c).find(p);if(f.length>0&&a!==b){var g=jQuery(c).find(n),h=jQuery(c).find(l),i=e.get(d.getAreasStorageNameVariableByCountrySelector(jQuery(c).find(m).val()))||[],j=h.val()||"unknown",k=i[j].map(function(a){return a.district_bis_id}).indexOf(b),q=i[j].name;f.prop("disabled",!1);var r=i[j][k].postcodes||[];f.children(o).remove(),r.forEach(function(a){var b=new Option(a.code,a.code);b.setAttribute("data-cs-mask",""),f.append(b)}),d.setSelectValue(g,b,q),d.setSelectDefault(f)}}()}},{key:"changeProvinceEvent",value:function(a,b,c){var d=this;a!==b&&!function(){var a=jQuery(c).find(l),f=jQuery(c).find(n),h=g({},Drupal.settings.hermes_account.states[jQuery(c).find(m).val()]),i=a.val()||"unknown",j="unknown"!==i?h[i].name:"unknown";f.prop("disabled",!1);var k=e.get(d.getAreasStorageNameVariableByCountrySelector(jQuery(c).find(m).val()))||[],p=k[i];f.children(o).remove(),p.forEach(function(a){var b=new Option(a.name,a.district_bis_id);b.setAttribute("data-cs-mask",""),f.append(b)}),d.setSelectValue(a,b,j),d.setSelectDefault(f),d.resetPostCodeSelectDefault(c)}()}},{key:"initSelect",value:function(a,b){var c=this,d=arguments.length<=2||void 0===arguments[2]?null:arguments[2],h=jQuery(d).find(m);k.needStateDistrictFields(h.val())&&"cn"!==Drupal.settings.hermes_current_country&&!function(){var i=jQuery(d).find(l),j=jQuery(d).find(n);if(a!==b||!a||!b){var k=Drupal.settings.hermes_account.states,m=h.val().toUpperCase(),p={unknown:{name:null,region_id:null}};if(i.children(o).remove(),Drupal.settings.hermes_global.lockListsAddress&&"hermes-account-address-book-form"!==jQuery(d).attr("id")){m in k&&(p=g({},Drupal.settings.hermes_account.states[h.val().toUpperCase()]),f(p).forEach(function(a){var b=new Option(a.name,a.region_id);b.setAttribute("data-cs-mask",""),i.append(b)}));var q=i[0].getAttribute("data-old-value"),r=i.find("option[value="+q+"]");r.length>0&&c.setSelectValue(i,q,r[0].text);var s=j[0].getAttribute("data-old-value");r=j.find("option[value="+s+"]"),r.length>0&&c.setSelectValue(j,s,r[0].text);var t=i.val()||"unknown",u=e.get(c.getAreasStorageNameVariableByCountrySelector(m))||[],v=u[t]||[];c.populatePostCodeSelect(v,d),Drupal.settings.hermes_global.lockListsAddress=!1}else m in k?(p=g({},Drupal.settings.hermes_account.states[h.val().toUpperCase()]),f(p).forEach(function(a){var b=new Option(a.name,a.region_id);b.setAttribute("data-cs-mask",""),i.append(b)}),c.setSelectDefault(i),c.setSelectDefault(j),c.resetPostCodeSelectDefault(d)):(c.changeProvinceEvent(null,"unknown",d),c.changeDistrictEvent(null,"unknown",d)),j.prop("disabled",m in k);c.bindChange(d)}}()}},{key:"checkForm",value:function(a){"hermes-account-create-form"!==jQuery(a).attr("id")&&"hermes-account-edit-profile-form"!==jQuery(a).attr("id")&&"hermes-account-create-profile-form"!==jQuery(a).attr("id")&&"hermes-account-address-book-form"!==jQuery(a).attr("id")||this.initSelect(null,null,a)}},{key:"bindChange",value:function(a){var b=this,c=jQuery(a).find(l),d=jQuery(a).find(n);c.on("change",function(d){if(void 0!==d.originalEvent){var e=c.attr("data-old-value"),f=c.val();b.changeProvinceEvent(e,f,a)}}),this.isPostCodeSelectAvailable()&&d.on("change",function(c){if(void 0!==c.originalEvent){var e=d.attr("data-old-value"),f=d.val();b.changeDistrictEvent(e,f,a)}})}},{key:"getDistricts",value:function(a){var b=this;k.needStateDistrictFields(a)&&!e.get(this.getAreasStorageNameVariableByCountrySelector(a))&&j(i.ADDRESS_DISTRICTS_URL,{country:a.toLowerCase(),locale:""},"GET").done(function(c){b.updateAreasByCountrySelector(a,c)}).fail(function(){b.failBySelectCountry(a)})}},{key:"isPostCodeSelectAvailable",value:function(){try{return e.get("required_area").indexOf(Drupal.settings.hermes_current_country.toUpperCase())!==-1}catch(a){return!1}}},{key:"populatePostCodeSelect",value:function(a,b){var c=this;this.isPostCodeSelectAvailable()&&a&&a.length>0&&!function(){var a=jQuery(b).find(p);c.resetPostCodeSelectDefault(b);var d=jQuery(b).find(l),f=jQuery(b).find(n),g=e.get(c.getAreasStorageNameVariableByCountrySelector(jQuery(b).find(m).val()))||[],h=d.val()||"unknown",i=g[h].map(function(a){return a.district_bis_id}).indexOf(f.val());a.prop("disabled",!1);var j=g[h][i].postcodes||[];a.children(o).remove(),j.forEach(function(b){var c=new Option(b.code,b.code);c.setAttribute("data-cs-mask",""),a.append(c)})}()}},{key:"resetPostCodeSelectDefault",value:function(a){if(this.isPostCodeSelectAvailable()){var b=jQuery(a).find(p);b.children.length>0&&b.children(o).remove(),this.setSelectDefault(b)}}}]),a}(),a("default",q)}}}),a.registerDynamic("43",["75","a8"],!0,function(a,b,c){var d=(this||self,a("75")),e=a("a8"),f=d.isEnum;c.exports=function(a){return function(b){for(var c,g=e(b),h=d.getKeys(g),i=h.length,j=0,k=[];i>j;)f.call(g,c=h[j++])&&k.push(a?[c,g[c]]:g[c]);return k}}}),a.registerDynamic("d9",["42","43"],!0,function(a,b,c){var d=(this||self,a("42")),e=a("43")(!1);d(d.S,"Object",{values:function(a){return e(a)}})}),a.registerDynamic("da",["d9","45"],!0,function(a,b,c){this||self;a("d9"),c.exports=a("45").Object.values}),a.registerDynamic("35",["da"],!0,function(a,b,c){this||self;c.exports={default:a("da"),__esModule:!0}}),a.register("29",[],function(a){"use strict";function b(a,b){var c=Drupal.settings.hermes_account.options_countries[a];if(c&&b){var d=c["zip-separator"],e=c["zip-pattern"],f=c["zip-maxlength"]?parseInt(c["zip-maxlength"],10):5;if(d){b.length>=f&&!b.includes(d)&&(b=b.slice(0,-1));var g=b.replace(d,""),h=e.indexOf("{")+1,i=parseInt(e.substring(h,h+1),10),j=e.replace("(["+d+"]{1})","");i>=0&&g.length>i&&!g.includes(d)&&(b="GB"===a?g.replace(new RegExp(j),"$1"+d+"$2"):g.replace(new RegExp("([a-zA-Z0-9]{"+i+"})([a-zA-Z0-9]*)"),"$1"+d+"$2"))}return b}}function c(a,b){var c=Drupal.settings.hermes_account.options_countries[a];if(c&&b){var d=c["zip-separator"];return d&&(b=b.replace(d,"")),b}}return{setters:[],execute:function(){a("formatPostcodeValue",b),a("unformatPostcodeValue",c)}}}),a.registerDynamic("db",["dc"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(0,f.default)(1,arguments),a instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var f=d(a("dc"));c.exports=b.default}),a.registerDynamic("dd",["db"],!0,function(a,b,c){this||self;c.exports=a("db")}),a.registerDynamic("de",["df","dc"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){(0,g.default)(1,arguments);var b=(0,f.default)(a);return!isNaN(b)}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var f=d(a("df")),g=d(a("dc"));c.exports=b.default}),a.registerDynamic("e0",["de"],!0,function(a,b,c){this||self;c.exports=a("de")}),a.registerDynamic("e1",["df","dc"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){(0,g.default)(2,arguments);var c=(0,f.default)(a),d=(0,f.default)(b);return c.getFullYear()-d.getFullYear()}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var f=d(a("df")),g=d(a("dc"));c.exports=b.default}),a.registerDynamic("e2",[],!0,function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=(this||self,c.exports={});!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}),a.registerDynamic("e3",["e2"],!0,function(a,b,c){this||self;c.exports=a("e2")}),a.registerDynamic("e4",["e3"],!0,function(b,c,d){this||self;d.exports=a._nodeRequire?process:b("e3")}),a.registerDynamic("6",["e4"],!0,function(a,b,c){this||self;c.exports=a("e4")}),a.registerDynamic("df",["dc","6"],!0,function(a,b,c){this||self;!function(d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a){(0,g.default)(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"==typeof a&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):("string"!=typeof a&&"[object String]"!==b||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}Object.defineProperty(b,"__esModule",{value:!0}),b.default=f;var g=e(a("dc"));c.exports=b.default}(a("6"))}),a.registerDynamic("e5",["df","dc"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){(0,g.default)(2,arguments);var c=(0,f.default)(a),d=(0,f.default)(b),e=c.getTime()-d.getTime();return e<0?-1:e>0?1:e}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var f=d(a("df")),g=d(a("dc"));c.exports=b.default}),a.registerDynamic("dc",[],!0,function(a,b,c){"use strict";function d(a,b){if(b.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=d,c.exports=b.default}),a.registerDynamic("e6",["df","e1","e5","dc"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){(0,i.default)(2,arguments);var c=(0,f.default)(a),d=(0,f.default)(b),e=(0,h.default)(c,d),j=Math.abs((0,g.default)(c,d));c.setFullYear("1584"),d.setFullYear("1584");var k=(0,h.default)(c,d)===-e,l=e*(j-k);return 0===l?0:l}this||self;Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var f=d(a("df")),g=d(a("e1")),h=d(a("e5")),i=d(a("dc"));c.exports=b.default}),a.registerDynamic("e7",["e6"],!0,function(a,b,c){this||self;c.exports=a("e6")}),a.register("1b",["27","29","35","2d","1e","dd","e0","e7"],function(a){function b(a){this.dobArray=["day","month","year"],this.fields=[],this.errorMessageObject=Drupal.settings.hermes_translations.validation,this.patterns={required:/\S/,email:/.+@.+\..+/},this.postcodesId=null,this.oldValue=null,this.newValue=null,this.validationErrorClass="validation-error",this.validationErrorSelector="."+this.validationErrorClass,this.errorTimeout=0,this.messageBag=[];for(var b=0;b<a.inputs.length;b++){var c=jQuery(a.inputs[b]),d=c.attr("type"),e=h.INVALIDTYPES.includes(d);"select"!==c.get(0).nodeName.toLowerCase()&&e||(this.fields.push(c.get(0)),c.on("blur change",this.changeHandler.bind(this)))}this.toggleGroupRequired(a.inputs),this.getFormatPostcode()}function c(a,b){return a.indexOf(b)>-1}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.default},function(a){e=a.formatPostcodeValue},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";b.prototype.changeHandler=function(a){var b=a&&a.currentTarget;b&&(this.removeError(b),"edit-expire-date-month-year"===b.id||!this.dobArray.includes(b.name)&&"change"===a.type||"kr"===Drupal.settings.hermes_current_country&&"month"===b.name||this.testField(b))},b.prototype.toggleGroupRequired=function(a){var b="";this.group={};for(var c=0;c<a.length;c++){var d=a[c];d.hasAttribute(h.DATAGROUP)&&(b=d.getAttribute(h.DATAGROUP),this.group[b]?this.group[b].push(d):this.group[b]=[d],d.onblur=this.checkDate.bind(this))}},b.prototype.checkPipa=function(a){var b=a.closest("form"),c=!0;return b.find(".pipa-checkbox").each(function(){jQuery(this).prop("checked")||(c=!1)}),c},b.prototype.pipaErrorForm=function(a){var b=this,c=d.render(b.errorMessageObject.pipa_consent_checkbox),e=".pipa-fieldset";return jQuery(".pipa-payment-fieldset").length>0&&(e=".pipa-payment-fieldset",c=d.render(b.errorMessageObject.gtc_checkbox)),b.throwError({input:a.closest(e)[0],error:c,child:a[0]}),c},b.prototype.getDateDob=function(a){var b=this.getInputDate("day")||a[0],c=this.getInputDate("month")||a[1],d=this.getInputDate("year")||a[2],e={day:parseInt(b.value,10),month:parseInt(c.value,10),year:parseInt(d.value,10)};return{inputs:[b,c,d],values:e,hasValueDate:function(){return!!g(e).find(function(a){return e[a]})}}},b.prototype.calcAge=function(a){return k(new Date,a)},b.prototype.checkDate=function(a){var b=this,c=this,d=a.target.getAttribute(h.DATAGROUP),e=this.group[d];if(e&&"date"===d){var k=this.getDateDob(e),l=k.inputs,m=k.values,n=k.hasValueDate,o={validity:!1,day:!1,month:!1,year:!1,majority_kr:!1};if(l.forEach(function(a){c.removeError(a)}),jQuery(l[0]).closest("fieldset").removeClass(this.validationErrorClass),!n())return this.testField(l[0]),this.testField(l[1]),void this.testField(l[2]);var p=a.relatedTarget&&a.relatedTarget.name;if(!l.find(function(a){return a.name===p})){var q=jQuery(l[0]).parents(".dob-wrapper");g(m).filter(function(a){return!m[a]}).forEach(function(a){return o[a]=!0});var r=new Date(m.year,m.month-1,m.day);if(i(r)&&j(r)){r.getDate()!==m.day&&(o.day=!0);var s=r.getMonth()+1;if(s!==m.month&&(o.month=!0),(r.getFullYear()!==m.year||r.getFullYear()<(new Date).getFullYear()-h.LIMIT_AGE_USER||r>new Date)&&(o.year=!0),
"kr"===Drupal.settings.hermes_current_country){var t=this.calcAge(r);t>=0&&t<19&&(o.majority_kr=!0)}}else o.validity=!0;g(o).forEach(function(a){var c=e.find(function(b){return b.name.includes(a)});if(o[a]){var d="";d="jp_ja"===Drupal.settings.hermes_locale&&"month"===a?b.errorMessageObject.dob_month_required:b.errorMessageObject.dob_format,o.majority_kr&&(d=b.errorMessageObject.dob_majority_kr),b.throwError({input:q[0],error:d,child:c})}else f(o).includes(!0)||"undefined"==typeof c||b.removeError(c)})}}},b.prototype.getInputDate=function(a){var b=null;return this.group.date.find(function(c){jQuery('[name*="'+a+'"]').each(function(){c.id===this.id&&(b=this)})}),b},b.prototype.updateRequired=function(a){var b=jQuery(a.elements[0]).closest("div.container-fieldset");0===b.length&&(b=jQuery(a.elements[0]).closest("fieldset"));for(var c=0;c<a.elements.length;c++){var d=a.elements[c];a.required?d.setAttribute(h.REQUIRED,h.REQUIRED):d.removeAttribute(h.REQUIRED)}a.required||(jQuery(this.validationErrorSelector,b).removeClass(this.validationErrorClass),jQuery(".error-message",b).removeClass("error-message"))},b.prototype.runTests=function(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];this.messageBag=[],a&&a.preventDefault();for(var c=0,d=this.fields.length;c<d;c++)this.testField(this.fields[c]);b&&this.scrollToError(),this.focusOnTheFirstElement(a)},b.prototype.scrollToError=function(){var a=document.querySelector(this.validationErrorSelector);if(a){var b=jQuery(a).offset().top,c=jQuery(".tray-content").offset().top,d=!!jQuery("#tray-overlay.visible").length,e=d?jQuery("#tray"):jQuery("html, body"),f=jQuery("#header-actions"),g=d?b-c:b-f.height();e.animate({scrollTop:g},600)}},b.prototype.scrollToErrorAdyen=function(){var a=document.querySelector(".adyen-checkout__field--error,.adyen-checkout__input--invalid");if(a){var b=jQuery(a).offset().top,c=jQuery("html, body"),d=jQuery("#header-actions"),e=b-d.height();c.animate({scrollTop:e},600)}},b.prototype.japanErrorForm=function(a){var b=jQuery(a.input),c=b.attr("requirements");if(c){c=c.split(",");var e="";for(var f in c){var g=c[f];if(h[g]){var i=new RegExp(h[g]),j=i.test(b.val());if(j=g.indexOf("_NO_")===-1?!j:j){var k=c[f].toLowerCase().replace(/(\b|_)\w/g,function(a){return a.toUpperCase().replace(/_/,"")});e=k.charAt(0).toLowerCase()+k.slice(1);break}}}if(""!==e){var l=this.errorMessageObject[e]||this.errorMessageObject.format,m={field_label:a.label},n=d.render(l,m);a.errors.push(n)}}},b.prototype.testField=function(a){var b=jQuery(a),e=b.attr("type")||"select",f=b.prop(h.REQUIRED),g=this.dobArray.includes(b.data("validationLabel"))?"dob":b.data("validationLabel"),i="edit-creditcard"===b.attr("id"),j=b.hasClass("required-chinese"),k=[],l=void 0,m=void 0;if(("month"===b.prop("name")||"day"===b.prop("name")||b.prop("name")===h.YEAR_LABEL)&&this.getDateDob().hasValueDate())return k;if(b.hasClass("pipa-checkbox")){var n=!this.checkPipa(b);if(n){var o=this.pipaErrorForm(b);return k.push(o),k}}switch(e){case"radio":if(!f)break;var p=b.closest("form").find("[name]"),q=p.filter(function(){var a=jQuery(this);return a.attr("name")===b.attr("name")&&a.prop("checked")});if(q)break;case"checkbox":if(f&&!b.prop("checked")){var r=b.prop("name");switch(r){case"terms_conditions_checkbox":l=d.render(this.errorMessageObject.gtc_checkbox);break;case"pre_order_checkbox":l=d.render(this.errorMessageObject.pre_order_checkbox);break;default:l=d.render(this.errorMessageObject.checkbox,{field_label:g})}k.push(l)}break;case"select":if(!f||b.prop("disabled"))break;b.val()||(l="month"===b.prop("name")?d.render(this.errorMessageObject.dob_required,{field_label:g}):d.render(this.errorMessageObject.required_on_input,{field_label:g}),k.push(l));break;case"password":if(!f||b.prop("disabled"))break;if("edit-confirm-password"!==b.attr("id")){var s=/^[^-\s]{8,}$/;b[0].value&&""!==b[0].value||(l=d.render(this.errorMessageObject.required_on_input,{field_label:g}),k.push(l));var t=["edit-password","edit-new-password","edit-password","create-new-password","create-profile-create-password"];!s.test(b[0].value)&&c(t,b.attr("id"))&&(l=d.render(this.errorMessageObject.password_not_long_enough,{field_label:g}),k.push(l))}break;case"email":var u=/.+@.+\..+/;if(b[0].value&&""!==b[0].value||(l=d.render(this.errorMessageObject.required_on_input,{field_label:g}),k.push(l)),u.test(b[0].value)||(l=d.render(this.errorMessageObject.email,{field_label:g}),k.push(l)),(b.hasClass("only-latin-char")||b.hasClass("only-latin-char-for-uae-sa"))&&b.val()){var v=new RegExp(/^([A-Za-z\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff\s\0-9\@\_]*)$/g);v.test(b.val())||(l=d.render(this.errorMessageObject.latin_char_only,{field_label:g}),k.push(l))}break;default:var w=b.prop("pattern"),x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=b.parents("form").find('[name*="country_id"]').val(),E=Drupal.settings.hermes_account.options_countries[D];b.prop("name").includes("postcode")?A=!0:b.prop("name").includes("street1")?B=!0:b.val(b.val().trim()),b.val()&&(A&&(this.testPostCodeField(a),w=b.prop("name").includes("_bis")?E["zipbis-pattern"]:E["zip-pattern"]),w?(w="^(?:"+w+")$",w in this.patterns?x=this.patterns[w]:(x=new RegExp(w),this.patterns[w]=x),m=this.dobArray.includes(a.name)?"dob_format":b.attr("name")||"format"):(x=this.patterns[e],m=e)),f&&!x&&(x=this.patterns.required,m="required_on_input","day"!==b.prop("name")&&b.prop("name")!==h.YEAR_LABEL||(m="dob_required")),i&&!this.validateCreditcard(b.val())&&(m="creditcardType",y=!0),"edit-create-profile-telephone"===b.prop("id")&&(m="telephone"),B&&b.val().length>35&&(l=d.render(this.errorMessageObject.AddressLengthError),k.push(l)),j&&!this.validateChineseRequired(b.val())&&(m="chineseRequired",z=!0);var F={};if((b.hasClass("only-latin-char")||b.hasClass("only-latin-char-for-uae-sa"))&&b.val()){var v=new RegExp(/^([A-Za-z\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff\s\0-9]*)$/g);v.test(b.val())||(C=this.errorMessageObject.latin_char_only,F.field_label=g,l=d.render(C,F),k.push(l))}var G=!b.prop("disabled")&&x&&!x.test(b.val());if(G||y||z){var H=b.prop("name").includes("postcode_bis");if(String(b.val()).length>0)if(A){var I=E["zip-delta"]?parseInt(E["zip-delta"],10):0;if(H)F.max=E["zipbis-maxlength"],C=this.errorMessageObject.postcode_digitsonly.max;else{var J=E["zip-maxlength"]?E["zip-maxlength"]:5;F.max=E["zip-separator"]?J-1:J,F.min=F.max-I,C=this.getPostcodeErrorMessage(E)}}else C=this.errorMessageObject[m]||this.errorMessageObject.format;else C=this.errorMessageObject[m]||this.errorMessageObject.format;if(F.field_label=g,l=d.render(C,F),"kr"===Drupal.settings.hermes_current_country&&"dob_required"===m){var K=b.parent();K.is(":visible")&&K.addClass(this.validationErrorClass);break}k.push(l)}else{var L={input:a,label:g,errors:k};this.japanErrorForm(L)}}return k.length&&(this.messageBag=k,this.throwError({input:"dob_format"===m?jQuery(a).parents('[class*="wrapper"]').get(0):a,error:k[0],child:"dob_format"===m?a:void 0})),k},b.prototype.getPostcodeErrorMessage=function(a){var b=a["zip-digitsonly"]?this.errorMessageObject.postcode_digitsonly:this.errorMessageObject.postcode,c=a["zip-message"]?a["zip-message"]:"max";return b[c]},b.prototype.testPostCodeField=function(a){var b=jQuery(a).closest("form").find('[name*="country_id"]'),c=b.val(),d=Drupal.settings.hermes_account.options_countries[c],e=a.name.includes("bis"),f=d["zip-maxlength"]?parseInt(d["zip-maxlength"],10):5;e&&(f=parseInt(d["zipbis-maxlength"],10)),f&&a.setAttribute("maxlength",f)},b.prototype.validateCreditcard=function(a){if(/[^0-9-\s]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--)c=parseInt(a.charAt(e),10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d;return b%10===0},b.prototype.throwError=function(a){var b=a.input,c=jQuery(b),d=c.closest("form").attr("id"),e=b.name?"error-"+b.name:"error-"+b.className.substring(0,b.className.indexOf("-")),f=e+" clearfix",g=b.parentNode,h=c.closest("div.container-fieldset");0===h.length&&(h=c.closest("fieldset"));var i=a.input.dataset.validationLabel?"<span class='sr-only'>"+a.input.dataset.validationLabel+"</span>":"",j='<svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n                              <use xlink:href="#exclamation-mark"></use>\n                            </svg>\n                            <span class="sr-only">'+Drupal.settings.hermes_translations.validation.error_on_input_icon+"</span>",k="<span>"+j+" "+a.error+"</span>",l=h.find("."+e),m=c.attr("aria-describedby"),n=d+"-"+e;if(m?m.indexOf(n)<0&&c.attr("aria-describedby",n+" "+m):c.attr("aria-describedby",n),l.length)l.html(k),l.append(i);else{l=jQuery("<div>").attr("id",d+"-"+e).addClass(f).html(k+i);var o=jQuery(g),p=o;if(o.hasClass("form-item-select")){var q=p.closest(".dob-wrapper");p=q.length>0&&h.is("fieldset")?h:p.parent()}p.append(l)}l.attr("aria-hidden",!1),this.showErrorMessageInPageTitle(b),a.child&&(g=a.child.parentNode),g?jQuery(g).is(":visible")&&g.classList.add(this.validationErrorClass):a.child.parent().addClass(this.validationErrorClass),this.errorTimeout=setTimeout(function(){l.addClass("error-message")},50)},b.prototype.removeError=function(a){var b=jQuery(a),c=a.parentNode,d=jQuery(c),e=b.closest("form").attr("id"),f=b.closest("div.container-fieldset");0===f.length&&(f=b.closest("fieldset"));var g=this.dobArray.includes(a.name)||!a.name?"dob":a.name;"month"!==b.prop("name")&&"day"!==b.prop("name")&&b.prop("name")!==h.YEAR_LABEL||f.find(".error-message").remove(),(b.hasClass("pipa-checkbox")||"pipa_consent"===b.prop("name"))&&this.checkPipa(b)&&f.find(".error-message").remove(),c.classList.remove(this.validationErrorClass);var i=b.attr("aria-describedby"),j=e+"-error-"+g;if(i)if(i===j)b.removeAttr("aria-describedby");else{var k=i.replace(j+" ","");b.attr("aria-describedby",k)}f.length?(f.find(".error-"+g).removeClass("error-message"),f.find(".error-"+g).attr("aria-hidden",!0)):d.find(".error-"+g).remove(),jQuery("#hermes-account-login-form-error-loginphone").length&&jQuery("#hermes-account-login-form-error-loginphone").removeClass("hidden"),jQuery("#hermes-account-login-form-error-email").length&&jQuery("#hermes-account-login-form-error-email").removeClass("hidden"),this.removeErrorMessageInPageTitle(a),this.errorTimeout&&clearTimeout(this.errorTimeout)},b.prototype.resetErrors=function(a){var b=jQuery("head title"),c=b.text().replace(this.errorMessageObject.errorOnForm,""),d=jQuery("body"),e=null;a&&(e=a.parents().filter("#tray").find(".tray-content").not(".invisible")),a?(a.find(this.validationErrorSelector).removeClass(this.validationErrorClass),a.find(".error-message").removeClass("error-message")):(jQuery(this.validationErrorSelector).removeClass(this.validationErrorClass),jQuery(".error-message").removeClass("error-message")),e&&e.length?(e.removeClass("error-on-form"),b.html(c)):e&&!e.length?(d.removeClass("error-on-form"),b.html(c)):(b.html(c),jQuery(".error-on-form").removeClass("error-on-form"))},b.prototype.validateChineseRequired=function(a){return/[\u4e00-\u9fa5]+/.test(a)},b.prototype.formatPostcode=function(a){var b=a?a.target:"",c=a.data&&a.data.oldValue?a.data.oldValue:"",d=a.data&&a.data.newValue?a.data.newValue:"",f=jQuery(b).parents("form").find('[name*="country_id"]'),g=f.val(),h=this.difference(c,d),i=/\w|\d/i.test(h)&&1===h.length,j="paste"===a.type;if(i){var k=e(g,a.target.value);k!==a.target.value&&(a.target.value=k)}else j&&setTimeout(function(){return a.target.value=e(g,a.target.value)},100)},b.prototype.focusOnTheFirstElement=function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(a){var c=a.currentTarget.form?jQuery("#"+a.currentTarget.form.id).find(this.validationErrorSelector):jQuery("#"+a.currentTarget.id).find(this.validationErrorSelector),d=jQuery(c[0]).find("input, select");b&&(d=jQuery(".adyen-checkout__input--invalid,.adyen-checkout__input--error iframe")),a.stopPropagation(),a.preventDefault(),jQuery(d[0]).focus()}},b.prototype.showErrorMessageInPageTitle=function(a){var b=this.errorMessageObject.errorOnForm,c=jQuery("head title"),d=c.text(),e=jQuery("body"),f=jQuery(a).parents().filter("#tray").find(".tray-content").not(".invisible");f.length&&!f.hasClass("error-on-form")?(c.html(b+" "+d),f.addClass("error-on-form")):f.length||e.hasClass("error-on-form")||(c.html(b+" "+d),e.addClass("error-on-form"))},b.prototype.removeErrorMessageInPageTitle=function(a){var b=this.errorMessageObject.errorOnForm,c=jQuery("head title"),d=jQuery("body"),e=c.text().replace(b,""),f=jQuery(a).parents().filter("#tray").find(".tray-content").not(".invisible"),g=f.find(this.validationErrorSelector+":visible"),h=jQuery(this.validationErrorSelector+":visible").not(g);f.length&&f.hasClass("error-on-form")&&0===g.length?(f.removeClass("error-on-form"),c.html(e)):!f.length&&d.hasClass("error-on-form")&&0===h.length&&(d.removeClass("error-on-form"),c.html(e))},b.prototype.difference=function(a,b){var c=jQuery.map(b.split(""),function(c,d){if(a[d]!==b[d])return c}).join("");return c},b.prototype.keyDownHandler=function(a){var b=a.data.postcodesId?a.data.postcodesId.filter('[id="'+a.currentTarget.id+'"]'):null;a.data.oldValue=b&&b[0]?b[0].value:null},b.prototype.inputHandler=function(a){var b=a.data.postcodesId?a.data.postcodesId.filter('[id="'+a.currentTarget.id+'"]'):null;a.data.newValue=b&&b[0]?b[0].value:null,a.data.formatPostcode(a)},b.prototype.getFormatPostcode=function(){this.postcodesId=jQuery('[id*="postcode"]').not('[id*="bis"]'),this.postcodesId.keydown(this,this.keyDownHandler),this.postcodesId.bind("input",this,this.inputHandler),this.postcodesId.bind("paste",this,this.formatPostcode.bind(this))},b.prototype.addFieldToValidator=function(a){this.fields.push(a.get(0)),a.on("blur change",this.changeHandler.bind(this))},a("default",b)}}}),a.registerDynamic("e8",["79","69","c8","45"],!0,function(a,b,c){var d=(this||self,a("79")),e=a("69")("iterator"),f=a("c8");c.exports=a("45").isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}}),a.registerDynamic("e9",["80","7f","e8"],!0,function(a,b,c){this||self;a("80"),a("7f"),c.exports=a("e8")}),a.registerDynamic("ea",["e9"],!0,function(a,b,c){this||self;c.exports={default:a("e9"),__esModule:!0}}),a.registerDynamic("3b",["4a","ea"],!0,function(a,b,c){"use strict";var d=(this||self,a("4a").default),e=a("ea").default;b.default=function(){function a(a,b){var c=[],e=!0,f=!1,g=void 0;try{for(var h,i=d(a);!(e=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return c}return function(b,c){if(Array.isArray(b))return b;if(e(Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b.__esModule=!0}),a.register("52",["18","3b","1e"],function(a){function b(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1],f=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],g=Drupal.settings.hermes_locale,h="様",i=void 0,j=void 0,k=[];if(g){var l=g.split("_"),m=d(l,2);i=m[0],j=m[1]}else i=c.get("currentCountry"),j=c.get("currentLanguage");a.country_id&&a.country_id===e.JAPAN.toUpperCase()&&(i="jp");var n=" ";switch(i){case"cn":k="zh"===j?[a.lastname,a.firstname,a.prefix]:[a.prefix,a.lastname,a.firstname];break;case"jp":k=f?[a.lastname2,a.firstname2,h]:[a.lastname,a.firstname,h];break;case"tw":k=[a.lastname,a.firstname,a.prefix];break;case"hk":k=[a.prefix,a.lastname];break;case"mo":k=[a.prefix,a.lastname];break;case"kr":k=[a.lastname,a.firstname],n="";break;default:k=b?[a.prefix,a.firstname,a.middlename,a.lastname]:[a.firstname,a.middlename,a.lastname]}return k.filter(function(a){return a}).join(n)}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";a("default",b)}}}),a.register("eb",[],function(a){"use strict";function b(a){var b=Drupal.settings.hermes_locale,c=b.split("_"),d=c[0],e=c[1],f=[],g=" ";switch(d){case"cn":return"zh"===e&&(f=[a.lastname,a.firstname,a.prefix]),f.filter(function(a){return a}).join("");case"tw":f=[a.prefix,a.lastname,a.firstname];break;case"hk":case"mo":f=[a.prefix,a.firstname,a.lastname];break;case"kr":f=[a.lastname,a.firstname],g="";break;default:return a.firstname}return f.filter(function(a){return a}).join(g)}return{setters:[],execute:function(){a("default",b)}}}),a.register("1f",["27","52","1d","eb"],function(a){"use strict";function b(){var a=jQuery("#tray"),b=a.find(".tray-notification-message"),c=a.find(".continue-experience");b.addClass("hidden"),b.empty(),c.addClass("hidden"),a.find(".tray-content-container").show()}function c(a,b,c){var d={},i=!!g.isChina();switch(a){case"login":d.name=f(APP.NOTIFICATIONS.messages,!0),b.html(e.render(APP.templates.trayNotificationLogin,d));break;case"logout":d.name=h(APP.NOTIFICATIONS.messages),b.html(e.render(APP.templates.trayNotificationLogout,d));break;case"wechat-binding":d.firstname=APP.NOTIFICATIONS.messages.firstname,d.lastname=APP.NOTIFICATIONS.messages.lastname,i&&(d.prefix=APP.NOTIFICATIONS.messages.prefix),b.html(e.render(APP.templates.trayNotificationWechatBinding,d));break;case"newsletter":"success"===c?(d.title=Drupal.settings.hermes_translations.notification.newsletter.subscribed.title,d.description=Drupal.settings.hermes_translations.notification.newsletter.subscribed.description):(d.title=Drupal.settings.hermes_translations.notification.account.errorMessage.title,d.description=Drupal.settings.hermes_translations.notification.account.errorMessage.description),b.html(e.render(APP.templates.trayNotificationNewsletter,d));break;case"contact-us":"success"===c?(d.titleContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.success.title,d.messageContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.success.description):(d.titleContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.error.title,d.messageContactUs=Drupal.settings.hermes_translations.notification.account.emailUs.error.description),b.html(e.render(APP.templates.trayNotificationContactUs,d));break;case"change-password":d.title=APP.NOTIFICATIONS.messageChangePassword.messageTitle,d.message=APP.NOTIFICATIONS.messageChangePassword.messageDescription,b.html(e.render(APP.templates.trayNotificationChangePassword,d))}}function d(a,b,d){var e=jQuery("#"+a),f=e.find(".tray-notification-message"),g=e.find(".continue-experience");e.find(".tray-content-container").hide(),c(b,f,d),e.attr({role:"alertdialog","aria-describedby":"notification-"+a}),f.removeClass("hidden"),g.removeClass("hidden").focus()}var e,f,g,h;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("hideNotification",b),a("showNotification",d)}}}),a.register("4d",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"openTraySignupSignin",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-signup-signin",dontAdd:!0}),APP.pubsub.publish("tray.ereservation.signupsignin.open",null)}},{key:"openTrayRequestValidation",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-request-validation",dontAdd:!0}),APP.pubsub.publish("tray.ereservation.request.validation.open")}},{key:"openTrayRequestConfirm",value:function(){APP.trayController.triggerTray({name:"tray-ereservation-request-confirm"}),APP.pubsub.publish("tray.ereservation-request-confirm.render")}},{key:"saveEreservationData",value:function(b){Drupal.settings.hasOwnProperty("hermes_ereservation")||(Drupal.settings.hermes_ereservation={}),b&&(b.store&&(b.store.street1=a.removeEndingComma(b.store.street1),b.store.street2=a.removeEndingComma(b.store.street2),b.store.street3=a.removeEndingComma(b.store.street3)),Drupal.settings.hermes_ereservation.store=b.store,Drupal.settings.hermes_ereservation.sku=b.sku)}},{key:"getEreservationStore",value:function(){return Drupal.settings.hermes_ereservation.hasOwnProperty("store")&&null!==Drupal.settings.hermes_ereservation.store&&Drupal.settings.hermes_ereservation.store?Drupal.settings.hermes_ereservation.store:null}},{key:"getEreservationSku",value:function(){return Drupal.settings.hermes_ereservation.sku}},{key:"removeEndingComma",value:function(a){return a?a.trim().replace(/,*$/,""):a}}]),a}(),a("EreservationTools",d)}}}),a.register("ec",["17","18","27","1a","1d","2b","1b","1f","2c","4d"],function(a){"use strict";function b(){function a(){var a=Drupal.settings.hermes_restricted_urls,b="";if(a){a.forEach(function(a){b+="("+a+")|"}),b=b.slice(0,-1);var c=new RegExp("/("+b+")");window.location.pathname.match(c)&&(window.location.href="/"+Drupal.settings.hermes_url_locale)}}function b(){d.deleteItem("checkUserSessionToken"),d.deleteItem("newsletterStatus"),d.deleteItem("user"),d.deleteItem("isConnected"),d.deleteItem("sessionNeedsRefresh"),APP.pubsub.publish("account.loggedout.state"),a()}function m(){c.hideLoaderButton(G),c.technicalError(),b()}function n(a){D||(B.$passwordField.parent("div").after('<p class="error-message-copy">\n          <svg nopin="nopin" class="icon-exclamation" aria-hidden="true" focusable="false">\n            <use xlink:href="#exclamation-mark"></use>\n          </svg>\n          <span class="sr-only">'+Drupal.settings.hermes_translations.validation.error_on_input_icon+"</span> "+a+"\n         </p>"),D=C.find(".error-message, .error-message-copy"))}function o(a){if("object"!=typeof a)return void b();if(d.get("cookieEndOfTime")||d.set("cookieEndOfTime",Date.now()+1e3*parseInt(a.lifetime,10)),a.basket&&(APP.basketCount=a.basket.total_items,d.set("changeLanguage",!1),d.set("sessionNeedsRefresh",!1)),a.user){var c=a.user;APP.pubsub.publish(E),c.basket=a.basket,c["mini-wishlist"]=null,d.set("checkUserSessionToken",!0),d.set("user",c),d.set("isConnected",!0)}else b();if(a.basket&&a.basket.items.length){var e=d.get("user")||{};e.basket=a.basket,d.set("user",e),APP.pubsub.publish(H,a),APP.pubsub.publish(I,a)}APP.pubsub.publish("account.loggedin.CheckDone")}function p(){throw d.deleteItem("checkUserSessionToken"),d.deleteItem("user"),d.set("sessionNeedsRefresh",!0),c.hideLoaderButton(G),new Error("Error with service call loggedInCheckFail")}function q(a){var b=a.responseJSON.code;401===b?B.httpSessionEnded():(c.hideLoaderButton(G),c.technicalError())}var r="/is-logged-in",s="3000011",t="/logout",u="/login",v="/openid",w="/unionid",x="ereservation",y=18e5,z=document.querySelector(".tray-content-wrapper"),A=jQuery("#tray-account"),B=this,C=void 0,D=void 0,E="account.loggedin.DOM",F="account.loggedout.DOM",G="loader-sign-in-tray",H="cart.update",I="gtm.basket",J="tray-account",K="account-signed-out";this.init=function(){this.resetPasswordUrlHash(),this.bind()},this.bind=function(){APP.pubsub.subscribe("account.login.call",this.userLogin.bind(this)),APP.pubsub.subscribe("account.login.done",this.preloginDone.bind(this)),APP.pubsub.subscribe("account.logout",this.userLogout.bind(this)),APP.pubsub.subscribe("account.notification.signInReload",this.reloadAfterClick.bind(this)),APP.pubsub.subscribe("account.checkSession",this.checkUserSession.bind(this)),APP.pubsub.subscribe("account.loggedout.state",this.accountLoggedOut.bind(this)),APP.pubsub.subscribe(E,this.handleLoggedIn.bind(this)),APP.pubsub.subscribe(E,this.profileEditHandleNewsletter.bind(this)),APP.pubsub.subscribe(F,this.handleLoggedOut.bind(this)),APP.pubsub.subscribe("account.httpsession.expired",this.httpSessionEnded),APP.pubsub.subscribe("account.httpsession.logged-out",this.httpSessionLoggedOut)},this.toggleTray=function(){this.tray.isOpen?this.tray.close():this.tray.open()},this.userLogin=function(a,b){var c=b.serverReqData;this.loginSource=b.source?b.source:"",C=b.$loginForm,b.$emailField?this.$loginEmailField=b.$emailField:(this.$phoneCodeField=b.$phoneCodeField,c.phonecode=c.phonecode.replace(/ /g,""),this.$phoneNumberField=b.$phoneNumberField,c.phonenumber=c.phonenumber.replace(/ /g,"")),this.$passwordField=b.$passwordField,jQuery.extend(b,{locale:d.get("currentStore")}),this.validator=new i({inputs:C.find("input")}),f(u,c).done(this.loginDone.bind(this)).fail(m.bind(this))},this.preloginDone=function(a,b){this.loginDone(b.jqXHR,b.source)},this.loginFail=function(a){d.deleteItem("newsletterStatus"),d.set("isConnected",!1),g.needPhoneLogin()?(this.validator.throwError({input:this.$phoneNumberField[0],error:Drupal.settings.hermes_translations.inline_notification.login.genericError.text+", "}),jQuery("#hermes-account-login-form-error-loginphone").addClass("hidden"),this.$phoneNumberField.focus()):(this.validator.throwError({input:this.$loginEmailField[0],error:Drupal.settings.hermes_translations.inline_notification.login.genericError.text+", "}),jQuery("#hermes-account-login-form-error-email").addClass("hidden"),this.$loginEmailField.focus()),this.validator.throwError({input:this.$passwordField[0],error:Drupal.settings.hermes_translations.inline_notification.login.genericError.text}),this.validator.scrollToError(),APP.pubsub.publish(F,{reason:"loginFail"}),"checkout"===this.loginSource?k.formSuccess("Checkout_login","PasswordOK","PasswordKO",a,"login"):this.loginSource===x?k.ereservationLogin(a):k.formSuccess("Account","SigninOK","SigninKO",a,"login"),c.hideLoaderButton(G),c.hideOverlay()},this.loginDone=function(a,e){var h="wechat",i="#loginButton";"object"!=typeof a&&(c.technicalError(),b());var m=void 0,q=Drupal.settings.hermes_translations.inline_notification.login.genericError.text;if(this.clearAngularCheckout(),a.error)if(a.error.internal_code){var s=a.error.internal_code;switch(s){case"2300001":m=g.needSmsProvider()?"Wrong phone number - "+q:"Wrong email - "+q,this.loginFail(m);break;case"2310001":m="Wrong password - "+q,this.loginFail(m);break;case"3100001":m="User is blocked",this.loginFail(m),APP.pubsub.publish("analytics.oops.error",{path:window.location.pathname,message:Drupal.settings.hermes_translations.notification.account.loginCodes[3100001].description}),jQuery(".alert").show(),jQuery(".alert-message").empty().append(Drupal.settings.hermes_translations.notification.account.loginCodes[s].title+" "+Drupal.settings.hermes_translations.notification.account.loginCodes[s].description),jQuery(".alert-link").empty().append(Drupal.settings.hermes_translations.notification.account.loginCodes[s].variables.link1),jQuery(".alert").attr("role","alert"),jQuery(".alert").attr("aria-live","assertive"),jQuery("#link-tray-help").focus(),jQuery(i).addClass("disabled"),document.getElementById("loginButton").disabled=!0,setTimeout(function(){jQuery(".alert").hide(),document.getElementById("loginButton").disabled=!1,jQuery(i).removeClass("disabled")},y);break;default:this.inlineMessageGenericError()}}else c.hideLoaderButton(G),c.technicalError(),b();if(a.user)if(this.$passwordField&&this.$passwordField.val().length<8)n(q),m="Wrong password - "+q,this.loginFail(m);else{var t=a.user;if(d.set("isConnected",!0),window.APP.NOTIFICATIONS.messages={prefix:t.prefix,firstname:t.firstname,lastname:t.lastname},c.hideLoaderButton(G),j.showNotification(J,"login"),Object.prototype.hasOwnProperty.call(a.user,"new_account")||(a.user.new_account=0),"create"!==e&&!a.user.new_account&&a.user.wechatlinked&&j.showNotification("tray-wechat-binding","wechat-binding"),t.cart=null,t["mini-wishlist"]=null,t.basket=a.basket,d.set("user",t),d.set("checkUserSessionToken",!0),d.set("returningUser",!0),e===h&&d.get("user")&&(APP.pubsub.publish(H,{basket:d.get("user").basket}),APP.pubsub.publish(I,{basket:d.get("user").basket})),e===x&&APP.pubsub.publish(E),e!==h&&e!==x&&(APP.pubsub.publish(E),k.pushEvent("Checkout_login","LoginOK",null,null,null)),t.newsletter_subscription&&null!==t.newsletter_subscription&&d.set("newsletterStatus","subscribed"),APP.pubsub.publish(H,a),"WeChat"===a.user.device.device&&a.user.social.authorize_url)return d.set("social_login_from_checkout","checkout"===this.loginSource),d.set("registerSocialContextUrl",window.location.href),void(window.location.href=a.user.social.authorize_url);if(e!==h)if("checkout"===this.loginSource)window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/",k.formSuccess("Checkout_login","PasswordOK","PasswordKO",null,"login");else if(this.loginSource===x)k.ereservationLogin(),l.openTrayRequestConfirm();else{f(r,{},"GET").done(o).fail(p),k.formSuccess("Account","SigninOK","SigninKO",null,"login");var u=d.get("close-account");u&&(d.deleteItem("close-account"),APP.trayController.popStack())}else!function(){var a=void 0;d.get("social_login_from_checkout")===!0?(a="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/",k.formSuccess("Checkout_login","PasswordOK","PasswordKO",null,"login")):a=d.get("registerSocialContextUrl"),setTimeout(function(){window.location.href=a},4e3)}()}},this.inlineMessageGenericError=function(){d.deleteItem("user"),d.deleteItem("newsletterStatus"),d.deleteItem("checkUserSessionToken"),d.set("isConnected",!1);var a=Drupal.settings.hermes_translations.inline_notification.login.genericError.text;g.needSmsProvider()?(this.validator.throwError({input:this.$phoneNumberField[0],error:a+", "}),this.$phoneNumberField.closest("div").find(".error-loginphone").addClass("hidden"),this.$phoneNumberField.focus()):(this.validator.throwError({input:this.$loginEmailField[0],error:a+", "}),this.$loginEmailField.closest("div").find(".error-email").addClass("hidden"),this.$loginEmailField.focus()),this.validator.throwError({input:this.$passwordField[0],error:a}),this.validator.scrollToError(),APP.pubsub.publish(F),c.hideOverlay(),APP.trayController.triggerTray({name:J,dontAdd:!0}),"checkout"===this.loginSource?(APP.pubsub.publish("tray.create-account.toggle",{source:"checkout",errorMessage:a}),k.formSuccess("Checkout_login","PasswordOK","PasswordKO",a,"login")):this.loginSource===x?k.ereservationLogin(a):k.formSuccess("Account","SigninOK","SigninKO",a,"login")},this.userLogout=function(){f(t).done(this.logoutDone.bind(this)).fail(q.bind(this))},this.clearAngularCheckout=function(){localStorage.removeItem("checkout")},this.logoutDone=function(b){var c=b.user;this.clearAngularCheckout(),c?(window.APP.NOTIFICATIONS.messages={prefix:c.prefix,firstname:c.firstname,lastname:c.lastname},j.showNotification(J,"logout"),A.attr("aria-atomic",!0),d.deleteItem("user"),d.deleteItem("newsletterStatus"),d.deleteItem("checkUserSessionToken"),d.set("isConnected",!1),APP.pubsub.publish(F,{reason:"userLogout"}),a()):this.httpSessionEnded()},this.accountLoggedOut=function(){window.csrfEnabled=!0,APP.pubsub.publish("csrfToken.headerAdded"),z.classList.add(K)},this.httpSessionLoggedOut=function(){a()},this.httpSessionEnded=function(){var a=d.get("currentCountry"),b={message:Drupal.settings.hermes_translations.notification.sessionEnd,messageVariables:{country:Drupal.settings.hermes_translations.countries[a]},type:"critical"};jQuery.extend(b.messageVariables,Drupal.settings.hermes_translations.notification.sessionEnd.variables),c.showMessage(b),d.deleteItem("isConnected"),d.deleteItem("user"),d.deleteItem("newsletterStatus"),d.deleteItem("checkUserSessionToken"),d.deleteItem("productHistory"),APP.pubsub.publish(F,{reason:"sessionEnd"})},this.checkUserSession=function(){d.get("cookieEndOfTime")<Date.now()&&(d.set("sessionNeedsRefresh",!0),d.deleteItem("cookieEndOfTime")),g.findGetParameter("code")&&this.handleWechatSocialId(),d.get("sessionNeedsRefresh")||d.get("changeLanguage")&&d.get("isConnected")||d.get("changeLanguage")&&!d.get("sessionNeedsRefresh")?f(r,{},"GET",!0).done(o).fail(p):APP.pubsub.publish(E)},this.handleWechatSocialId=function(){var a={code:g.findGetParameter("code")};1===d.get("social_login")?(c.init(),c.showLoader(),f(w,a).done(this.unionIdDone.bind(this)).fail(this.openidError.bind(this))):f(v,a).done(this.openidDone.bind(this)).fail(this.openidError.bind(this));
},this.openidDone=function(a){if(a.openid){if(d.set("openid",a.openid),d.get("social_login_from_checkout")===!0)return void(window.location.href="/"+Drupal.settings.hermes_url_locale+"/"+Drupal.settings.hermes_translations.url.checkout+"/");if(d.get("registerSocialContextUrl")&&!d.get("registerSocialContextUrl").includes("/"+Drupal.settings.hermes_translations.url.account_create))return void(window.location.href=d.get("registerSocialContextUrl"))}},this.unionIdDone=function(a){var b=d.get("user");return a.is_binded_wechat?(b.is_binded_wechat=a.is_binded_wechat,d.set("user",b),jQuery("#profile-content").html(e.render(APP.templates.userProfileAsia,b)),c.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.linkWechat,messageVariables:window.Drupal.settings.hermes_translations.notification.account.linkWechat.variables}),void APP.trayController.getTray({name:"tray-edit-profile"}).open()):(a.openid&&d.set("openid",a.openid),d.deleteItem("social_login"),void(1===a.success?(d.set("wechat_social_login",!0),APP.trayController._getTrayInstance({name:"tray-wechat-binding"}).open(),c.hideOverlay()):a.error&&a.error.internal_code===s?c.showMessage({message:window.Drupal.settings.hermes_translations.notification.account.linkWechatError,messageVariables:window.Drupal.settings.hermes_translations.notification.account.linkWechatError.variables}):(c.hideOverlay(),0===a.success?this.openidError(a):(APP.trayController.triggerTray({name:J}),delete a.user.social,APP.pubsub.publish("account.login.done",{jqXHR:a,source:"wechat"})))))},this.openidError=function(){c.technicalError()},this.handleLoggedIn=function(){window.csrfEnabled=!0,APP.pubsub.publish("csrfToken.headerAdded"),z&&(z.classList.remove(K),z.classList.add("account-signed-in"),d.get("user")&&(APP.pubsub.publish(H,{basket:d.get("user").basket}),APP.pubsub.publish(I,{basket:d.get("user").basket})))},this.handleLoggedOut=function(){z.classList.remove("account-signed-in"),z.classList.add(K)},this.profileEditHandleNewsletter=function(){if(jQuery(".page-profile").length){var a=d.get("user"),b=jQuery(".newsletter-block").parent();a.newsletter_subscription?(document.querySelector(".block-profile").classList.remove("not-subscribed"),b.removeClass("colored-background")):(document.querySelector(".block-profile").classList.add("not-subscribed"),b.addClass("colored-background"))}},this.reloadAfterClick=function(){window.location.reload()},this.resetPasswordUrlHash=function(){Drupal.settings.hermes_account&&Drupal.settings.hermes_account.reset_password_hash&&APP.pubsub.subscribe("app.start",function(){APP.trayController.triggerTray({name:"tray-create-password",dontAdd:!0}),APP.pubsub.publish("tray.password.toggle")})},this.init(),APP.pubsub.subscribe("app.start",function(){new h})}var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a},function(a){k=a.default},function(a){l=a.EreservationTools}],execute:function(){a("default",b)}}}),a.register("ed",["18","1d"],function(a){"use strict";function b(){function a(a,b){var c=jQuery(b),d=jQuery(c.find("option")[0]),e=d.val();""===e&&"month"!==c.attr("name")&&(d.prop("disabled","disabled"),c.prop("selectedIndex")||d.attr("selected","selected"))}function b(a){var b=a.currentTarget,c=void 0,d=void 0;b.selectedIndex!==-1&&(c=b.options[b.selectedIndex].innerHTML,d=b.parentNode.querySelector(".label"),d&&(d.innerHTML=c))}jQuery("select").each(a),jQuery(document).on("change","select",b),jQuery(document).on("change","#edit-subject-list",function(){if(jQuery("#contact-us-form-content").addClass("hidden"),"-1"!==jQuery("#edit-subject-list").val()){jQuery("#contact-us-form-content").removeClass("hidden");var a=c.get("currentCountry").toUpperCase();"JP"===a&&(jQuery("#edit-subject-list").val()===Drupal.settings.hermes_translations.emailReasonFurniture?jQuery("#contact-us-form-content .region-tray-email").removeClass("hidden"):jQuery("#contact-us-form-content .region-tray-email").addClass("hidden")),d.trapFocusInTray(jQuery("#tray-email"))}})}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.register("ee",[],function(a){"use strict";function b(a){jQuery(".ink").remove();var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=a.currentTarget.querySelector(".ink");if(!g){var h=a.currentTarget,i=document.createElement("span");i.classList.add("ink"),h.appendChild(i),g=h.insertBefore(i,h.firstChild)}g.classList.remove("animate"),f=a&&a.currentTarget?a.currentTarget.getBoundingClientRect():null,f&&(b=Math.max(f.width,f.height),g.style.height=b+"px",g.style.width=b+"px",e=jQuery(a.currentTarget).offset(),c=a.pageX-e.left-b/2,d=a.pageY-e.top-b/2,g.classList.add("animate"),g.style.top=d+"px",g.style.left=c+"px")}return a("default",b),{setters:[],execute:function(){}}}),a.register("83",[],function(a){"use strict";function b(a){if(a&&a.matches&&(a.point||a.currentTarget&&a.currentTarget.point)){var b=a.point||a.currentTarget.point;APP.pubsub.publish("mediaQuery."+b)}}function c(){var a="";for(var c in i)i[c]&&(a=window.matchMedia(i[c]),a.point=c,b(a),a.addListener(b))}function d(){return window.matchMedia(i.small).matches}function e(){return window.matchMedia(i.medium).matches}function f(){return window.matchMedia(i.large).matches}function g(){return window.matchMedia(i.xlarge).matches}function h(){return window.matchMedia(i.xxlarge).matches}var i;return{setters:[],execute:function(){i={small:"(max-width: 767px)",medium:"(min-width: 768px) and (max-width: 1023px)",large:"(min-width: 1024px) and (max-width: 1279px)",xlarge:"(min-width: 1280px) and (max-width: 1679px)",xxlarge:"(min-width: 1680px)"},a("init",c),a("isSmall",d),a("isMedium",e),a("isLarge",f),a("isXLarge",g),a("isXXLarge",h)}}}),a.registerDynamic("ef",[],!0,function(a,b,c){"format cjs";this||self;!function(a,d){function e(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function f(a){return n?n(a):"[object Array]"===o.call(a)}function g(a){return a&&"[object Object]"===o.call(a)}function h(a,b){var c;a=a||{},b=b||{};for(c in b)b.hasOwnProperty(c)&&null==a[c]&&(a[c]=b[c]);return a}function i(a,b,c){var d,e,f=[];if(!a)return f;if(m&&a.map===m)return a.map(b,c);for(d=0,e=a.length;d<e;d++)f[d]=b.call(c,a[d],d,a);return f}function j(a,b){return a=Math.round(Math.abs(a)),isNaN(a)?b:a}function k(a){var b=l.settings.currency.format;return"function"==typeof a&&(a=a()),e(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:e(b)?l.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var l={};l.version="0.4.1",l.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var m=Array.prototype.map,n=Array.isArray,o=Object.prototype.toString,p=l.unformat=l.parse=function(a,b){if(f(a))return i(a,function(a){return p(a,b)});if(a=a||0,"number"==typeof a)return a;b=b||l.settings.number.decimal;var c=new RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(d)?0:d},q=l.toFixed=function(a,b){b=j(b,l.settings.number.precision);var c=Math.pow(10,b);return(Math.round(l.unformat(a)*c)/c).toFixed(b)},r=l.formatNumber=l.format=function(a,b,c,d){if(f(a))return i(a,function(a){return r(a,b,c,d)});a=p(a);var e=h(g(b)?b:{precision:b,thousand:c,decimal:d},l.settings.number),k=j(e.precision),m=a<0?"-":"",n=parseInt(q(Math.abs(a||0),k),10)+"",o=n.length>3?n.length%3:0;return m+(o?n.substr(0,o)+e.thousand:"")+n.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(k?e.decimal+q(Math.abs(a),k).split(".")[1]:"")},s=l.formatMoney=function(a,b,c,d,e,m){if(f(a))return i(a,function(a){return s(a,b,c,d,e,m)});a=p(a);var n=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:e,format:m},l.settings.currency),o=k(n.format),q=a>0?o.pos:a<0?o.neg:o.zero;return q.replace("%s",n.symbol).replace("%v",r(Math.abs(a),j(n.precision),n.thousand,n.decimal))};l.formatColumn=function(a,b,c,d,m,n){if(!a)return[];var o=h(g(b)?b:{symbol:b,precision:c,thousand:d,decimal:m,format:n},l.settings.currency),q=k(o.format),s=q.pos.indexOf("%s")<q.pos.indexOf("%v"),t=0,u=i(a,function(a,b){if(f(a))return l.formatColumn(a,o);a=p(a);var c=a>0?q.pos:a<0?q.neg:q.zero,d=c.replace("%s",o.symbol).replace("%v",r(Math.abs(a),j(o.precision),o.thousand,o.decimal));return d.length>t&&(t=d.length),d});return i(u,function(a,b){return e(a)&&a.length<t?s?a.replace(o.symbol,o.symbol+new Array(t-a.length+1).join(" ")):new Array(t-a.length+1).join(" ")+a:a})},"undefined"!=typeof b?("undefined"!=typeof c&&c.exports&&(b=c.exports=l),b.accounting=l):"function"==typeof d&&define.amd?define([],function(){return l}):(l.noConflict=function(b){return function(){return a.accounting=b,l.noConflict=d,l}}(a.accounting),a.accounting=l)}(this)}),a.registerDynamic("50",["ef"],!0,function(a,b,c){this||self;c.exports=a("ef")}),a.register("4e",["3","4","38"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.ProductLocatorTools}],execute:function(){"use strict";e=function(){function a(){c(this,a)}return b(a,null,[{key:"pushEvent",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],d=arguments.length<=3||void 0===arguments[3]?null:arguments[3],e=arguments.length<=4||void 0===arguments[4]?null:arguments[4],f=arguments.length<=5||void 0===arguments[5]?null:arguments[5],g={};g.event="uaevent",a&&(g.eventcategory=a),b&&(g.eventaction=b),c&&(g.eventlabel=c),d&&(g.eventvalue=d),e&&(g.virtualpageuri=e),f&&(g.pagetype=f),dataLayer.push(g)}},{key:"trackReserveInStoreClick",value:function(b,c,d){b&&c&&d&&a.pushEvent("Product_locator","Reserve in store",d+"_"+b,c)}},{key:"trackContinueExperienceClick",value:function(b){b&&a.pushEvent("Eresa","Eresa_confirmation_experience_button",b)}},{key:"getAvailabilityHitLabel",value:function(a){return d.isAvailableStockHCom(a)&&d.isAvailableStockRetail(a)?"ecom_store":d.isAvailableStockHCom(a)?"ecom":d.isAvailableStockRetail(a)?"store":"unavailable"}},{key:"trackConfirmEreservationClick",value:function(b){b&&a.pushEvent("Eresa","Eresa_confirm_button",b)}},{key:"trackEreservationCreated",value:function(b){if(b){var c="/"+Drupal.settings.pathPrefix+"eresa_confirmation";a.pushEvent("Eresa","Eresa_confirmation",b,null,c,"eresa")}}}]),a}(),a("default",e)}}}),a.registerDynamic("f0",[],!0,function(a,b,c){this||self;c.exports=function(){}}),a.registerDynamic("f1",[],!0,function(a,b,c){this||self;c.exports=function(a,b){return{value:b,done:!!a}}}),a.registerDynamic("d6",["70"],!0,function(a,b,c){var d=(this||self,a("70"));c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}}),a.registerDynamic("a8",["d6","f2"],!0,function(a,b,c){var d=(this||self,a("d6")),e=a("f2");c.exports=function(a){return d(e(a))}}),a.registerDynamic("f3",["f0","f1","c8","a8","f4"],!0,function(a,b,c){"use strict";var d=(this||self,a("f0")),e=a("f1"),f=a("c8"),g=a("a8");c.exports=a("f4")(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")}),a.registerDynamic("80",["f3","c8"],!0,function(a,b,c){this||self;a("f3");var d=a("c8");d.NodeList=d.HTMLCollection=d.Array});a.registerDynamic("c9",[],!0,function(a,b,c){var d=(this||self,Math.ceil),e=Math.floor;c.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}});a.registerDynamic("f5",["c9","f2"],!0,function(a,b,c){var d=(this||self,a("c9")),e=a("f2");c.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}}),a.registerDynamic("78",[],!0,function(a,b,c){this||self;c.exports=!0}),a.registerDynamic("73",["f6"],!0,function(a,b,c){this||self;c.exports=a("f6")}),a.registerDynamic("b9",[],!0,function(a,b,c){this||self;c.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),a.registerDynamic("76",["b6"],!0,function(a,b,c){this||self;c.exports=!a("b6")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),a.registerDynamic("f6",["75","b9","76"],!0,function(a,b,c){var d=(this||self,a("75")),e=a("b9");c.exports=a("76")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}}),a.registerDynamic("f7",["75","b9","7b","f6","69"],!0,function(a,b,c){"use strict";var d=(this||self,a("75")),e=a("b9"),f=a("7b"),g={};a("f6")(g,a("69")("iterator"),function(){return this}),c.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}}),a.registerDynamic("b5",[],!0,function(a,b,c){var d=(this||self,{}.hasOwnProperty);c.exports=function(a,b){return d.call(a,b)}}),a.registerDynamic("7b",["75","b5","69"],!0,function(a,b,c){var d=(this||self,a("75").setDesc),e=a("b5"),f=a("69")("toStringTag");c.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}}),a.registerDynamic("f4",["78","42","73","f6","b5","c8","f7","7b","75","69"],!0,function(a,b,c){"use strict";var d=(this||self,a("78")),e=a("42"),f=a("73"),g=a("f6"),h=a("b5"),i=a("c8"),j=a("f7"),k=a("7b"),l=a("75").getProto,m=a("69")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};c.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}}),a.registerDynamic("7f",["f5","f4"],!0,function(a,b,c){"use strict";var d=(this||self,a("f5")(!0));a("f4")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})}),a.registerDynamic("6e",[],!0,function(a,b,c){this||self;c.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),a.registerDynamic("63",["6e"],!0,function(a,b,c){var d=(this||self,a("6e"));c.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}}),a.registerDynamic("70",[],!0,function(a,b,c){var d=(this||self,{}.toString);c.exports=function(a){return d.call(a).slice(8,-1)}}),a.registerDynamic("79",["70","69"],!0,function(a,b,c){var d=(this||self,a("70")),e=a("69")("toStringTag"),f="Arguments"==d(function(){return arguments}());c.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}}),a.registerDynamic("b7",["6c"],!0,function(a,b,c){var d=this||self,d=a("6c"),e="__core-js_shared__",f=d[e]||(d[e]={});c.exports=function(a){return f[a]||(f[a]={})}}),a.registerDynamic("b8",[],!0,function(a,b,c){var d=(this||self,0),e=Math.random();c.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}}),a.registerDynamic("69",["b7","b8","6c"],!0,function(a,b,c){var d=(this||self,a("b7")("wks")),e=a("b8"),f=a("6c").Symbol;c.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}}),a.registerDynamic("c8",[],!0,function(a,b,c){this||self;c.exports={}}),a.registerDynamic("65",["79","69","c8","45"],!0,function(a,b,c){var d=(this||self,a("79")),e=a("69")("iterator"),f=a("c8");c.exports=a("45").getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}}),a.registerDynamic("f8",["63","65","45"],!0,function(a,b,c){var d=(this||self,a("63")),e=a("65");c.exports=a("45").getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}}),a.registerDynamic("f9",["80","7f","f8"],!0,function(a,b,c){this||self;a("80"),a("7f"),c.exports=a("f8")}),a.registerDynamic("4a",["f9"],!0,function(a,b,c){this||self;c.exports={default:a("f9"),__esModule:!0}}),a.registerDynamic("fa",[],!0,function(a,b,c){"format cjs";this||self;!function(a,d){"use strict";var e={};a.PubSub=e,d(e),"object"==typeof b&&(void 0!==c&&c.exports&&(b=c.exports=e),b.PubSub=e,c.exports=b=e)}("object"==typeof window&&window||this,function(a){"use strict";function b(a){var b;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!0;return!1}function c(a){return function(){throw a}}function d(a,b,d){try{a(b,d)}catch(a){setTimeout(c(a),0)}}function e(a,b,c){a(b,c)}function f(a,b,c,f){var g,h=k[b],i=f?e:d;if(Object.prototype.hasOwnProperty.call(k,b))for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&i(h[g],a,c)}function g(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(f(a,a,b,c);e!==-1;)d=d.substr(0,e),e=d.lastIndexOf("."),f(a,d,b,c);f(a,m,b,c)}}function h(a){var c=String(a),d=Boolean(Object.prototype.hasOwnProperty.call(k,c)&&b(k[c]));return d}function i(a){for(var b=String(a),c=h(b)||h(m),d=b.lastIndexOf(".");!c&&d!==-1;)b=b.substr(0,d),d=b.lastIndexOf("."),c=h(b);return c}function j(a,b,c,d){a="symbol"==typeof a?a.toString():a;var e=g(a,b,d),f=i(a);return!!f&&(c===!0?e():setTimeout(e,0),!0)}var k={},l=-1,m="*";a.publish=function(b,c){return j(b,c,!1,a.immediateExceptions)},a.publishSync=function(b,c){return j(b,c,!0,a.immediateExceptions)},a.subscribe=function(a,b){if("function"!=typeof b)return!1;a="symbol"==typeof a?a.toString():a,Object.prototype.hasOwnProperty.call(k,a)||(k[a]={});var c="uid_"+String(++l);return k[a][c]=b,c},a.subscribeAll=function(b){return a.subscribe(m,b)},a.subscribeOnce=function(b,c){var d=a.subscribe(b,function(){a.unsubscribe(d),c.apply(this,arguments)});return a},a.clearAllSubscriptions=function(){k={}},a.clearSubscriptions=function(a){var b;for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&delete k[b]},a.countSubscriptions=function(a){var b,c=0;for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&c++;return c},a.getSubscriptions=function(a){var b,c=[];for(b in k)Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a)&&c.push(b);return c},a.unsubscribe=function(b){var c,d,e,f=function(a){var b;for(b in k)if(Object.prototype.hasOwnProperty.call(k,b)&&0===b.indexOf(a))return!0;return!1},g="string"==typeof b&&(Object.prototype.hasOwnProperty.call(k,b)||f(b)),h=!g&&"string"==typeof b,i="function"==typeof b,j=!1;if(g)return void a.clearSubscriptions(b);for(c in k)if(Object.prototype.hasOwnProperty.call(k,c)){if(d=k[c],h&&d[b]){delete d[b],j=b;break}if(i)for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&d[e]===b&&(delete d[e],j=!0)}return j}})}),a.registerDynamic("fb",["fa"],!0,function(a,b,c){this||self;c.exports=a("fa")}),a.registerDynamic("fc",["fd"],!0,function(a,b,c){"format cjs";this||self;!function(a){!function(a,c){"object"==typeof b&&b&&"string"!=typeof b.nodeName?c(b):(a.Mustache={},c(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;F<G;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;e<f;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;g<h;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;i<j;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;j<k;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);if(!e||p(e)&&0===e.length)return this.renderTokens(a[4],b,c,d)},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return a.escape(d)},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.3.2",a.tags=["{{","}}"];var y=new n;return a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n,a})}(a("fd").Buffer)}),a.registerDynamic("27",["fc"],!0,function(a,b,c){this||self;c.exports=a("fc")}),a.register("17",["27","fb"],function(a){"use strict";function b(){B||(A=APP.templates.notification,B=document.querySelector(".notification"),D=B.querySelector(".loading-animation"),E=B.querySelector(".message-wrapper"),C=!1,jQuery(document).off("click keydown",".notification-overlay",m).on("click keydown",".notification-overlay",m),jQuery(document).off("click",".js-try-again",l).on("click",".js-try-again",l))}function c(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];clearTimeout(F),t(!0),B&&(o(),g(),h(a))}function d(a){jQuery("."+a).addClass("loader-animation"),jQuery("."+a).addClass("visible-loader-button")}function e(a){jQuery("."+a).removeClass("loader-animation"),jQuery("."+a).removeClass("visible-loader-button")}function f(a){y.text(a),setTimeout(function(){return y.fadeIn("slow")},500),setTimeout(function(){return y.fadeOut("slow")},5500)}function g(){TweenLite.to(B,.2,{autoAlpha:1,ease:window.Power2.easeInOut})}function h(a){jQuery(B).addClass("loader");var b=void 0;b=Drupal.settings.pathTheme?Drupal.settings.pathTheme+"/img/loader":document.querySelector(".login-block-wrapper").getAttribute("data-loaderpath");var c=Math.floor(6*Math.random()),d=".gif";D.style.backgroundImage="url("+b+"-"+c+d+")",TweenLite.set(D,{opacity:1}),a&&u()}function i(){jQuery(B).removeClass("loader"),TweenLite.to(D,.2,{opacity:0,ease:window.Power2.easeInOut})}function j(a){if(a.type&&B.setAttribute("data-type",a.type),a.extraclass&&jQuery(B).addClass(a.extraclass),clearTimeout(F),!a.message)throw new Error("showMessage: Cant show notification without content.");if(u(),a.inject)setTimeout(function(){E.innerHTML=a.message,g()},150);else{var b=w.render(A,a.message);a.messageVariables&&(b=w.render(b,a.messageVariables),b=w.render(b,{locale:Drupal.settings.hermes_url_locale})),a.showSpinner||i(),o(),E.innerHTML=b,g(),a.afterRender&&a.afterRender(),"critical"!==a.type&&"super-critical"!==a.type&&k(a.callback)}}function k(a){clearTimeout(F),F=setTimeout(function(){i(),n(),a&&"function"==typeof a&&a()},z)}function l(a){a.preventDefault(),n()}function m(a){a&&"super-critical"!==B.getAttribute("data-type")&&jQuery(".message-wrapper").html().length&&("click"===a.type||27===a.keyCode)&&n()}function n(){clearTimeout(F),B&&(TweenLite.to(B,.2,{autoAlpha:0,ease:window.Power2.easeInOut,onComplete:o}),v(),setTimeout(function(){t(!1)},200))}function o(){E&&(E.innerHTML="",D.style.backgroundImage="")}function p(){var a={message:Drupal.settings.hermes_translations.notification.incognitoError,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.incognitoError.variables),j(a)}function q(a){var b={message:Drupal.settings.hermes_translations.notification.account.errorMessage,messageVariables:{},type:"critical",afterRender:function(){a&&jQuery(".notification").find(".js-try-again").off("click.notification").on("click.notification",function(b){a(b)})}};jQuery.extend(b.messageVariables,Drupal.settings.hermes_translations.notification.account.errorMessage.variables),j(b);var c=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:c,message:b.message.description})}function r(){var a={message:Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific,messageVariables:{},type:"critical"};jQuery.extend(a.messageVariables,Drupal.settings.hermes_translations.notification.account.technicalErrorSpecific.variables),j(a);var b=window.location.pathname+window.location.search;APP.pubsub.publish("analytics.oops.error",{path:b,message:a.message.description})}function s(){return C}function t(a){C=a}function u(){document.body.classList.add("body-noscroll")}function v(){document.body.classList.remove("body-noscroll")}var w,x,y,z,A,B,C,D,E,F;return{setters:[function(a){w=a.default},function(a){x=a.default}],execute:function(){y=jQuery("#cart-notification"),z=4e3,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||x,APP.pubsub.subscribe("app.start",b),a("init",b),a("noIncognito",p),a("showLoader",c),a("showLoaderButton",d),a("hideLoaderButton",e),a("showCartNotification",f),a("showMessage",j),a("clearNotification",k),a("hideOverlay",n),a("technicalError",q),a("isLocked",s),a("setLock",t),a("technicalErrorSpecific",r)}}}),a.register("37",["3","4"],function(a){function b(){if(!e)return"en";var a=e.location.pathname.match("/[a-z]{2}/([a-z]{2})/");if(a&&a[1])return a[1];if(e.location.search&&window.URLSearchParams){var b=new window.URLSearchParams(e.location.search),c=b.get("locale");if(!c)return"en";if(c=c.split("_"),c[1])return c[1]}return"en"}var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=window&&"undefined"==typeof window.document?0:window.document,f={map:{API_KEY:"gme-hermesinternational",URL:"https://maps.googleapis.com/maps/api/js?client=gme-hermesinternational&libraries=places",pins:{store:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6IzQ0NDQ0NDt9LnN0MXtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuMiwwQzUsMCwwLDUsMCwxMS4yYzAsMi42LDAuOCw1LDIuNCw3bDcuMiw5bDEuNiwybDEuNi0ybDUuOC03LjRsMS4yLTEuNmMxLjYtMiwyLjQtNC40LDIuNC03QzIyLjIsNSwxNy4yLDAsMTEuMiwweiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4NCjwvc3ZnPg0KDQo=",size:{x:22,y:29},anchor:{x:11,y:29}},clickedStore:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjI5cHgiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojOWE5YTlhO30uc3Qxe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExLjIsMEM1LDAsMCw1LDAsMTEuMmMwLDIuNiwwLjgsNSwyLjQsN2w3LjIsOWwxLjYsMmwxLjYtMmw1LjgtNy40bDEuMi0xLjZjMS42LTIsMi40LTQuNCwyLjQtN0MyMi4yLDUsMTcuMiwwLDExLjIsMHoiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTEuMiIgY3k9IjExLjYiIHI9IjIiLz4KPC9zdmc+",size:{x:22,y:29},anchor:{x:11,y:29}},user:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAABQCAMAAABVumeJAAAAYFBMVEVMaXHpj4fibWTojYXaTEHeWU7rnpfso53vsa3eX1TURDjicmjkeG/kfnXmhHvXPzHYQjbdTUHSOCvZRTjfUEXdSD7hVEjbRzrhV0xuNC/FRjyCODK2QjhyNjFqMi6UPDSgygjXAAAAD3RSTlMAXLV37+JEKhHN+p6MhaGQa3UDAAACi0lEQVR4AY3Th46sMAyFYVPS6IQ6/f3f8lqxljmKGG7+LWqfjswUijNZkzulXN5khi4zrdvnMbQs46ga85vW+zyv6xwauW1bcn1KbbOvkmCZH5bansy6dd2Fz6CZKx1brZie4mUqs8iWu3SCt2lATUbtF3ibRrjEuvWwZ3gbSnPgbt6vlrk+/7PZChZeOsBTX8ARl1cw/jukmL92/4Wnvg7DKh4+xTKdzUBhOMJydT6v0jHM/0bmYANWlgybPfyEmI7Pz+PxeY4zDHPDZEjPog57f9xCjydiuaMdkbJ93V6h2+0p9sA55SMLkdxaiRV9h2HGjhxjKQx/xIbeHxyeBkVqxsYXdHvdF7BDGeH7C3s/r/B6v8HuTfAEeIQjYJk1YraM3TJ+myvY5e443CvKtxH18WowfX/AMnbUAubkdWYbhhc4Yuhr0ngG92Qtu+HiCXBGtgS9cPfHO/SI7WCI8okFtsmnrlqEBisnE2WAD78t8AoL9gVjq1AHJEXD8o0thsOJRCqW8zVxMo0stjDM0/12QSXfkGTVEFO0MmxJogwwSLC+oKO8R4lW8o6+mXIAE8/yjyao6E+p4D48HeT6iKJVFikeElNOo5RDUKL1HbDjEHCHHOAIyGwRDa8DD+MRcEg0G/I1nWUda6BycGnpNN33IGXbZ/Sj3AMU6+hXugJ5MSx1ngHanH5nKqScpotymb68GF+QpIslB9PyGl+UIW7pOouPaK6tPCI+XuIdvvgvtuUfrviKlDsSrpAKH6j3bQI2lZc0JeTEKkqpEVwnYS04S8K29Jy8cIlHK0qrlZPT0uknyyvdG0pMefncJ5V7n1NqhXwwkp8wS8bGe5OMbVXZdFyW6Zico7P+AbjAlYsTQvYhAAAAAElFTkSuQmCC",
size:{x:44,y:80},scaled:{x:22,y:40},anchor:{x:11,y:40}},HERMES_PIN:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgLTEgMjcgMzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI2LjkyMiAxMy42MThDMjYuOTIyIDYuMDk4IDIwLjg5NSAwIDEzLjQ2MiAwIDYuMDI3IDAgMCA2LjEgMCAxMy42MThjMCAzLjIxOCAxLjEwMyA2LjE3NCAyLjk1IDguNTA1aC0uMDA0YzMuNDc3IDQuMzkyIDguMzg4IDEwLjYwMiA5Ljk4NSAxMi42MjMuMTM1LjE2LjMyNi4yNTQuNTMyLjI1NC4yMDQgMCAuMzk1LS4wOTMuNTMtLjI1NGw5Ljk4LTEyLjYxN2MuMDAzIDAgLjAwMy0uMDA0LjAwMy0uMDA0bC0uMDAzLS4wMDNjMS44NDUtMi4zMyAyLjk1LTUuMjg3IDIuOTUtOC41MDUiIGZpbGw9IiM0NDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMTBoNC4wMDZ2MS40MjJoLTEuMjZ2Mi40MzJoNC41MDZ2LTIuNDMyaC0xLjI2OFYxMEgxOXYxLjQyMmgtMS4yOHY3LjE2SDE5VjIwaC00LjAxNnYtMS40MTdoMS4yNjh2LTMuMzJsLTQuNTA2LS4wMDJ2My4zMjNoMS4yNlYyMEg5di0xLjQxN2gxLjI3N3YtNy4xNkg5Ii8+PC9zdmc+",cluster:{data:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyOSI+PHN0eWxlPi5zdDB7ZmlsbDojNDQ0NDQ0O308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yIDBDNSAwIDAgNSAwIDExLjJjMCAyLjYuOCA1IDIuNCA3bDcuMiA5IDEuNiAyIDEuNi0yIDUuOC03LjQgMS4yLTEuNmMxLjYtMiAyLjQtNC40IDIuNC03IDAtNi4yLTUtMTEuMi0xMS0xMS4yeiIvPjwvc3ZnPg=="}}}},g={baidu:{map:{pins:f.map.pins,API_KEY:"",URL:""}},google:f,hermes:{store:{languages:{fr:"fre-FR",en:"eng-GB",de:"ger-DE",es:"esl-ES",zh:"chi-CN",it:"ita-IT",ja:"jpn-JP",ko:"kor-KR"},language:b(),URL:"/sites/all/modules/custom/hermes_store_locator/includes/stores.json",ACCESS_TOKEN:"$/+8KDDU334$4a<C2M(6/<bhGyneX.e8i:6?&[57#n3h8=}z?*5Kc4W62;$BMLS#?P2Q7_PD~zxLK4x4_nPa8^HQ5H@4yMBLWev7y9iw754/k,biG6VxT33;tvg=}bcV"},paging:{pagesize:8,productLocatorPageSize:5}},iplocator:{url:"https://freegeoip.net/json/1.1.16.23"},locations:{initial:{location:{lat:0,lng:0},zoom:1}},hermesPath:{customThemeJs:e.location.origin+"/sites/all/themes/custom/hermes/js"}},h=function(){function a(){d(this,a)}return c(a,null,[{key:"currentMapEngine",value:function(){return e&&new RegExp(/(hermes)*cn\//).test(e.location.href)?a.mapenginetype.BAIDU:a.mapenginetype.GOOGLE}},{key:"mapenginetype",get:function(){return{GOOGLE:"mapengine-google",BAIDU:"mapengine-baidu"}}},{key:"google",get:function(){return g.google}},{key:"baidu",get:function(){return g.baidu.map.API_KEY=Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,g.baidu.map.URL="https://api.map.baidu.com/api?v=2.0&ak="+Drupal.settings.hermes_global.baidu.apis.baidu_maps_key,g.baidu}},{key:"mapengine",get:function(){return a.currentMapEngine()===a.mapenginetype.GOOGLE?a.google:a.currentMapEngine()===a.mapenginetype.BAIDU?a.baidu:void 0}},{key:"hermes",get:function(){return g.hermes}},{key:"locations",get:function(){return g.locations}},{key:"hermesPath",get:function(){return g.hermesPath}}]),a}(),a("default",h)}}}),a.register("38",["3","4","17","37","4a","1e"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(){c(this,a)}return b(a,null,[{key:"forceClearList",value:function(){var a=document.getElementById("no-store-close-msg"),b=document.getElementById("stores-found-msg"),c=document.getElementById("product-locator-map-error-msg"),d=document.getElementById("list-store"),e=document.getElementById("pl-concessionary-disclaimer-msg");a&&(a.style.display="none"),b&&(b.innerHTML=""),c&&(c.innerHTML=""),d&&d.hasChildNodes()&&d.removeAllChildren(),e&&(e.innerHTML="")}},{key:"enableDisablePLButton",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0],b=jQuery("#tray-product-locator input#btfind");b&&b.length>0&&(a?(b.attr("disabled","disabled"),b.addClass("disabled")):(b.removeAttr("disabled"),b.removeClass("disabled")))}},{key:"productLocatorScript",value:function(b,c){var d=arguments.length<=2||void 0===arguments[2]?null:arguments[2];a.enableDisableFindInStoreLoader(),APP.productLocatorMapLoaded===!0?c(b,d):jQuery.getScript(e.hermesPath.customThemeJs+"/page-product-store-locator.js").done(function(){var a=0,e=setInterval(function(){a++,APP.productLocatorMapLoaded===!0?(c(b,d),clearInterval(e)):15===a&&clearInterval(e)},200)})}},{key:"initTrayConfigurator",value:function(){var a=Drupal.settings.hermes_products.data;return APP.trayController.triggerTray({name:"tray-configurator",dontAdd:!0,products:a?a.products:void 0,sku:a&&a.default_variant?a.default_variant.sku:void 0,attributes:a&&a.attributes?a.attributes:void 0,isAppleWatchKit:a&&a.products&&a.products.length&&a.products[0].set_type===g.KIT_APPLEWATCH})}},{key:"refreshStockHComAvailability",value:function(a){if(a){null===Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts=a);for(var b in Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts)a.hasOwnProperty(b)&&(Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b]=a[b]),Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b].hasOwnProperty("in_stock")&&Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts[b].in_stock&&(Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock=!0)}}},{key:"setProductAttributes",value:function(){if((!Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes")||null===Drupal.settings.hermes_products.data.products_attributes||!Drupal.settings.hermes_products.data.products_attributes)&&Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")){Drupal.settings.hermes_products.data.products_attributes={};for(var a=0;a<Drupal.settings.hermes_products.data.products.length;a++)Drupal.settings.hermes_products.data.products[a]&&Drupal.settings.hermes_products.data.products[a].hasOwnProperty("sku")&&Drupal.settings.hermes_products.data.products[a].hasOwnProperty("attributes")&&(Drupal.settings.hermes_products.data.products_attributes[Drupal.settings.hermes_products.data.products[a].sku]=Drupal.settings.hermes_products.data.products[a].attributes)}}},{key:"getCurrentProductVariation",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=f(this.getAllProducts());!(a=(d=e.next()).done);a=!0){var g=d.value;if(g.sku&&g.sku===this.getSelectedSku())return g}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}return{}}},{key:"setAllProducts",value:function(){Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products")&&!Drupal.settings.hermes_products.data.hasOwnProperty("all_products")&&(Drupal.settings.hermes_products.data.all_products=Drupal.settings.hermes_products.data.products)}},{key:"getAllProducts",value:function(){return Drupal.settings.hermes_products.data.hasOwnProperty("all_products")?Drupal.settings.hermes_products.data.all_products:Drupal.settings.hermes_products.data.products}},{key:"refreshStockRetailPresentability",value:function(a,b){if(a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("presentabilities")){var c=a.data.presentabilities;Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts={};for(var d=0;d<b.length;d++){for(var e=!1,f=0;f<c.length;f++)if(c[f].hasOwnProperty("sku")&&c[f].hasOwnProperty("presentability")&&c[f].sku===b[d]){e=c[f].presentability;break}e&&(Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock=!0),Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts[b[d]]={has_stock_retail:e}}}}},{key:"getSelectedSku",value:function(){return Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null}},{key:"checkIfAllSizeAreDisabled",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=!0;for(var c=0;c<b.length;c++)if(b[c]&&!b[c].disabled){a=!1;break}}return a}},{key:"typeOfListedSize",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=[];for(var c=0;c<b.length;c++)if(b[c]){if(b[c].checked)return null;var d=b[c].getAttribute("stock-type");switch(!0){case d===this.noStockKey&&!a.includes(this.noStockKey):a.push(this.noStockKey);break;case d===this.retailOnlyKey&&!a.includes(this.retailOnlyKey):a.push(this.retailOnlyKey);break;case d===this.hComOnlyKey&&!a.includes(this.hComOnlyKey):a.push(this.hComOnlyKey);break;case d===this.hComAndRetailKey&&!a.includes(this.hComAndRetailKey):a.push(this.hComAndRetailKey)}}}return this.sizeTypes(a)}},{key:"sizeTypes",value:function(a){return a&&0!==a.length?a.includes(this.hComAndRetailKey)||a.includes(this.hComOnlyKey)&&a.includes(this.retailOnlyKey)?this.hComAndRetailKey:a.includes(this.retailOnlyKey)?this.retailOnlyKey:a.includes(this.hComOnlyKey)?this.hComOnlyKey:1===a.length&&a.includes(this.noStockKey)?this.noStockKey:null:null}},{key:"enableDisableFindInStoreLoader",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];if(!a)return d.hideOverlay(),void d.hideLoaderButton("loader-button-find-in-store");var b=document.querySelectorAll(".product-locator-container-button.fis-as-a-button .loader-button-find-in-store");if(b.length)return void d.showLoaderButton("loader-button-find-in-store");var c=document.querySelectorAll(".product-locator-container-button.fis-as-a-link .loader-button-find-in-store");c.length&&d.showLoader()}},{key:"refreshAllButtons",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=this.getSelectedSku();if(b&&!a){var c=this.isAvailableStockHCom(b),d=this.isAvailableStockRetail(b),e=document.getElementsByClassName("product-locator-container-button"),f=document.querySelectorAll(".product-locator-container-button button"),g=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.enableAllAttributesButtons();var h=this,i=null;setTimeout(function(){switch(i=h.typeOfListedSize(),!0){case!c&&!d&&null===i||i===h.noStockKey:h.hasNotHcomNotStockRetail(e,f,g);break;case c&&d||i===h.hComAndRetailKey:h.hasHcomStockRetail(e,f,g);break;case!c&&d||i===h.retailOnlyKey:h.hasNotHcomStockRetail(e,f,g);break;case c&&!d||i===h.hComOnlyKey:h.hasHcomNotStockRetail(e,f,g)}},50)}}},{key:"disableAllButtons",value:function(){var a=document.getElementsByClassName("product-locator-container-button"),b=document.querySelectorAll('button[data-bind="product-add-to-cart"]');this.addClassToMultiElements(a,"add",["hidden"]),this.addClassToMultiElements(a,"remove",["fis-as-a-link","fis-as-a-button"]),this.addClassToMultiElements(b,"add",["show","button-full-opacity"]),this.addClassToMultiElements(b,"remove",["hidden"]),d.showLoaderButton("loader-button-add-to-cart")}},{key:"enableDisableCartButtons",value:function(a,b){if(a){switch(b){case!0:document.body.classList.add("in-stock");break;case!1:document.body.classList.remove("in-stock")}for(var c=0;c<a.length;c++)a[c].setAttribute("aria-disabled",(!!b).toString())}}},{key:"hasNotHcomNotStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.noStockKey),this.showHideStockOnlyMessage(),this.enableDisableCartButtons(c,!1),d.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(a,"add",["hidden"])}},{key:"hasNotHcomStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.retailOnlyKey),this.showHideStockOnlyMessage("show"),this.addClassToMultiElements(a,"add",["fis-as-a-button","show"]),this.addClassToMultiElements(a,"remove",["fis-as-a-link","hidden"]),this.addClassToMultiElements(b,"add",["button"]),this.addClassToMultiElements(b,"remove",["product-attribute-item"]),this.addClassToMultiElements(c,"add",["hidden"]),this.addClassToMultiElements(c,"remove",["button-full-opacity"]),d.showLoaderButton("loader-button-add-to-cart"),this.enableDisableCartButtons(c,!1)}},{key:"hasHcomNotStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.hComOnlyKey),this.showHideStockOnlyMessage(),d.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),this.addClassToMultiElements(a,"add",["hidden"]),this.enableDisableCartButtons(c,!0)}},{key:"hasHcomStockRetail",value:function(a,b,c){this.setAccessibilityMessageToSelectedAttribute(this.hComAndRetailKey),this.showHideStockOnlyMessage(),this.addClassToMultiElements(b,"remove",["button"]),this.addClassToMultiElements(b,"add",["product-attribute-item"]),this.addClassToMultiElements(a,"remove",["fis-as-a-button","hidden"]),this.addClassToMultiElements(c,"remove",["hidden","button-full-opacity"]),d.hideLoaderButton("loader-button-add-to-cart"),this.addClassToMultiElements(a,"add",["fis-as-a-link","show"]),this.enableDisableCartButtons(c,!0)}},{key:"isSizeVariationIsSelected",value:function(){var a=null,b=document.querySelectorAll('#panel-configurator input.product-configurator-form-input[data-field="field_ref_size"]');if(b&&b.length>0){a=!1;for(var c=0;c<b.length;c++)if(b[c].checked){a=!0;break}}return a}},{key:"setAccessibilityMessageToSelectedAttribute",value:function(a){if(this.isSizeVariationIsSelected()!==!1){var b=document.querySelectorAll('.product-attributes button.tray-trigger[aria-controls="panel-configurator"]'),c="aria-label",d=",";if(b&&b.length>0)for(var e=0;e<b.length;e++){var f=this.removePresentabilityAccessibilityMessage(b[e].getAttribute(c),d);switch(a){case this.hComOnlyKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case this.retailOnlyKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case this.hComAndRetailKey:b[e].setAttribute(c,f+d+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}}},{key:"removePresentabilityAccessibilityMessage",value:function(a,b){return"string"!=typeof a||","!==b?a:(a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly),""),a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly),""),a=a.replace(this.stringRegularExpression(b+Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail),""))}},{key:"stringRegularExpression",value:function(a){return"string"!=typeof a?null:new RegExp(a,"g")}},{key:"setAccessibilityMessageToVariation",value:function(a,b,c){if(a&&a.length>0&&2===this.productLocatorVersion())for(var d=0;d<a.length;d++)if(a[d]){var e=a[d].parent("li").find("span.accessibility-availability-type-message");switch(!0){case!b&&!c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.noStock);break;case!b&&c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockRetailOnly);break;case b&&!c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomOnly);break;case b&&c:e.text(Drupal.settings.hermes_translations.storeLocator.productLocator.accessibility.stockHcomAndRetail)}}}},{key:"showHideStockOnlyMessage",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"hide":arguments[0],b=document.querySelectorAll(".product-locator-container-button .only-retail-stock-message");0!==b.length&&b.forEach(function(b){b&&(b.innerHTML="show"===a?Drupal.settings.hermes_translations.storeLocator.productLocator.stockRetailOnlyMessage:"")})}},{key:"addClassToMultiElements",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(a&&("add"===b||"remove"===b))for(var d=0;d<a.length;d++)for(var e=0;e<c.length;e++)a[d].classList[b](c[e])}},{key:"enableAllAttributesButtons",value:function(){for(var a=document.querySelectorAll(".product-attributes button"),b=0;b<a.length;b++)a[b].removeAttribute("disabled"),a[b].classList.remove("disabled")}},{key:"isProductLocatorActive",value:function(){return!!Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("active")&&!!Drupal.settings.product_locator_configuration.active}},{key:"productLocatorVersion",value:function(){return this.isProductLocatorActive()&&Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("version")?Drupal.settings.product_locator_configuration.version:null}},{key:"productLocatorStockRetailWS",value:function(){return Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("stockRetailWebservice")?Drupal.settings.product_locator_configuration.stockRetailWebservice:null}},{key:"forceActivatingPL",value:function(){Drupal.settings.product_locator_configuration.active=!0}},{key:"isProductExcluded",value:function(){if(Drupal.settings.product_locator_configuration&&Drupal.settings.product_locator_configuration.hasOwnProperty("excludedDeptCodes")){var a="";return Drupal.settings.hermes_products.data.products&&Drupal.settings.hermes_products.data.products.hasOwnProperty(0)&&Drupal.settings.hermes_products.data.products[0].department_code&&(a=Drupal.settings.hermes_products.data.products[0].department_code),!(Drupal.settings.product_locator_configuration.excludedDeptCodes.split(/[ ,]+/).filter(Boolean).indexOf(a)===-1)}return!1}},{key:"isAvailableStockRetail",value:function(a){if(Drupal.settings.hermes_products&&Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.retailPresentability&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock){var b=Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts;for(var c in b)if(c.replace(/\s/g,"")===a.replace(/\s/g,"")&&b[c].has_stock_retail)return!0}return!1}},{key:"isAvailableStockHCom",value:function(a){if(Drupal.settings.hermes_products.stock_status.hComAvailability&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock){var b=Drupal.settings.hermes_products.stock_status.hComAvailability.stockProducts;for(var c in b)if(c.replace(/\s/g,"")===a.replace(/\s/g,"")&&b[c].in_stock)return!0}return!1}},{key:"hasRetailStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("retailPresentability")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasStock}},{key:"hasHcomStock",value:function(){return!!Drupal.settings.hermes_products.stock_status&&Drupal.settings.hermes_products.stock_status.hasOwnProperty("hComAvailability")&&Drupal.settings.hermes_products.stock_status.hComAvailability.hasStock}},{key:"hasStockRetailOnly",value:function(b){var c=this,d=0;return b.forEach(function(b){b&&c.isAvailableStockRetail(b)&&!a.isAvailableStockHCom(b)&&d++}),d===b.length&&b.length>0}},{key:"enableSlashedSize",value:function(a){a&&(a.attr("disabled",!1),a.parent("li").find("span.name").addClass("slashed-size"))}},{key:"disableSlashedSize",value:function(a){a&&a.parent("li").find("span.name").removeClass("slashed-size")}},{key:"setStockTypeAttr",value:function(a,b,c,d){if(c&&d&&1!==this.productLocatorVersion())switch(!0){case!a&&!b:c.attr(this.stockTypeKey,this.noStockKey),d.attr(this.stockTypeKey,this.noStockKey);break;case!!a&&!b:c.attr(this.stockTypeKey,this.hComOnlyKey),d.attr(this.stockTypeKey,this.hComOnlyKey);break;case!a&&!!b:c.attr(this.stockTypeKey,this.retailOnlyKey),d.attr(this.stockTypeKey,this.retailOnlyKey);break;case!!a&&!!b:c.attr(this.stockTypeKey,this.hComAndRetailKey),d.attr(this.stockTypeKey,this.hComAndRetailKey)}}},{key:"removeSlashInAllSize",value:function(a){if(a)for(var b=0;b<a.length;b++)this.disableSlashedSize(jQuery(a[b]))}},{key:"hasAnyStock",value:function(a){return this.isAvailableStockHCom(a)||this.isAvailableStockRetail(a)}},{key:"setSelectedSku",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0],b=Drupal.settings.hermes_products.data.hasOwnProperty("selected_sku")?Drupal.settings.hermes_products.data.selected_sku:null;b=a||b?a:Drupal.settings.hermes_products.data.default_variant.sku?Drupal.settings.hermes_products.data.default_variant.sku:null,Drupal.settings.hermes_products.data.selected_sku=b}},{key:"productColorId",value:function(a){if(Drupal.settings.hermes_products.hasOwnProperty("data")&&Drupal.settings.hermes_products.data.hasOwnProperty("products_attributes"))for(var b in Drupal.settings.hermes_products.data.products_attributes){var c=Drupal.settings.hermes_products.data.products_attributes;if(a===b&&c[b].hasOwnProperty("field_color_hermes")&&c[b].field_color_hermes.hasOwnProperty("id"))return c[b].field_color_hermes.id}return null}},{key:"isProductLocatorConfigurationInitialized",value:function(){return!!Drupal.settings.product_locator_configuration}},{key:"isConfiguratorIsLoaded",value:function(){return!!Drupal.settings.product_locator_configuration&&!!Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded}},{key:"setConfiguratorIsLoaded",value:function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];Drupal.settings.product_locator_configuration.isConfiguratorIsLoaded=a}},{key:"stringBase64Encode",value:function(a){return window.btoa(unescape(encodeURIComponent(a)))}},{key:"stringBase64Decode",value:function(a){return decodeURIComponent(escape(window.atob(a)))}},{key:"checkIfRetailPresentabilityIsNull",value:function(){return!!Drupal.settings.hermes_products&&Drupal.settings.hermes_products.hasOwnProperty("stock_status")&&Drupal.settings.hermes_products.stock_status.retailPresentability.hasOwnProperty("stockProducts")&&null===Drupal.settings.hermes_products.stock_status.retailPresentability.stockProducts}},{key:"formatProductPrice",value:function(b){if(!b||!b.price)return null;var c=b.price;if(b.hasOwnProperty("price_without_currency")&&Drupal.settings.hasOwnProperty("hermes_locale")&&Drupal.settings.hasOwnProperty("currency_parameters")&&a.countryListForcedToInverseCurrency.includes(Drupal.settings.hermes_locale)){var d=Drupal.settings.currency_parameters;c=d.hasOwnProperty("symbol_after")?d.symbol_after:"",c+=d.hasOwnProperty("code_spacer")?d.code_spacer:"",c+=d.hasOwnProperty("code_after")?d.code_after:"",c+=d.hasOwnProperty("symbol_spacer")?d.symbol_spacer:"",c+=b.price_without_currency,c+=d.hasOwnProperty("symbol_spacer")?d.symbol_spacer:"",c+=d.hasOwnProperty("code_before")?d.code_before:"",c+=d.hasOwnProperty("code_spacer")?d.code_spacer:"",c+=d.hasOwnProperty("negative")?d.negative:"",c+=d.hasOwnProperty("symbol_before")?d.symbol_before:"",c=c.replace(/  +/g," ")}return c}},{key:"countryListForcedToInverseCurrency",get:function(){return["it_it","fi_en","ie_en","lu_fr","at_de","nl_en"]}},{key:"hComOnlyKey",get:function(){return"hComOnly"}},{key:"retailOnlyKey",get:function(){return"retailOnly"}},{key:"hComAndRetailKey",get:function(){return"hComAndRetail"}},{key:"noStockKey",get:function(){return"noStock"}},{key:"stockTypeKey",get:function(){return"stock-type"}}]),a}(),a("ProductLocatorTools",h)}}}),a.register("d3",["3","4","38","1e"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.ProductLocatorTools},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(){c(this,a)}return b(a,null,[{key:"getProductType",value:function(a){var b=void 0;return b=a.hasOwnProperty("set_items")?"complex":"simple"}},{key:"mapProducts",value:function(a){var b=[],c=this;return a.map(function(a,d){var e=c.getProductType(a);switch(e){case"simple":b[d]=c.mapProductSimpleOrComplex(a,!1);break;case"complex":b[d]=c.mapProductSimpleOrComplex(a,!0)}}),b}},{key:"mapProductSimpleOrComplex",value:function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],c=this,d={};return d=c.getCommonAttributes(0,d,a,b),d=b?c.getComplexProduct(d,a):c.getSimpleProduct(d,a),d=c.getCommonAttributes(1,d,a,b)}},{key:"getCommonAttributes",value:function(a,b,c){!(arguments.length<=3||void 0===arguments[3])&&arguments[3];switch(a){case 0:c.name&&(b.name=c.name),c.unit_price&&(b.price=parseFloat(c.unit_price).toFixed(2)),b.brand=e.BRAND,c.qty&&(b.quantity=c.qty);break;case 1:b.dimension37=c.stock,b.dimension52=c.dku?"yes":"no",b.in_store_only=String(d.hasStockRetailOnly([c.sku]))}return b}},{key:"getComplexProduct",value:function(a,b){var c=!(!b.options||!b.options.perso_info);return c?a.id=b.options.container_sku:b.sku&&(a.id=b.sku.replace(/-/g,"|")),b&&b.set_items&&(b.display_single_line?(a.category=b.set_items[0].department_code+"|"+b.set_items[1].department_code+"/"+b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.variant=b.set_items[0].color||b.set_items[1].color?b.set_items[0].color+"|"+b.set_items[1].color:"N/V",a.dimension5=""!==b.size?b.size:"N/A",a.dimension6=b.set_items[0].department_code+"|"+b.set_items[1].department_code,a.dimension7=b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.dimension8=b.set_items[0].product_code+"|"+b.set_items[1].product_code,a.dimension9=b.set_items[0].division_code+"|"+b.set_items[1].division_code):b.options&&b.options.container_type&&b.options.container_type.includes("BELTKIT")?(a.category=b.set_items[0].department_code+"|"+b.set_items[1].department_code+"/"+b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.variant=b.set_items[0].color||b.set_items[1].color?b.set_items[1].color+"|"+b.set_items[0].color:"N/A",a.dimension5=""+b.set_items[1].size,a.dimension6=b.set_items[0].department_code+"|"+b.set_items[1].department_code,a.dimension7=b.set_items[0].family_code+"|"+b.set_items[1].family_code,a.dimension8=b.set_items[1].product_code+"|"+b.set_items[0].product_code,a.dimension9=b.set_items[0].division_code+"|"+b.set_items[1].division_code):c?(a.category=b.departmentCode+"/"+b.familyCode,a.variant=b.sku||"N/A",a.dimension5=""!==b.size?b.size:"N/A",a.dimension6=b.departmentCode,a.dimension7=b.familyCode,a.dimension8=b.productCode,a.dimension9=b.divisionCode):(a.category=b.set_items[0].department_code+"/"+b.set_items[0].family_code,a.variant=b.set_items.map(function(a){return a.sku}).join("|"),a.dimension5=b.set_items.length.toString(),a.dimension6=b.set_items[0].department_code,a.dimension7=b.set_items[0].family_code,a.dimension8=b.set_items.map(function(a){return a.product_code}).join("|"),a.dimension9=b.set_items.map(function(a){return a.division_code}).join("|"),a.dimension10=b.set_items.map(function(a){return a.sku}).join("|"))),a}},{key:"getSimpleProduct",value:function(a,b){return b.sku&&(a.id=b.sku),b.department_code&&b.family_code&&(a.category=b.department_code+"/"+b.family_code),b.color_code?a.variant=b.color_code:b.color?a.variant=b.color:a.variant=e.NONAPP,a.dimension5=b.size?b.size:e.NONAPP,b.department_code&&(a.dimension6=b.department_code),b.family_code&&(a.dimension7=b.family_code),b.product_code&&(a.dimension8=b.product_code),b.division_code&&(a.dimension9=b.division_code),a}}]),a}(),a("default",f)}}}),a.register("85",["3","4"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(){c(this,a)}return b(a,null,[{key:"helpLink",value:function(b,c,d){var e=arguments.length<=3||void 0===arguments[3]?null:arguments[3],f=e?e:jQuery(b.currentTarget).text().trim();a.pushEvent(c,d,f)}},{key:"pushEvent",value:function(a,b,c){dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b,eventlabel:c})}}]),a}(),a("default",d)}}}),a.register("3d",["18","38","50","85","2d","1e","4e","d3"],function(a){function b(){"use strict";function a(a){var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=void 0,f=[],g=Drupal.settings.products_grid_analytics,h=Drupal.settings.hermes_products,j="object"==typeof h?h.data:void 0,k=b.getEnglishOrFrenchUrl(),l=c?"404 error cat | Hermès":document.title;db=b.getPageType(),hb=b.getDeviceType(),kb=b.getBuildVersion();var m={event:0===qb?"pageview":"impressions",pagename:l,pagetype:db,languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry"),mainstepindicator:ib,mainstepname:jb,buildVersion:kb,devicetype:hb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:k};if(b.getUser(tb,m),b.getUserAgent(m),b.getCategories(m,db),e=b.isSearchResult(m,db),h&&j)f=b.ProductPage(j,m),m.ecommerce={detail:{products:f}};else if(Drupal.settings.hermes_products){var n=b.ProductsGrid(e,m,g);if(m.category="ecommerce",m.action="impressions",m.ecommerce={impressions:n},b.getProductsAttribute(g,"department_code"))for(var o=0;o<dataLayer.length;o++)if("pageview"===dataLayer[o].event){dataLayer[o].departmentcode=b.getProductsAttribute(g,"department_code");break}}else m.pagetype=db;var p=d.get("analytics_payment_dsecure"),q=m.pagetype.includes(i.VALIDATE_3DS_PAGE);p&&q&&(m.d_secure=p),qb++,dataLayer.push(m)}function c(b,c){c&&a()}function e(){dataLayer.push({event:"uaevent",eventcategory:"Header",eventaction:"TopNavigationHead",eventlabel:"Account",virtualpageuri:vb+"/account",pagetype:"account"})}function j(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=arguments.length<=3||void 0===arguments[3]?"":arguments[3];dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b||"",eventlabel:c,eventvalue:d})}function l(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?"":arguments[2];dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b||"",eventlabel:c})}function m(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Size_Guide"})}function n(a,b){var c=arguments.length<=2||void 0===arguments[2]?"":arguments[2],d=arguments.length<=3||void 0===arguments[3]?"":arguments[3];dataLayer.push({event:a,eventcategory:b,eventaction:c,eventlabel:d})}function o(a,b,c,d){void 0===b&&(b=""),void 0===c&&(c=""),"Module_PracticalInfo"===a&&(c=""),dataLayer.push({event:"uaevent",eventcategory:a,eventaction:b,eventlabel:c,blocktype:d.blocktype,isblockpushmerch:d.isblockpushmerch})}function p(a,b,c){var e={step:b.step||0,list:b.list||a.list};c&&delete e.step,a.department_code&&a.family_code?a.category=a.department_code+"/"+a.family_code:a.dimension6&&a.dimension7?a.category=a.dimension6+"/"+a.dimension7:a.category="unknown",dataLayer.push({event:"productClick",ecommerce:{currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code,click:{products:[a],actionField:e}}})}function q(a,b){var c=a.url;delete a.url,dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:b},products:[a]}},eventCallback:function(){document.location=c}})}function r(a){var c=k.mapProducts(a);b.getUser(tb,dataLayer),hb=b.getDeviceType(),kb=b.getBuildVersion(),ib="1",jb="cart","mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/cart/":"desktop"===hb&&(lb=vb+"/checkout/cart/"),dataLayer.push({event:i.CHECKOUT.toLowerCase(),pagename:i.CHECKOUT+" | Hermès",pagetype:i.CHECKOUT+" cart",mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,devicetype:hb,buildVersion:kb,languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code,checkout:{actionField:{step:1,option:"Cart",action:"checkout"},products:c}}})}function s(a,c){var e=k.mapProducts(c.items),f=b.getEnglishOrFrenchUrl();bb=e,bb&&(b.getUser(tb,dataLayer),
eb=eb?"":dataLayer.clienttype,fb=fb?"":dataLayer.clientgender,db="Checkout delivery",hb=b.getDeviceType(),kb=b.getBuildVersion(),jb="delivery",ib="2","mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/shipping/":"desktop"===hb&&(lb=vb+"/checkout/multipage/shipping/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:f,devicetype:hb,buildVersion:kb,languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code,checkout:{actionField:{step:2,option:"Delivery",action:"checkout"},products:e}}}))}function t(a,b){l("Checkout_Payment","Fapiao_invoice",b)}function u(){dataLayer.push({event:"uaevent",eventcategory:"Order_Account",eventaction:"Efapiao"})}function v(){if(bb){var a=b.getEnglishOrFrenchUrl();b.getUser(tb,dataLayer),hb=b.getDeviceType(),kb=b.getBuildVersion(),ib="3",jb="payment",db="Checkout payment",d.get("shipping_method")&&(nb=d.get("shipping_method"));var c=Fa();ob=c.date&&c.time?"none"===c.date.value&&"none"===c.time.value?"no":"yes":"no",d.set("shipping_preference",ob),d.get("shipping_choice")?mb=d.get("shipping_choice"):(mb="Deliver",d.set("shipping_choice",mb)),"mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/payment/":"desktop"===hb&&(lb=vb+"/checkout/multipage/payment/"),dataLayer.push({event:"checkout",pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:a,shipping_choice:mb,shipping_method:nb,shipping_preference:ob,devicetype:hb,buildVersion:kb,languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code,checkout:{actionField:{step:3,option:"Payment",action:"checkout"},products:bb}}})}}function w(a){if(a)return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function x(){pb=jQuery("body"),_a()}function y(){j("Header","Logo")}function z(){j("Header","TopNavigationHead","MenuBurger")}function A(){j("Account","my_account","my_orders")}function B(a,b){j("Account","my_orders",a,b)}function C(a,b,c){j("Account",a,b,c)}function D(){B("more")}function E(){var a=jQuery(this).parent().siblings().attr("data-order-id");a&&B("status_"+a)}function F(a){B("detail_"+a.return_type+"_"+a.order_id)}function G(a){B(a.mode+"_"+a.order_id,vb+"/account/"+a.mode)}function H(a){C(a.mode,"checkbox")}function I(a){C(a.mode,"continue")}function J(a){C(a.mode,"order_details",vb+"/account/"+a.mode+"/order_details")}function K(a){C(a.mode,"choice_delivery_"+a.delivery_type)}function L(a){C(a.mode,"proceed_"+a.id,vb+"/account/return_order_instuctions")}function M(a){C(a.mode,"return_print")}function N(a){C(a.mode,"order_details",vb+"/account/"+a.mode+"/"+a.mode+"_details")}function O(a){C(a.mode,"invoice_print")}function P(a,b){var c=void 0;"object"==typeof b&&(c=b.day+" "+b.time),B("PickUp_"+c,"ExchangeReturn","/exchangereturn/pickup/")}function Q(){B("SubmitExchangeButton","ExchangeReturn","/exchangereturn/pickup/")}function R(){dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/exchangereturn/submissionsuccess/",pagetype:"Manage Order"})}function S(a){var b="empty",c=void 0;void 0!==a?a.length>=1&&(c=cb,b="full"):void 0!==bb&&bb.length>=1&&(c=bb,b="full"),c&&c.length&&(dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/cart/",pagetype:"cart",cartstatus:b}),r(c))}function T(){var a=!!(tb&&tb.basket&&tb.basket.items&&tb.basket.items.length>0)&&tb.basket.items,b=!(!Drupal.settings.hermes_global||!Drupal.settings.hermes_global.cartPageAngular)&&Drupal.settings.hermes_global.cartPageAngular;j("Header","TopNavigationHead","ShoppingCart"),a&&!b&&r(a)}function U(){dataLayer.push({event:"virtualpage",virtualpageuri:vb+"/checkoutlogin/",pagetype:"Log in"})}function V(a){var b=jQuery(a.currentTarget).attr("href").split("/"),c=a.currentTarget.dataset,d=b.length<2?c.trackCountry+"/"+c.trackLanguage:b[b.length-3]+"/"+b[b.length-2];switch(ab){case"header":j("Navigation","Country selector",d);break;case"footer":j("Footer",d)}}function W(){j("Header","FindAStore")}function X(){var a=jQuery(this).parent().parent().parent().parent()[0].className.split("-")[0];"header"===a&&g.pushEvent("Header","Help"),"footer"===a&&g.pushEvent("Services","Contact Us","Footer")}function Y(a){j("Footer","SocialNetworksIcons",a.currentTarget.querySelector("span").innerHTML)}function Z(a){j("Footer",jQuery(a.currentTarget).closest("ul").prev().html(),a.currentTarget.innerHTML.trim())}function $(){j(i.PRODUCTSIMPLEPAGELABEL,"Zoom")}function _(){ea("ContactUs",null)}function aa(){j(i.PRODUCTSIMPLEPAGELABEL,"Sticky_Header","Buy")}function ba(a){ea("Alternative_View",parseInt(a.currentTarget.dataset.index,10)+1)}function ca(){Drupal.settings.hermes_products&&Drupal.settings.hermes_products.data&&"LOOK_SET"===Drupal.settings.hermes_products.data.configurator_type?j(i.LOOKPAGELABEL,"Menu_Burger"):j(i.PRODUCTSIMPLEPAGELABEL,"Menu_Burger")}function da(a){var b=a.currentTarget.querySelector(".name span")||a.currentTarget.querySelector(".name"),c=w(b.getAttribute("data-event-id")?b.getAttribute("data-event-id"):b.innerHTML);qb=0,fa(a);for(var d=0;d<wb.length;d++){var e=jQuery(a.currentTarget).closest("fieldset").attr("id");e&&e.indexOf(wb[d])>-1&&ea(w(wb[d])+"_Selector",c,a)}}function ea(a,b,c){var d=Drupal.settings.hermes_products.data.configurator_type;switch(d){case"LOOK_SET":j(i.LOOKPAGELABEL,a,b);break;case"BIKINI_SET":"configurator-field_ref_size_top"===c.delegateTarget.id&&j(i.PRODUCTDOUBLEPAGELABEL,a+"_Top",b),"configurator-field_ref_size_bot1"===c.delegateTarget.id&&j(i.PRODUCTDOUBLEPAGELABEL,a+"_Bottom",b);break;case"DOUBLE_PRODUCT":j(i.PRODUCTDOUBLEPAGELABEL,a,b);break;default:j(i.PRODUCTSIMPLEPAGELABEL,a,b)}}function fa(a){var b=Drupal.settings.hermes_products.data.configurator_type;switch(b){case"VARIANT_PRODUCT":Drupal.settings.hermes_products.data.default_variant.sku=a.currentTarget.dataset.sku;break;case"DOUBLE_PRODUCT":break;case"BIKINI_SET":"configurator-field_ref_size_top"===a.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[0]=a.currentTarget.dataset.sku),"configurator-field_ref_size_bot1"===a.delegateTarget.id&&(Drupal.settings.hermes_products.data.default_variant.sku[1]=a.currentTarget.dataset.sku);break;case"LOOK_SET":var c=a.delegateTarget.id.replace(/^\D+/g,"")?a.delegateTarget.id.replace(/^\D+/g,""):"0";Drupal.settings.hermes_products.data.default_variant.sku[c]=a.currentTarget.dataset.sku;break;case"PERFUME_SET":}}function ga(){j("Cart","ContinueToCheckout")}function ha(a){j("Cart","ComplimentaryServices",a.currentTarget.getAttribute("href"))}function ia(){j("Cart","ContinueShopping")}function ja(b,c){a(b,c)}function ka(a){var b=jQuery(a.currentTarget).closest("[data-track-list]"),c=b.find("[data-product]"),e=a.currentTarget.dataset.product,f="",g=d.get("nav");if(Drupal.settings.hermes_products){"undefined"===g&&(g="direct");var h=jQuery.grep(Drupal.settings.hermes_products,function(a){return a.sku===e})[0];h&&(jQuery.extend(h,{list:b.data("track-list"),position:c.index(jQuery('[data-product="'+e+'"]'))+1,name:h.name||h.title,id:e,price:f,category:g}),delete h.title,delete h.sku,delete h.avg_color,delete h.raw_price,delete h.image,delete h.url,p(h,{step:1},!1))}}function la(a){var b=jQuery(a.currentTarget).closest("[data-track-cross-sales]"),c=b.data("track-cross-sales"),d=a.currentTarget.dataset.product,e=Drupal.settings.hermes_cross_sales_products[c].filter(function(a){return a.sku===d})[0];if(e){var g=e.attributes&&e.attributes.field_color_hermes&&e.attributes.field_color_hermes.name?e.attributes.field_color_hermes.name:i.NONAPP,h=e.real_price?f.unformat(e.real_price).toFixed(2):i.NONAPP,j={};j.name=e.name||e.title,j.id=d,j.price=h,j.category=e.department_code+"/"+e.family_code,j.variant=g,j.dimension5=e.ref_size?e.ref_size:i.SIZE_LESS,j.dimension6=e.department_code,j.dimension7=e.family_code,j.dimension8=e.product_code,j.dimension9=e.division_code,j.url=e.url,q(j,c)}}function ma(a){var b=jQuery(a.currentTarget).closest("[data-track-list]"),c=a.currentTarget.dataset.product,d=Drupal.settings.hermes_merchandising_pushes_products.data;if(d){var e=d.filter(function(a){return a}).find(function(a){return a.sku===c});if(e){var f={list:b.data("track-list")+"_"+rb},g={name:e.name||e.title,id:c,price:e.price,brand:i.BRAND,category:e.department_code+"/"+e.family_code,variant:i.NONAPP,dimension5:i.NONAPP,dimension6:e.department_code,dimension7:e.family_code,dimension8:e.product_code,dimension9:e.division_code};p(g,f,!0)}}}function na(a,b){rb=b}function oa(a){var b=jQuery(a.currentTarget),c="Collections",d=void 0;d=b.find("span span").length?b.find("span span").text().trim():b.text().trim(),j("Product_Grid",c,d)}function pa(a,c){var d=jQuery(c),e=d.attr("data-event-id")?d.attr("data-event-id"):d.text().trim(),f="true"===d.attr("aria-expanded"),g=b.getPageType(),h=void 0,k=void 0;g&&(g.includes(i.FAQ_PAGE)?(k="Faq_content",h=f?"Open_content":"Close_content"):(h=f?"openFilter":"closeFilter",g.includes(i.PRODUCT_PAGE)?k="SingleProductPage":g.includes(i.PRODUCT_GRID)&&(k="Product_Grid"))),j(k,h,e)}function qa(a,b){var c=jQuery(b),d=c.parents(".section").find("span:first").text(),e=sa(c);ub.includes(e)?ub.includes(e)&&c.prop("checked")===!0&&j("Product_Grid","Filters",d+"_"+e):(j("Product_Grid","Filters",d+"_"+e),ub.push(e))}function ra(){j("Product_Grid","Filters","Clear",null)}function sa(a){var b=a.attr("id"),c=b.split("-");return c=c[c.length-1]}function ta(a){j("Product_Grid","SortBy",jQuery(a.currentTarget).find("option:selected").text())}function ua(a,b){b.basket&&(bb=b.basket.items)}function va(a,b){b.basket&&b.basket.items&&(cb=b.basket.items,S(cb))}function wa(a){a.basket&&a.basket.items&&r(a.basket.items)}function xa(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"ViewCartButton"})}function ya(){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Addtocart_Notification",eventlabel:"Close"})}function za(){j("Checkout_Delivery","Gifting","GiftBoxTicked")}function Aa(){j("Checkout_Delivery","Gifting","MessageAdded")}function Ba(){j("Checkout_Delivery","Gifting","PriceLess")}function Ca(a){var b=Da(a.currentTarget.value);l("Checkout_Delivery","DeliveryPreference",b)}function Da(a){if("none"===a)return"AnyDate";var b=new Date,c=new Date(a),d=c.getDate()-b.getDate();return"Day"+d}function Ea(a){var b=a.currentTarget.value,c={none:"All_Day","01":"morning",12:"12pm_2pm",14:"2pm_4pm",16:"4pm_6pm",18:"6pm_8pm",19:"7pm_9pm"};l("Checkout_Delivery","DeliverySchedule",c[b])}function Fa(){var a=document.getElementById("hermes-checkout-delivery-form"),b=a.querySelector("select#edit-sagawa-select-a-date"),c=a.querySelector("select#edit-sagawa-select-a-time");return{date:b,time:c}}function Ga(a){"deliver"===a.currentTarget.value?d.set("shipping_choice","Deliver"):"pickup"===a.currentTarget.value&&d.set("shipping_choice","Collect in store")}function Ha(a){j("Checkout_Delivery","shipping_method",a.currentTarget.value)}function Ia(a){dataLayer.push({event:"uaevent",eventcategory:"EditoPage",eventaction:"edito push link",eventlabel:a.innerText})}function Ja(a,b,c){var d=c||jQuery(a).closest(".block-wrapper").find(".editorial-block-title").text(),e=jQuery(a).text(),f=Ka(a,b);o(b,d,e,f)}function Ka(a,b){var c={},d=Ma(b)||"",e="Mershandising_Pushes"===d?"yes":"no";return c.blocktype=d,c.isblockpushmerch=e,c}function La(a){if(jQuery(a).attr("href").indexOf("www.google.fr/maps")>-1){var b=jQuery(a).text()||"";Ja(a,"Module_PracticalInfo",b)}}function Ma(a){var b={Module_TextBlocks:"Text_Blocks",Module_EditorialPushes:"Editorial_Pushes",Module_MershandisingPushes:"Mershandising_Pushes",Module_ImagesGalleries:"Images_Galleries",Module_CarouselPushes:"Carrousel_Push",Module_PracticalInfo:"Practical_Info"},c=h(b).map(function(c){if(a===c)return b[c]});return c.find(function(a){return a})}function Na(){j("Checkout_Payment","Breadcrumb","PreviousStep")}function Oa(a){var b=jQuery(a).hasClass("paypal")?"payWithPayPal":"payWithCard";j("Checkout_Payment","PaymentMethod",b)}function Pa(){jQuery(document).ready(a)}function Qa(a,c){var e=k.mapProducts(c.items),f=b.getEnglishOrFrenchUrl();e.forEach(function(a){return a.dimension58=c.apple_pay_widget?"yes":"no"}),db=i.CHECKOUT_CONFIRMATION,hb=b.getDeviceType(),kb=b.getBuildVersion(),ib=4,jb="confirmation";var g="NO";c.subscribed&&(g="YES"),"mobile"===hb||"tablet"===hb?lb=vb+"/mobilecheckout/multipage/review/":"desktop"===hb&&(lb=vb+"/checkout/multipage/review/"),mb=d.get("shipping_choice"),nb=d.get("shipping_method"),ob=d.get("shipping_preference");var h=b.getPaymentMethod(),j={event:"transaction",newsletter_optin:g,pagename:document.title,pagetype:db,mainstepindicator:ib,mainstepname:jb,virtualpageuri:lb,userId:gb,clienttype:eb,clientgender:fb,pageTranslate:f,shipping_choice:mb,shipping_method:nb,shipping_preference:ob,devicetype:hb,paymentMethod:h,d_secure:d.get("analytics_payment_dsecure"),buildVersion:kb,languagecode:d.get("currentLanguage"),countrycode:d.get("currentCountry"),ecommerce:{currencyCode:APP.CURRENCY_MAP[d.get("currentStore")].code,purchase:{actionField:{id:c.increment_id,revenue:c.subtotal,tax:c.tax_amount,shipping:c.shipping_amount},products:e}}};b.getUser(tb,j),(""===j.clienttype||void 0===j.clientgender&&void 0===j.userId)&&(j.userId=c.customer_id,j.clientgender=c.prefix,j.clienttype=b.getUserType(c.user_type)),c.fapiao_invoice&&(j.fapiao_invoice=c.fapiao_invoice),dataLayer.push(j)}function Ra(a,b){b.basket&&b.basket.shipping_method&&d.set("shipping_method",b.basket.shipping_method)}function Sa(a,b){var c=b.id_;switch(a){case"Autoplay":n("nonintuaevent",i.MODULE_VIDEO,a,c);break;case"Progress":n("uaevent",i.MODULE_VIDEO,b.currentPercent,c);break;default:n("uaevent",i.MODULE_VIDEO,a,c)}}function Ta(a){var b=a.currentTarget.firstChild.data;Ja(a.currentTarget,"Module_EditorialPushes",b)}function Ua(a,b){var c=b.attr("data-track-category-highlight-position"),d=a.find(".category-highlight-title"),e=d.text(),f=jQuery.trim(e),g="Module_CategoryHighlight";Drupal.settings.hermes_master_page&&(g="Module_Masterpage"),dataLayer.push({event:"uaevent",eventcategory:g,eventaction:c+" | "+f,eventlabel:a.attr("href")})}function Va(a){var b=jQuery(a.currentTarget).parents(".search-suggestion").find("span").not(".sr-only").toArray(),c=b.map(function(a,b){return{el:a,id:b}}),e=c.find(function(b){return b.el===a.currentTarget.children[0]});if(d.set("nav","search"),!e)return void console.warn("Suggestion link clicked not found!");var f=e.id,g=jQuery(".field-search").val(),h=a.currentTarget.innerText.split("\n")[0];j("Search","Search suggest list",g+":"+h,f)}function Wa(a,b){dataLayer.push({event:"uaevent",eventcategory:"SingleProductPage",eventaction:"Product Locator",eventlabel:b.sku})}function Xa(a,b){dataLayer.push({event:"uaevent",eventcategory:"error message",eventaction:b.path,eventlabel:b.message})}function Ya(a,b){var c="Geobanner",d=void 0,e=void 0,f=void 0;switch(a){case"geoFilteringBanner.view":d="nonintuaevent",e="View",f=b;break;case"geoFilteringBanner.stayCountry":d="uaevent",e="Click",f="Stay"+b;break;case"geoFilteringBanner.switchCountry":d="uaevent",e="Click",f="SwitchCountry";break;case"geoFilteringBanner.close":d="uaevent",e="Click",f="Close";break;default:return}dataLayer.push({event:d,eventcategory:c,eventaction:e,eventlabel:f})}function Za(a,b){dataLayer.push({event:"uaevent",eventcategory:"Store Locator",eventaction:"Map view click marker",eventlabel:b})}function $a(a){dataLayer.push({event:"uaevent",eventcategory:"Footer",eventaction:"Prefooter",eventlabel:a})}function _a(){jQuery(document).ready(function(){var c=b.getPageType();c&&c.includes(i.PRODUCT_PAGE)&&!function(){var b={stock:!1},c=!1,d=!1;jQuery(document).ajaxComplete(function(e,f,g){var h=g.url.search("stock")!==-1;h&&Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&(Drupal.settings.hermes_products.data.belts=f.responseJSON),b.stock=h&&("PERFUME_SET"!==Drupal.settings.hermes_products.data.configurator_type||c)||b.stock,c=h&&"PERFUME_SET"===Drupal.settings.hermes_products.data.configurator_type,jQuery("button").click(function(){jQuery(this).is("[data-bind]")&&(d=!0)}),b.stock&&!d&&0===sb&&(sb++,jQuery(document).ready(a))})}(),!c||c.includes(i.VALIDATE_3DS_PAGE)||c.includes(i.PRODUCT_PAGE)||jQuery(document).ready(a)}),APP.pubsub.subscribe("configurator.change",c),APP.pubsub.subscribe("geoFilteringBanner.view",Ya),APP.pubsub.subscribe("geoFilteringBanner.stayCountry",Ya),APP.pubsub.subscribe("geoFilteringBanner.switchCountry",Ya),APP.pubsub.subscribe("geoFilteringBanner.close",Ya),APP.pubsub.subscribe("analytics.payment.dsecure",Pa),APP.pubsub.subscribe("gtm.basket",ua),APP.pubsub.subscribe("gtm.openCart",wa),APP.pubsub.subscribe("analytics.grid",ja),APP.pubsub.subscribe("analytics.delivery",s),APP.pubsub.subscribe("cart.update",Ra),APP.pubsub.subscribe("analytics.payment",v),APP.pubsub.subscribe("analytics.confirmation",Qa),APP.pubsub.subscribe("tray.checkout",U),APP.pubsub.subscribe("timeslot.selected",P),APP.pubsub.subscribe("analytics.exchange.submit",Q),APP.pubsub.subscribe("analytics.exchange.success",R),APP.pubsub.subscribe("Pause",Sa),APP.pubsub.subscribe("FirstPlay",Sa),APP.pubsub.subscribe("NewPlay",Sa),APP.pubsub.subscribe("Stop",Sa),APP.pubsub.subscribe("Mute",Sa),APP.pubsub.subscribe("Fullscreen",Sa),APP.pubsub.subscribe("Autoplay",Sa),APP.pubsub.subscribe("Progress",Sa),APP.pubsub.subscribe("analytics.payment.fapiao",t),APP.pubsub.subscribe("analytics.generate.fapiao",u),APP.pubsub.subscribe("analytics.accordion.openOrCloseFilter",pa),APP.pubsub.subscribe("analytics.filter.checked",qa),APP.pubsub.subscribe("analytics.product.locator.button.click",Wa),APP.pubsub.subscribe("analytics.oops.error",Xa),APP.pubsub.subscribe("analytics.store-locator.pin.click",Za),APP.pubsub.subscribe("analytics.size_guide.open",m),APP.pubsub.subscribe("analytics.pushCounter.incremented",na),APP.pubsub.subscribe("analytics.viewCartFromNotification",xa),APP.pubsub.subscribe("analytics.closeAddtoCartNotification",ya),APP.pubsub.subscribe("analytics.cart-event",va),jQuery("[data-track-logo]").on("click",y),jQuery("[data-track-menu]").on("click",z),jQuery("[data-track-account]").on("click",e),jQuery("[data-track-cart]").on("click",T),APP.pubsub.subscribe("analytics-open-tray-account",function(){e()}),APP.pubsub.subscribe("analytics-open-tray-order-list",function(){A(),E()}),APP.pubsub.subscribe("analytics-open-exchange-return-details",function(a,b){F(b)}),APP.pubsub.subscribe("analytics-open-exchange-return-request",function(a,b){G(b)}),APP.pubsub.subscribe("analytics-enable-exchange-return",function(a,b){H(b)}),APP.pubsub.subscribe("analytics-continue-exchange-return",function(a,b){I(b)}),APP.pubsub.subscribe("analytics-order-details-exchange-return",function(a,b){J(b)}),APP.pubsub.subscribe("analytics-choice-delivery-exchange-return",function(a,b){K(b)}),APP.pubsub.subscribe("analytics-proceed-exchange-return",function(a,b){L(b)}),APP.pubsub.subscribe("analytics-return-print-exchange-return",function(a,b){M(b)}),APP.pubsub.subscribe("analytics-refund-details-exchange-return",function(a,b){N(b)}),APP.pubsub.subscribe("analytics-print-invoice",function(a,b){O(b)}),jQuery("body").on("click",'[data-track-prefooter="help-faq"] a',function(){$a("FAQs")}),jQuery("body").on("click",'[data-track-prefooter="call-us"] a',function(){$a("Call-us")}),jQuery("body").on("click",'[data-track-prefooter="find-store"] a',function(){$a("Find-store")}),jQuery("body").on("click",'[data-tray-trigger="tray-order-list"]',A),jQuery("body").on("click","button.js-to-order-details",E),jQuery("body").on("click",".js-show-all-orders",D),jQuery("body").on("click",".order-track-cta a",E),jQuery("body").on("click",'[data-bind="exchange-return-details"]',F),jQuery("[data-order-id]").on("click",F),jQuery("body").on("click",".search-suggestion > dd ul li",Va),jQuery("[data-track-store]").on("click",W),jQuery('[data-tray-trigger="tray-help"]').on("click",X),jQuery(".js-locale-tray").on("click",function(a){ab=jQuery(a.currentTarget).closest("ul.header-links").length>0?"header":"footer"}),jQuery("[data-track-language]").on("click","ul li a",V),jQuery("[data-track-social]").on("click","a, button",Y),jQuery("[data-track-footer]").on("click","ul li a",Z),jQuery("[data-track-zoom]").on("click","img",$),jQuery("[data-track-info]").on("click","a",_),jQuery("[data-track-banner-buy]").on("click",aa),jQuery("[data-track-thumbs]").on("click","li button",ba),jQuery("[data-track-back]").on("click",ca),jQuery("[data-track-configurator]").on("click","label",da),jQuery("[data-track-cross-sales]").on("click",".product-grid-list li a",la),jQuery("[data-track-continue-checkout]").on("click",ga),jQuery("[data-track-complimentary]").on("click","a",ha),jQuery("[data-track-cart-shopping]").on("click","a",ia),jQuery("[data-track-cart-services]").on("click",ha),jQuery("[data-track-products]").on("click",".product-item > a, .product-history-item > a",ka),jQuery("[data-track-categories]").on("click",".filter-cat-subcat",oa),jQuery("[data-track-sort]").on("change",ta),jQuery("body").on("click",".filter-button-clear",ra),jQuery(".form-item-gift input").on("change",za),jQuery(".form-item-hide-price input").on("change",Ba),jQuery('[data-bind="add-message-link"]').on("click",Aa),jQuery(".checkout-addresses-choices").on("change",'input[type="radio"]',Ga),jQuery(".shipping-method-list").on("change",'input[type="radio"]',Ha),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-date",Ca),jQuery(".delivery-sagawa").on("change","select#edit-sagawa-select-a-time",Ea),jQuery("[data-track-editorial-push]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_EditorialPushes")}),jQuery("[data-track-editorial-cta]").on("click",function(){Ia(this,"Module_TextBlocks")}),jQuery("body").on("click","a.editorial-story-cta",Ta),jQuery("[data-track-text-blocks]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_TextBlocks")}),jQuery("[data-track-gallery-carousel]").on("click",function(){Ja(this,"Module_CarouselPushes")}),jQuery("[data-track-merchandising-push]").on("click",".editorial-block-actions a",function(){Ja(this,"Module_MershandisingPushes")}),jQuery("[data-track-products-push-merch]").on("click",".product-item > a, .product-history-item > a",ma),jQuery("[data-track-image-galleries]").on("click",function(){Ja(this,"Module_ImagesGalleries","CTA")}),jQuery(".block-edito-media-text a").on("click",function(){La(this)}),jQuery("[data-track-previous-step]").on("click",Na),jQuery("[data-track-payment-method]").on("click",function(){Oa(this)}),jQuery("[data-track-category-highlight-position]").on("click",".category-highlight-link",function(a){var b=jQuery(a.currentTarget),c=jQuery(a.delegateTarget);Ua(b,c)})}var ab=void 0,bb=void 0,cb=void 0,db=void 0,eb=void 0,fb=void 0,gb=void 0,hb=void 0,ib=void 0,jb=void 0,kb=void 0,lb=void 0,mb=void 0,nb=void 0,ob=void 0,pb=void 0,qb=0,rb=0,sb=0,tb=d.get("user"),ub=[],vb="/"+Drupal.settings.hermes_url_locale,wb=["color","size"];x()}function c(a,b){b&&b.sku&&(APP.selectedSku=b.sku)}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.default},function(a){e=a.ProductLocatorTools},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";b.getGender=function(a){var b=void 0;switch(a){case"Ms.":case"Mrs.":case"Mme":case"Mlle":case"Miss":case"女士":case"Sig.na":case"Sig.ra":case"Frau":case"Srta.":case"Sra.":case"F":b="W";break;case"Mr.":case"M.":case"先生":case"Sig.":case"Herr":case"Sr.":case"M":b="M";break;case"Dr":case"Prof":case"Honorable":case"Dr.":b="U";break;default:b=a}return b},b.getUserType=function(a){var b=void 0;switch(a){case"0":b="newclient";break;case"1":b="buyer";break;default:b=""}return b},b.getDeviceType=function(){var a=void 0;return a=window.screen.width<991?"mobile":window.screen.width<1199?"tablet":"desktop"},b.getBuildVersion=function(){var a=void 0;return a=i.HOSTNAME.indexOf(window.location.hostname)>-1?"Production version":"Development version"},b.getProductsAttribute=function(a,b){var c=null;for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];c=e[b]&&!c?e[b]:c}return c},b.getPageType=function(){var a={".front":i.FRONT_PAGE,".faq-dispatch":i.FAQ_PAGE,".node-type-faq-theme":i.FAQ_PAGE,".node-type-terms-and-conditions":i.LEGAL_PAGE,".node-type-text-only-page":i.PAGE_404,".section-product-category":i.LISTING_PAGE,".node-type-story":i.STORY_PAGE,".node-type-hermes-product-display":i.PRODUCT_PAGE,".pane-hermes-grid":i.PRODUCT_GRID,".grid-wrapper":i.PRODUCT_GRID,"#store-locator":i.FIND_STORE_PAGE,".successful-order":i.CHECKOUT_CONFIRMATION,".page-validate3ds":i.VALIDATE_3DS_PAGE,".page-account-create":i.ACCOUNT_PROFIL_PAGE,".page-profil":i.ACCOUNT_PROFIL_PAGE},b=h(a).map(function(b){if(jQuery(b).length>0)return a[b]}),c=b.find(function(a){return a});if(c===i.PRODUCT_PAGE)switch(Drupal.settings.hermes_products.data.configurator_type){case"VARIANT_PRODUCT":c=i.PRODUCT_PAGE_SINGLE;break;case"DOUBLE_PRODUCT":c=i.PRODUCT_PAGE_DOUBLE;break;case"BIKINI_SET":c=i.PRODUCT_PAGE_DOUBLE;break;case"LOOK_SET":c=i.PRODUCT_PAGE_LOOK;break;case"PERFUME_SET":c=i.PRODUCT_PAGE_SET}return Drupal.settings.hermes_master_page&&(c=i.MASTER_PAGE),c},b.getEnglishOrFrenchUrl=function(){var a=void 0,c=document.getElementsByTagName("link"),e=d.get("currentLanguage"),f=d.get("currentCountry");if("en"!==e)a=b.getUrlEquivalent(a,c,"en-"+f);else for(var g=0;g<c.length;g++)"canonical"===c[g].rel&&(a=c[g].href);a=b.getUrlEquivalent(a,c,"en-us"),a=b.getUrlEquivalent(a,c,"en-gb"),a=b.getUrlEquivalent(a,c,"fr-"+f),a=b.getUrlEquivalent(a,c,"fr-fr"),"undefined"==typeof a&&(a="no english nor french equivalent found");var h=void 0;return h=a.indexOf("hermes.cn")!==-1&&Drupal.settings.baseUrl.indexOf("hermes.com")!==-1?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+1:a.indexOf("hermes.com")!==-1&&Drupal.settings.baseUrl.indexOf("hermes.cn")!==-1?Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+3:Drupal.settings.baseUrl.length+Drupal.settings.hermes_url_locale.length+2,a=a.substr(h)},b.getUrlEquivalent=function(a,b,c){if("undefined"==typeof a)for(var d=0;d<b.length;d++)b[d].hreflang===c&&(a=b[d].href);return a},b.getUserAgent=function(a){var b=window.navigator.userAgent.toLowerCase(),c=/micromessenger/.test(b);c&&(a.user_agent=window.navigator.userAgent)},b.ProductPage=function(a,d){var g=[],h=b.setProductArray(a),k=b.setSkuArray(a);if(d.productname=b.getProductName(a),d.productsku=b.getProductSku(a),d.departmentcode=b.getProductDepartmentCode(a),d.productlocator=e.isProductLocatorActive()&&!e.isProductExcluded()?"yes":"no",d.in_store_only=String(e.hasStockRetailOnly(k)),APP.pubsub.subscribe("configurator.change",c),APP.selectedSku&&a&&a.productsWithStock){var l=a.productsWithStock.find(function(a){return a.sku===APP.selectedSku});l&&(d.productsku=l.sku)}if(e.isProductLocatorActive()&&(d.availability_hit=j.getAvailabilityHitLabel(d.productsku)),Drupal.settings.hermes_products_attributes&&Drupal.settings.hermes_products_attributes.isDouble&&k.length>0){var m={name:"buckle",sku:k[0],brand:i.BRAND,stock:Drupal.settings.hermes_products.data.belts[k[0]].in_stock?"in stock":"out of stock"};h.push(m)}if(h.length>0)for(var n in h)for(var o in k)if(k[o].replace(/\s/g,"")===h[n].sku.replace(/\s/g,"")){var p=h[n],q=f.unformat(p.price).toFixed(2),r=b.getColor(p),s=p.department_code?p.department_code:t.departmentcode,t={name:p.title,id:p.sku,price:q,brand:i.BRAND,category:s+"/"+p.family_code,variant:r,dimension5:p.ref_size,dimension6:p.department_code,dimension7:p.family_code,dimension8:p.product_code,dimension9:p.division_code,dimension37:p.stock,in_store_only:String(e.hasStockRetailOnly([p.sku]))};e.isProductLocatorActive()&&(t.dimension53=j.getAvailabilityHitLabel(p.sku)),g.push(t)}return g},b.getProductDepartmentCode=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":case"PERFUME_SET":a&&a.productsWithStock&&a.productsWithStock.length&&(b=a.productsWithStock[0].department_code?a.productsWithStock[0].department_code:"unavailable");break;case"LOOK_SET":case"BIKINI_SET":a&&a.productsWithStock&&a.productsWithStock.length&&a.productsWithStock[0]&&a.productsWithStock[0].length&&(b=a.productsWithStock[0][0].department_code?a.productsWithStock[0][0].department_code:"unavailable");break;default:b="error"}return b},b.getProductSku=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":b=a.targeted_variant.sku;break;case"DOUBLE_PRODUCT":b=a.default_variant.set_sku;break;case"LOOK_SET":case"PERFUME_SET":case"BIKINI_SET":b=a.set.sku;break;default:b=null}return b},b.getProductName=function(a){var b=void 0;switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":b=a.targeted_variant.title;break;case"BIKINI_SET":case"PERFUME_SET":case"LOOK_SET":b=a.set.title;break;default:b=null}return b},b.setProductArray=function(a){var b=[];if(a.productsWithStock)switch(a.configurator_type){case"VARIANT_PRODUCT":case"DOUBLE_PRODUCT":b=a.productsWithStock.slice(0);break;case"PERFUME_SET":for(var c=a.set.selection,d=0;d<c.length;d++)for(var e=0;e<a.productsWithStock.length;e++)c[d].sku===a.productsWithStock[e].sku&&b.push(a.productsWithStock[e]);break;case"LOOK_SET":case"BIKINI_SET":for(var d=0;d<a.productsWithStock.length;d++)for(var e=0;e<a.productsWithStock[d].length;e++)b.push(a.productsWithStock[d][e])}return b},b.setSkuArray=function(a){var c=b.setProductArray(a),d=c&&c[0]?c[0].sku_list:null;APP.selectedSku&&(d=APP.selectedSku);var e=[];switch(a.configurator_type){case"VARIANT_PRODUCT":e.push(a.selected_sku);break;case"DOUBLE_PRODUCT":e=d?d.split(", "):[];break;case"BIKINI_SET":e=a.default_variant.sku;break;case"PERFUME_SET":for(var f=0;f<c.length;f++)e.push(c[f].sku);break;case"LOOK_SET":e=a.default_variant.sku;break;default:e=[]}return e},b.ProductsGrid=function(a,c,d){var e=[];c.departmentcode=b.getProductsAttribute(d,"department_code");for(var g in Drupal.settings.hermes_products)if(Drupal.settings.hermes_products.hasOwnProperty(g)){var h=a?i.SEARCH_RESULTS:i.PRODUCT_GRID,j=Drupal.settings.hermes_products[g],k=f.unformat(j.price).toFixed(2),l=j.department_code&&!c.departmentcode?j.department_code:c.departmentcode;e.push({name:j.title,id:j.sku,price:k,brand:i.BRAND,category:l+"/"+j.family_code,dimension5:j.ref_size,dimension6:j.department_code,dimension7:j.family_code,dimension8:j.product_code,dimension9:j.division_code,position:parseInt(g,10)+1,list:h})}return e},b.getUser=function(a,c){if(a){a.customer_id&&(c.userId=a.customer_id);var d=a.gender?a.gender:a.prefix;c.clienttype=b.getUserType(a.user_type),c.clientgender=b.getGender(d)}else c.clientgender=null,c.clienttype=i.NONCONNECTED},b.getMenuLvl=function(a){var b=d.get("nav");if(b){var c=b.split("/");void 0!==c[0]&&(a.menu_lv1=c[0]),void 0!==c[1]?a.menu_lv2=c[1]:a.menu_lv2=null,void 0!==c[2]?a.menu_lv3=c[2]:a.menu_lv3=null}},b.isSearchResult=function(a,c){var e=!1;if(c!==i.FRONT_PAGE&&c!==i.STORY_PAGE)window.location.pathname.indexOf("search")>-1&&(e=!0,d.set("nav","direct")),b.getMenuLvl(a);else if(c===i.MASTER_PAGE){var f=d.get("nav");f||d.set("nav","direct"),b.getMenuLvl(a)}else d.set("nav","direct");return e},b.getCategories=function(a,b){b!==i.MASTER_PAGE&&b!==i.STORY_PAGE&&b!==i.FRONT_PAGE||(a.editorialcategory=Drupal.settings.theme&&Drupal.settings.theme.editorial_category?Drupal.settings.theme.editorial_category:i.NONAPP,a.editorialtypology=Drupal.settings.theme&&Drupal.settings.theme.editorial_typology?Drupal.settings.theme.editorial_typology:i.NONAPP,a.editorialitem=Drupal.settings.theme&&Drupal.settings.theme.editorial_item?Drupal.settings.theme.editorial_item:i.NONAPP);
},b.getColor=function(a){return a.attributes&&a.attributes.field_color_hermes&&a.attributes.field_color_hermes.name?a.attributes.field_color_hermes.name:i.NONAPP},b.getPaymentMethod=function(){var a=void 0,b=d.get("paymentMethod"),c=d.get("ccType");if(b===i.PAYMENT_METHOD.creditCard||b===i.PAYMENT_METHOD.adyenOneclick)switch(c){case"VI":a="1";break;case"MC":a="2";break;case"AE":a="3";break;case"SM":a="4";break;case"DC":a="5";break;case"DI":a="6";break;case"JCB":a="7";break;case"CUP":a="8";break;case"cartebancaire":case void 0:a="9";break;default:a="unknown"}else a=b===i.PAYMENT_METHOD.paypal?"10":b===i.PAYMENT_METHOD.alipay?"11":b===i.PAYMENT_METHOD.wechat?"12":b===i.PAYMENT_METHOD.hsbcCup?"13":"unknown";return a},a("default",b)}}}),a.register("2c",["18","1d"],function(a){"use strict";function b(){function a(){APP.pubsub.subscribe("analytics-tray-forgot-password",function(){b.pushEvent("Account","SigninKO","ForgotPassword",null,null)}),jQuery(".account-signed-out > button.button-tray.tray-close").on("click",b.closeLoginNotification),jQuery(".account-signed-in > button.button-tray.tray-close").on("click",b.closeAccountOverlay),jQuery(".account-signed-out > button.continue-experience").on("click",b.continueShoppingAccount),jQuery('[data-tray-trigger="tray-forgotpassword"]').on("click",b.openForgotPasswordTray),jQuery('[data-track="data-track-account-create-button"]').on("click",b.openCreateAccountPage),jQuery('[id="edit-send-sms-button-creation"]').on("click",b.createAccountGetCode),jQuery('[data-track="data-track-general-terms-and-conditions"]').on("click",b.createAccountConditionsPrivacyLinks),jQuery('[data-track="data-track-privacy"]').on("click",b.createAccountConditionsPrivacyLinks),jQuery("#tray-account").find(".wechat-social-login a").on("click",b.socialLoginWechat),jQuery(".account-tray-links-list a.list-orders").on("click",b.viewProfile)}function c(){a()}c()}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){b.pushEvent=function(a,b,c,d,e){var f={};f.event="uaevent",a&&(f.eventcategory=a),b&&(f.eventaction=b),c&&(f.eventlabel=c),d&&(f.virtualPageUri=d),e&&(f.pageType=e),dataLayer.push(f)},b.formFail=function(a,c,d,e){var f=void 0,g=document.querySelector("div.validation-error");if(null!==g){var h=void 0,i=void 0,j=void 0;null!==g.querySelector("select")?(i=g.querySelector("select").dataset.validationLabel,h=g.querySelector("select").getAttribute("aria-describedby")):null!==g.querySelector("input")?(i=g.querySelector("input").dataset.validationLabel,h=g.querySelector("input").getAttribute("aria-describedby")):i="Captcha",j=null!==h&&null!==jQuery(h).find("span").html()?jQuery(h).find("span").html():"Required information",f=i+" - "+j}else f="Error - Required information";b.pushEvent(a,c,f,d,e)},b.formSuccess=function(a,c,e,f,g,h){jQuery(document).ajaxComplete(function(i,j,k){k.url.search(g)!==-1&&(j.responseJSON.hasOwnProperty("error")?b.pushEvent(a,e,f,null,null):d.isWechatInApp()?b.pushEvent(a,c,"SocialLogin","WeChat",null):b.pushEvent(a,c,b.eventLabelForNewsletterChecked(h),null,null))})},b.eventLabelForNewsletterChecked=function(a){var b="newsletter_optin_";return void 0===a||null===a?null:a?b+"YES":b+"NO"},b.closeAccountOverlay=function(){b.pushEvent("Account","my_account","close")},b.closeLoginNotification=function(){b.pushEvent("Account","login_notification","close")},b.continueShoppingAccount=function(){b.pushEvent("Account","login_notification","continue")},b.viewProfile=function(){b.pushEvent("Account","my_account","my_profile")},b.openCreateAccountPage=function(a){var c=void 0;"data-track-account-create-button"===a.target.dataset.track&&(c="ClickButton"),b.pushEvent("Account","1_CreateAccount",c,null,null)},b.openSignInTray=function(){b.pushEvent("Account","Click_Signin_link",null,null,null)},b.openForgotPasswordTray=function(){var a=document.querySelector("#tray-create-profile");a&&"false"===a.getAttribute("aria-hidden")?b.pushEvent("Checkout_login","PasswordKO","ForgotPassword",null,null):b.pushEvent("Account","SigninKO","ForgotPassword",null,null)},b.createAccountGetCode=function(){var a=document.querySelector("#tray-create-profile");a&&"false"===a.getAttribute("aria-hidden")?b.pushEvent("Checkout_CreateAccount","1_CreateAccount_getcode","ClickButton",null,null):b.pushEvent("Account","1_CreateAccount_getcode","ClickButton",null,null)},b.createAccountConditionsPrivacyLinks=function(a){var c=document.querySelector("#tray-create-profile");c&&"false"===c.getAttribute("aria-hidden")&&("data-track-general-terms-and-conditions"===a.target.dataset.track&&b.pushEvent("Checkout_CreateAccount","1_CreateAccount","ClickLink_conditions",null,null),"data-track-privacy"===a.target.dataset.track&&b.pushEvent("Checkout_CreateAccount","1_CreateAccount","ClickLink_privacy_policy",null,null))},b.socialLoginWechat=function(){b.pushEvent("Account","SocialLogin","Wechat",null,null)},b.ereservationLogin=function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];a?b.pushEvent("Account","Signin_eresaKO",a,null,null):b.pushEvent("Account","Signin_eresa","Continue_button",null,null)},b.ereservationSignup=function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];a?b.pushEvent("Account","2_Light_AccountCreatedKO_Eresa",a,null,null):b.pushEvent("Account","1_Create_Light_Account_Eresa","Continue_button",null,null)},b.ereservationAccountOverlay=function(){var a="/"+Drupal.settings.pathPrefix+"eresa_light_account/";b.pushEvent("Account","EresaAccountOverlay",null,a,"account")},a("default",b)}}}),a.registerDynamic("fe",[],!0,function(a,b,c){this||self;!function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b={rotl:function(a,b){return a<<b|a>>>32-b},rotr:function(a,b){return a<<32-b|a>>>b},endian:function(a){if(a.constructor==Number)return 16711935&b.rotl(a,8)|4278255360&b.rotl(a,24);for(var c=0;c<a.length;c++)a[c]=b.endian(a[c]);return a},randomBytes:function(a){for(var b=[];a>0;a--)b.push(Math.floor(256*Math.random()));return b},bytesToWords:function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},wordsToBytes:function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},bytesToHex:function(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")},hexToBytes:function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substr(c,2),16));return b},bytesToBase64:function(b){for(var c=[],d=0;d<b.length;d+=3)for(var e=b[d]<<16|b[d+1]<<8|b[d+2],f=0;f<4;f++)8*d+6*f<=8*b.length?c.push(a.charAt(e>>>6*(3-f)&63)):c.push("=");return c.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/gi,"");for(var c=[],d=0,e=0;d<b.length;e=++d%4)0!=e&&c.push((a.indexOf(b.charAt(d-1))&Math.pow(2,-2*e+8)-1)<<2*e|a.indexOf(b.charAt(d))>>>6-2*e);return c}};c.exports=b}()}),a.registerDynamic("ff",["fe"],!0,function(a,b,c){this||self;c.exports=a("fe")}),a.registerDynamic("100",[],!0,function(a,b,c){var d=(this||self,{utf8:{stringToBytes:function(a){return d.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(d.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}});c.exports=d}),a.registerDynamic("101",["100"],!0,function(a,b,c){this||self;c.exports=a("100")}),a.registerDynamic("102",[],!0,function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");c===-1&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function e(a){var b=d(a),c=b[0],e=b[1];return 3*(c+e)/4-e}function f(a,b,c){return 3*(b+c)/4-c}function g(a){var b,c,e=d(a),g=e[0],h=e[1],i=new m(f(a,g,h)),j=0,k=h>0?g-4:g;for(c=0;c<k;c+=4)b=l[a.charCodeAt(c)]<<18|l[a.charCodeAt(c+1)]<<12|l[a.charCodeAt(c+2)]<<6|l[a.charCodeAt(c+3)],i[j++]=b>>16&255,i[j++]=b>>8&255,i[j++]=255&b;return 2===h&&(b=l[a.charCodeAt(c)]<<2|l[a.charCodeAt(c+1)]>>4,i[j++]=255&b),1===h&&(b=l[a.charCodeAt(c)]<<10|l[a.charCodeAt(c+1)]<<4|l[a.charCodeAt(c+2)]>>2,i[j++]=b>>8&255,i[j++]=255&b),i}function h(a){return k[a>>18&63]+k[a>>12&63]+k[a>>6&63]+k[63&a]}function i(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16&16711680)+(a[f+1]<<8&65280)+(255&a[f+2]),e.push(h(d));return e.join("")}function j(a){for(var b,c=a.length,d=c%3,e=[],f=16383,g=0,h=c-d;g<h;g+=f)e.push(i(a,g,g+f>h?h:g+f));return 1===d?(b=a[c-1],e.push(k[b>>2]+k[b<<4&63]+"==")):2===d&&(b=(a[c-2]<<8)+a[c-1],e.push(k[b>>10]+k[b>>4&63]+k[b<<2&63]+"=")),e.join("")}this||self;b.byteLength=e,b.toByteArray=g,b.fromByteArray=j;for(var k=[],l=[],m="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,p=n.length;o<p;++o)k[o]=n[o],l[n.charCodeAt(o)]=o;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63}),a.registerDynamic("103",["102"],!0,function(a,b,c){this||self;c.exports=a("102")}),a.registerDynamic("104",[],!0,function(a,b,c){this||self;b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}),a.registerDynamic("105",["104"],!0,function(a,b,c){this||self;c.exports=a("104")}),a.registerDynamic("106",["103","105"],!0,function(a,b,c){"use strict";function d(){try{var a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}function e(a){if(a>Y)throw new RangeError('The value "'+a+'" is invalid for option "size"');var b=new Uint8Array(a);return Object.setPrototypeOf(b,f.prototype),b}function f(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');return j(a)}return g(a,b,c)}function g(a,b,c){if("string"==typeof a)return k(a,b);if(ArrayBuffer.isView(a))return m(a);if(null==a)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(T(a,ArrayBuffer)||a&&T(a.buffer,ArrayBuffer))return n(a,b,c);if("undefined"!=typeof SharedArrayBuffer&&(T(a,SharedArrayBuffer)||a&&T(a.buffer,SharedArrayBuffer)))return n(a,b,c);if("number"==typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');var d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return f.from(d,b,c);var e=o(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return f.from(a[Symbol.toPrimitive]("string"),b,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function i(a,b,c){return h(a),a<=0?e(a):void 0!==b?"string"==typeof c?e(a).fill(b,c):e(a).fill(b):e(a)}function j(a){return h(a),e(a<0?0:0|p(a))}function k(a,b){if("string"==typeof b&&""!==b||(b="utf8"),!f.isEncoding(b))throw new TypeError("Unknown encoding: "+b);var c=0|r(a,b),d=e(c),g=d.write(a,b);return g!==c&&(d=d.slice(0,g)),d}function l(a){for(var b=a.length<0?0:0|p(a.length),c=e(b),d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a){if(T(a,Uint8Array)){var b=new Uint8Array(a);return n(b.buffer,b.byteOffset,b.byteLength)}return l(a)}function n(a,b,c){if(b<0||a.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw new RangeError('"length" is outside of buffer bounds');var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),Object.setPrototypeOf(d,f.prototype),d}function o(a){if(f.isBuffer(a)){var b=0|p(a.length),c=e(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}return void 0!==a.length?"number"!=typeof a.length||U(a.length)?e(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}function p(a){if(a>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),f.alloc(+a)}function r(a,b){if(f.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||T(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var c=a.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&0===c)return 0;for(var e=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return O(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return R(a).length;default:if(e)return d?-1:O(a).length;b=(""+b).toLowerCase(),e=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,U(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(U(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return S(O(b,a.length-c),a,c,d)}function y(a,b,c,d){return S(P(b),a,c,d)}function z(a,b,c,d){return S(R(b),a,c,d)}function A(a,b,c,d){return S(Q(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){var b=a.length;if(b<=Z)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=Z));return c}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=_[a[f]];return e}function H(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function K(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function L(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function M(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function N(a){if(a=a.split("=")[0],a=a.trim().replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function O(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function P(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Q(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function R(a){return V.toByteArray(N(a))}function S(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function T(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function U(a){return a!==a}var V=(this||self,a("103")),W=a("105"),X="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;b.Buffer=f,b.SlowBuffer=q,b.INSPECT_MAX_BYTES=50;var Y=2147483647;b.kMaxLength=Y,f.TYPED_ARRAY_SUPPORT=d(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(a,b,c){return g(a,b,c)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(a,b,c){return i(a,b,c)},f.allocUnsafe=function(a){return j(a)},f.allocUnsafeSlow=function(a){return j(a)},f.isBuffer=function(a){return null!=a&&a._isBuffer===!0&&a!==f.prototype},f.compare=function(a,b){if(T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength)),!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(T(g,Uint8Array))e+g.length>d.length?f.from(g).copy(d,e):Uint8Array.prototype.set.call(d,g,e);else{if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e)}e+=g.length}return d},f.byteLength=r,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},f.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):s.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},X&&(f.prototype[X]=f.prototype.inspect),f.prototype.compare=function(a,b,c,d,e){if(T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),!f.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},f.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},f.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return Object.setPrototypeOf(d,f.prototype),d},f.prototype.readUintLE=f.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUintBE=f.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUint8=f.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),W.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),W.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),W.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),W.read(this,a,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},f.prototype.writeUint8=f.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeFloatLE=function(a,b,c){return L(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return L(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(!f.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===a.length){var e=a.charCodeAt(0);("utf8"===d&&e<128||"latin1"===d)&&(a=e)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=f.isBuffer(a)?a:f.from(a,d),i=h.length;if(0===i)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var $=/[^+/0-9A-Za-z-_]/g,_=function(){for(var a="0123456789abcdef",b=new Array(256),c=0;c<16;++c)for(var d=16*c,e=0;e<16;++e)b[d+e]=a[c]+a[e];return b}()}),a.registerDynamic("107",["106"],!0,function(a,b,c){this||self;c.exports=a("106")}),a.registerDynamic("108",["107"],!0,function(b,c,d){this||self;d.exports=a._nodeRequire?a._nodeRequire("buffer"):b("107")}),a.registerDynamic("fd",["108"],!0,function(a,b,c){this||self;c.exports=a("108")}),a.registerDynamic("109",["fd"],!0,function(a,b,c){this||self;!function(a){function b(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function d(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&b(a.slice(0,0))}c.exports=function(a){return null!=a&&(b(a)||d(a)||!!a._isBuffer)}}(a("fd").Buffer)}),a.registerDynamic("10a",["109"],!0,function(a,b,c){this||self;c.exports=a("109")}),a.registerDynamic("10b",["ff","101","10a"],!0,function(a,b,c){
this||self;!function(){var b=a("ff"),d=a("101").utf8,e=a("10a"),f=a("101").bin,g=function(a,c){a.constructor==String?a=c&&"binary"===c.encoding?f.stringToBytes(a):d.stringToBytes(a):e(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||a.constructor===Uint8Array||(a=a.toString());for(var h=b.bytesToWords(a),i=8*a.length,j=1732584193,k=-271733879,l=-1732584194,m=271733878,n=0;n<h.length;n++)h[n]=16711935&(h[n]<<8|h[n]>>>24)|4278255360&(h[n]<<24|h[n]>>>8);h[i>>>5]|=128<<i%32,h[(i+64>>>9<<4)+14]=i;for(var o=g._ff,p=g._gg,q=g._hh,r=g._ii,n=0;n<h.length;n+=16){var s=j,t=k,u=l,v=m;j=o(j,k,l,m,h[n+0],7,-680876936),m=o(m,j,k,l,h[n+1],12,-389564586),l=o(l,m,j,k,h[n+2],17,606105819),k=o(k,l,m,j,h[n+3],22,-1044525330),j=o(j,k,l,m,h[n+4],7,-176418897),m=o(m,j,k,l,h[n+5],12,1200080426),l=o(l,m,j,k,h[n+6],17,-1473231341),k=o(k,l,m,j,h[n+7],22,-45705983),j=o(j,k,l,m,h[n+8],7,1770035416),m=o(m,j,k,l,h[n+9],12,-1958414417),l=o(l,m,j,k,h[n+10],17,-42063),k=o(k,l,m,j,h[n+11],22,-1990404162),j=o(j,k,l,m,h[n+12],7,1804603682),m=o(m,j,k,l,h[n+13],12,-40341101),l=o(l,m,j,k,h[n+14],17,-1502002290),k=o(k,l,m,j,h[n+15],22,1236535329),j=p(j,k,l,m,h[n+1],5,-165796510),m=p(m,j,k,l,h[n+6],9,-1069501632),l=p(l,m,j,k,h[n+11],14,643717713),k=p(k,l,m,j,h[n+0],20,-373897302),j=p(j,k,l,m,h[n+5],5,-701558691),m=p(m,j,k,l,h[n+10],9,38016083),l=p(l,m,j,k,h[n+15],14,-660478335),k=p(k,l,m,j,h[n+4],20,-405537848),j=p(j,k,l,m,h[n+9],5,568446438),m=p(m,j,k,l,h[n+14],9,-1019803690),l=p(l,m,j,k,h[n+3],14,-187363961),k=p(k,l,m,j,h[n+8],20,1163531501),j=p(j,k,l,m,h[n+13],5,-1444681467),m=p(m,j,k,l,h[n+2],9,-51403784),l=p(l,m,j,k,h[n+7],14,1735328473),k=p(k,l,m,j,h[n+12],20,-1926607734),j=q(j,k,l,m,h[n+5],4,-378558),m=q(m,j,k,l,h[n+8],11,-2022574463),l=q(l,m,j,k,h[n+11],16,1839030562),k=q(k,l,m,j,h[n+14],23,-35309556),j=q(j,k,l,m,h[n+1],4,-1530992060),m=q(m,j,k,l,h[n+4],11,1272893353),l=q(l,m,j,k,h[n+7],16,-155497632),k=q(k,l,m,j,h[n+10],23,-1094730640),j=q(j,k,l,m,h[n+13],4,681279174),m=q(m,j,k,l,h[n+0],11,-358537222),l=q(l,m,j,k,h[n+3],16,-722521979),k=q(k,l,m,j,h[n+6],23,76029189),j=q(j,k,l,m,h[n+9],4,-640364487),m=q(m,j,k,l,h[n+12],11,-421815835),l=q(l,m,j,k,h[n+15],16,530742520),k=q(k,l,m,j,h[n+2],23,-995338651),j=r(j,k,l,m,h[n+0],6,-198630844),m=r(m,j,k,l,h[n+7],10,1126891415),l=r(l,m,j,k,h[n+14],15,-1416354905),k=r(k,l,m,j,h[n+5],21,-57434055),j=r(j,k,l,m,h[n+12],6,1700485571),m=r(m,j,k,l,h[n+3],10,-1894986606),l=r(l,m,j,k,h[n+10],15,-1051523),k=r(k,l,m,j,h[n+1],21,-2054922799),j=r(j,k,l,m,h[n+8],6,1873313359),m=r(m,j,k,l,h[n+15],10,-30611744),l=r(l,m,j,k,h[n+6],15,-1560198380),k=r(k,l,m,j,h[n+13],21,1309151649),j=r(j,k,l,m,h[n+4],6,-145523070),m=r(m,j,k,l,h[n+11],10,-1120210379),l=r(l,m,j,k,h[n+2],15,718787259),k=r(k,l,m,j,h[n+9],21,-343485551),j=j+s>>>0,k=k+t>>>0,l=l+u>>>0,m=m+v>>>0}return b.endian([j,k,l,m])};g._ff=function(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._gg=function(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._hh=function(a,b,c,d,e,f,g){var h=a+(b^c^d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._ii=function(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._blocksize=16,g._digestsize=16,c.exports=function(a,c){if(void 0===a||null===a)throw new Error("Illegal argument "+a);var d=b.wordsToBytes(g(a,c));return c&&c.asBytes?d:c&&c.asString?f.bytesToString(d):b.bytesToHex(d)}}()}),a.registerDynamic("10c",["10b"],!0,function(a,b,c){this||self;c.exports=a("10b")}),a.registerDynamic("10d",[],!0,function(a,b,c){this||self;c.exports=function(a){var b=[{name:"iOS",rule:/iP(hone|od|ad)/},{name:"Android OS",rule:/Android/},{name:"BlackBerry OS",rule:/BlackBerry|BB10/},{name:"Windows Mobile",rule:/IEMobile/},{name:"Amazon OS",rule:/Kindle/},{name:"Windows 3.11",rule:/Win16/},{name:"Windows 95",rule:/(Windows 95)|(Win95)|(Windows_95)/},{name:"Windows 98",rule:/(Windows 98)|(Win98)/},{name:"Windows 2000",rule:/(Windows NT 5.0)|(Windows 2000)/},{name:"Windows XP",rule:/(Windows NT 5.1)|(Windows XP)/},{name:"Windows Server 2003",rule:/(Windows NT 5.2)/},{name:"Windows Vista",rule:/(Windows NT 6.0)/},{name:"Windows 7",rule:/(Windows NT 6.1)/},{name:"Windows 8",rule:/(Windows NT 6.2)/},{name:"Windows 8.1",rule:/(Windows NT 6.3)/},{name:"Windows 10",rule:/(Windows NT 10.0)/},{name:"Windows ME",rule:/Windows ME/},{name:"Open BSD",rule:/OpenBSD/},{name:"Sun OS",rule:/SunOS/},{name:"Linux",rule:/(Linux)|(X11)/},{name:"Mac OS",rule:/(Mac_PowerPC)|(Macintosh)/},{name:"QNX",rule:/QNX/},{name:"BeOS",rule:/BeOS/},{name:"OS/2",rule:/OS\/2/},{name:"Search Bot",rule:/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/}],c=b.filter(function(b){if(a.match(b.rule))return!0});return c&&c[0]?c[0].name:null}}),a.registerDynamic("10e",["10d"],!0,function(a,b,c){var d=(this||self,a("10d"));c.exports=function(a){if(!a)return null;var b=[["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]];return b.map(function(b){if(b[1].test(a)){var c=b[1].exec(a),e=c&&c[1].split(/[._]/).slice(0,3);return e&&e.length<3&&Array.prototype.push.apply(e,1==e.length?[0,0]:[0]),{name:b[0],version:e.join("."),os:d(a)}}}).filter(Boolean).shift()}}),a.registerDynamic("10f",["10e"],!0,function(a,b,c){var d,e=(this||self,a("10e"));"undefined"!=typeof navigator&&navigator&&(d=navigator.userAgent),c.exports=e(d)}),a.registerDynamic("110",["10f"],!0,function(a,b,c){this||self;c.exports=a("10f")}),a.register("111",["110","10c"],function(a){"use strict";function b(){jQuery(document).ajaxSend(function(a,b,e){e.runTime=(new Date).getTime();var f=c&&c.name?c.name:"drupal";b.setRequestHeader("X-Hermes-Request-ID",f+"_"+d(JSON.stringify(e)))})}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),a.registerDynamic("75",[],!0,function(a,b,c){var d=(this||self,Object);c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach}}),a.registerDynamic("112",["75"],!0,function(a,b,c){var d=(this||self,a("75"));c.exports=function(a,b,c){return d.setDesc(a,b,c)}}),a.registerDynamic("d1",["112"],!0,function(a,b,c){this||self;c.exports={default:a("112"),__esModule:!0}}),a.registerDynamic("3",["d1"],!0,function(a,b,c){"use strict";var d=(this||self,a("d1").default);b.default=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.__esModule=!0}),a.registerDynamic("4",[],!0,function(a,b,c){"use strict";this||self;b.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.__esModule=!0}),a.registerDynamic("f2",[],!0,function(a,b,c){this||self;c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),a.registerDynamic("cb",["f2"],!0,function(a,b,c){var d=(this||self,a("f2"));c.exports=function(a){return Object(d(a))}}),a.registerDynamic("6c",[],!0,function(a,b,c){var d=this||self,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)}),a.registerDynamic("68",[],!0,function(a,b,c){this||self;c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),a.registerDynamic("60",["68"],!0,function(a,b,c){var d=(this||self,a("68"));c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}}),a.registerDynamic("42",["6c","45","60"],!0,function(a,b,c){var d=this||self,d=a("6c"),e=a("45"),f=a("60"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,c.exports=h}),a.registerDynamic("b6",[],!0,function(a,b,c){this||self;c.exports=function(a){try{return!!a()}catch(a){return!0}}}),a.registerDynamic("88",["42","45","b6"],!0,function(a,b,c){var d=(this||self,a("42")),e=a("45"),f=a("b6");c.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}}),a.registerDynamic("113",["cb","88"],!0,function(a,b,c){var d=(this||self,a("cb"));a("88")("keys",function(a){return function(b){return a(d(b))}})}),a.registerDynamic("45",[],!0,function(a,b,c){var d=(this||self,c.exports={version:"1.2.6"});"number"==typeof __e&&(__e=d)}),a.registerDynamic("114",["113","45"],!0,function(a,b,c){this||self;a("113"),c.exports=a("45").Object.keys}),a.registerDynamic("2d",["114"],!0,function(a,b,c){this||self;c.exports={default:a("114"),__esModule:!0}}),a.register("18",[],function(a){"use strict";var b;return{setters:[],execute:function(){b={set:function(a,b){"object"==typeof b&&(b=JSON.stringify(b)),this.hasSessionStorage()?sessionStorage.setItem(a,b):this.setCookie(a,b)},get:function(a){var b=this.hasSessionStorage()?sessionStorage.getItem(a):this.getCookie(a);if(b)try{return JSON.parse(b)}catch(a){return b}},deleteItem:function(a){this.hasSessionStorage()?sessionStorage.removeItem(a):this.deleteCookie(a)},clear:function(){sessionStorage.clear()},hasSessionStorage:function(){var a="test";try{return sessionStorage.setItem(a,a),sessionStorage.removeItem(a),!0}catch(a){return!1}},getCookie:function(a){if(document.cookie){var b=function(){var b=document.cookie.split(";"),c=a.length+1,d=b.map(function(a){return jQuery.trim(a)}).find(function(b){return b.substring(0,c)===a+"="});return d?{v:decodeURIComponent(d.substring(c))}:{v:void 0}}();if("object"==typeof b)return b.v}},setCookie:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=c.expires;if("number"==typeof d){var e=new Date;e.setTime(e.getTime()+24*d*60*60*1e3),d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString()),b=encodeURIComponent(b);var f=a+"="+b;for(var g in c)if(c.hasOwnProperty(g)){f+="; "+g;var h=c[g];h!==!0&&(f+="="+h)}document.cookie=f},deleteCookie:function(a){this.setCookie(a,null,{expires:-1})}},a("default",b)}}}),a.register("1e",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{COLOR_LESS:"SANSCOLORIS",SIZE_LESS:"SANS_TAILLE",CANADA:"ca",FRANCE:"fr",JAPAN:"jp",HK:"hk",MACAO:"mo",TAIWAN:"tw",KOREA:"kr",US:"us",CHINA:"cn",EMIRATES:"dh",SAUDI:"ri",NEED_YUNPIAN:["cn","hk","mo","tw","kr","th"],REGION_DISTRICT_FIELDS:["hk","tw","mo","th"],PHONE_LOGIN:["cn"],DELIVER:"deliver",PICKUP:"pickup",COLOR_LESS_WITH_SPACE:"SANS_COLORIS",NB_ITEMS_GRID_FH:36,MIN_DAY:0,MAX_DAY:31,LENGTH_YEAR:4,LIMIT_AGE_USER:110,YEAR_LABEL:"year",SPECIAL_KEY:["Backspace","Del","Home","Tab","Left","Right","Up","Down","End","Spacebar","Shift"],TABLET_LANDSCAPE_WIDTH:1024,TABLET_PORTRAIT_WIDTH:768,REGION_DISABLED:-1,LOGIN_DELAY:4e3,HOSTNAME:["www.hermes.com","www.hermes.cn"],ERRORCODE:{inactivity:"401",emptyCart:"4100004",wrongEmailPassword:"2300001",oldPasswordIncorrect:"2310001",emailExist:"2400001",accountExist:"2400011",emailNewsletterInvalid:"2200000",emailInvalid:"2200001",outOfStock:"3300007",notInStock:"3400007",expiredHash:"2900005",hashNotFound:"2300005",smsBanned:"3100002",wechatbindingUserNotFound:"6000011",wechatbindingUserAlreadyBind:"6100011",wechatbindingUnionIdAlreadyUsed:"6200011",wechatbindingNeededParams:"6300011"},BRAND:"hermes",PRODUCTSIMPLEPAGELABEL:"SingleProductPage",PRODUCTDOUBLEPAGELABEL:"DoubleProductPage",LOOKPAGELABEL:"LooksProductPage",NONAPP:"N/A",MOTHERCAT:"1481",NONCONNECTED:"non-connected",FRONT_PAGE:"front page",FAQ_PAGE:"faq page",LEGAL_PAGE:"legal page",PAGE_404:"404 error page",LISTING_PAGE:"listing page",STORY_PAGE:"edito page",ACCOUNT_PROFIL_PAGE:"account",PRODUCT_PAGE:"product page",PRODUCT_PAGE_SINGLE:"single product page",PRODUCT_PAGE_DOUBLE:"double product page",PRODUCT_PAGE_LOOK:"look product page",PRODUCT_PAGE_SET:"set product page",FIND_STORE_PAGE:"store locator",VALIDATE_3DS_PAGE:"validate_3ds page",CHECKOUT_CONFIRMATION:"Checkout confirmation",PRODUCT_GRID:"product grid",MASTER_PAGE:"master page",SCROLL_PARAM:"positionsku",START_INDEX_PARAM:"fh_start_index",LIMIT_PRODUCTS_PARAM:108,SEARCH_RESULTS:"search results",MODULE_VIDEO:"Module_Video",VPURI_FINDYOURORDER:"/findyourorder/",VPURI_ORDERSTRAY:"/orderstray/",COUNTRY_USING_MILES:["US"],GENDERS:["Ms.","Mrs.","Mr.","Miss","Dr","Prof","Honorable"],EXTRA_URL_PARAM:["positionsku"],SECURITY_3DS_LOGOS:[{img:"visa",alt:"Verified by Visa"},{img:"mastercard",alt:"MasterCard SecureCode"},{img:"amex",alt:"American Express SafeKey"}],PAYMENT_OK:"payment_OK",PAYMENT_NOK:"payment_NOK",NOT_USED:"not_used",DURATION_SLIDE_TOGGLE:500,EXCHANGE:"exchange",REFUND:"refund",RETURN:"return",ENTER_KEY:"Enter",SPACE_KEY:"Space",BACKSPACE_KEY:"Backspace",ESCAPE_KEY:"Escape",ESCAPE_KEYCODE:27,DOWN_KEY:"ArrowDown",UP_KEY:"ArrowUp",TAB_KEY:"Tab",TAB_KEYCODE:9,SPACE_KEYCODE:32,END_KEYCODE:35,HOME_KEYCODE:36,LEFT_KEYCODE:37,UP_KEYCODE:38,RIGHT_KEYCODE:39,DOWN_KEYCODE:40,CHECKOUT:"Checkout",DATAGROUP:"data-group",INVALIDTYPES:[null,"file","image","submit","fieldset","reset","button","hidden"],FIELD_REF_SIZE:"field_ref_size",FIELD_COLOR_HERMES:"field_color_hermes",FIELD_MASS_VOLUME_INT:"field_mass_volume_int",FIELD_MASS_VOLUME_IMP:"field_mass_volume_imp",REQUIRED:"required",ERROR:"error",NO_SHIPPING_ADDRESS_MSG_COUNTRY_PREFIX:{US:"the"},SOAP_SET_COUNT:[3],PIPE_ENCODED:"%7C",REDIRECT_DELAY:3e3,NOTAX:"--",IS_IOS:/i(Phone|Pod|Pad)/.test(navigator.appVersion),KIT_APPLEWATCH:"KIT_APPLEWATCH",ACTIVATE_CAPTCHA_URL:"/is-captcha-activated",GET_LIST_CHINA_ADDRESS:"/address/china/infos",ADDRESS_DISTRICTS_URL:"/address/districts",PAYMENT_METHOD:{creditCard:"adyen_cc",adyenOneclick:"adyen_oneclick",paypal:"adyen_hpp_paypal",alipay:"alipay_payment",kcp:"adyen_hpp_kcp",kcp_payco:"adyen_hpp_kcp_payco",wechat:"wechatpay",hsbcCup:"hsbc_cup"},EZ_PUBLISH_COUNTRY_MAPPING:{ca:"Canada",fr:"France",us:"United States",gb:"Great Britain",cn:"China",de:"Germany",es:"Spain"},BIKINI:"BIKINI",PLAYER:{autoplay:"Autoplay",firstPlay:"FirstPlay",fullscreen:"Fullscreen",fw:"fw15",mute:"Mute",newPlay:"NewPlay",orgId:"88c3d9f3-ba13-4700-9f9f-a9030187bd5b",pause:"Pause",play:"Play",position:"Position",subscribe:"Subscribe to podcast",subscribe_close:"Close subscribe to podcast",rw:"rw15",start:"Start",stop:"Stop",unmute:"Unmute"},SAGAWA_CARRIER:"sagawa_standard",JAPAN_LASTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KANJI_LETTERS_PATTERN:"^[\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\u4e00-\\u9faf\\u3400-\\u4dbf\\u0041-\\u007a0-9]+$",JAPAN_LASTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_FIRSTNAME_KATAKANA_LETTERS_PATTERN:"^[\\u30a0-\\u30ff\\u0041-\\u007a0-9]+$",JAPAN_NO_NUMBERS_PATTERN:"\\d",FORGOT_PASSWORD_URL:"/forgot-password",CREATE_LIGHT_ACCOUNT_URL:"/customer/light",PRODUCT_LOCATOR_MSG_CONCESSIONARY_DISCLAIMER_COUNTRIES:["fr","us","it"],FORM_COUNTRY_DEFAULT_FIELDS_VALUES:{city:1,cityselect:-1,day:-1,district:-1,district_bis_id:-1,email:1,firstname:1,firstname2:-1,gender:-1,lastname:1,lastname2:-1,month:-1,postcode:1,postcode_bis:-1,postcode_select:-1,prefix:1,region:-1,regiontext:-1,street1:1,street2:0,subject_list:1,telephone2:-1,year:-1}})}}}),a.register("1d",["3","4","18","2d","1e"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(){c(this,a)}return b(a,null,[{key:"getCreditCardsData",value:function(a,b){var c={},d=!1;return Array.prototype.concat.apply([],e(a).filter(function(a){return b||!/adyen_hpp_|mercury_hpp_/.test(a)}).map(function(b){return e(a[b]).map(function(c){return a[b][c]})})).filter(function(a){return c[a.data]||a.data.indexOf("alipay")!==-1?a.data.indexOf("alipay")>-1?!d&&(d=!0,!0):void 0:(c[a.data]=a.data,!0)})}},{key:"allowedAutocompleteCountries",value:function(){var a=[];for(var b in Drupal.settings.hermes_account.options_countries)Drupal.settings.hermes_account.options_countries[b]["autocomplete-address"]&&a.push(b);return a}},{key:"isAutocompleteAddressActive",value:function(){return Drupal.settings.hermes_account.options_countries[Drupal.settings.hermes_current_country.toUpperCase()]["autocomplete-address"]}},{key:"getGoogleRegionMapping",value:function(a){return Drupal.settings.hermes_account.options_countries[a.toUpperCase()]["region-mapping"]}},{key:"isChina",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.CHINA,"i"))}},{key:"isHK",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.HK,"i"))}},{key:"isMacao",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.MACAO,"i"))}},{key:"isTaiwan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.TAIWAN,"i"))}},{key:"isKorea",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.KOREA,"i"))}},{key:"needSmsProvider",value:function(){return f.NEED_YUNPIAN.includes(Drupal.settings.hermes_current_country)}},{key:"needPhoneLogin",value:function(){return f.PHONE_LOGIN.includes(Drupal.settings.hermes_current_country)}},{key:"needStateDistrictFields",value:function(a){return f.REGION_DISTRICT_FIELDS.includes(a.toLowerCase())}},{key:"isJapan",value:function(){return!!Drupal.settings.hermes_current_country.match(new RegExp(f.JAPAN,"i"))}},{key:"hasLoginPhoneNumber",value:function(a){return a.phoneCode&&a.loginphone}},{key:"urlTransform",value:function(a){var b=a;return a?(this.isChina()&&(b=a.replace(/hermes\.com/g,"hermes.cn")),b):b}},{key:"isWechatInApp",value:function(){return navigator.userAgent.indexOf("MicroMessenger")!==-1}},{key:"findGetParameter",value:function(a,b){if(b){var c=b.split("?");c&&(b="?"+b.split("?")[1])}else b=window.location.search;var d=null,e=[];return b.substr(1).split("&").forEach(function(b){e=b.split("="),e[0]===a&&(d=decodeURIComponent(e[1]))}),d}},{key:"resizeCarousel",value:function(a){["afterChange","beforeChange"].forEach(function(b){jQuery(a).on(b,function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];b.$slides.each(function(a,b){jQuery(b).height(d.includes(a)?"100%":"1px")})})})}},{key:"generateReCaptcha",value:function(b,c){if(!a.isChina()){var d=b.success,e=parseInt(d,10);e&&jQuery.when(jQuery.getScript("https://www.google.com/recaptcha/api.js?render=explicit")).then(function(){APP=APP||{},APP.recaptcha=APP.recaptcha||{};var b=c.replace("#","");APP.recaptcha[b]||0===APP.recaptcha[b]||(a.initReCaptcha(APP,b),jQuery('<p class="captcha-label" aria-hidden="true">'+Drupal.settings.hermes_translations.validation.securityCheck+"</p>").insertBefore(c+"-captcha"))})}}},{key:"initReCaptcha",value:function(b,c){setTimeout(function(){"undefined"==typeof grecaptcha||"undefined"==typeof grecaptcha.render?a.initReCaptcha(b,c):b.recaptcha[c]=grecaptcha.render(c+"-captcha",{sitekey:Drupal.settings.hermes_global.google.apis.recaptcha.site_key,hl:d.get("currentLanguage")})}.bind(this),100)}},{key:"validateRecaptcha",value:function(b){var c=jQuery("#"+b+"-captcha");return!APP.recaptcha||"undefined"==typeof APP.recaptcha[b]||(APP.recaptcha[b]||0===APP.recaptcha[b]?window.grecaptcha.getResponse(APP.recaptcha[b])?(c.removeClass("validation-error"),!0):(a.throwErrorReCaptcha(c),window.grecaptcha.reset(),!1):(a.throwErrorReCaptcha(c),!1))}},{key:"throwErrorReCaptcha",value:function(a){a.hasClass("validation-error")||(a.addClass("validation-error"),jQuery('<p class="captcha-error-message error-message" aria-hidden="true">'+Drupal.settings.hermes_translations.validation.required+"</p>").insertAfter(a))}},{key:"ieAccordPlusToMinForIe",value:function(a,b){var c=!!document.documentMode;if(c)return a.find(".accordion-icon-plus").attr("transform","rotate("+b+")")}},{key:"trapFocusInTray",value:function(a){setTimeout(function(){var b=a.find("a:visible, object:visible, :input:visible, iframe:visible, [tabindex]:visible").filter(":not(.invisible a)"),c=b.first()[0],d=b.last()[0];a.off("keydown").on("keydown",function(a){var b=a.key===f.TAB_KEY||a.keyCode===f.TAB_KEYCODE;b&&(a.shiftKey?document.activeElement===c&&(d.focus(),a.preventDefault()):document.activeElement===d&&(c.focus(),a.preventDefault()))})},10)}},{key:"isAngularMode",value:function(){return Drupal.settings.hermes_angular||!1}},{key:"is_touch_device",value:function(){var a=" -webkit- -moz- -o- -ms- ".split(" "),b=function(a){return window.matchMedia(a).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var c=["(",a.join("touch-enabled),("),"heartz",")"].join("");return b(c)}},{key:"pwdStrengthScreenReader",value:function(a,b,c){var d=jQuery(b),e=jQuery(c),f=e.parents(".container-fieldset").find(".password-strength-label").attr("id"),g=function(b){b.map(function(a){return d.parent().attr("aria-hidden",!c.value.length),e.attr("aria-describedby",f),a}).filter(function(a){return"attributes"===a.type&&"class"===a.attributeName}).forEach(function(){return d.text(""),a.classList.contains("weak")?void d.text(": "+Drupal.settings.hermes_translations.account.weak):a.classList.contains("medium")?void d.text(": "+Drupal.settings.hermes_translations.account.medium):void(a.classList.contains("strong")&&d.text(": "+Drupal.settings.hermes_translations.account.strong))}),""===e.val()&&e.removeAttr("aria-describedby")};return new MutationObserver(g)}},{key:"secondsToHms",value:function(a){var b=Number(a),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c>0&&1===c.toString().length?c="0"+c+":":c.toString().length>1?c+=":":c="",d>0&&1===d.toString().length?d="0"+d+":":d.toString().length>1?d+=":":d="00:",e=e>0&&1===e.toString().length?"0"+e:e.toString().length>1?""+e:"00",c+d+e}},{key:"secondsToHmsAccessibility",value:function(a){var b=Number(a),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c>1?c+=" hours ":1===c?c+=": hour ":c="",d>1?d+=" minutes ":1===d?d+=" minute ":d="",e>1?e+=" secondes":1===e?e+=" seconde":e="",c+d+e}},{key:"isInViewport",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=a?a.getBoundingClientRect():null,d=window.innerHeight||document.documentElement.clientHeight,e=window.innerWidth||document.documentElement.clientWidth,f=d*(100-b)/100;if(c){if(100===b)return c.top>=0&&c.bottom<=d&&c.left>=0&&c.right<=e;var g=c.bottom>=0&&c.bottom<=f,h=c.top>=0&&c.top<=f,i=c.left>=0&&c.left<=e,j=c.right>=0&&c.right<=e;return(g||h)&&(i||j)}return!1}},{key:"isFirefox",value:function(){return navigator.userAgent.indexOf("Firefox")!==-1}},{key:"setFocusOnElement",value:function(a){var b="tabindex",c=jQuery(a);c.length>0&&(c.attr(b,"0"),c.focus())}},{key:"getLineSeparator",value:function(){var a=void 0;return a=this.isJapan()||this.isMacao()||this.isHK()||this.isKorea()?"<br/>":null}},{key:"setLatinCharOnly",value:function(a){jQuery(a).find('input[name="firstname"]').addClass("only-latin-char"),jQuery(a).find('input[name="lastname"]').addClass("only-latin-char"),jQuery(a).find('input[name="email"]').addClass("only-latin-char"),jQuery(a).find('input[name="company"]').addClass("only-latin-char"),jQuery(a).find('input[name="street1"]').addClass("only-latin-char"),jQuery(a).find('input[name="street2"]').addClass("only-latin-char"),jQuery(a).find('input[name="city"]').addClass("only-latin-char")}},{key:"setLatinCharOnlyForUaeSa",value:function(a){jQuery(a).find('input[name="firstname"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="lastname"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="email"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="street1"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="street2"]').addClass("only-latin-char-for-uae-sa"),jQuery(a).find('input[name="city"]').addClass("only-latin-char-for-uae-sa")}},{key:"assignValues",value:function(b,c){switch(b.country_id){case"CN":a.isChina()&&(b.city=b.cityselect);break;case"TH":b.district=c,b.city=b.district,b.postcode=b.postcode_select,delete b.postcode_select}}}]),a}(),a("default",g)}}}),a.register("115",["3","4","1d"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(){c(this,a),this._init(),this._bind()}return b(a,[{key:"_init",value:function(){this.$wechatGrey=jQuery("#zone-click-wechat"),this.$closeButton=jQuery(".icon-close-wechat");var a=jQuery("#tooltip-wechat");d.isWechatInApp()&&a&&a.length>0&&a.addClass("wetchat-footer-without-qr")}},{key:"_bind",value:function(){this.$wechatGrey.on("click",this._showTooltipWeChat.bind(this)),this.$closeButton.on("click",this._hideTooltipWeChat.bind(this))}},{key:"_showTooltipWeChat",value:function(){jQuery("#tooltip-wechat").removeClass("hidden")}},{key:"_hideTooltipWeChat",value:function(){jQuery("#tooltip-wechat").addClass("hidden")}}]),a}(),a("default",e)}}}),a.registerDynamic("116",[],!0,function(a,b,c){this||self;!function(a,b){var d=b(a,a.document);a.lazySizes=d,"object"==typeof c&&c.exports&&(c.exports=d)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=a.HTMLPictureElement&&"sizes"in b.createElement("img"),f="addEventListener",g="getAttribute",h=a[f],i=a.setTimeout,j=a.requestAnimationFrame||i,k=/^picture$/i,l=["load","error","lazyincluded","_lazyloaded"],m={},n=Array.prototype.forEach,o=function(a,b){return m[b]||(m[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),m[b].test(a[g]("class")||"")&&m[b]},p=function(a,b){o(a,b)||a.setAttribute("class",(a[g]("class")||"").trim()+" "+b)},q=function(a,b){var c;(c=o(a,b))&&a.setAttribute("class",(a[g]("class")||"").replace(c," "))},r=function(a,b,c){var d=c?f:"removeEventListener";c&&r(a,b),l.forEach(function(c){a[d](c,b)})},s=function(a,c,d,e,f){var g=b.createEvent("CustomEvent");return g.initCustomEvent(c,!e,!f,d||{}),a.dispatchEvent(g),g},t=function(b,d){var f;!e&&(f=a.picturefill||c.pf)?f({reevaluate:!0,elements:[b]}):d&&d.src&&(b.src=d.src)},u=function(a,b){return(getComputedStyle(a,null)||{})[b]},v=function(a,b,d){for(d=d||a.offsetWidth;d<c.minSize&&b&&!a._lazysizesWidth;)d=b.offsetWidth,b=b.parentNode;return d},w=function(b){var c,d=0,e=a.Date,f=function(){c=!1,d=e.now(),b()},g=function(){i(f)},h=function(){j(g)};return function(){if(!c){var a=125-(e.now()-d);c=!0,a<6&&(a=6),i(h,a)}}},x=function(){var e,l,m,v,x,z,A,B,C,D,E,F,G,H,I,J=/^img$/i,K=/^iframe$/i,L="onscroll"in a&&!/glebot/.test(navigator.userAgent),M=0,N=0,O=0,P=0,Q=function(a){O--,a&&a.target&&r(a.target,Q),(!a||O<0||!a.target)&&(O=0)},R=function(a,c){var e,f=a,g="hidden"==u(b.body,"visibility")||"hidden"!=u(a,"visibility");for(C-=c,F+=c,D-=c,E+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=d;)g=(u(f,"opacity")||1)>0,g&&"visible"!=u(f,"overflow")&&(e=f.getBoundingClientRect(),g=E>e.left&&D<e.right&&F>e.top-1&&C<e.bottom+1);return g},S=function(){var a,b,f,h,i,j,k,n,o;if((x=c.loadMode)&&O<8&&(a=e.length)){b=0,P++,null==H&&("expand"in c||(c.expand=d.clientHeight>600?d.clientWidth>600?550:410:359),G=c.expand,H=G*c.expFactor),N<H&&O<1&&P>3&&x>2?(N=H,P=0):N=x>1&&P>2&&O<6?G:M;for(;b<a;b++)if(e[b]&&!e[b]._lazyRace)if(L)if((n=e[b][g]("data-expand"))&&(j=1*n)||(j=N),o!==j&&(A=innerWidth+j*I,B=innerHeight+j,k=j*-1,o=j),f=e[b].getBoundingClientRect(),(F=f.bottom)>=k&&(C=f.top)<=B&&(E=f.right)>=k*I&&(D=f.left)<=A&&(F||E||D||C)&&(m&&O<3&&!n&&(x<3||P<4)||R(e[b],j))){if(Z(e[b]),i=!0,O>9)break}else!i&&m&&!h&&O<4&&P<4&&x>2&&(l[0]||c.preloadAfterLoad)&&(l[0]||!n&&(F||E||D||C||"auto"!=e[b][g](c.sizesAttr)))&&(h=l[0]||e[b]);else Z(e[b]);h&&!i&&Z(h)}},T=w(S),U=function(a){p(a.target,c.loadedClass),q(a.target,c.loadingClass),r(a.target,V)},V=function(a){a={target:a.target},j(function(){U(a)})},W=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},X=function(a){var b,d,e=a[g](c.srcsetAttr);(b=c.customMedia[a[g]("data-media")||a[g]("media")])&&a.setAttribute("media",b),e&&a.setAttribute("srcset",e),b&&(d=a.parentNode,d.insertBefore(a.cloneNode(),a),d.removeChild(a))},Y=function(){var a,b=[],c=function(){for(;b.length;)b.shift()();a=!1},d=function(d){b.push(d),a||(a=!0,j(c))};return{add:d,run:c}}(),Z=function(a){var b,d,e,f,h,l,u,w=J.test(a.nodeName),x=w&&(a[g](c.sizesAttr)||a[g]("sizes")),z="auto"==x;(!z&&m||!w||!a.src&&!a.srcset||a.complete||o(a,c.errorClass))&&(z&&(u=a.offsetWidth),a._lazyRace=!0,O++,c.rC&&(u=c.rC(a,u)||u),Y.add(function(){(h=s(a,"lazybeforeunveil")).defaultPrevented||(x&&(z?(y.updateElem(a,!0,u),p(a,c.autosizesClass)):a.setAttribute("sizes",x)),d=a[g](c.srcsetAttr),b=a[g](c.srcAttr),w&&(e=a.parentNode,f=e&&k.test(e.nodeName||"")),l=h.detail.firesLoad||"src"in a&&(d||b||f),h={target:a},l&&(r(a,Q,!0),clearTimeout(v),v=i(Q,2500),p(a,c.loadingClass),r(a,V,!0)),f&&n.call(e.getElementsByTagName("source"),X),d?a.setAttribute("srcset",d):b&&!f&&(K.test(a.nodeName)?W(a,b):a.src=b),(d||f)&&t(a,{src:b})),j(function(){a._lazyRace&&delete a._lazyRace,q(a,c.lazyClass),l&&!a.complete||(l?Q(h):O--,U(h))})}))},$=function(){if(!m){if(Date.now()-z<999)return void i($,999);var a,d=function(){c.loadMode=3,T()};m=!0,c.loadMode=3,b.hidden?(S(),Y.run()):T(),h("scroll",function(){3==c.loadMode&&(c.loadMode=2),clearTimeout(a),a=i(d,99)},!0)}};return{_:function(){z=Date.now(),e=b.getElementsByClassName(c.lazyClass),l=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),I=c.hFac,h("scroll",T,!0),h("resize",T,!0),a.MutationObserver?new MutationObserver(T).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d[f]("DOMNodeInserted",T,!0),d[f]("DOMAttrModified",T,!0),setInterval(T,999)),h("hashchange",T,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[f](a,T,!0)}),/d$|^c/.test(b.readyState)?$():(h("load",$),b[f]("DOMContentLoaded",T),i($,2e4)),T(e.length>0)},checkElems:T,unveil:Z}}(),y=function(){var a,d=function(a,b,c){var d,e,f,g,h=a.parentNode;if(h&&(c=v(a,h,c),g=s(a,"lazybeforesizes",{width:c,dataAttr:!!b}),!g.defaultPrevented&&(c=g.detail.width,c&&c!==a._lazysizesWidth))){if(a._lazysizesWidth=c,c+="px",a.setAttribute("sizes",c),k.test(h.nodeName||""))for(d=h.getElementsByTagName("source"),e=0,f=d.length;e<f;e++)d[e].setAttribute("sizes",c);g.detail.dataAttr||t(a,g.detail)}},e=function(){var b,c=a.length;if(c)for(b=0;b<c;b++)d(a[b])},f=w(e);return{_:function(){a=b.getElementsByClassName(c.autosizesClass),h("resize",f)},checkElems:f,updateElem:d}}(),z=function(){z.i||(z.i=!0,y._(),x._())};return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",
preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.7,hFac:.8,loadMode:2};c=a.lazySizesConfig||a.lazysizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,i(function(){c.init&&z()})}(),{cfg:c,autoSizer:y,loader:x,init:z,uP:t,aC:p,rC:q,hC:o,fire:s,gW:v}}})}),a.registerDynamic("117",["116"],!0,function(a,b,c){this||self;c.exports=a("116")}),a.register("1",["2","5","7","10","11","13","18","83","111","115","117","a","b","d","e","fb","bf","c2","c3","c4","ce","d4","ec","ed","ee","3d","2c"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){b=a.default},function(a){},function(a){},function(a){},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default}],execute:function(){window.APP=window.APP||{},window.APP.pubsub=window.APP.pubsub||h,window.lazySizesConfig={},window.lazySizesConfig.init=!1,window.APP.CURRENCY_MAP={fr_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},be_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},lu_fr:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},pt_en:{symbol:"€",format:"%v %s",thousand:" ",code:"EUR",decimal:","},pl_en:{symbol:"zł",format:"%s %v",thousand:",",code:"PLN",decimal:"."},de_de:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},es_es:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},at_de:{symbol:"€",format:"%v %s",thousand:".",code:"EUR",decimal:","},uk_en:{symbol:"£",format:"%s%v",thousand:",",code:"GBP",decimal:"."},it_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},it_it:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},nl_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},be_en:{symbol:"€",format:"%s %v",thousand:".",code:"EUR",decimal:","},ie_en:{symbol:"€",format:"%s%v",thousand:",",code:"EUR",decimal:"."},fi_en:{symbol:"€",format:"%s%v",thousand:",",code:"EUR",decimal:"."},ch_fr:{symbol:"CHF",format:"%v %s",thousand:" ",code:"CHF",decimal:","},ch_de:{symbol:"Fr.",format:"%v %s",thousand:".",code:"CHF",decimal:","},dk_en:{symbol:"DKK",format:"%s%v",thousand:",",code:"DKK",decimal:"."},se_en:{symbol:"SEK",format:"%s%v",thousand:",",code:"SEK",decimal:"."},no_en:{symbol:"NOK",format:"%s%v",thousand:",",code:"NOK",decimal:"."},cz_en:{symbol:"Kc",format:"%s%v",thousand:",",code:"CZK",decimal:"."},us_en:{symbol:"$",format:"%s%v",thousand:",",code:"USD",decimal:"."},ca_en:{symbol:"CA$",format:"%s%v",thousand:",",code:"CAD",decimal:"."},ca_fr:{symbol:"$CA",format:"%v %s",thousand:" ",code:"CAD",decimal:","},au_en:{symbol:"AU$",format:"%s%v",thousand:",",code:"AUD",decimal:"."},jp_ja:{symbol:"¥",format:"%s%v",thousand:",",code:"JPY",decimal:"",precision:"0"},jp_jp:{symbol:"¥",format:"%s%v",thousand:",",code:"JPY",decimal:"",precision:"0"},cn_en:{symbol:"¥",format:"%s%v",thousand:",",code:"CNY",decimal:"."},cn_zh:{symbol:"¥",format:"%s%v",thousand:",",code:"CNY",decimal:"."},sg_en:{symbol:"S$",format:"%s %v",thousand:",",code:"SGD",decimal:"."},my_en:{symbol:"RM",format:"%s %v",thousand:",",code:"MYR",decimal:"."},hk_en:{symbol:"HKD",format:"%s %v",thousand:",",code:"HKD",decimal:",",precision:"0"},mo_en:{symbol:"MOP",format:"%s %v",thousand:",",code:"MOP",decimal:",",precision:"0"},tw_en:{symbol:"NT$",format:"%s%v",thousand:",",code:"TWD",decimal:"."},kr_ko:{symbol:"₩",format:"%s %v",thousand:",",code:"KRW",decimal:".",precision:"0"},ri_en:{symbol:"SAR",format:"%s %v",thousand:",",code:"SAR",decimal:",",precision:"0"},dh_en:{symbol:"AED",format:"%s %v",thousand:",",code:"AED",decimal:",",precision:"0"},th_en:{symbol:"฿",format:"%s %v",thousand:",",code:"THB",decimal:",",precision:"0"},tw_zh:{symbol:"NT$",format:"%s %v",thousand:",",code:"TWD",decimal:",",precision:"0"}},window.APP.NOTIFICATIONS={},jQuery(document).ready(function(){function a(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur()}var h=new b;h.init();var t=new o,u=Drupal.settings.hermes_locale;Drupal.settings.instantiateHeader=void 0===Drupal.settings.instantiateHeader||Drupal.settings.instantiateHeader,Drupal.settings.instantiateTrays=void 0===Drupal.settings.instantiateTrays||Drupal.settings.instantiateTrays,d.get("currentStore")!==u&&(d.set("changeLanguage",!0),d.set("currentStore",u),d.set("currentCountry",Drupal.settings.hermes_current_country),d.set("currentLanguage",u.split("_")[1]));var v=Drupal.settings.currency_parameters.currency_code;window.APP.CURRENCY_MAP.pl_en.symbol="EUR"===v?"€":"zł",window.APP.CURRENCY_MAP.pl_en.code=v,t.checkUserSession(),window.location.pathname.indexOf("/"+Drupal.settings.hermes_translations.url.account_create)!==-1||window.location.pathname.includes("/tray")||d.set("registerContextUrl",window.location.href),APP.listener=new c(window,"window"),APP.scrollbarWidth=APP.listener.data.width-jQuery("body").innerWidth(),APP.trayController=new i(r.getPageType()),e.init(),window.lazySizesConfig.hFac=.4,e.isSmall()?(window.lazySizesConfig.expand=1,window.lazySizesConfig.minSize=150,window.lazySizesConfig.loadHidden=!1,window.lazySizesConfig.loadMode=1):(window.lazySizesConfig.expand=300,window.lazySizesConfig.loadMode=2,document.getElementsByClassName("has-animation").length&&(window.lazySizesConfig.expFactor=3,window.lazySizesConfig.loadMode=3)),lazySizes.init();var w=void 0;Drupal.settings.instantiateHeader&&(w=new j);var x=new l;APP.pubsub.subscribe("geoFilteringBanner.destroy",function(){x=null,w&&w.openNotificationBanner()});var y=new k;y.run(),new m,new n,new r,x.run(),new s,new f,new g,p(),jQuery(document).on("mousedown",".ripple-effect",q),jQuery(document).on("submit","form",a),APP.started=!0,APP.pubsub.publish("app.start"),jQuery("html").removeClass("hidden"),jQuery(document.body).prepend("<style>.body-noscroll, .tray-open, .tray-open .product-sidebar.is-stuck, .body-noscroll .product-sidebar.is-stuck {margin-right:"+APP.scrollbarWidth+"px;} .body-noscroll .affixed{width:calc(100% - "+APP.scrollbarWidth+"px);}</style>")})}}})})(function(a){a()});
;/*})'"*/
;/*})'"*/
